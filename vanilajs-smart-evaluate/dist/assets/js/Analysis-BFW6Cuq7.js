import{j as a}from"./ui-vendor-Cdlq2rUE.js";import{a as e}from"./react-vendor-BDWLk7Fa.js";import{c as r,u as s,b as t}from"./index-BxVb7EoU.js";import{e as d,B as o,C as l,a as n,L as i,f as c,g,b as m,p as x,c as p,d as u,i as b}from"./chart-vendor-BSKESGP9.js";import"./redux-vendor-s_JgMA9B.js";import"./utils-vendor-D5b2lksY.js";function h(){const{data:l}=r(),{data:n}=s(),{data:i}=t(),c=l?.data||[],g=n?.data||[],m=i?.data||[],x=e.useMemo(()=>{const a=[...m].sort((a,e)=>new Date(a.createdAt)-new Date(e.createdAt));return{labels:a.map(a=>a.name),datasets:g.map((e,r)=>{const s=a.map(a=>{const r=c.find(r=>!(r.task?._id!==a._id&&r.task!==a._id||r.group?._id!==e._id&&r.group!==e._id));return r?r.groupAverageScore:null}),t=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"],d=t[r%t.length];return{label:e.name,data:s,borderColor:d,backgroundColor:d+"20",fill:!0,tension:.4}})}},[m,g,c]),p=e.useMemo(()=>{const a=g.map(a=>a.name);return{labels:a,datasets:[{label:"গড় পারফরম্যান্স (%)",data:g.map(a=>{const e=c.filter(e=>e.group?._id===a._id||e.group===a._id);if(0===e.length)return 0;return(e.reduce((a,e)=>a+(e.groupAverageScore||0),0)/e.length).toFixed(1)}),backgroundColor:a.map((a,e)=>["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)"][e%5]),borderRadius:6}]}},[g,c]),u={responsive:!0,plugins:{legend:{position:"top",labels:{usePointStyle:!0}}},scales:{y:{beginAtZero:!0,max:100}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent",children:"অ্যানালাইসিস ড্যাশবোর্ড"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card card-body",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200",children:"পারফরম্যান্স ট্রেন্ড (সময়ের সাথে)"}),a.jsx("div",{className:"h-80",children:a.jsx(d,{data:x,options:u})})]}),a.jsxs("div",{className:"card card-body",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200",children:"গ্রুপ তুলনামূলক বিশ্লেষণ"}),a.jsx("div",{className:"h-80",children:a.jsx(o,{data:p,options:u})})]})]}),a.jsxs("div",{className:"card card-body",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700 dark:text-gray-200",children:"বিস্তারিত ইনসাইটস"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:g.map(e=>{const r=c.filter(a=>a.group?._id===e._id||a.group===e._id),s=r.length?(r.reduce((a,e)=>a+(e.groupAverageScore||0),0)/r.length).toFixed(1):0,t=r.sort((a,e)=>e.groupAverageScore-a.groupAverageScore)[0];return a.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-700/30 dark:border-gray-600",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:e.name}),a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[a.jsxs("p",{children:["গড় স্কোর: ",a.jsxs("span",{className:"font-semibold text-blue-600",children:[s,"%"]})]}),a.jsxs("p",{children:["মূল্যায়ন সংখ্যা: ",r.length]}),a.jsxs("p",{children:["সেরা টাস্ক: ",t?t.task?.name||"Unknown":"-"]})]})]},e._id)})})]})]})}l.register(n,i,c,g,m,x,p,u,b);export{h as default};
