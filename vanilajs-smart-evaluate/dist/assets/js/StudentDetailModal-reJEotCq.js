import{b as e,j as t,P as a,C as s,a as r,T as c,O as d,D as n}from"./ui-vendor-Cdlq2rUE.js";import{a as i}from"./react-vendor-BDWLk7Fa.js";import{s as l,X as o,c as x,D as m,E as h,B as b,C as g,d as k,e as p,f as z}from"./index-BxVb7EoU.js";import{T as j,a as N,b as f,c as u,d as v,e as y}from"./table-CmieK8SB.js";const w=e,S=a,F=i.forwardRef(({className:e,...a},s)=>t.jsx(d,{ref:s,className:l("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));F.displayName=d.displayName;const q=i.forwardRef(({className:e,children:a,...c},d)=>t.jsxs(S,{children:[t.jsx(F,{}),t.jsxs(s,{ref:d,className:l("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...c,children:[a,t.jsxs(r,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(o,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));q.displayName=s.displayName;const T=({className:e,...a})=>t.jsx("div",{className:l("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});T.displayName="DialogHeader";const D=i.forwardRef(({className:e,...a},s)=>t.jsx(c,{ref:s,className:l("text-lg font-semibold leading-none tracking-tight",e),...a}));D.displayName=c.displayName;i.forwardRef(({className:e,...a},s)=>t.jsx(n,{ref:s,className:l("text-sm text-muted-foreground",e),...a})).displayName=n.displayName;const C=e=>{const t={0:"০",1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯"};return e.toString().replace(/[0-9]/g,e=>t[e])},M=e=>({"team-leader":"টিম লিডার","time-keeper":"টাইম কিপার",reporter:"রিপোর্টার","resource-manager":"রিসোর্স ম্যানেজার","peace-maker":"পিস মেকার"}[e]||e);function A({student:e,onClose:a}){const{data:s}=x(),r=i.useMemo(()=>s?.data||[],[s]),c=i.useMemo(()=>r.filter(t=>t.scores?.[e._id]).map(t=>{const a=t.scores[e._id],s=parseFloat(a.taskScore)||0,r=parseFloat(a.teamScore)||0,c=parseFloat(a.additionalScore)||0,d=parseFloat(a.mcqScore)||0,n=parseFloat(a.totalScore)||s+r+c+d,i=parseFloat(t.maxPossibleScore)||parseFloat(t.task?.maxScore)||100,l=i>0?n/i*100:0;return{...t,taskScore:s,teamScore:r,additional:c,mcq:d,total:n,max:i,pct:l,comment:a.comments||""}}).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),[r,e._id]),d=i.useMemo(()=>{if(!c.length)return null;const e=c.length,t=c.reduce((e,t)=>({task:e.task+t.taskScore,team:e.team+t.teamScore,additional:e.additional+t.additional,mcq:e.mcq+t.mcq,total:e.total+t.total,pct:e.pct+t.pct}),{task:0,team:0,additional:0,mcq:0,total:0,pct:0});return{avgTask:t.task/e,avgTeam:t.team/e,avgAdditional:t.additional/e,avgMcq:t.mcq/e,avgTotal:t.total/e,avgPct:t.pct/e,count:e}},[c]);return t.jsx(w,{open:!!e,onOpenChange:e=>!e&&a(),children:t.jsxs(q,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800",children:[t.jsx(T,{children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(m,{className:"h-16 w-16 border-2 border-zinc-100 dark:border-zinc-700",children:t.jsx(h,{className:"bg-blue-100 text-blue-600 text-2xl font-bold dark:bg-blue-900/30 dark:text-blue-300",children:e.name.charAt(0)})}),t.jsxs("div",{children:[t.jsxs(D,{className:"text-2xl font-bold flex items-center gap-2 text-zinc-900 dark:text-zinc-50",children:[e.name,e.role&&t.jsxs(b,{variant:"outline",className:(n=e.role,{"team-leader":"bg-amber-100 text-amber-800 hover:bg-amber-200 dark:bg-amber-900/30 dark:text-amber-300","time-keeper":"bg-sky-100 text-sky-800 hover:bg-sky-200 dark:bg-sky-900/30 dark:text-sky-300",reporter:"bg-purple-100 text-purple-800 hover:bg-purple-200 dark:bg-purple-900/30 dark:text-purple-300","resource-manager":"bg-emerald-100 text-emerald-800 hover:bg-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300","peace-maker":"bg-rose-100 text-rose-800 hover:bg-rose-200 dark:bg-rose-900/30 dark:text-rose-300"}[n]||""),children:[t.jsx("i",{className:"fas fa-id-badge mr-1"}),M(e.role)]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-1 text-sm text-zinc-500 dark:text-zinc-400",children:[t.jsxs("span",{children:["রোল: ",C(e.roll)]}),t.jsx("span",{children:"•"}),t.jsxs("span",{children:["গ্রুপ: ",e.group?.name||"-"]}),t.jsx("span",{children:"•"}),t.jsxs("span",{children:["বিভাগ: ",e.academicGroup||"-"]})]})]})]})}),t.jsxs("div",{className:"space-y-6",children:[d&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[t.jsx(g,{className:"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1",children:"গড় টাস্ক স্কোর"}),t.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:C(d.avgTask.toFixed(1))})]})}),t.jsx(g,{className:"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1",children:"গড় টিম স্কোর"}),t.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:C(d.avgTeam.toFixed(1))})]})}),t.jsx(g,{className:"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1",children:"গড় অতিরিক্ত"}),t.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:C(d.avgAdditional.toFixed(1))})]})}),t.jsx(g,{className:"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1",children:"গড় MCQ স্কোর"}),t.jsx("div",{className:"text-2xl font-bold text-sky-600 dark:text-sky-400",children:C(d.avgMcq.toFixed(1))})]})}),t.jsx(g,{className:"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700",children:t.jsxs(k,{className:"p-4 text-center",children:[t.jsx("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1",children:"গড় মোট স্কোর"}),t.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:C(d.avgTotal.toFixed(1))})]})})]}),t.jsxs(g,{className:"bg-white dark:bg-zinc-800 border-zinc-200 dark:border-zinc-700 overflow-hidden",children:[t.jsx(p,{className:"py-4 border-b border-zinc-200 dark:border-zinc-700",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(z,{className:"text-base text-zinc-900 dark:text-zinc-50",children:"মূল্যায়ন ইতিহাস"}),t.jsxs("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:["মোট ",C(c.length)," টি মূল্যায়ন"]})]})}),t.jsx(k,{className:"p-0",children:t.jsxs(j,{children:[t.jsx(N,{className:"bg-zinc-50 dark:bg-zinc-900/50",children:t.jsxs(f,{className:"border-zinc-200 dark:border-zinc-700 hover:bg-transparent",children:[t.jsx(u,{className:"text-zinc-700 dark:text-zinc-300",children:"অ্যাসাইনমেন্ট"}),t.jsx(u,{className:"text-right text-zinc-700 dark:text-zinc-300",children:"টাস্ক"}),t.jsx(u,{className:"text-right text-zinc-700 dark:text-zinc-300",children:"টিম"}),t.jsx(u,{className:"text-right text-zinc-700 dark:text-zinc-300",children:"অতিরিক্ত"}),t.jsx(u,{className:"text-right text-zinc-700 dark:text-zinc-300",children:"MCQ"}),t.jsx(u,{className:"text-right text-zinc-700 dark:text-zinc-300",children:"মোট"}),t.jsx(u,{className:"text-center text-zinc-700 dark:text-zinc-300",children:"%"}),t.jsx(u,{className:"text-zinc-700 dark:text-zinc-300",children:"মন্তব্য"}),t.jsx(u,{className:"text-right text-zinc-700 dark:text-zinc-300",children:"তারিখ"})]})}),t.jsxs(v,{children:[c.map(e=>{return t.jsxs(f,{className:"border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-700/50",children:[t.jsx(y,{className:"font-medium text-zinc-900 dark:text-zinc-50",children:e.task?.name||"Unknown Task"}),t.jsx(y,{className:"text-right text-zinc-600 dark:text-zinc-300",children:C(e.taskScore)}),t.jsx(y,{className:"text-right text-zinc-600 dark:text-zinc-300",children:C(e.teamScore)}),t.jsx(y,{className:"text-right text-zinc-600 dark:text-zinc-300",children:C(e.additional)}),t.jsx(y,{className:"text-right text-zinc-600 dark:text-zinc-300",children:C(e.mcq)}),t.jsx(y,{className:"text-right font-bold text-zinc-900 dark:text-zinc-50",children:C(e.total)}),t.jsx(y,{className:"text-center",children:t.jsxs(b,{variant:"outline",className:(a=e.pct,a>=85?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300":a>=70?"bg-sky-100 text-sky-800 dark:bg-sky-900/30 dark:text-sky-300":a>=55?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300":"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-300"),children:[C(e.pct.toFixed(0)),"%"]})}),t.jsx(y,{className:"max-w-[200px] truncate text-zinc-500 dark:text-zinc-400",title:e.comment,children:e.comment||"-"}),t.jsx(y,{className:"text-right whitespace-nowrap text-zinc-500 dark:text-zinc-400",children:new Date(e.createdAt).toLocaleDateString("bn-BD")})]},e._id);var a}),0===c.length&&t.jsx(f,{children:t.jsx(y,{colSpan:9,className:"text-center py-8 text-zinc-500 dark:text-zinc-400",children:"কোনো মূল্যায়ন পাওয়া যায়নি"})})]})]})})]})]})]})});var n}export{A as S};
