var mQ=Object.defineProperty;var yQ=(r,e,t)=>e in r?mQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ke=(r,e,t)=>yQ(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function xm(r){return r+.5|0}const uc=(r,e,t)=>Math.max(Math.min(r,t),e);function Lg(r){return uc(xm(r*2.55),0,255)}function Cc(r){return uc(xm(r*255),0,255)}function tl(r){return uc(xm(r/2.55)/100,0,1)}function bE(r){return uc(xm(r*100),0,100)}const ro={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},R_=[..."0123456789ABCDEF"],bQ=r=>R_[r&15],wQ=r=>R_[(r&240)>>4]+R_[r&15],E0=r=>(r&240)>>4===(r&15),vQ=r=>E0(r.r)&&E0(r.g)&&E0(r.b)&&E0(r.a);function _Q(r){var e=r.length,t;return r[0]==="#"&&(e===4||e===5?t={r:255&ro[r[1]]*17,g:255&ro[r[2]]*17,b:255&ro[r[3]]*17,a:e===5?ro[r[4]]*17:255}:(e===7||e===9)&&(t={r:ro[r[1]]<<4|ro[r[2]],g:ro[r[3]]<<4|ro[r[4]],b:ro[r[5]]<<4|ro[r[6]],a:e===9?ro[r[7]]<<4|ro[r[8]]:255})),t}const xQ=(r,e)=>r<255?e(r):"";function BQ(r){var e=vQ(r)?bQ:wQ;return r?"#"+e(r.r)+e(r.g)+e(r.b)+xQ(r.a,e):void 0}const CQ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function i3(r,e,t){const n=e*Math.min(t,1-t),i=(s,a=(s+r/30)%12)=>t-n*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function EQ(r,e,t){const n=(i,s=(i+r/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function SQ(r,e,t){const n=i3(r,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)n[i]*=1-e-t,n[i]+=e;return n}function IQ(r,e,t,n,i){return r===i?(e-t)/n+(e<t?6:0):e===i?(t-r)/n+2:(r-e)/n+4}function Kx(r){const t=r.r/255,n=r.g/255,i=r.b/255,s=Math.max(t,n,i),a=Math.min(t,n,i),o=(s+a)/2;let A,l,c;return s!==a&&(c=s-a,l=o>.5?c/(2-s-a):c/(s+a),A=IQ(t,n,i,c,s),A=A*60+.5),[A|0,l||0,o]}function zx(r,e,t,n){return(Array.isArray(e)?r(e[0],e[1],e[2]):r(e,t,n)).map(Cc)}function qx(r,e,t){return zx(i3,r,e,t)}function kQ(r,e,t){return zx(SQ,r,e,t)}function TQ(r,e,t){return zx(EQ,r,e,t)}function s3(r){return(r%360+360)%360}function FQ(r){const e=CQ.exec(r);let t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?Lg(+e[5]):Cc(+e[5]));const i=s3(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=kQ(i,s,a):e[1]==="hsv"?n=TQ(i,s,a):n=qx(i,s,a),{r:n[0],g:n[1],b:n[2],a:t}}function LQ(r,e){var t=Kx(r);t[0]=s3(t[0]+e),t=qx(t),r.r=t[0],r.g=t[1],r.b=t[2]}function PQ(r){if(!r)return;const e=Kx(r),t=e[0],n=bE(e[1]),i=bE(e[2]);return r.a<255?`hsla(${t}, ${n}%, ${i}%, ${tl(r.a)})`:`hsl(${t}, ${n}%, ${i}%)`}const wE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function NQ(){const r={},e=Object.keys(vE),t=Object.keys(wE);let n,i,s,a,o;for(n=0;n<e.length;n++){for(a=o=e[n],i=0;i<t.length;i++)s=t[i],o=o.replace(s,wE[s]);s=parseInt(vE[a],16),r[o]=[s>>16&255,s>>8&255,s&255]}return r}let S0;function DQ(r){S0||(S0=NQ(),S0.transparent=[0,0,0,0]);const e=S0[r.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const RQ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function UQ(r){const e=RQ.exec(r);let t=255,n,i,s;if(e){if(e[7]!==n){const a=+e[7];t=e[8]?Lg(a):uc(a*255,0,255)}return n=+e[1],i=+e[3],s=+e[5],n=255&(e[2]?Lg(n):uc(n,0,255)),i=255&(e[4]?Lg(i):uc(i,0,255)),s=255&(e[6]?Lg(s):uc(s,0,255)),{r:n,g:i,b:s,a:t}}}function MQ(r){return r&&(r.a<255?`rgba(${r.r}, ${r.g}, ${r.b}, ${tl(r.a)})`:`rgb(${r.r}, ${r.g}, ${r.b})`)}const e1=r=>r<=.0031308?r*12.92:Math.pow(r,1/2.4)*1.055-.055,Xd=r=>r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4);function OQ(r,e,t){const n=Xd(tl(r.r)),i=Xd(tl(r.g)),s=Xd(tl(r.b));return{r:Cc(e1(n+t*(Xd(tl(e.r))-n))),g:Cc(e1(i+t*(Xd(tl(e.g))-i))),b:Cc(e1(s+t*(Xd(tl(e.b))-s))),a:r.a+t*(e.a-r.a)}}function I0(r,e,t){if(r){let n=Kx(r);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=qx(n),r.r=n[0],r.g=n[1],r.b=n[2]}}function a3(r,e){return r&&Object.assign(e||{},r)}function _E(r){var e={r:0,g:0,b:0,a:255};return Array.isArray(r)?r.length>=3&&(e={r:r[0],g:r[1],b:r[2],a:255},r.length>3&&(e.a=Cc(r[3]))):(e=a3(r,{r:0,g:0,b:0,a:1}),e.a=Cc(e.a)),e}function QQ(r){return r.charAt(0)==="r"?UQ(r):FQ(r)}class Dp{constructor(e){if(e instanceof Dp)return e;const t=typeof e;let n;t==="object"?n=_E(e):t==="string"&&(n=_Q(e)||DQ(e)||QQ(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=a3(this._rgb);return e&&(e.a=tl(e.a)),e}set rgb(e){this._rgb=_E(e)}rgbString(){return this._valid?MQ(this._rgb):void 0}hexString(){return this._valid?BQ(this._rgb):void 0}hslString(){return this._valid?PQ(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let s;const a=t===s?.5:t,o=2*a-1,A=n.a-i.a,l=((o*A===-1?o:(o+A)/(1+o*A))+1)/2;s=1-l,n.r=255&l*n.r+s*i.r+.5,n.g=255&l*n.g+s*i.g+.5,n.b=255&l*n.b+s*i.b+.5,n.a=a*n.a+(1-a)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=OQ(this._rgb,e._rgb,t)),this}clone(){return new Dp(this.rgb)}alpha(e){return this._rgb.a=Cc(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=xm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return I0(this._rgb,2,e),this}darken(e){return I0(this._rgb,2,-e),this}saturate(e){return I0(this._rgb,1,e),this}desaturate(e){return I0(this._rgb,1,-e),this}rotate(e){return LQ(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function zA(){}const HQ=(()=>{let r=0;return()=>r++})();function ir(r){return r==null}function wn(r){if(Array.isArray&&Array.isArray(r))return!0;const e=Object.prototype.toString.call(r);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function fr(r){return r!==null&&Object.prototype.toString.call(r)==="[object Object]"}function zn(r){return(typeof r=="number"||r instanceof Number)&&isFinite(+r)}function Ma(r,e){return zn(r)?r:e}function jt(r,e){return typeof r>"u"?e:r}const VQ=(r,e)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100:+r/e,o3=(r,e)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100*e:+r;function $t(r,e,t){if(r&&typeof r.call=="function")return r.apply(t,e)}function cr(r,e,t,n){let i,s,a;if(wn(r))for(s=r.length,i=0;i<s;i++)e.call(t,r[i],i);else if(fr(r))for(a=Object.keys(r),s=a.length,i=0;i<s;i++)e.call(t,r[a[i]],a[i])}function Cb(r,e){let t,n,i,s;if(!r||!e||r.length!==e.length)return!1;for(t=0,n=r.length;t<n;++t)if(i=r[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Eb(r){if(wn(r))return r.map(Eb);if(fr(r)){const e=Object.create(null),t=Object.keys(r),n=t.length;let i=0;for(;i<n;++i)e[t[i]]=Eb(r[t[i]]);return e}return r}function A3(r){return["__proto__","prototype","constructor"].indexOf(r)===-1}function $Q(r,e,t,n){if(!A3(r))return;const i=e[r],s=t[r];fr(i)&&fr(s)?CA(i,s,n):e[r]=Eb(s)}function CA(r,e,t){const n=wn(e)?e:[e],i=n.length;if(!fr(r))return r;t=t||{};const s=t.merger||$Q;let a;for(let o=0;o<i;++o){if(a=n[o],!fr(a))continue;const A=Object.keys(a);for(let l=0,c=A.length;l<c;++l)s(A[l],r,a,t)}return r}function Zg(r,e){return CA(r,e,{merger:jQ})}function jQ(r,e,t){if(!A3(r))return;const n=e[r],i=t[r];fr(n)&&fr(i)?Zg(n,i):Object.prototype.hasOwnProperty.call(e,r)||(e[r]=Eb(i))}const xE={"":r=>r,x:r=>r.x,y:r=>r.y};function GQ(r){const e=r.split("."),t=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function KQ(r){const e=GQ(r);return t=>{for(const n of e){if(n==="")break;t=t&&t[n]}return t}}function Rc(r,e){return(xE[e]||(xE[e]=KQ(e)))(r)}function Wx(r){return r.charAt(0).toUpperCase()+r.slice(1)}const Rp=r=>typeof r<"u",Uc=r=>typeof r=="function",BE=(r,e)=>{if(r.size!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0};function zQ(r){return r.type==="mouseup"||r.type==="click"||r.type==="contextmenu"}const Lr=Math.PI,xn=2*Lr,qQ=xn+Lr,Sb=Number.POSITIVE_INFINITY,WQ=Lr/180,ui=Lr/2,xu=Lr/4,CE=Lr*2/3,dc=Math.log10,co=Math.sign;function td(r,e,t){return Math.abs(r-e)<t}function EE(r){const e=Math.round(r);r=td(r,e,r/1e3)?e:r;const t=Math.pow(10,Math.floor(dc(r))),n=r/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function YQ(r){const e=[],t=Math.sqrt(r);let n;for(n=1;n<t;n++)r%n===0&&(e.push(n),e.push(r/n));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function XQ(r){return typeof r=="symbol"||typeof r=="object"&&r!==null&&!(Symbol.toPrimitive in r||"toString"in r||"valueOf"in r)}function Wh(r){return!XQ(r)&&!isNaN(parseFloat(r))&&isFinite(r)}function JQ(r,e){const t=Math.round(r);return t-e<=r&&t+e>=r}function l3(r,e,t){let n,i,s;for(n=0,i=r.length;n<i;n++)s=r[n][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Eo(r){return r*(Lr/180)}function Yx(r){return r*(180/Lr)}function SE(r){if(!zn(r))return;let e=1,t=0;for(;Math.round(r*e)/e!==r;)e*=10,t++;return t}function c3(r,e){const t=e.x-r.x,n=e.y-r.y,i=Math.sqrt(t*t+n*n);let s=Math.atan2(n,t);return s<-.5*Lr&&(s+=xn),{angle:s,distance:i}}function U_(r,e){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function ZQ(r,e){return(r-e+qQ)%xn-Lr}function Ss(r){return(r%xn+xn)%xn}function Up(r,e,t,n){const i=Ss(r),s=Ss(e),a=Ss(t),o=Ss(s-i),A=Ss(a-i),l=Ss(i-s),c=Ss(i-a);return i===s||i===a||n&&s===a||o>A&&l<c}function Wi(r,e,t){return Math.max(e,Math.min(t,r))}function e8(r){return Wi(r,-32768,32767)}function sl(r,e,t,n=1e-6){return r>=Math.min(e,t)-n&&r<=Math.max(e,t)+n}function Xx(r,e,t){t=t||(a=>r[a]<e);let n=r.length-1,i=0,s;for(;n-i>1;)s=i+n>>1,t(s)?i=s:n=s;return{lo:i,hi:n}}const al=(r,e,t,n)=>Xx(r,t,n?i=>{const s=r[i][e];return s<t||s===t&&r[i+1][e]===t}:i=>r[i][e]<t),t8=(r,e,t)=>Xx(r,t,n=>r[n][e]>=t);function r8(r,e,t){let n=0,i=r.length;for(;n<i&&r[n]<e;)n++;for(;i>n&&r[i-1]>t;)i--;return n>0||i<r.length?r.slice(n,i):r}const u3=["push","pop","shift","splice","unshift"];function n8(r,e){if(r._chartjs){r._chartjs.listeners.push(e);return}Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),u3.forEach(t=>{const n="_onData"+Wx(t),i=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return r._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...s)}),a}})})}function IE(r,e){const t=r._chartjs;if(!t)return;const n=t.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(u3.forEach(s=>{delete r[s]}),delete r._chartjs)}function d3(r){const e=new Set(r);return e.size===r.length?r:Array.from(e)}const h3=(function(){return typeof window>"u"?function(r){return r()}:window.requestAnimationFrame})();function f3(r,e){let t=[],n=!1;return function(...i){t=i,n||(n=!0,h3.call(window,()=>{n=!1,r.apply(e,t)}))}}function i8(r,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(r,e,n)):r.apply(this,n),e}}const Jx=r=>r==="start"?"left":r==="end"?"right":"center",Cs=(r,e,t)=>r==="start"?e:r==="end"?t:(e+t)/2,s8=(r,e,t,n)=>r===(n?"left":"right")?t:r==="center"?(e+t)/2:e;function g3(r,e,t){const n=e.length;let i=0,s=n;if(r._sorted){const{iScale:a,vScale:o,_parsed:A}=r,l=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null,c=a.axis,{min:u,max:h,minDefined:d,maxDefined:p}=a.getUserBounds();if(d){if(i=Math.min(al(A,c,u).lo,t?n:al(e,c,a.getPixelForValue(u)).lo),l){const f=A.slice(0,i+1).reverse().findIndex(y=>!ir(y[o.axis]));i-=Math.max(0,f)}i=Wi(i,0,n-1)}if(p){let f=Math.max(al(A,a.axis,h,!0).hi+1,t?0:al(e,c,a.getPixelForValue(h),!0).hi+1);if(l){const y=A.slice(f-1).findIndex(b=>!ir(b[o.axis]));f+=Math.max(0,y)}s=Wi(f,i,n)-i}else s=n-i}return{start:i,count:s}}function p3(r){const{xScale:e,yScale:t,_scaleRanges:n}=r,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return r._scaleRanges=i,!0;const s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,i),s}const k0=r=>r===0||r===1,kE=(r,e,t)=>-(Math.pow(2,10*(r-=1))*Math.sin((r-e)*xn/t)),TE=(r,e,t)=>Math.pow(2,-10*r)*Math.sin((r-e)*xn/t)+1,ep={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>-r*(r-2),easeInOutQuad:r=>(r/=.5)<1?.5*r*r:-.5*(--r*(r-2)-1),easeInCubic:r=>r*r*r,easeOutCubic:r=>(r-=1)*r*r+1,easeInOutCubic:r=>(r/=.5)<1?.5*r*r*r:.5*((r-=2)*r*r+2),easeInQuart:r=>r*r*r*r,easeOutQuart:r=>-((r-=1)*r*r*r-1),easeInOutQuart:r=>(r/=.5)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2),easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>(r-=1)*r*r*r*r+1,easeInOutQuint:r=>(r/=.5)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2),easeInSine:r=>-Math.cos(r*ui)+1,easeOutSine:r=>Math.sin(r*ui),easeInOutSine:r=>-.5*(Math.cos(Lr*r)-1),easeInExpo:r=>r===0?0:Math.pow(2,10*(r-1)),easeOutExpo:r=>r===1?1:-Math.pow(2,-10*r)+1,easeInOutExpo:r=>k0(r)?r:r<.5?.5*Math.pow(2,10*(r*2-1)):.5*(-Math.pow(2,-10*(r*2-1))+2),easeInCirc:r=>r>=1?r:-(Math.sqrt(1-r*r)-1),easeOutCirc:r=>Math.sqrt(1-(r-=1)*r),easeInOutCirc:r=>(r/=.5)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1),easeInElastic:r=>k0(r)?r:kE(r,.075,.3),easeOutElastic:r=>k0(r)?r:TE(r,.075,.3),easeInOutElastic(r){return k0(r)?r:r<.5?.5*kE(r*2,.1125,.45):.5+.5*TE(r*2-1,.1125,.45)},easeInBack(r){return r*r*((1.70158+1)*r-1.70158)},easeOutBack(r){return(r-=1)*r*((1.70158+1)*r+1.70158)+1},easeInOutBack(r){let e=1.70158;return(r/=.5)<1?.5*(r*r*(((e*=1.525)+1)*r-e)):.5*((r-=2)*r*(((e*=1.525)+1)*r+e)+2)},easeInBounce:r=>1-ep.easeOutBounce(1-r),easeOutBounce(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},easeInOutBounce:r=>r<.5?ep.easeInBounce(r*2)*.5:ep.easeOutBounce(r*2-1)*.5+.5};function Zx(r){if(r&&typeof r=="object"){const e=r.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function FE(r){return Zx(r)?r:new Dp(r)}function t1(r){return Zx(r)?r:new Dp(r).saturate(.5).darken(.1).hexString()}const a8=["x","y","borderWidth","radius","tension"],o8=["color","borderColor","backgroundColor"];function A8(r){r.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),r.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),r.set("animations",{colors:{type:"color",properties:o8},numbers:{type:"number",properties:a8}}),r.describe("animations",{_fallback:"animation"}),r.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function l8(r){r.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const LE=new Map;function c8(r,e){e=e||{};const t=r+JSON.stringify(e);let n=LE.get(t);return n||(n=new Intl.NumberFormat(r,e),LE.set(t,n)),n}function Bm(r,e,t){return c8(e,t).format(r)}const m3={values(r){return wn(r)?r:""+r},numeric(r,e,t){if(r===0)return"0";const n=this.chart.options.locale;let i,s=r;if(t.length>1){const l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=u8(r,t)}const a=dc(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),A={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(A,this.options.ticks.format),Bm(r,n,A)},logarithmic(r,e,t){if(r===0)return"0";const n=t[e].significand||r/Math.pow(10,Math.floor(dc(r)));return[1,2,3,5,10,15].includes(n)||e>.8*t.length?m3.numeric.call(this,r,e,t):""}};function u8(r,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&r!==Math.floor(r)&&(t=r-Math.floor(r)),t}var Sw={formatters:m3};function d8(r){r.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Sw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),r.route("scale.ticks","color","","color"),r.route("scale.grid","color","","borderColor"),r.route("scale.border","color","","borderColor"),r.route("scale.title","color","","color"),r.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),r.describe("scales",{_fallback:"scale"}),r.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const hd=Object.create(null),M_=Object.create(null);function tp(r,e){if(!e)return r;const t=e.split(".");for(let n=0,i=t.length;n<i;++n){const s=t[n];r=r[s]||(r[s]=Object.create(null))}return r}function r1(r,e,t){return typeof e=="string"?CA(tp(r,e),t):CA(tp(r,""),e)}class h8{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>t1(i.backgroundColor),this.hoverBorderColor=(n,i)=>t1(i.borderColor),this.hoverColor=(n,i)=>t1(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return r1(this,e,t)}get(e){return tp(this,e)}describe(e,t){return r1(M_,e,t)}override(e,t){return r1(hd,e,t)}route(e,t,n,i){const s=tp(this,e),a=tp(this,n),o="_"+t;Object.defineProperties(s,{[o]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const A=this[o],l=a[i];return fr(A)?Object.assign({},l,A):jt(A,l)},set(A){this[o]=A}}})}apply(e){e.forEach(t=>t(this))}}var Bn=new h8({_scriptable:r=>!r.startsWith("on"),_indexable:r=>r!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[A8,l8,d8]);function f8(r){return!r||ir(r.size)||ir(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family}function Ib(r,e,t,n,i){let s=e[i];return s||(s=e[i]=r.measureText(i).width,t.push(i)),s>n&&(n=s),n}function g8(r,e,t,n){n=n||{};let i=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},s=n.garbageCollect=[],n.font=e),r.save(),r.font=e;let a=0;const o=t.length;let A,l,c,u,h;for(A=0;A<o;A++)if(u=t[A],u!=null&&!wn(u))a=Ib(r,i,s,a,u);else if(wn(u))for(l=0,c=u.length;l<c;l++)h=u[l],h!=null&&!wn(h)&&(a=Ib(r,i,s,a,h));r.restore();const d=s.length/2;if(d>t.length){for(A=0;A<d;A++)delete i[s[A]];s.splice(0,d)}return a}function Bu(r,e,t){const n=r.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*n)/n+i}function PE(r,e){!e&&!r||(e=e||r.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,r.width,r.height),e.restore())}function O_(r,e,t,n){y3(r,e,t,n,null)}function y3(r,e,t,n,i){let s,a,o,A,l,c,u,h;const d=e.pointStyle,p=e.rotation,f=e.radius;let y=(p||0)*WQ;if(d&&typeof d=="object"&&(s=d.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){r.save(),r.translate(t,n),r.rotate(y),r.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),r.restore();return}if(!(isNaN(f)||f<=0)){switch(r.beginPath(),d){default:i?r.ellipse(t,n,i/2,f,0,0,xn):r.arc(t,n,f,0,xn),r.closePath();break;case"triangle":c=i?i/2:f,r.moveTo(t+Math.sin(y)*c,n-Math.cos(y)*f),y+=CE,r.lineTo(t+Math.sin(y)*c,n-Math.cos(y)*f),y+=CE,r.lineTo(t+Math.sin(y)*c,n-Math.cos(y)*f),r.closePath();break;case"rectRounded":l=f*.516,A=f-l,a=Math.cos(y+xu)*A,u=Math.cos(y+xu)*(i?i/2-l:A),o=Math.sin(y+xu)*A,h=Math.sin(y+xu)*(i?i/2-l:A),r.arc(t-u,n-o,l,y-Lr,y-ui),r.arc(t+h,n-a,l,y-ui,y),r.arc(t+u,n+o,l,y,y+ui),r.arc(t-h,n+a,l,y+ui,y+Lr),r.closePath();break;case"rect":if(!p){A=Math.SQRT1_2*f,c=i?i/2:A,r.rect(t-c,n-A,2*c,2*A);break}y+=xu;case"rectRot":u=Math.cos(y)*(i?i/2:f),a=Math.cos(y)*f,o=Math.sin(y)*f,h=Math.sin(y)*(i?i/2:f),r.moveTo(t-u,n-o),r.lineTo(t+h,n-a),r.lineTo(t+u,n+o),r.lineTo(t-h,n+a),r.closePath();break;case"crossRot":y+=xu;case"cross":u=Math.cos(y)*(i?i/2:f),a=Math.cos(y)*f,o=Math.sin(y)*f,h=Math.sin(y)*(i?i/2:f),r.moveTo(t-u,n-o),r.lineTo(t+u,n+o),r.moveTo(t+h,n-a),r.lineTo(t-h,n+a);break;case"star":u=Math.cos(y)*(i?i/2:f),a=Math.cos(y)*f,o=Math.sin(y)*f,h=Math.sin(y)*(i?i/2:f),r.moveTo(t-u,n-o),r.lineTo(t+u,n+o),r.moveTo(t+h,n-a),r.lineTo(t-h,n+a),y+=xu,u=Math.cos(y)*(i?i/2:f),a=Math.cos(y)*f,o=Math.sin(y)*f,h=Math.sin(y)*(i?i/2:f),r.moveTo(t-u,n-o),r.lineTo(t+u,n+o),r.moveTo(t+h,n-a),r.lineTo(t-h,n+a);break;case"line":a=i?i/2:Math.cos(y)*f,o=Math.sin(y)*f,r.moveTo(t-a,n-o),r.lineTo(t+a,n+o);break;case"dash":r.moveTo(t,n),r.lineTo(t+Math.cos(y)*(i?i/2:f),n+Math.sin(y)*f);break;case!1:r.closePath();break}r.fill(),e.borderWidth>0&&r.stroke()}}function cA(r,e,t){return t=t||.5,!e||r&&r.x>e.left-t&&r.x<e.right+t&&r.y>e.top-t&&r.y<e.bottom+t}function Iw(r,e){r.save(),r.beginPath(),r.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),r.clip()}function kw(r){r.restore()}function p8(r,e,t,n,i){if(!e)return r.lineTo(t.x,t.y);if(i==="middle"){const s=(e.x+t.x)/2;r.lineTo(s,e.y),r.lineTo(s,t.y)}else i==="after"!=!!n?r.lineTo(e.x,t.y):r.lineTo(t.x,e.y);r.lineTo(t.x,t.y)}function m8(r,e,t,n){if(!e)return r.lineTo(t.x,t.y);r.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function y8(r,e){e.translation&&r.translate(e.translation[0],e.translation[1]),ir(e.rotation)||r.rotate(e.rotation),e.color&&(r.fillStyle=e.color),e.textAlign&&(r.textAlign=e.textAlign),e.textBaseline&&(r.textBaseline=e.textBaseline)}function b8(r,e,t,n,i){if(i.strikethrough||i.underline){const s=r.measureText(n),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,A=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,c=i.strikethrough?(A+l)/2:l;r.strokeStyle=r.fillStyle,r.beginPath(),r.lineWidth=i.decorationWidth||2,r.moveTo(a,c),r.lineTo(o,c),r.stroke()}}function w8(r,e){const t=r.fillStyle;r.fillStyle=e.color,r.fillRect(e.left,e.top,e.width,e.height),r.fillStyle=t}function fd(r,e,t,n,i,s={}){const a=wn(e)?e:[e],o=s.strokeWidth>0&&s.strokeColor!=="";let A,l;for(r.save(),r.font=i.string,y8(r,s),A=0;A<a.length;++A)l=a[A],s.backdrop&&w8(r,s.backdrop),o&&(s.strokeColor&&(r.strokeStyle=s.strokeColor),ir(s.strokeWidth)||(r.lineWidth=s.strokeWidth),r.strokeText(l,t,n,s.maxWidth)),r.fillText(l,t,n,s.maxWidth),b8(r,t,n,l,s),n+=Number(i.lineHeight);r.restore()}function Mp(r,e){const{x:t,y:n,w:i,h:s,radius:a}=e;r.arc(t+a.topLeft,n+a.topLeft,a.topLeft,1.5*Lr,Lr,!0),r.lineTo(t,n+s-a.bottomLeft),r.arc(t+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,Lr,ui,!0),r.lineTo(t+i-a.bottomRight,n+s),r.arc(t+i-a.bottomRight,n+s-a.bottomRight,a.bottomRight,ui,0,!0),r.lineTo(t+i,n+a.topRight),r.arc(t+i-a.topRight,n+a.topRight,a.topRight,0,-ui,!0),r.lineTo(t+a.topLeft,n)}const v8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_8=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function x8(r,e){const t=(""+r).match(v8);if(!t||t[1]==="normal")return e*1.2;switch(r=+t[2],t[3]){case"px":return r;case"%":r/=100;break}return e*r}const B8=r=>+r||0;function eB(r,e){const t={},n=fr(e),i=n?Object.keys(e):e,s=fr(r)?n?a=>jt(r[a],r[e[a]]):a=>r[a]:()=>r;for(const a of i)t[a]=B8(s(a));return t}function b3(r){return eB(r,{top:"y",right:"x",bottom:"y",left:"x"})}function rd(r){return eB(r,["topLeft","topRight","bottomLeft","bottomRight"])}function hs(r){const e=b3(r);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function vi(r,e){r=r||{},e=e||Bn.font;let t=jt(r.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=jt(r.style,e.style);n&&!(""+n).match(_8)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:jt(r.family,e.family),lineHeight:x8(jt(r.lineHeight,e.lineHeight),t),size:t,style:n,weight:jt(r.weight,e.weight),string:""};return i.string=f8(i),i}function yn(r,e,t,n){let i,s,a;for(i=0,s=r.length;i<s;++i)if(a=r[i],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e)),t!==void 0&&wn(a)&&(a=a[t%a.length]),a!==void 0))return a}function C8(r,e,t){const{min:n,max:i}=r,s=o3(e,(i-n)/2),a=(o,A)=>t&&o===0?0:o+A;return{min:a(n,-Math.abs(s)),max:a(i,s)}}function ru(r,e){return Object.assign(Object.create(r),e)}function tB(r,e=[""],t,n,i=()=>r[0]){const s=t||r;typeof n>"u"&&(n=x3("_fallback",r));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:r,_rootScopes:s,_fallback:n,_getTarget:i,override:o=>tB([o,...r],e,s,n)};return new Proxy(a,{deleteProperty(o,A){return delete o[A],delete o._keys,delete r[0][A],!0},get(o,A){return v3(o,A,()=>P8(A,e,r,o))},getOwnPropertyDescriptor(o,A){return Reflect.getOwnPropertyDescriptor(o._scopes[0],A)},getPrototypeOf(){return Reflect.getPrototypeOf(r[0])},has(o,A){return DE(o).includes(A)},ownKeys(o){return DE(o)},set(o,A,l){const c=o._storage||(o._storage=i());return o[A]=c[A]=l,delete o._keys,!0}})}function Yh(r,e,t,n){const i={_cacheable:!1,_proxy:r,_context:e,_subProxy:t,_stack:new Set,_descriptors:w3(r,n),setContext:s=>Yh(r,s,t,n),override:s=>Yh(r.override(s),e,t,n)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete r[a],!0},get(s,a,o){return v3(s,a,()=>S8(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(r,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(r,a)},getPrototypeOf(){return Reflect.getPrototypeOf(r)},has(s,a){return Reflect.has(r,a)},ownKeys(){return Reflect.ownKeys(r)},set(s,a,o){return r[a]=o,delete s[a],!0}})}function w3(r,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=r;return{allKeys:i,scriptable:t,indexable:n,isScriptable:Uc(t)?t:()=>t,isIndexable:Uc(n)?n:()=>n}}const E8=(r,e)=>r?r+Wx(e):e,rB=(r,e)=>fr(e)&&r!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function v3(r,e,t){if(Object.prototype.hasOwnProperty.call(r,e)||e==="constructor")return r[e];const n=t();return r[e]=n,n}function S8(r,e,t){const{_proxy:n,_context:i,_subProxy:s,_descriptors:a}=r;let o=n[e];return Uc(o)&&a.isScriptable(e)&&(o=I8(e,o,r,t)),wn(o)&&o.length&&(o=k8(e,o,r,a.isIndexable)),rB(e,o)&&(o=Yh(o,i,s&&s[e],a)),o}function I8(r,e,t,n){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=t;if(o.has(r))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+r);o.add(r);let A=e(s,a||n);return o.delete(r),rB(r,A)&&(A=nB(i._scopes,i,r,A)),A}function k8(r,e,t,n){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=t;if(typeof s.index<"u"&&n(r))return e[s.index%e.length];if(fr(e[0])){const A=e,l=i._scopes.filter(c=>c!==A);e=[];for(const c of A){const u=nB(l,i,r,c);e.push(Yh(u,s,a&&a[r],o))}}return e}function _3(r,e,t){return Uc(r)?r(e,t):r}const T8=(r,e)=>r===!0?e:typeof r=="string"?Rc(e,r):void 0;function F8(r,e,t,n,i){for(const s of e){const a=T8(t,s);if(a){r.add(a);const o=_3(a._fallback,t,i);if(typeof o<"u"&&o!==t&&o!==n)return o}else if(a===!1&&typeof n<"u"&&t!==n)return null}return!1}function nB(r,e,t,n){const i=e._rootScopes,s=_3(e._fallback,t,n),a=[...r,...i],o=new Set;o.add(n);let A=NE(o,a,t,s||t,n);return A===null||typeof s<"u"&&s!==t&&(A=NE(o,a,s,A,n),A===null)?!1:tB(Array.from(o),[""],i,s,()=>L8(e,t,n))}function NE(r,e,t,n,i){for(;t;)t=F8(r,e,t,n,i);return t}function L8(r,e,t){const n=r._getTarget();e in n||(n[e]={});const i=n[e];return wn(i)&&fr(t)?t:i||{}}function P8(r,e,t,n){let i;for(const s of e)if(i=x3(E8(s,r),t),typeof i<"u")return rB(r,i)?nB(t,n,r,i):i}function x3(r,e){for(const t of e){if(!t)continue;const n=t[r];if(typeof n<"u")return n}}function DE(r){let e=r._keys;return e||(e=r._keys=N8(r._scopes)),e}function N8(r){const e=new Set;for(const t of r)for(const n of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function B3(r,e,t,n){const{iScale:i}=r,{key:s="r"}=this._parsing,a=new Array(n);let o,A,l,c;for(o=0,A=n;o<A;++o)l=o+t,c=e[l],a[o]={r:i.parse(Rc(c,s),l)};return a}const D8=Number.EPSILON||1e-14,Xh=(r,e)=>e<r.length&&!r[e].skip&&r[e],C3=r=>r==="x"?"y":"x";function R8(r,e,t,n){const i=r.skip?e:r,s=e,a=t.skip?e:t,o=U_(s,i),A=U_(a,s);let l=o/(o+A),c=A/(o+A);l=isNaN(l)?0:l,c=isNaN(c)?0:c;const u=n*l,h=n*c;return{previous:{x:s.x-u*(a.x-i.x),y:s.y-u*(a.y-i.y)},next:{x:s.x+h*(a.x-i.x),y:s.y+h*(a.y-i.y)}}}function U8(r,e,t){const n=r.length;let i,s,a,o,A,l=Xh(r,0);for(let c=0;c<n-1;++c)if(A=l,l=Xh(r,c+1),!(!A||!l)){if(td(e[c],0,D8)){t[c]=t[c+1]=0;continue}i=t[c]/e[c],s=t[c+1]/e[c],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),t[c]=i*a*e[c],t[c+1]=s*a*e[c])}}function M8(r,e,t="x"){const n=C3(t),i=r.length;let s,a,o,A=Xh(r,0);for(let l=0;l<i;++l){if(a=o,o=A,A=Xh(r,l+1),!o)continue;const c=o[t],u=o[n];a&&(s=(c-a[t])/3,o[`cp1${t}`]=c-s,o[`cp1${n}`]=u-s*e[l]),A&&(s=(A[t]-c)/3,o[`cp2${t}`]=c+s,o[`cp2${n}`]=u+s*e[l])}}function O8(r,e="x"){const t=C3(e),n=r.length,i=Array(n).fill(0),s=Array(n);let a,o,A,l=Xh(r,0);for(a=0;a<n;++a)if(o=A,A=l,l=Xh(r,a+1),!!A){if(l){const c=l[e]-A[e];i[a]=c!==0?(l[t]-A[t])/c:0}s[a]=o?l?co(i[a-1])!==co(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}U8(r,i,s),M8(r,s,e)}function T0(r,e,t){return Math.max(Math.min(r,t),e)}function Q8(r,e){let t,n,i,s,a,o=cA(r[0],e);for(t=0,n=r.length;t<n;++t)a=s,s=o,o=t<n-1&&cA(r[t+1],e),s&&(i=r[t],a&&(i.cp1x=T0(i.cp1x,e.left,e.right),i.cp1y=T0(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=T0(i.cp2x,e.left,e.right),i.cp2y=T0(i.cp2y,e.top,e.bottom)))}function H8(r,e,t,n,i){let s,a,o,A;if(e.spanGaps&&(r=r.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")O8(r,i);else{let l=n?r[r.length-1]:r[0];for(s=0,a=r.length;s<a;++s)o=r[s],A=R8(l,o,r[Math.min(s+1,a-(n?0:1))%a],e.tension),o.cp1x=A.previous.x,o.cp1y=A.previous.y,o.cp2x=A.next.x,o.cp2y=A.next.y,l=o}e.capBezierPoints&&Q8(r,t)}function iB(){return typeof window<"u"&&typeof document<"u"}function sB(r){let e=r.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kb(r,e,t){let n;return typeof r=="string"?(n=parseInt(r,10),r.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=r,n}const Tw=r=>r.ownerDocument.defaultView.getComputedStyle(r,null);function V8(r,e){return Tw(r).getPropertyValue(e)}const $8=["top","right","bottom","left"];function nd(r,e,t){const n={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=$8[i];n[s]=parseFloat(r[e+"-"+s+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const j8=(r,e,t)=>(r>0||e>0)&&(!t||!t.shadowRoot);function G8(r,e){const t=r.touches,n=t&&t.length?t[0]:r,{offsetX:i,offsetY:s}=n;let a=!1,o,A;if(j8(i,s,r.target))o=i,A=s;else{const l=e.getBoundingClientRect();o=n.clientX-l.left,A=n.clientY-l.top,a=!0}return{x:o,y:A,box:a}}function rA(r,e){if("native"in r)return r;const{canvas:t,currentDevicePixelRatio:n}=e,i=Tw(t),s=i.boxSizing==="border-box",a=nd(i,"padding"),o=nd(i,"border","width"),{x:A,y:l,box:c}=G8(r,t),u=a.left+(c&&o.left),h=a.top+(c&&o.top);let{width:d,height:p}=e;return s&&(d-=a.width+o.width,p-=a.height+o.height),{x:Math.round((A-u)/d*t.width/n),y:Math.round((l-h)/p*t.height/n)}}function K8(r,e,t){let n,i;if(e===void 0||t===void 0){const s=r&&sB(r);if(!s)e=r.clientWidth,t=r.clientHeight;else{const a=s.getBoundingClientRect(),o=Tw(s),A=nd(o,"border","width"),l=nd(o,"padding");e=a.width-l.width-A.width,t=a.height-l.height-A.height,n=kb(o.maxWidth,s,"clientWidth"),i=kb(o.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:n||Sb,maxHeight:i||Sb}}const hc=r=>Math.round(r*10)/10;function z8(r,e,t,n){const i=Tw(r),s=nd(i,"margin"),a=kb(i.maxWidth,r,"clientWidth")||Sb,o=kb(i.maxHeight,r,"clientHeight")||Sb,A=K8(r,e,t);let{width:l,height:c}=A;if(i.boxSizing==="content-box"){const h=nd(i,"border","width"),d=nd(i,"padding");l-=d.width+h.width,c-=d.height+h.height}return l=Math.max(0,l-s.width),c=Math.max(0,n?l/n:c-s.height),l=hc(Math.min(l,a,A.maxWidth)),c=hc(Math.min(c,o,A.maxHeight)),l&&!c&&(c=hc(l/2)),(e!==void 0||t!==void 0)&&n&&A.height&&c>A.height&&(c=A.height,l=hc(Math.floor(c*n))),{width:l,height:c}}function RE(r,e,t){const n=e||1,i=hc(r.height*n),s=hc(r.width*n);r.height=hc(r.height),r.width=hc(r.width);const a=r.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${r.height}px`,a.style.width=`${r.width}px`),r.currentDevicePixelRatio!==n||a.height!==i||a.width!==s?(r.currentDevicePixelRatio=n,a.height=i,a.width=s,r.ctx.setTransform(n,0,0,n,0,0),!0):!1}const q8=(function(){let r=!1;try{const e={get passive(){return r=!0,!1}};iB()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return r})();function UE(r,e){const t=V8(r,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ku(r,e,t,n){return{x:r.x+t*(e.x-r.x),y:r.y+t*(e.y-r.y)}}function W8(r,e,t,n){return{x:r.x+t*(e.x-r.x),y:n==="middle"?t<.5?r.y:e.y:n==="after"?t<1?r.y:e.y:t>0?e.y:r.y}}function Y8(r,e,t,n){const i={x:r.cp2x,y:r.cp2y},s={x:e.cp1x,y:e.cp1y},a=ku(r,i,t),o=ku(i,s,t),A=ku(s,e,t),l=ku(a,o,t),c=ku(o,A,t);return ku(l,c,t)}const X8=function(r,e){return{x(t){return r+r+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},J8=function(){return{x(r){return r},setWidth(r){},textAlign(r){return r},xPlus(r,e){return r+e},leftForLtr(r,e){return r}}};function Nh(r,e,t){return r?X8(e,t):J8()}function E3(r,e){let t,n;(e==="ltr"||e==="rtl")&&(t=r.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),r.prevTextDirection=n)}function S3(r,e){e!==void 0&&(delete r.prevTextDirection,r.canvas.style.setProperty("direction",e[0],e[1]))}function I3(r){return r==="angle"?{between:Up,compare:ZQ,normalize:Ss}:{between:sl,compare:(e,t)=>e-t,normalize:e=>e}}function ME({start:r,end:e,count:t,loop:n,style:i}){return{start:r%t,end:e%t,loop:n&&(e-r+1)%t===0,style:i}}function Z8(r,e,t){const{property:n,start:i,end:s}=t,{between:a,normalize:o}=I3(n),A=e.length;let{start:l,end:c,loop:u}=r,h,d;if(u){for(l+=A,c+=A,h=0,d=A;h<d&&a(o(e[l%A][n]),i,s);++h)l--,c--;l%=A,c%=A}return c<l&&(c+=A),{start:l,end:c,loop:u,style:r.style}}function k3(r,e,t){if(!t)return[r];const{property:n,start:i,end:s}=t,a=e.length,{compare:o,between:A,normalize:l}=I3(n),{start:c,end:u,loop:h,style:d}=Z8(r,e,t),p=[];let f=!1,y=null,b,B,S;const C=()=>A(i,S,b)&&o(i,S)!==0,P=()=>o(s,b)===0||A(s,S,b),M=()=>f||C(),L=()=>!f||P();for(let _=c,v=c;_<=u;++_)B=e[_%a],!B.skip&&(b=l(B[n]),b!==S&&(f=A(b,i,s),y===null&&M()&&(y=o(b,i)===0?_:v),y!==null&&L()&&(p.push(ME({start:y,end:_,loop:h,count:a,style:d})),y=null),v=_,S=b));return y!==null&&p.push(ME({start:y,end:u,loop:h,count:a,style:d})),p}function T3(r,e){const t=[],n=r.segments;for(let i=0;i<n.length;i++){const s=k3(n[i],r.points,e);s.length&&t.push(...s)}return t}function eH(r,e,t,n){let i=0,s=e-1;if(t&&!n)for(;i<e&&!r[i].skip;)i++;for(;i<e&&r[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&r[s%e].skip;)s--;return s%=e,{start:i,end:s}}function tH(r,e,t,n){const i=r.length,s=[];let a=e,o=r[e],A;for(A=e+1;A<=t;++A){const l=r[A%i];l.skip||l.stop?o.skip||(n=!1,s.push({start:e%i,end:(A-1)%i,loop:n}),e=a=l.stop?A:null):(a=A,o.skip&&(e=A)),o=l}return a!==null&&s.push({start:e%i,end:a%i,loop:n}),s}function rH(r,e){const t=r.points,n=r.options.spanGaps,i=t.length;if(!i)return[];const s=!!r._loop,{start:a,end:o}=eH(t,i,s,n);if(n===!0)return OE(r,[{start:a,end:o,loop:s}],t,e);const A=o<a?o+i:o,l=!!r._fullLoop&&a===0&&o===i-1;return OE(r,tH(t,a,A,l),t,e)}function OE(r,e,t,n){return!n||!n.setContext||!t?e:nH(r,e,t,n)}function nH(r,e,t,n){const i=r._chart.getContext(),s=QE(r.options),{_datasetIndex:a,options:{spanGaps:o}}=r,A=t.length,l=[];let c=s,u=e[0].start,h=u;function d(p,f,y,b){const B=o?-1:1;if(p!==f){for(p+=A;t[p%A].skip;)p-=B;for(;t[f%A].skip;)f+=B;p%A!==f%A&&(l.push({start:p%A,end:f%A,loop:y,style:b}),c=b,u=f%A)}}for(const p of e){u=o?u:p.start;let f=t[u%A],y;for(h=u+1;h<=p.end;h++){const b=t[h%A];y=QE(n.setContext(ru(i,{type:"segment",p0:f,p1:b,p0DataIndex:(h-1)%A,p1DataIndex:h%A,datasetIndex:a}))),iH(y,c)&&d(u,h-1,p.loop,c),f=b,c=y}u<h-1&&d(u,h-1,p.loop,c)}return l}function QE(r){return{backgroundColor:r.backgroundColor,borderCapStyle:r.borderCapStyle,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderJoinStyle:r.borderJoinStyle,borderWidth:r.borderWidth,borderColor:r.borderColor}}function iH(r,e){if(!e)return!1;const t=[],n=function(i,s){return Zx(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(r,n)!==JSON.stringify(e,n)}function F0(r,e,t){return r.options.clip?r[t]:e[t]}function sH(r,e){const{xScale:t,yScale:n}=r;return t&&n?{left:F0(t,e,"left"),right:F0(t,e,"right"),top:F0(n,e,"top"),bottom:F0(n,e,"bottom")}:e}function F3(r,e){const t=e._clip;if(t.disabled)return!1;const n=sH(e,r.chartArea);return{left:t.left===!1?0:n.left-(t.left===!0?0:t.left),right:t.right===!1?r.width:n.right+(t.right===!0?0:t.right),top:t.top===!1?0:n.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?r.height:n.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class aH{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const s=t.listeners[i],a=t.duration;s.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=h3.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const s=n.items;let a=s.length-1,o=!1,A;for(;a>=0;--a)A=s[a],A._active?(A._total>n.duration&&(n.duration=A._total),A.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),s.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ZA=new aH;const HE="transparent",oH={boolean(r,e,t){return t>.5?e:r},color(r,e,t){const n=FE(r||HE),i=n.valid&&FE(e||HE);return i&&i.valid?i.mix(n,t).hexString():e},number(r,e,t){return r+(e-r)*t}};class AH{constructor(e,t,n,i){const s=t[n];i=yn([e.to,i,s,e.from]);const a=yn([e.from,s,i]);this._active=!0,this._fn=e.fn||oH[e.type||typeof a],this._easing=ep[e.easing]||ep.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=yn([e.to,t,i,e.from]),this._from=yn([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let A;if(this._active=s!==o&&(a||t<n),!this._active){this._target[i]=o,this._notify(!0);return}if(t<0){this._target[i]=s;return}A=t/n%2,A=a&&A>1?2-A:A,A=this._easing(Math.min(1,Math.max(0,A))),this._target[i]=this._fn(s,o,A)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class L3{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!fr(e))return;const t=Object.keys(Bn.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!fr(s))return;const a={};for(const o of t)a[o]=s[o];(wn(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,a)})})}_animateOptions(e,t){const n=t.options,i=cH(e,n);if(!i)return[];const s=this._createAnimations(i,n);return n.$shared&&lH(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,i=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let A;for(A=a.length-1;A>=0;--A){const l=a[A];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=s[l];const h=n.get(l);if(u)if(h&&u.active()){u.update(h,c,o);continue}else u.cancel();if(!h||!h.duration){e[l]=c;continue}s[l]=u=new AH(h,e,l,c),i.push(u)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const n=this._createAnimations(e,t);if(n.length)return ZA.add(this._chart,n),!0}}function lH(r,e){const t=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const s=r[n[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function cH(r,e){if(!e)return;let t=r.options;if(!t){r.options=e;return}return t.$shared&&(r.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function VE(r,e){const t=r&&r.options||{},n=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:n?s:i,end:n?i:s}}function uH(r,e,t){if(t===!1)return!1;const n=VE(r,t),i=VE(e,t);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function dH(r){let e,t,n,i;return fr(r)?(e=r.top,t=r.right,n=r.bottom,i=r.left):e=t=n=i=r,{top:e,right:t,bottom:n,left:i,disabled:r===!1}}function P3(r,e){const t=[],n=r._getSortedDatasetMetas(e);let i,s;for(i=0,s=n.length;i<s;++i)t.push(n[i].index);return t}function $E(r,e,t,n={}){const i=r.keys,s=n.mode==="single";let a,o,A,l;if(e===null)return;let c=!1;for(a=0,o=i.length;a<o;++a){if(A=+i[a],A===t){if(c=!0,n.all)continue;break}l=r.values[A],zn(l)&&(s||e===0||co(e)===co(l))&&(e+=l)}return!c&&!n.all?0:e}function hH(r,e){const{iScale:t,vScale:n}=e,i=t.axis==="x"?"x":"y",s=n.axis==="x"?"x":"y",a=Object.keys(r),o=new Array(a.length);let A,l,c;for(A=0,l=a.length;A<l;++A)c=a[A],o[A]={[i]:c,[s]:r[c]};return o}function n1(r,e){const t=r&&r.options.stacked;return t||t===void 0&&e.stack!==void 0}function fH(r,e,t){return`${r.id}.${e.id}.${t.stack||t.type}`}function gH(r){const{min:e,max:t,minDefined:n,maxDefined:i}=r.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function pH(r,e,t){const n=r[e]||(r[e]={});return n[t]||(n[t]={})}function jE(r,e,t,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const s=r[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function GE(r,e){const{chart:t,_cachedMeta:n}=r,i=t._stacks||(t._stacks={}),{iScale:s,vScale:a,index:o}=n,A=s.axis,l=a.axis,c=fH(s,a,n),u=e.length;let h;for(let d=0;d<u;++d){const p=e[d],{[A]:f,[l]:y}=p,b=p._stacks||(p._stacks={});h=b[l]=pH(i,c,f),h[o]=y,h._top=jE(h,a,!0,n.type),h._bottom=jE(h,a,!1,n.type);const B=h._visualValues||(h._visualValues={});B[o]=y}}function i1(r,e){const t=r.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function mH(r,e){return ru(r,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yH(r,e,t){return ru(r,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function ag(r,e){const t=r.controller.index,n=r.vScale&&r.vScale.axis;if(n){e=e||r._parsed;for(const i of e){const s=i._stacks;if(!s||s[n]===void 0||s[n][t]===void 0)return;delete s[n][t],s[n]._visualValues!==void 0&&s[n]._visualValues[t]!==void 0&&delete s[n]._visualValues[t]}}}const s1=r=>r==="reset"||r==="none",KE=(r,e)=>e?r:Object.assign({},r),bH=(r,e,t)=>r&&!e.hidden&&e._stacked&&{keys:P3(t,!0),values:null};class ko{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=n1(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ag(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(u,h,d,p)=>u==="x"?h:u==="r"?p:d,s=t.xAxisID=jt(n.xAxisID,i1(e,"x")),a=t.yAxisID=jt(n.yAxisID,i1(e,"y")),o=t.rAxisID=jt(n.rAxisID,i1(e,"r")),A=t.indexAxis,l=t.iAxisID=i(A,s,a,o),c=t.vAxisID=i(A,a,s,o);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&IE(this._data,this),e._stacked&&ag(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(fr(t)){const i=this._cachedMeta;this._data=hH(t,i)}else if(n!==t){if(n){IE(n,this);const i=this._cachedMeta;ag(i),i._parsed=[]}t&&Object.isExtensible(t)&&n8(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=n1(t.vScale,t),t.stack!==n.stack&&(i=!0,ag(t),t.stack=n.stack),this._resyncElements(e),(i||s!==t._stacked)&&(GE(this,t._parsed),t._stacked=n1(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:a}=n,o=s.axis;let A=e===0&&t===i.length?!0:n._sorted,l=e>0&&n._parsed[e-1],c,u,h;if(this._parsing===!1)n._parsed=i,n._sorted=!0,h=i;else{wn(i[e])?h=this.parseArrayData(n,i,e,t):fr(i[e])?h=this.parseObjectData(n,i,e,t):h=this.parsePrimitiveData(n,i,e,t);const d=()=>u[o]===null||l&&u[o]<l[o];for(c=0;c<t;++c)n._parsed[c+e]=u=h[c],A&&(d()&&(A=!1),l=u);n._sorted=A}a&&GE(this,h)}parsePrimitiveData(e,t,n,i){const{iScale:s,vScale:a}=e,o=s.axis,A=a.axis,l=s.getLabels(),c=s===a,u=new Array(i);let h,d,p;for(h=0,d=i;h<d;++h)p=h+n,u[h]={[o]:c||s.parse(l[p],p),[A]:a.parse(t[p],p)};return u}parseArrayData(e,t,n,i){const{xScale:s,yScale:a}=e,o=new Array(i);let A,l,c,u;for(A=0,l=i;A<l;++A)c=A+n,u=t[c],o[A]={x:s.parse(u[0],c),y:a.parse(u[1],c)};return o}parseObjectData(e,t,n,i){const{xScale:s,yScale:a}=e,{xAxisKey:o="x",yAxisKey:A="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:s.parse(Rc(d,o),h),y:a.parse(Rc(d,A),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,s=this._cachedMeta,a=t[e.axis],o={keys:P3(i,!0),values:t._stacks[e.axis]._visualValues};return $E(o,a,s.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const s=n[t.axis];let a=s===null?NaN:s;const o=i&&n._stacks[t.axis];i&&o&&(i.values=o,a=$E(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,s=n._sorted&&e===n.iScale,a=i.length,o=this._getOtherScale(e),A=bH(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=gH(o);let h,d;function p(){d=i[h];const f=d[o.axis];return!zn(d[e.axis])||c>f||u<f}for(h=0;h<a&&!(!p()&&(this.updateRangeFromParsed(l,e,d,A),s));++h);if(s){for(h=a-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(l,e,d,A);break}}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,s,a;for(i=0,s=t.length;i<s;++i)a=t[i][e.axis],zn(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=dH(jt(this.options.clip,uH(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],s=t.chartArea,a=[],o=this._drawStart||0,A=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,o,A),c=o;c<o+A;++c){const u=i[c];u.hidden||(u.active&&l?a.push(u):u.draw(e,s))}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];s=a.$context||(a.$context=yH(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=mH(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const i=t==="active",s=this._cachedDataOpts,a=e+"-"+t,o=s[a],A=this.enableOptionSharing&&Rp(n);if(o)return KE(o,A);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?[`${e}Hover`,"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Bn.elements[e]),p=()=>this.getContext(n,i,t),f=l.resolveNamedOptions(h,d,p,u);return f.$shared&&(f.$shared=A,s[a]=Object.freeze(KE(f,A))),f}_resolveAnimations(e,t,n){const i=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,o=s[a];if(o)return o;let A;if(i.options.animation!==!1){const c=this.chart.config,u=c.datasetAnimationScopeKeys(this._type,t),h=c.getOptionScopes(this.getDataset(),u);A=c.createResolver(h,this.getContext(e,n,t))}const l=new L3(i,A&&A.animations);return A&&A._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||s1(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(n),a=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:a}}updateElement(e,t,n,i){s1(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!s1(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,A,l]of this._syncList)this[o](A,l);this._syncList=[];const i=n.length,s=t.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,n=!0){const i=this._cachedMeta,s=i.data,a=e+t;let o;const A=l=>{for(l.length+=t,o=l.length-1;o>=a;o--)l[o]=l[o-t]};for(A(s),o=e;o<a;++o)s[o]=new this.dataElementType;this._parsing&&A(i._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&ag(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ke(ko,"defaults",{}),ke(ko,"datasetElementType",null),ke(ko,"dataElementType",null);function wH(r,e){if(!r._cache.$bar){const t=r.getMatchingVisibleMetas(e);let n=[];for(let i=0,s=t.length;i<s;i++)n=n.concat(t[i].controller.getAllParsedValues(r));r._cache.$bar=d3(n.sort((i,s)=>i-s))}return r._cache.$bar}function vH(r){const e=r.iScale,t=wH(e,r.type);let n=e._length,i,s,a,o;const A=()=>{a===32767||a===-32768||(Rp(o)&&(n=Math.min(n,Math.abs(a-o)||n)),o=a)};for(i=0,s=t.length;i<s;++i)a=e.getPixelForValue(t[i]),A();for(o=void 0,i=0,s=e.ticks.length;i<s;++i)a=e.getPixelForTick(i),A();return n}function _H(r,e,t,n){const i=t.barThickness;let s,a;return ir(i)?(s=e.min*t.categoryPercentage,a=t.barPercentage):(s=i*n,a=1),{chunk:s/n,ratio:a,start:e.pixels[r]-s/2}}function xH(r,e,t,n){const i=e.pixels,s=i[r];let a=r>0?i[r-1]:null,o=r<i.length-1?i[r+1]:null;const A=t.categoryPercentage;a===null&&(a=s-(o===null?e.end-e.start:o-s)),o===null&&(o=s+s-a);const l=s-(s-Math.min(a,o))/2*A;return{chunk:Math.abs(o-a)/2*A/n,ratio:t.barPercentage,start:l}}function BH(r,e,t,n){const i=t.parse(r[0],n),s=t.parse(r[1],n),a=Math.min(i,s),o=Math.max(i,s);let A=a,l=o;Math.abs(a)>Math.abs(o)&&(A=o,l=a),e[t.axis]=l,e._custom={barStart:A,barEnd:l,start:i,end:s,min:a,max:o}}function N3(r,e,t,n){return wn(r)?BH(r,e,t,n):e[t.axis]=t.parse(r,n),e}function zE(r,e,t,n){const i=r.iScale,s=r.vScale,a=i.getLabels(),o=i===s,A=[];let l,c,u,h;for(l=t,c=t+n;l<c;++l)h=e[l],u={},u[i.axis]=o||i.parse(a[l],l),A.push(N3(h,u,s,l));return A}function a1(r){return r&&r.barStart!==void 0&&r.barEnd!==void 0}function CH(r,e,t){return r!==0?co(r):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function EH(r){let e,t,n,i,s;return r.horizontal?(e=r.base>r.x,t="left",n="right"):(e=r.base<r.y,t="bottom",n="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:n,reverse:e,top:i,bottom:s}}function SH(r,e,t,n){let i=e.borderSkipped;const s={};if(!i){r.borderSkipped=s;return}if(i===!0){r.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:A,top:l,bottom:c}=EH(r);i==="middle"&&t&&(r.enableBorderRadius=!0,(t._top||0)===n?i=l:(t._bottom||0)===n?i=c:(s[qE(c,a,o,A)]=!0,i=l)),s[qE(i,a,o,A)]=!0,r.borderSkipped=s}function qE(r,e,t,n){return n?(r=IH(r,e,t),r=WE(r,t,e)):r=WE(r,e,t),r}function IH(r,e,t){return r===e?t:r===t?e:r}function WE(r,e,t){return r==="start"?e:r==="end"?t:r}function kH(r,{inflateAmount:e},t){r.inflateAmount=e==="auto"?t===1?.33:0:e}class Qy extends ko{parsePrimitiveData(e,t,n,i){return zE(e,t,n,i)}parseArrayData(e,t,n,i){return zE(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:s,vScale:a}=e,{xAxisKey:o="x",yAxisKey:A="y"}=this._parsing,l=s.axis==="x"?o:A,c=a.axis==="x"?o:A,u=[];let h,d,p,f;for(h=n,d=n+i;h<d;++h)f=t[h],p={},p[s.axis]=s.parse(Rc(f,l),h),u.push(N3(Rc(f,c),p,a,h));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,s=this.getParsed(e),a=s._custom,o=a1(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,A=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i);for(let d=t;d<t+n;d++){const p=this.getParsed(d),f=s||ir(p[o.axis])?{base:A,head:A}:this._calculateBarValuePixels(d),y=this._calculateBarIndexPixels(d,c),b=(p._stacks||{})[o.axis],B={horizontal:l,base:f.base,enableBorderRadius:!b||a1(p._custom)||a===b._top||a===b._bottom,x:l?f.head:y.center,y:l?y.center:f.head,height:l?y.size:Math.abs(f.size),width:l?Math.abs(f.size):y.size};h&&(B.options=u||this.resolveDataElementOptions(d,e[d].active?"active":i));const S=B.options||e[d].options;SH(B,S,b,a),kH(B,S,c.ratio),this.updateElement(e[d],d,B,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),s=n.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(t),A=o&&o[n.axis],l=c=>{const u=c._parsed.find(d=>d[n.axis]===A),h=u&&u[c.vScale.axis];if(ir(h)||isNaN(h))return!0};for(const c of i)if(!(t!==void 0&&l(c))&&((s===!1||a.indexOf(c.stack)===-1||s===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[jt(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),s=t!==void 0?i.indexOf(t):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let s,a;for(s=0,a=t.data.length;s<a;++s)i.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const o=e.barThickness;return{min:o||vH(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,A=this.getParsed(e),l=A._custom,c=a1(l);let u=A[t.axis],h=0,d=n?this.applyStack(t,A,n):u,p,f;d!==u&&(h=d-u,d=u),c&&(u=l.barStart,d=l.barEnd-l.barStart,u!==0&&co(u)!==co(l.barEnd)&&(h=0),h+=u);const y=!ir(s)&&!c?s:h;let b=t.getPixelForValue(y);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(h+d):p=b,f=p-b,Math.abs(f)<a){f=CH(f,t,o)*a,u===o&&(b-=f/2);const B=t.getPixelForDecimal(0),S=t.getPixelForDecimal(1),C=Math.min(B,S),P=Math.max(B,S);b=Math.max(Math.min(b,P),C),p=b+f,n&&!c&&(A._stacks[t.axis]._visualValues[i]=t.getValueForPixel(p)-t.getValueForPixel(b))}if(b===t.getPixelForValue(o)){const B=co(f)*t.getLineWidthForValue(o)/2;b+=B,f-=B}return{size:f,base:b,head:p,center:p+f/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,s=i.skipNull,a=jt(i.maxBarThickness,1/0);let o,A;const l=this._getAxisCount();if(t.grouped){const c=s?this._getStackCount(e):t.stackCount,u=i.barThickness==="flex"?xH(e,t,i,c*l):_H(e,t,i,c*l),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(jt(h,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+d;o=u.start+u.chunk*p+u.chunk/2,A=Math.min(a,u.chunk*u.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),A=Math.min(a,t.min*t.ratio);return{base:o-A/2,head:o+A/2,center:o,size:A}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let s=0;for(;s<i;++s)this.getParsed(s)[t.axis]!==null&&!n[s].hidden&&n[s].draw(this._ctx)}}ke(Qy,"id","bar"),ke(Qy,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ke(Qy,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Hy extends ko{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const s=super.parsePrimitiveData(e,t,n,i);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+n).radius;return s}parseArrayData(e,t,n,i){const s=super.parseArrayData(e,t,n,i);for(let a=0;a<s.length;a++){const o=t[n+a];s[a]._custom=jt(o[2],this.resolveDataElementOptions(a+n).radius)}return s}parseObjectData(e,t,n,i){const s=super.parseObjectData(e,t,n,i);for(let a=0;a<s.length;a++){const o=t[n+a];s[a]._custom=jt(o&&o.r&&+o.r,this.resolveDataElementOptions(a+n).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:s}=t,a=this.getParsed(e),o=i.getLabelForValue(a.x),A=s.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+o+", "+A+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const s=i==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:A,includeOptions:l}=this._getSharedOptions(t,i),c=a.axis,u=o.axis;for(let h=t;h<t+n;h++){const d=e[h],p=!s&&this.getParsed(h),f={},y=f[c]=s?a.getPixelForDecimal(.5):a.getPixelForValue(p[c]),b=f[u]=s?o.getBasePixel():o.getPixelForValue(p[u]);f.skip=isNaN(y)||isNaN(b),l&&(f.options=A||this.resolveDataElementOptions(h,d.active?"active":i),s&&(f.options.radius=0)),this.updateElement(d,h,f,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return t!=="active"&&(i.radius=0),i.radius+=jt(n&&n._custom,s),i}}ke(Hy,"id","bubble"),ke(Hy,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ke(Hy,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function TH(r,e,t){let n=1,i=1,s=0,a=0;if(e<xn){const o=r,A=o+e,l=Math.cos(o),c=Math.sin(o),u=Math.cos(A),h=Math.sin(A),d=(S,C,P)=>Up(S,o,A,!0)?1:Math.max(C,C*t,P,P*t),p=(S,C,P)=>Up(S,o,A,!0)?-1:Math.min(C,C*t,P,P*t),f=d(0,l,u),y=d(ui,c,h),b=p(Lr,l,u),B=p(Lr+ui,c,h);n=(f-b)/2,i=(y-B)/2,s=-(f+b)/2,a=-(y+B)/2}return{ratioX:n,ratioY:i,offsetX:s,offsetY:a}}class Gu extends ko{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let s=A=>+n[A];if(fr(n[e])){const{key:A="value"}=this._parsing;s=l=>+Rc(n[l],A)}let a,o;for(a=e,o=e+t;a<o;++a)i._parsed[a]=s(a)}}_getRotation(){return Eo(this.options.rotation-90)}_getCircumference(){return Eo(this.options.circumference)}_getRotationExtents(){let e=xn,t=-xn;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,s=i._getRotation(),a=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),A=Math.min(VQ(this.options.cutout,o),1),l=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:p,offsetY:f}=TH(u,c,A),y=(n.width-a)/h,b=(n.height-a)/d,B=Math.max(Math.min(y,b)/2,0),S=o3(this.options.radius,B),C=Math.max(S*A,0),P=(S-C)/this._getVisibleDatasetWeightTotal();this.offsetX=p*S,this.offsetY=f*S,i.total=this.calculateTotal(),this.outerRadius=S-P*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-P*l,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/xn)}updateElements(e,t,n,i){const s=i==="reset",a=this.chart,o=a.chartArea,l=a.options.animation,c=(o.left+o.right)/2,u=(o.top+o.bottom)/2,h=s&&l.animateScale,d=h?0:this.innerRadius,p=h?0:this.outerRadius,{sharedOptions:f,includeOptions:y}=this._getSharedOptions(t,i);let b=this._getRotation(),B;for(B=0;B<t;++B)b+=this._circumference(B,s);for(B=t;B<t+n;++B){const S=this._circumference(B,s),C=e[B],P={x:c+this.offsetX,y:u+this.offsetY,startAngle:b,endAngle:b+S,circumference:S,outerRadius:p,innerRadius:d};y&&(P.options=f||this.resolveDataElementOptions(B,C.active?"active":i)),b+=S,this.updateElement(C,B,P,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n=0,i;for(i=0;i<t.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(n+=Math.abs(s))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?xn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=Bm(t._parsed[e],n.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,s,a,o,A;if(!e){for(i=0,s=n.data.datasets.length;i<s;++i)if(n.isDatasetVisible(i)){a=n.getDatasetMeta(i),e=a.data,o=a.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)A=o.resolveDataElementOptions(i),A.borderAlign!=="inner"&&(t=Math.max(t,A.borderWidth||0,A.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const s=this.resolveDataElementOptions(n);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(jt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ke(Gu,"id","doughnut"),ke(Gu,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ke(Gu,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ke(Gu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:n,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((A,l)=>{const u=e.getDatasetMeta(0).controller.getStyle(l);return{text:A,fillStyle:u.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(l),lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:u.borderWidth,strokeStyle:u.borderColor,textAlign:i,pointStyle:n,borderRadius:a&&(o||u.borderRadius),index:l}}):[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Vy extends ko{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=t,a=this.chart._animationsDisabled;let{start:o,count:A}=g3(t,i,a);this._drawStart=o,this._drawCount=A,p3(t)&&(o=0,A=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(i,o,A,e)}updateElements(e,t,n,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:A,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),h=a.axis,d=o.axis,{spanGaps:p,segment:f}=this.options,y=Wh(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||i==="none",B=t+n,S=e.length;let C=t>0&&this.getParsed(t-1);for(let P=0;P<S;++P){const M=e[P],L=b?M:{};if(P<t||P>=B){L.skip=!0;continue}const _=this.getParsed(P),v=ir(_[d]),T=L[h]=a.getPixelForValue(_[h],P),E=L[d]=s||v?o.getBasePixel():o.getPixelForValue(A?this.applyStack(o,_,A):_[d],P);L.skip=isNaN(T)||isNaN(E)||v,L.stop=P>0&&Math.abs(_[h]-C[h])>y,f&&(L.parsed=_,L.raw=l.data[P]),u&&(L.options=c||this.resolveDataElementOptions(P,M.active?"active":i)),b||this.updateElement(M,P,L,i),C=_}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ke(Vy,"id","line"),ke(Vy,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ke(Vy,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class rp extends ko{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=Bm(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,t,n,i){return B3.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(i/2,0),a=Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0),o=(s-a)/e.getVisibleDatasetCount();this.outerRadius=s-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,n,i){const s=i==="reset",a=this.chart,A=a.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,u=l.yCenter,h=l.getIndexAngle(0)-.5*Lr;let d=h,p;const f=360/this.countVisibleElements();for(p=0;p<t;++p)d+=this._computeAngle(p,i,f);for(p=t;p<t+n;p++){const y=e[p];let b=d,B=d+this._computeAngle(p,i,f),S=a.getDataVisibility(p)?l.getDistanceFromCenterForValue(this.getParsed(p).r):0;d=B,s&&(A.animateScale&&(S=0),A.animateRotate&&(b=B=h));const C={x:c,y:u,innerRadius:0,outerRadius:S,startAngle:b,endAngle:B,options:this.resolveDataElementOptions(p,y.active?"active":i)};this.updateElement(y,p,C,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Eo(this.resolveDataElementOptions(e,t).angle||n):0}}ke(rp,"id","polarArea"),ke(rp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ke(rp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((s,a)=>{const A=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:A.backgroundColor,strokeStyle:A.borderColor,fontColor:i,lineWidth:A.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Q_ extends Gu{}ke(Q_,"id","pie"),ke(Q_,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class $y extends ko{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return B3.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],s=t.iScale.getLabels();if(n.points=i,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:s.length===i.length,options:a};this.updateElement(n,void 0,o,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const s=this._cachedMeta.rScale,a=i==="reset";for(let o=t;o<t+n;o++){const A=e[o],l=this.resolveDataElementOptions(o,A.active?"active":i),c=s.getPointPositionForValue(o,this.getParsed(o).r),u=a?s.xCenter:c.x,h=a?s.yCenter:c.y,d={x:u,y:h,angle:c.angle,skip:isNaN(u)||isNaN(h),options:l};this.updateElement(A,o,d,i)}}}ke($y,"id","radar"),ke($y,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ke($y,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class jy extends ko{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:s}=t,a=this.getParsed(e),o=i.getLabelForValue(a.x),A=s.getLabelForValue(a.y);return{label:n[e]||"",value:"("+o+", "+A+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:s,count:a}=g3(t,n,i);if(this._drawStart=s,this._drawCount=a,p3(t)&&(s=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:A}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!A._decimated,o.points=n;const l=this.resolveDatasetElementOptions(e);l.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:l},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:A,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=a.axis,p=o.axis,{spanGaps:f,segment:y}=this.options,b=Wh(f)?f:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||s||i==="none";let S=t>0&&this.getParsed(t-1);for(let C=t;C<t+n;++C){const P=e[C],M=this.getParsed(C),L=B?P:{},_=ir(M[p]),v=L[d]=a.getPixelForValue(M[d],C),T=L[p]=s||_?o.getBasePixel():o.getPixelForValue(A?this.applyStack(o,M,A):M[p],C);L.skip=isNaN(v)||isNaN(T)||_,L.stop=C>0&&Math.abs(M[d]-S[d])>b,y&&(L.parsed=M,L.raw=l.data[C]),h&&(L.options=u||this.resolveDataElementOptions(C,P.active?"active":i)),B||this.updateElement(P,C,L,i),S=M}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let A=t.length-1;A>=0;--A)o=Math.max(o,t[A].size(this.resolveDataElementOptions(A))/2);return o>0&&o}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const s=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,s,a)/2}}ke(jy,"id","scatter"),ke(jy,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ke(jy,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var FH=Object.freeze({__proto__:null,BarController:Qy,BubbleController:Hy,DoughnutController:Gu,LineController:Vy,PieController:Q_,PolarAreaController:rp,RadarController:$y,ScatterController:jy});function Cu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class aB{constructor(e){ke(this,"options");this.options=e||{}}static override(e){Object.assign(aB.prototype,e)}init(){}formats(){return Cu()}parse(){return Cu()}format(){return Cu()}add(){return Cu()}diff(){return Cu()}startOf(){return Cu()}endOf(){return Cu()}}var D3={_date:aB};function LH(r,e,t,n){const{controller:i,data:s,_sorted:a}=r,o=i._cachedMeta.iScale,A=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&s.length){const l=o._reversePixels?t8:al;if(n){if(i._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,t-u),d=l(s,e,t+u);return{lo:h.lo,hi:d.hi}}}}else{const c=l(s,e,t);if(A){const{vScale:u}=i._cachedMeta,{_parsed:h}=r,d=h.slice(0,c.lo+1).reverse().findIndex(f=>!ir(f[u.axis]));c.lo-=Math.max(0,d);const p=h.slice(c.hi).findIndex(f=>!ir(f[u.axis]));c.hi+=Math.max(0,p)}return c}}return{lo:0,hi:s.length-1}}function Fw(r,e,t,n,i){const s=r.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,A=s.length;o<A;++o){const{index:l,data:c}=s[o],{lo:u,hi:h}=LH(s[o],e,a,i);for(let d=u;d<=h;++d){const p=c[d];p.skip||n(p,l,d)}}}function PH(r){const e=r.indexOf("x")!==-1,t=r.indexOf("y")!==-1;return function(n,i){const s=e?Math.abs(n.x-i.x):0,a=t?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function o1(r,e,t,n,i){const s=[];return!i&&!r.isPointInArea(e)||Fw(r,t,e,function(o,A,l){!i&&!cA(o,r.chartArea,0)||o.inRange(e.x,e.y,n)&&s.push({element:o,datasetIndex:A,index:l})},!0),s}function NH(r,e,t,n){let i=[];function s(a,o,A){const{startAngle:l,endAngle:c}=a.getProps(["startAngle","endAngle"],n),{angle:u}=c3(a,{x:e.x,y:e.y});Up(u,l,c)&&i.push({element:a,datasetIndex:o,index:A})}return Fw(r,t,e,s),i}function DH(r,e,t,n,i,s){let a=[];const o=PH(t);let A=Number.POSITIVE_INFINITY;function l(c,u,h){const d=c.inRange(e.x,e.y,i);if(n&&!d)return;const p=c.getCenterPoint(i);if(!(!!s||r.isPointInArea(p))&&!d)return;const y=o(e,p);y<A?(a=[{element:c,datasetIndex:u,index:h}],A=y):y===A&&a.push({element:c,datasetIndex:u,index:h})}return Fw(r,t,e,l),a}function A1(r,e,t,n,i,s){return!s&&!r.isPointInArea(e)?[]:t==="r"&&!n?NH(r,e,t,i):DH(r,e,t,n,i,s)}function YE(r,e,t,n,i){const s=[],a=t==="x"?"inXRange":"inYRange";let o=!1;return Fw(r,t,e,(A,l,c)=>{A[a]&&A[a](e[t],i)&&(s.push({element:A,datasetIndex:l,index:c}),o=o||A.inRange(e.x,e.y,i))}),n&&!o?[]:s}var RH={modes:{index(r,e,t,n){const i=rA(e,r),s=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?o1(r,i,s,n,a):A1(r,i,s,!1,n,a),A=[];return o.length?(r.getSortedVisibleDatasetMetas().forEach(l=>{const c=o[0].index,u=l.data[c];u&&!u.skip&&A.push({element:u,datasetIndex:l.index,index:c})}),A):[]},dataset(r,e,t,n){const i=rA(e,r),s=t.axis||"xy",a=t.includeInvisible||!1;let o=t.intersect?o1(r,i,s,n,a):A1(r,i,s,!1,n,a);if(o.length>0){const A=o[0].datasetIndex,l=r.getDatasetMeta(A).data;o=[];for(let c=0;c<l.length;++c)o.push({element:l[c],datasetIndex:A,index:c})}return o},point(r,e,t,n){const i=rA(e,r),s=t.axis||"xy",a=t.includeInvisible||!1;return o1(r,i,s,n,a)},nearest(r,e,t,n){const i=rA(e,r),s=t.axis||"xy",a=t.includeInvisible||!1;return A1(r,i,s,t.intersect,n,a)},x(r,e,t,n){const i=rA(e,r);return YE(r,i,"x",t.intersect,n)},y(r,e,t,n){const i=rA(e,r);return YE(r,i,"y",t.intersect,n)}}};const R3=["left","top","right","bottom"];function og(r,e){return r.filter(t=>t.pos===e)}function XE(r,e){return r.filter(t=>R3.indexOf(t.pos)===-1&&t.box.axis===e)}function Ag(r,e){return r.sort((t,n)=>{const i=e?n:t,s=e?t:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function UH(r){const e=[];let t,n,i,s,a,o;for(t=0,n=(r||[]).length;t<n;++t)i=r[t],{position:s,options:{stack:a,stackWeight:o=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return e}function MH(r){const e={};for(const t of r){const{stack:n,pos:i,stackWeight:s}=t;if(!n||!R3.includes(i))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function OH(r,e){const t=MH(r),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let s,a,o;for(s=0,a=r.length;s<a;++s){o=r[s];const{fullSize:A}=o.box,l=t[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*n:A&&e.availableWidth,o.height=i):(o.width=n,o.height=c?c*i:A&&e.availableHeight)}return t}function QH(r){const e=UH(r),t=Ag(e.filter(l=>l.box.fullSize),!0),n=Ag(og(e,"left"),!0),i=Ag(og(e,"right")),s=Ag(og(e,"top"),!0),a=Ag(og(e,"bottom")),o=XE(e,"x"),A=XE(e,"y");return{fullSize:t,leftAndTop:n.concat(s),rightAndBottom:i.concat(A).concat(a).concat(o),chartArea:og(e,"chartArea"),vertical:n.concat(i).concat(A),horizontal:s.concat(a).concat(o)}}function JE(r,e,t,n){return Math.max(r[t],e[t])+Math.max(r[n],e[n])}function U3(r,e){r.top=Math.max(r.top,e.top),r.left=Math.max(r.left,e.left),r.bottom=Math.max(r.bottom,e.bottom),r.right=Math.max(r.right,e.right)}function HH(r,e,t,n){const{pos:i,box:s}=t,a=r.maxPadding;if(!fr(i)){t.size&&(r[i]-=t.size);const u=n[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?s.height:s.width),t.size=u.size/u.count,r[i]+=t.size}s.getPadding&&U3(a,s.getPadding());const o=Math.max(0,e.outerWidth-JE(a,r,"left","right")),A=Math.max(0,e.outerHeight-JE(a,r,"top","bottom")),l=o!==r.w,c=A!==r.h;return r.w=o,r.h=A,t.horizontal?{same:l,other:c}:{same:c,other:l}}function VH(r){const e=r.maxPadding;function t(n){const i=Math.max(e[n]-r[n],0);return r[n]+=i,i}r.y+=t("top"),r.x+=t("left"),t("right"),t("bottom")}function $H(r,e){const t=e.maxPadding;function n(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(e[a],t[a])}),s}return n(r?["left","right"]:["top","bottom"])}function Pg(r,e,t,n){const i=[];let s,a,o,A,l,c;for(s=0,a=r.length,l=0;s<a;++s){o=r[s],A=o.box,A.update(o.width||e.w,o.height||e.h,$H(o.horizontal,e));const{same:u,other:h}=HH(e,t,o,n);l|=u&&i.length,c=c||h,A.fullSize||i.push(o)}return l&&Pg(i,e,t,n)||c}function L0(r,e,t,n,i){r.top=t,r.left=e,r.right=e+n,r.bottom=t+i,r.width=n,r.height=i}function ZE(r,e,t,n){const i=t.padding;let{x:s,y:a}=e;for(const o of r){const A=o.box,l=n[o.stack]||{placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const u=e.w*c,h=l.size||A.height;Rp(l.start)&&(a=l.start),A.fullSize?L0(A,i.left,a,t.outerWidth-i.right-i.left,h):L0(A,e.left+l.placed,a,u,h),l.start=a,l.placed+=u,a=A.bottom}else{const u=e.h*c,h=l.size||A.width;Rp(l.start)&&(s=l.start),A.fullSize?L0(A,s,i.top,h,t.outerHeight-i.bottom-i.top):L0(A,s,e.top+l.placed,h,u),l.start=s,l.placed+=u,s=A.right}}e.x=s,e.y=a}var Fs={addBox(r,e){r.boxes||(r.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},r.boxes.push(e)},removeBox(r,e){const t=r.boxes?r.boxes.indexOf(e):-1;t!==-1&&r.boxes.splice(t,1)},configure(r,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(r,e,t,n){if(!r)return;const i=hs(r.options.layout.padding),s=Math.max(e-i.width,0),a=Math.max(t-i.height,0),o=QH(r.boxes),A=o.vertical,l=o.horizontal;cr(r.boxes,f=>{typeof f.beforeLayout=="function"&&f.beforeLayout()});const c=A.reduce((f,y)=>y.box.options&&y.box.options.display===!1?f:f+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/c,hBoxMaxHeight:a/2}),h=Object.assign({},i);U3(h,hs(n));const d=Object.assign({maxPadding:h,w:s,h:a,x:i.left,y:i.top},i),p=OH(A.concat(l),u);Pg(o.fullSize,d,u,p),Pg(A,d,u,p),Pg(l,d,u,p)&&Pg(A,d,u,p),VH(d),ZE(o.leftAndTop,d,u,p),d.x+=d.w,d.y+=d.h,ZE(o.rightAndBottom,d,u,p),r.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},cr(o.chartArea,f=>{const y=f.box;Object.assign(y,r.chartArea),y.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class M3{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class jH extends M3{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Gy="$chartjs",GH={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},eS=r=>r===null||r==="";function KH(r,e){const t=r.style,n=r.getAttribute("height"),i=r.getAttribute("width");if(r[Gy]={initial:{height:n,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",eS(i)){const s=UE(r,"width");s!==void 0&&(r.width=s)}if(eS(n))if(r.style.height==="")r.height=r.width/(e||2);else{const s=UE(r,"height");s!==void 0&&(r.height=s)}return r}const O3=q8?{passive:!0}:!1;function zH(r,e,t){r&&r.addEventListener(e,t,O3)}function qH(r,e,t){r&&r.canvas&&r.canvas.removeEventListener(e,t,O3)}function WH(r,e){const t=GH[r.type]||r.type,{x:n,y:i}=rA(r,e);return{type:t,chart:e,native:r,x:n!==void 0?n:null,y:i!==void 0?i:null}}function Tb(r,e){for(const t of r)if(t===e||t.contains(e))return!0}function YH(r,e,t){const n=r.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||Tb(o.addedNodes,n),a=a&&!Tb(o.removedNodes,n);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function XH(r,e,t){const n=r.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||Tb(o.removedNodes,n),a=a&&!Tb(o.addedNodes,n);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Op=new Map;let tS=0;function Q3(){const r=window.devicePixelRatio;r!==tS&&(tS=r,Op.forEach((e,t)=>{t.currentDevicePixelRatio!==r&&e()}))}function JH(r,e){Op.size||window.addEventListener("resize",Q3),Op.set(r,e)}function ZH(r){Op.delete(r),Op.size||window.removeEventListener("resize",Q3)}function e7(r,e,t){const n=r.canvas,i=n&&sB(n);if(!i)return;const s=f3((o,A)=>{const l=i.clientWidth;t(o,A),l<i.clientWidth&&t()},window),a=new ResizeObserver(o=>{const A=o[0],l=A.contentRect.width,c=A.contentRect.height;l===0&&c===0||s(l,c)});return a.observe(i),JH(r,s),a}function l1(r,e,t){t&&t.disconnect(),e==="resize"&&ZH(r)}function t7(r,e,t){const n=r.canvas,i=f3(s=>{r.ctx!==null&&t(WH(s,r))},r);return zH(n,e,i),i}class r7 extends M3{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(KH(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Gy])return!1;const n=t[Gy].initial;["height","width"].forEach(s=>{const a=n[s];ir(a)?t.removeAttribute(s):t.setAttribute(s,a)});const i=n.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[Gy],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),a={attach:YH,detach:XH,resize:e7}[t]||t7;i[t]=a(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:l1,detach:l1,resize:l1}[t]||qH)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return z8(e,t,n,i)}isAttached(e){const t=e&&sB(e);return!!(t&&t.isConnected)}}function n7(r){return!iB()||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?jH:r7}var Oy;let xl=(Oy=class{constructor(){ke(this,"x");ke(this,"y");ke(this,"active",!1);ke(this,"options");ke(this,"$animations")}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Wh(this.x)&&Wh(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(s=>{i[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),i}},ke(Oy,"defaults",{}),ke(Oy,"defaultRoutes"),Oy);function i7(r,e){const t=r.options.ticks,n=s7(r),i=Math.min(t.maxTicksLimit||n,n),s=t.major.enabled?o7(e):[],a=s.length,o=s[0],A=s[a-1],l=[];if(a>i)return A7(e,l,s,a/i),l;const c=a7(s,e,i);if(a>0){let u,h;const d=a>1?Math.round((A-o)/(a-1)):null;for(P0(e,l,c,ir(d)?0:o-d,o),u=0,h=a-1;u<h;u++)P0(e,l,c,s[u],s[u+1]);return P0(e,l,c,A,ir(d)?e.length:A+d),l}return P0(e,l,c),l}function s7(r){const e=r.options.offset,t=r._tickSize(),n=r._length/t+(e?0:1),i=r._maxLength/t;return Math.floor(Math.min(n,i))}function a7(r,e,t){const n=l7(r),i=e.length/t;if(!n)return Math.max(i,1);const s=YQ(n);for(let a=0,o=s.length-1;a<o;a++){const A=s[a];if(A>i)return A}return Math.max(i,1)}function o7(r){const e=[];let t,n;for(t=0,n=r.length;t<n;t++)r[t].major&&e.push(t);return e}function A7(r,e,t,n){let i=0,s=t[0],a;for(n=Math.ceil(n),a=0;a<r.length;a++)a===s&&(e.push(r[a]),i++,s=t[i*n])}function P0(r,e,t,n,i){const s=jt(n,0),a=Math.min(jt(i,r.length),r.length);let o=0,A,l,c;for(t=Math.ceil(t),i&&(A=i-n,t=A/Math.floor(A/t)),c=s;c<0;)o++,c=Math.round(s+o*t);for(l=Math.max(s,0);l<a;l++)l===c&&(e.push(r[l]),o++,c=Math.round(s+o*t))}function l7(r){const e=r.length;let t,n;if(e<2)return!1;for(n=r[0],t=1;t<e;++t)if(r[t]-r[t-1]!==n)return!1;return n}const c7=r=>r==="left"?"right":r==="right"?"left":r,rS=(r,e,t)=>e==="top"||e==="left"?r[e]+t:r[e]-t,nS=(r,e)=>Math.min(e||r,r);function iS(r,e){const t=[],n=r.length/e,i=r.length;let s=0;for(;s<i;s+=n)t.push(r[Math.floor(s)]);return t}function u7(r,e,t){const n=r.ticks.length,i=Math.min(e,n-1),s=r._startPixel,a=r._endPixel,o=1e-6;let A=r.getPixelForTick(i),l;if(!(t&&(n===1?l=Math.max(A-s,a-A):e===0?l=(r.getPixelForTick(1)-A)/2:l=(A-r.getPixelForTick(i-1))/2,A+=i<e?l:-l,A<s-o||A>a+o)))return A}function d7(r,e){cr(r,t=>{const n=t.gc,i=n.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[n[s]];n.splice(0,i)}})}function lg(r){return r.drawTicks?r.tickLength:0}function sS(r,e){if(!r.display)return 0;const t=vi(r.font,e),n=hs(r.padding);return(wn(r.text)?r.text.length:1)*t.lineHeight+n.height}function h7(r,e){return ru(r,{scale:e,type:"scale"})}function f7(r,e,t){return ru(r,{tick:t,index:e,type:"tick"})}function g7(r,e,t){let n=Jx(r);return(t&&e!=="right"||!t&&e==="right")&&(n=c7(n)),n}function p7(r,e,t,n){const{top:i,left:s,bottom:a,right:o,chart:A}=r,{chartArea:l,scales:c}=A;let u=0,h,d,p;const f=a-i,y=o-s;if(r.isHorizontal()){if(d=Cs(n,s,o),fr(t)){const b=Object.keys(t)[0],B=t[b];p=c[b].getPixelForValue(B)+f-e}else t==="center"?p=(l.bottom+l.top)/2+f-e:p=rS(r,t,e);h=o-s}else{if(fr(t)){const b=Object.keys(t)[0],B=t[b];d=c[b].getPixelForValue(B)-y+e}else t==="center"?d=(l.left+l.right)/2-y+e:d=rS(r,t,e);p=Cs(n,a,i),u=t==="left"?-ui:ui}return{titleX:d,titleY:p,maxWidth:h,rotation:u}}class Ld extends xl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Ma(e,Number.POSITIVE_INFINITY),t=Ma(t,Number.NEGATIVE_INFINITY),n=Ma(n,Number.POSITIVE_INFINITY),i=Ma(i,Number.NEGATIVE_INFINITY),{min:Ma(e,n),max:Ma(t,i),minDefined:zn(e),maxDefined:zn(t)}}getMinMax(e){let{min:t,max:n,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:t,max:n};const o=this.getMatchingVisibleMetas();for(let A=0,l=o.length;A<l;++A)a=o[A].controller.getMinMax(this,e),i||(t=Math.min(t,a.min)),s||(n=Math.max(n,a.max));return t=s&&t>n?n:t,n=i&&t>n?t:n,{min:Ma(t,Ma(n,t)),max:Ma(n,Ma(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$t(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=C8(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const A=o<this.ticks.length;this._convertTicksToLabels(A?iS(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=i7(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),A&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$t(this.options.afterUpdate,[this])}beforeSetDimensions(){$t(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$t(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),$t(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$t(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,s;for(n=0,i=e.length;n<i;n++)s=e[n],s.label=$t(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){$t(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$t(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=nS(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let a=i,o,A,l;if(!this._isVisible()||!t.display||i>=s||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Wi(this.chart.width-u,0,this.maxWidth);o=e.offset?this.maxWidth/n:d/(n-1),u+6>o&&(o=d/(n-(e.offset?.5:1)),A=this.maxHeight-lg(e.grid)-t.padding-sS(e.title,this.chart.options.font),l=Math.sqrt(u*u+h*h),a=Yx(Math.min(Math.asin(Wi((c.highest.height+6)/o,-1,1)),Math.asin(Wi(A/l,-1,1))-Math.asin(Wi(h/l,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){$t(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$t(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const A=sS(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=lg(s)+A):(e.height=this.maxHeight,e.width=lg(s)+A),n.display&&this.ticks.length){const{first:l,last:c,widest:u,highest:h}=this._getLabelSizes(),d=n.padding*2,p=Eo(this.labelRotation),f=Math.cos(p),y=Math.sin(p);if(o){const b=n.mirror?0:y*u.width+f*h.height;e.height=Math.min(this.maxHeight,e.height+b+d)}else{const b=n.mirror?0:f*u.width+y*h.height;e.width=Math.min(this.maxWidth,e.width+b+d)}this._calculatePadding(l,c,y,f)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:s,padding:a},position:o}=this.options,A=this.labelRotation!==0,l=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;A?l?(h=i*e.width,d=n*t.height):(h=n*e.height,d=i*t.width):s==="start"?d=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,d=t.width/2),this.paddingLeft=Math.max((h-c+a)*this.width/(this.width-c),0),this.paddingRight=Math.max((d-u+a)*this.width/(this.width-u),0)}else{let c=t.height/2,u=e.height/2;s==="start"?(c=0,u=e.height):s==="end"&&(c=t.height,u=0),this.paddingTop=c+a,this.paddingBottom=u+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$t(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)ir(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=iS(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],A=Math.floor(t/nS(t,n));let l=0,c=0,u,h,d,p,f,y,b,B,S,C,P;for(u=0;u<t;u+=A){if(p=e[u].label,f=this._resolveTickFontOptions(u),i.font=y=f.string,b=s[y]=s[y]||{data:{},gc:[]},B=f.lineHeight,S=C=0,!ir(p)&&!wn(p))S=Ib(i,b.data,b.gc,S,p),C=B;else if(wn(p))for(h=0,d=p.length;h<d;++h)P=p[h],!ir(P)&&!wn(P)&&(S=Ib(i,b.data,b.gc,S,P),C+=B);a.push(S),o.push(C),l=Math.max(S,l),c=Math.max(C,c)}d7(s,t);const M=a.indexOf(l),L=o.indexOf(c),_=v=>({width:a[v]||0,height:o[v]||0});return{first:_(0),last:_(t-1),widest:_(M),highest:_(L),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return e8(this._alignToPixels?Bu(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=f7(this.getContext(),e,n))}return this.$context||(this.$context=h7(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Eo(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,A=s?s.highest.height+a:0;return this.isHorizontal()?A*n>o*i?o/n:A/i:A*i<o*n?A/n:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:s,position:a,border:o}=i,A=s.offset,l=this.isHorizontal(),u=this.ticks.length+(A?1:0),h=lg(s),d=[],p=o.setContext(this.getContext()),f=p.display?p.width:0,y=f/2,b=function(ue){return Bu(n,ue,f)};let B,S,C,P,M,L,_,v,T,E,x,F;if(a==="top")B=b(this.bottom),L=this.bottom-h,v=B-y,E=b(e.top)+y,F=e.bottom;else if(a==="bottom")B=b(this.top),E=e.top,F=b(e.bottom)-y,L=B+y,v=this.top+h;else if(a==="left")B=b(this.right),M=this.right-h,_=B-y,T=b(e.left)+y,x=e.right;else if(a==="right")B=b(this.left),T=e.left,x=b(e.right)-y,M=B+y,_=this.left+h;else if(t==="x"){if(a==="center")B=b((e.top+e.bottom)/2+.5);else if(fr(a)){const ue=Object.keys(a)[0],ne=a[ue];B=b(this.chart.scales[ue].getPixelForValue(ne))}E=e.top,F=e.bottom,L=B+y,v=L+h}else if(t==="y"){if(a==="center")B=b((e.left+e.right)/2);else if(fr(a)){const ue=Object.keys(a)[0],ne=a[ue];B=b(this.chart.scales[ue].getPixelForValue(ne))}M=B-y,_=M-h,T=e.left,x=e.right}const k=jt(i.ticks.maxTicksLimit,u),Z=Math.max(1,Math.ceil(u/k));for(S=0;S<u;S+=Z){const ue=this.getContext(S),ne=s.setContext(ue),j=o.setContext(ue),G=ne.lineWidth,pe=ne.color,q=j.dash||[],N=j.dashOffset,Q=ne.tickWidth,V=ne.tickColor,X=ne.tickBorderDash||[],Ae=ne.tickBorderDashOffset;C=u7(this,S,A),C!==void 0&&(P=Bu(n,C,G),l?M=_=T=x=P:L=v=E=F=P,d.push({tx1:M,ty1:L,tx2:_,ty2:v,x1:T,y1:E,x2:x,y2:F,width:G,color:pe,borderDash:q,borderDashOffset:N,tickWidth:Q,tickColor:V,tickBorderDash:X,tickBorderDashOffset:Ae}))}return this._ticksLength=u,this._borderValue=B,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:s}=n,a=this.isHorizontal(),o=this.ticks,{align:A,crossAlign:l,padding:c,mirror:u}=s,h=lg(n.grid),d=h+c,p=u?-c:d,f=-Eo(this.labelRotation),y=[];let b,B,S,C,P,M,L,_,v,T,E,x,F="middle";if(i==="top")M=this.bottom-p,L=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+p,L=this._getXAxisLabelAlignment();else if(i==="left"){const Z=this._getYAxisLabelAlignment(h);L=Z.textAlign,P=Z.x}else if(i==="right"){const Z=this._getYAxisLabelAlignment(h);L=Z.textAlign,P=Z.x}else if(t==="x"){if(i==="center")M=(e.top+e.bottom)/2+d;else if(fr(i)){const Z=Object.keys(i)[0],ue=i[Z];M=this.chart.scales[Z].getPixelForValue(ue)+d}L=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")P=(e.left+e.right)/2-d;else if(fr(i)){const Z=Object.keys(i)[0],ue=i[Z];P=this.chart.scales[Z].getPixelForValue(ue)}L=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(A==="start"?F="top":A==="end"&&(F="bottom"));const k=this._getLabelSizes();for(b=0,B=o.length;b<B;++b){S=o[b],C=S.label;const Z=s.setContext(this.getContext(b));_=this.getPixelForTick(b)+s.labelOffset,v=this._resolveTickFontOptions(b),T=v.lineHeight,E=wn(C)?C.length:1;const ue=E/2,ne=Z.color,j=Z.textStrokeColor,G=Z.textStrokeWidth;let pe=L;a?(P=_,L==="inner"&&(b===B-1?pe=this.options.reverse?"left":"right":b===0?pe=this.options.reverse?"right":"left":pe="center"),i==="top"?l==="near"||f!==0?x=-E*T+T/2:l==="center"?x=-k.highest.height/2-ue*T+T:x=-k.highest.height+T/2:l==="near"||f!==0?x=T/2:l==="center"?x=k.highest.height/2-ue*T:x=k.highest.height-E*T,u&&(x*=-1),f!==0&&!Z.showLabelBackdrop&&(P+=T/2*Math.sin(f))):(M=_,x=(1-E)*T/2);let q;if(Z.showLabelBackdrop){const N=hs(Z.backdropPadding),Q=k.heights[b],V=k.widths[b];let X=x-N.top,Ae=0-N.left;switch(F){case"middle":X-=Q/2;break;case"bottom":X-=Q;break}switch(L){case"center":Ae-=V/2;break;case"right":Ae-=V;break;case"inner":b===B-1?Ae-=V:b>0&&(Ae-=V/2);break}q={left:Ae,top:X,width:V+N.width,height:Q+N.height,color:Z.backdropColor}}y.push({label:C,font:v,textOffset:x,options:{rotation:f,color:ne,strokeColor:j,strokeWidth:G,textAlign:pe,textBaseline:F,translation:[P,M],backdrop:q}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Eo(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=e+s,A=a.widest.width;let l,c;return t==="left"?i?(c=this.right+s,n==="near"?l="left":n==="center"?(l="center",c+=A/2):(l="right",c+=A)):(c=this.right-o,n==="near"?l="right":n==="center"?(l="center",c-=A/2):(l="left",c=this.left)):t==="right"?i?(c=this.left+s,n==="near"?l="right":n==="center"?(l="center",c-=A/2):(l="left",c-=A)):(c=this.left+o,n==="near"?l="left":n==="center"?(l="center",c+=A/2):(l="right",c=this.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const o=(A,l,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(A.x,A.y),n.lineTo(l.x,l.y),n.stroke(),n.restore())};if(t.display)for(s=0,a=i.length;s<a;++s){const A=i[s];t.drawOnChartArea&&o({x:A.x1,y:A.y1},{x:A.x2,y:A.y2},A),t.drawTicks&&o({x:A.tx1,y:A.ty1},{x:A.tx2,y:A.ty2},{color:A.tickColor,width:A.tickWidth,borderDash:A.tickBorderDash,borderDashOffset:A.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,s=n.setContext(this.getContext()),a=n.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,A=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Bu(e,this.left,a)-a/2,c=Bu(e,this.right,o)+o/2,u=h=A):(u=Bu(e,this.top,a)-a/2,h=Bu(e,this.bottom,o)+o/2,l=c=A),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Iw(n,i);const s=this.getLabelItems(e);for(const a of s){const o=a.options,A=a.font,l=a.label,c=a.textOffset;fd(n,l,0,c,A,o)}i&&kw(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const s=vi(n.font),a=hs(n.padding),o=n.align;let A=s.lineHeight/2;t==="bottom"||t==="center"||fr(t)?(A+=a.bottom,wn(n.text)&&(A+=s.lineHeight*(n.text.length-1))):A+=a.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=p7(this,A,t,o);fd(e,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:h,textAlign:g7(o,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=jt(e.grid&&e.grid.z,-1),i=jt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ld.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let s,a;for(s=0,a=t.length;s<a;++s){const o=t[s];o[n]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return vi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class N0{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;b7(t)&&(n=this.register(t));const i=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,m7(e,a,n),this.override&&Bn.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Bn[i]&&(delete Bn[i][n],this.override&&delete hd[n])}}function m7(r,e,t){const n=CA(Object.create(null),[t?Bn.get(t):{},Bn.get(e),r.defaults]);Bn.set(e,n),r.defaultRoutes&&y7(e,r.defaultRoutes),r.descriptors&&Bn.describe(e,r.descriptors)}function y7(r,e){Object.keys(e).forEach(t=>{const n=t.split("."),i=n.pop(),s=[r].concat(n).join("."),a=e[t].split("."),o=a.pop(),A=a.join(".");Bn.route(s,i,A,o)})}function b7(r){return"id"in r&&"defaults"in r}class w7{constructor(){this.controllers=new N0(ko,"datasets",!0),this.elements=new N0(xl,"elements"),this.plugins=new N0(Object,"plugins"),this.scales=new N0(Ld,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(i=>{const s=n||this._getRegistryForType(i);n||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):cr(i,a=>{const o=n||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,n){const i=Wx(e);$t(n["before"+i],[],n),t[e](n),$t(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var eA=new w7;class v7{constructor(){this._init=void 0}notify(e,t,n,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(s,e,t,n);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,t,n,i){i=i||{};for(const s of e){const a=s.plugin,o=a[n],A=[t,i,s.options];if($t(o,A,a)===!1&&i.cancelable)return!1}return!0}invalidate(){ir(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=jt(n.options&&n.options.plugins,{}),s=_7(n);return i===!1&&!t?[]:B7(e,s,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(s,a)=>s.filter(o=>!a.some(A=>o.plugin.id===A.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function _7(r){const e={},t=[],n=Object.keys(eA.plugins.items);for(let s=0;s<n.length;s++)t.push(eA.getPlugin(n[s]));const i=r.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function x7(r,e){return!e&&r===!1?null:r===!0?{}:r}function B7(r,{plugins:e,localIds:t},n,i){const s=[],a=r.getContext();for(const o of e){const A=o.id,l=x7(n[A],i);l!==null&&s.push({plugin:o,options:C7(r.config,{plugin:o,local:t[A]},l,a)})}return s}function C7(r,{plugin:e,local:t},n,i){const s=r.pluginScopeKeys(e),a=r.getOptionScopes(n,s);return t&&e.defaults&&a.push(e.defaults),r.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function H_(r,e){const t=Bn.datasets[r]||{};return((e.datasets||{})[r]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function E7(r,e){let t=r;return r==="_index_"?t=e:r==="_value_"&&(t=e==="x"?"y":"x"),t}function S7(r,e){return r===e?"_index_":"_value_"}function aS(r){if(r==="x"||r==="y"||r==="r")return r}function I7(r){if(r==="top"||r==="bottom")return"x";if(r==="left"||r==="right")return"y"}function V_(r,...e){if(aS(r))return r;for(const t of e){const n=t.axis||I7(t.position)||r.length>1&&aS(r[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function oS(r,e,t){if(t[e+"AxisID"]===r)return{axis:e}}function k7(r,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(n=>n.xAxisID===r||n.yAxisID===r);if(t.length)return oS(r,"x",t[0])||oS(r,"y",t[0])}return{}}function T7(r,e){const t=hd[r.type]||{scales:{}},n=e.scales||{},i=H_(r.type,e),s=Object.create(null);return Object.keys(n).forEach(a=>{const o=n[a];if(!fr(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const A=V_(a,o,k7(a,r),Bn.scales[o.type]),l=S7(A,i),c=t.scales||{};s[a]=Zg(Object.create(null),[{axis:A},o,c[A],c[l]])}),r.data.datasets.forEach(a=>{const o=a.type||r.type,A=a.indexAxis||H_(o,e),c=(hd[o]||{}).scales||{};Object.keys(c).forEach(u=>{const h=E7(u,A),d=a[h+"AxisID"]||h;s[d]=s[d]||Object.create(null),Zg(s[d],[{axis:h},n[d],c[u]])})}),Object.keys(s).forEach(a=>{const o=s[a];Zg(o,[Bn.scales[o.type],Bn.scale])}),s}function H3(r){const e=r.options||(r.options={});e.plugins=jt(e.plugins,{}),e.scales=T7(r,e)}function V3(r){return r=r||{},r.datasets=r.datasets||[],r.labels=r.labels||[],r}function F7(r){return r=r||{},r.data=V3(r.data),H3(r),r}const AS=new Map,$3=new Set;function D0(r,e){let t=AS.get(r);return t||(t=e(),AS.set(r,t),$3.add(t)),t}const cg=(r,e,t)=>{const n=Rc(e,t);n!==void 0&&r.add(n)};class L7{constructor(e){this._config=F7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=V3(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),H3(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return D0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return D0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return D0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return D0(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return(!i||t)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:s}=this,a=this._cachedScopes(e,n),o=a.get(t);if(o)return o;const A=new Set;t.forEach(c=>{e&&(A.add(e),c.forEach(u=>cg(A,e,u))),c.forEach(u=>cg(A,i,u)),c.forEach(u=>cg(A,hd[s]||{},u)),c.forEach(u=>cg(A,Bn,u)),c.forEach(u=>cg(A,M_,u))});const l=Array.from(A);return l.length===0&&l.push(Object.create(null)),$3.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,hd[t]||{},Bn.datasets[t]||{},{type:t},Bn,M_]}resolveNamedOptions(e,t,n,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=lS(this._resolverCache,e,i);let A=a;if(N7(a,t)){s.$shared=!1,n=Uc(n)?n():n;const l=this.createResolver(e,n,o);A=Yh(a,n,l)}for(const l of t)s[l]=A[l];return s}createResolver(e,t,n=[""],i){const{resolver:s}=lS(this._resolverCache,e,n);return fr(t)?Yh(s,t,void 0,i):s}}function lS(r,e,t){let n=r.get(e);n||(n=new Map,r.set(e,n));const i=t.join();let s=n.get(i);return s||(s={resolver:tB(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},n.set(i,s)),s}const P7=r=>fr(r)&&Object.getOwnPropertyNames(r).some(e=>Uc(r[e]));function N7(r,e){const{isScriptable:t,isIndexable:n}=w3(r);for(const i of e){const s=t(i),a=n(i),o=(a||s)&&r[i];if(s&&(Uc(o)||P7(o))||a&&wn(o))return!0}return!1}var D7="4.5.1";const R7=["top","bottom","left","right","chartArea"];function cS(r,e){return r==="top"||r==="bottom"||R7.indexOf(r)===-1&&e==="x"}function uS(r,e){return function(t,n){return t[r]===n[r]?t[e]-n[e]:t[r]-n[r]}}function dS(r){const e=r.chart,t=e.options.animation;e.notifyPlugins("afterRender"),$t(t&&t.onComplete,[r],e)}function U7(r){const e=r.chart,t=e.options.animation;$t(t&&t.onProgress,[r],e)}function j3(r){return iB()&&typeof r=="string"?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}const Ky={},hS=r=>{const e=j3(r);return Object.values(Ky).filter(t=>t.canvas===e).pop()};function M7(r,e,t){const n=Object.keys(r);for(const i of n){const s=+i;if(s>=e){const a=r[i];delete r[i],(t>0||s>e)&&(r[s+t]=a)}}}function O7(r,e,t,n){return!t||r.type==="mouseout"?null:n?e:r}var sc;let Sf=(sc=class{static register(...e){eA.add(...e),fS()}static unregister(...e){eA.remove(...e),fS()}constructor(e,t){const n=this.config=new L7(t),i=j3(e),s=hS(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||n7(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,a.aspectRatio),A=o&&o.canvas,l=A&&A.height,c=A&&A.width;if(this.id=HQ(),this.ctx=o,this.canvas=A,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new v7,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=i8(u=>this.update(u),a.resizeDelay||0),this._dataChanges=[],Ky[this.id]=this,!o||!A){console.error("Failed to create chart: can't acquire context from the given item");return}ZA.listen(this,"complete",dS),ZA.listen(this,"progress",U7),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:s}=this;return ir(e)?t&&s?s:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return eA}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():RE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return PE(this.canvas,this.ctx),this}stop(){return ZA.stop(this),this}resize(e,t){ZA.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,t,s),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),A=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,RE(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),$t(n.onResize,[this,a],this),this.attached&&this._doResize(A)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};cr(t,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{});let s=[];t&&(s=s.concat(Object.keys(t).map(a=>{const o=t[a],A=V_(a,o),l=A==="r",c=A==="x";return{options:o,dposition:l?"chartArea":c?"bottom":"left",dtype:l?"radialLinear":c?"category":"linear"}}))),cr(s,a=>{const o=a.options,A=o.id,l=V_(A,o),c=jt(o.type,a.dtype);(o.position===void 0||cS(o.position,l)!==cS(a.dposition))&&(o.position=a.dposition),i[A]=!0;let u=null;if(A in n&&n[A].type===c)u=n[A];else{const h=eA.getScale(c);u=new h({id:A,type:c,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(o,e)}),cr(i,(a,o)=>{a||delete n[o]}),cr(n,a=>{Fs.configure(this,a,a.options),Fs.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((i,s)=>i.index-s.index),n>t){for(let i=t;i<n;++i)this._destroyDatasetMeta(i);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(uS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,i)=>{t.filter(s=>s===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const s=t[n];let a=this.getDatasetMeta(n);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=s.indexAxis||H_(o,this.options),a.order=s.order||0,a.index=n,a.label=""+s.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const A=eA.getController(o),{datasetElementType:l,dataElementType:c}=Bn.datasets[o];Object.assign(A,{dataElementType:eA.getElement(c),datasetElementType:l&&eA.getElement(l)}),a.controller=new A(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){cr(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:u}=this.getDatasetMeta(l),h=!i&&s.indexOf(u)===-1;u.buildOrUpdateElements(h),a=Math.max(+u.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),i||cr(s,l=>{l.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(uS("z","_idx"));const{_active:o,_lastEvent:A}=this;A?this._eventHandler(A,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){cr(this.scales,e=>{Fs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!BE(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:s}of t){const a=n==="_removeElements"?-s:s;M7(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=s=>new Set(e.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=n(0);for(let s=1;s<t;s++)if(!BE(i,n(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fs.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],cr(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Uc(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ZA.has(this)?this.attached&&!ZA.running(this)&&ZA.start(this):(this.draw(),dS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,s;for(i=0,s=t.length;i<s;++i){const a=t[i];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=F3(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&Iw(t,i),e.controller.draw(),i&&kw(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return cA(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const s=RH.modes[t];return typeof s=="function"?s(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=ru(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,i);Rp(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(s,{visible:n}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ZA.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),PE(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Ky[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};cr(this.options.events,s=>n(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(A,l)=>{t.addEventListener(this,A,l),e[A]=l},i=(A,l)=>{e[A]&&(t.removeEventListener(this,A,l),delete e[A])},s=(A,l)=>{this.canvas&&this.resize(A,l)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){cr(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},cr(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let s,a,o,A;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,A=e.length;o<A;++o){a=e[o];const l=a&&this.getDatasetMeta(a.datasetIndex).controller;l&&l[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!Cb(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){const i=this.options.hover,s=(A,l)=>A.filter(c=>!l.some(u=>c.datasetIndex===u.datasetIndex&&c.index===u.index)),a=s(t,e),o=n?e:s(e,t);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:s}=this,a=t,o=this._getActiveElements(e,i,n,a),A=zQ(e),l=O7(e,this._lastEvent,n,A);n&&(this._lastEvent=null,$t(s.onHover,[e,o,this],this),A&&$t(s.onClick,[e,o,this],this));const c=!Cb(o,i);return(c||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if(e.type==="mouseout")return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},ke(sc,"defaults",Bn),ke(sc,"instances",Ky),ke(sc,"overrides",hd),ke(sc,"registry",eA),ke(sc,"version",D7),ke(sc,"getChart",hS),sc);function fS(){return cr(Sf.instances,r=>r._plugins.invalidate())}function Q7(r,e,t){const{startAngle:n,x:i,y:s,outerRadius:a,innerRadius:o,options:A}=e,{borderWidth:l,borderJoinStyle:c}=A,u=Math.min(l/a,Ss(n-t));if(r.beginPath(),r.arc(i,s,a-l/2,n+u/2,t-u/2),o>0){const h=Math.min(l/o,Ss(n-t));r.arc(i,s,o+l/2,t-h/2,n+h/2,!0)}else{const h=Math.min(l/2,a*Ss(n-t));if(c==="round")r.arc(i,s,h,t-Lr/2,n+Lr/2,!0);else if(c==="bevel"){const d=2*h*h,p=-d*Math.cos(t+Lr/2)+i,f=-d*Math.sin(t+Lr/2)+s,y=d*Math.cos(n+Lr/2)+i,b=d*Math.sin(n+Lr/2)+s;r.lineTo(p,f),r.lineTo(y,b)}}r.closePath(),r.moveTo(0,0),r.rect(0,0,r.canvas.width,r.canvas.height),r.clip("evenodd")}function H7(r,e,t){const{startAngle:n,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:A}=e;let l=i/o;r.beginPath(),r.arc(s,a,o,n-l,t+l),A>i?(l=i/A,r.arc(s,a,A,t+l,n-l,!0)):r.arc(s,a,i,t+ui,n-ui),r.closePath(),r.clip()}function V7(r){return eB(r,["outerStart","outerEnd","innerStart","innerEnd"])}function $7(r,e,t,n){const i=V7(r.options.borderRadius),s=(t-e)/2,a=Math.min(s,n*e/2),o=A=>{const l=(t-Math.min(s,A))*n/2;return Wi(A,0,Math.min(s,l))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Wi(i.innerStart,0,a),innerEnd:Wi(i.innerEnd,0,a)}}function Jd(r,e,t,n){return{x:t+r*Math.cos(e),y:n+r*Math.sin(e)}}function Fb(r,e,t,n,i,s){const{x:a,y:o,startAngle:A,pixelMargin:l,innerRadius:c}=e,u=Math.max(e.outerRadius+n+t-l,0),h=c>0?c+n+t+l:0;let d=0;const p=i-A;if(n){const Z=c>0?c-n:0,ue=u>0?u-n:0,ne=(Z+ue)/2,j=ne!==0?p*ne/(ne+n):p;d=(p-j)/2}const f=Math.max(.001,p*u-t/Lr)/u,y=(p-f)/2,b=A+y+d,B=i-y-d,{outerStart:S,outerEnd:C,innerStart:P,innerEnd:M}=$7(e,h,u,B-b),L=u-S,_=u-C,v=b+S/L,T=B-C/_,E=h+P,x=h+M,F=b+P/E,k=B-M/x;if(r.beginPath(),s){const Z=(v+T)/2;if(r.arc(a,o,u,v,Z),r.arc(a,o,u,Z,T),C>0){const G=Jd(_,T,a,o);r.arc(G.x,G.y,C,T,B+ui)}const ue=Jd(x,B,a,o);if(r.lineTo(ue.x,ue.y),M>0){const G=Jd(x,k,a,o);r.arc(G.x,G.y,M,B+ui,k+Math.PI)}const ne=(B-M/h+(b+P/h))/2;if(r.arc(a,o,h,B-M/h,ne,!0),r.arc(a,o,h,ne,b+P/h,!0),P>0){const G=Jd(E,F,a,o);r.arc(G.x,G.y,P,F+Math.PI,b-ui)}const j=Jd(L,b,a,o);if(r.lineTo(j.x,j.y),S>0){const G=Jd(L,v,a,o);r.arc(G.x,G.y,S,b-ui,v)}}else{r.moveTo(a,o);const Z=Math.cos(v)*u+a,ue=Math.sin(v)*u+o;r.lineTo(Z,ue);const ne=Math.cos(T)*u+a,j=Math.sin(T)*u+o;r.lineTo(ne,j)}r.closePath()}function j7(r,e,t,n,i){const{fullCircles:s,startAngle:a,circumference:o}=e;let A=e.endAngle;if(s){Fb(r,e,t,n,A,i);for(let l=0;l<s;++l)r.fill();isNaN(o)||(A=a+(o%xn||xn))}return Fb(r,e,t,n,A,i),r.fill(),A}function G7(r,e,t,n,i){const{fullCircles:s,startAngle:a,circumference:o,options:A}=e,{borderWidth:l,borderJoinStyle:c,borderDash:u,borderDashOffset:h,borderRadius:d}=A,p=A.borderAlign==="inner";if(!l)return;r.setLineDash(u||[]),r.lineDashOffset=h,p?(r.lineWidth=l*2,r.lineJoin=c||"round"):(r.lineWidth=l,r.lineJoin=c||"bevel");let f=e.endAngle;if(s){Fb(r,e,t,n,f,i);for(let y=0;y<s;++y)r.stroke();isNaN(o)||(f=a+(o%xn||xn))}p&&H7(r,e,f),A.selfJoin&&f-a>=Lr&&d===0&&c!=="miter"&&Q7(r,e,f),s||(Fb(r,e,t,n,f,i),r.stroke())}class Eh extends xl{constructor(t){super();ke(this,"circumference");ke(this,"endAngle");ke(this,"fullCircles");ke(this,"innerRadius");ke(this,"outerRadius");ke(this,"pixelMargin");ke(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=c3(s,{x:t,y:n}),{startAngle:A,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,p=jt(h,l-A),f=Up(a,A,l)&&A!==l,y=p>=xn||f,b=sl(o,c+d,u+d);return y&&b}getCenterPoint(t){const{x:n,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:A}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(s+a)/2,h=(o+A+c+l)/2;return{x:n+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:i}=this,s=(n.offset||0)/4,a=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>xn?Math.floor(i/xn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const A=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(A)*s,Math.sin(A)*s);const l=1-Math.sin(Math.min(Lr,i||0)),c=s*l;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,j7(t,this,c,a,o),G7(t,this,c,a,o),t.restore()}}ke(Eh,"id","arc"),ke(Eh,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ke(Eh,"defaultRoutes",{backgroundColor:"backgroundColor"}),ke(Eh,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function G3(r,e,t=e){r.lineCap=jt(t.borderCapStyle,e.borderCapStyle),r.setLineDash(jt(t.borderDash,e.borderDash)),r.lineDashOffset=jt(t.borderDashOffset,e.borderDashOffset),r.lineJoin=jt(t.borderJoinStyle,e.borderJoinStyle),r.lineWidth=jt(t.borderWidth,e.borderWidth),r.strokeStyle=jt(t.borderColor,e.borderColor)}function K7(r,e,t){r.lineTo(t.x,t.y)}function z7(r){return r.stepped?p8:r.tension||r.cubicInterpolationMode==="monotone"?m8:K7}function K3(r,e,t={}){const n=r.length,{start:i=0,end:s=n-1}=t,{start:a,end:o}=e,A=Math.max(i,a),l=Math.min(s,o),c=i<a&&s<a||i>o&&s>o;return{count:n,start:A,loop:e.loop,ilen:l<A&&!c?n+l-A:l-A}}function q7(r,e,t,n){const{points:i,options:s}=e,{count:a,start:o,loop:A,ilen:l}=K3(i,t,n),c=z7(s);let{move:u=!0,reverse:h}=n||{},d,p,f;for(d=0;d<=l;++d)p=i[(o+(h?l-d:d))%a],!p.skip&&(u?(r.moveTo(p.x,p.y),u=!1):c(r,f,p,h,s.stepped),f=p);return A&&(p=i[(o+(h?l:0))%a],c(r,f,p,h,s.stepped)),!!A}function W7(r,e,t,n){const i=e.points,{count:s,start:a,ilen:o}=K3(i,t,n),{move:A=!0,reverse:l}=n||{};let c=0,u=0,h,d,p,f,y,b;const B=C=>(a+(l?o-C:C))%s,S=()=>{f!==y&&(r.lineTo(c,y),r.lineTo(c,f),r.lineTo(c,b))};for(A&&(d=i[B(0)],r.moveTo(d.x,d.y)),h=0;h<=o;++h){if(d=i[B(h)],d.skip)continue;const C=d.x,P=d.y,M=C|0;M===p?(P<f?f=P:P>y&&(y=P),c=(u*c+C)/++u):(S(),r.lineTo(C,P),p=M,u=0,f=y=P),b=P}S()}function $_(r){const e=r.options,t=e.borderDash&&e.borderDash.length;return!r._decimated&&!r._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?W7:q7}function Y7(r){return r.stepped?W8:r.tension||r.cubicInterpolationMode==="monotone"?Y8:ku}function X7(r,e,t,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,n)&&i.closePath()),G3(r,e.options),r.stroke(i)}function J7(r,e,t,n){const{segments:i,options:s}=e,a=$_(e);for(const o of i)G3(r,s,o.style),r.beginPath(),a(r,e,o,{start:t,end:t+n-1})&&r.closePath(),r.stroke()}const Z7=typeof Path2D=="function";function eV(r,e,t,n){Z7&&!e.options.segment?X7(r,e,t,n):J7(r,e,t,n)}class fc extends xl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;H8(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=rH(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],s=this.points,a=T3(this,{property:t,start:i,end:i});if(!a.length)return;const o=[],A=Y7(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:u,end:h}=a[l],d=s[u],p=s[h];if(d===p){o.push(d);continue}const f=Math.abs((i-d[t])/(p[t]-d[t])),y=A(d,p,f,n.stepped);y[t]=e[t],o.push(y)}return o.length===1?o[0]:o}pathSegment(e,t,n){return $_(this)(e,this,t,n)}path(e,t,n){const i=this.segments,s=$_(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const o of i)a&=s(e,this,o,{start:t,end:t+n-1});return!!a}draw(e,t,n,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),eV(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ke(fc,"id","line"),ke(fc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ke(fc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ke(fc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function gS(r,e,t,n){const i=r.options,{[t]:s}=r.getProps([t],n);return Math.abs(e-s)<i.radius+i.hitRadius}class np extends xl{constructor(t){super();ke(this,"parsed");ke(this,"skip");ke(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,n){return gS(this,t,"x",n)}inYRange(t,n){return gS(this,t,"y",n)}getCenterPoint(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const i=n&&t.borderWidth||0;return(n+i)*2}draw(t,n){const i=this.options;this.skip||i.radius<.1||!cA(this,n,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,O_(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}ke(np,"id","point"),ke(np,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ke(np,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function z3(r,e){const{x:t,y:n,base:i,width:s,height:a}=r.getProps(["x","y","base","width","height"],e);let o,A,l,c,u;return r.horizontal?(u=a/2,o=Math.min(t,i),A=Math.max(t,i),l=n-u,c=n+u):(u=s/2,o=t-u,A=t+u,l=Math.min(n,i),c=Math.max(n,i)),{left:o,top:l,right:A,bottom:c}}function gc(r,e,t,n){return r?0:Wi(e,t,n)}function tV(r,e,t){const n=r.options.borderWidth,i=r.borderSkipped,s=b3(n);return{t:gc(i.top,s.top,0,t),r:gc(i.right,s.right,0,e),b:gc(i.bottom,s.bottom,0,t),l:gc(i.left,s.left,0,e)}}function rV(r,e,t){const{enableBorderRadius:n}=r.getProps(["enableBorderRadius"]),i=r.options.borderRadius,s=rd(i),a=Math.min(e,t),o=r.borderSkipped,A=n||fr(i);return{topLeft:gc(!A||o.top||o.left,s.topLeft,0,a),topRight:gc(!A||o.top||o.right,s.topRight,0,a),bottomLeft:gc(!A||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:gc(!A||o.bottom||o.right,s.bottomRight,0,a)}}function nV(r){const e=z3(r),t=e.right-e.left,n=e.bottom-e.top,i=tV(r,t/2,n/2),s=rV(r,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function c1(r,e,t,n){const i=e===null,s=t===null,o=r&&!(i&&s)&&z3(r,n);return o&&(i||sl(e,o.left,o.right))&&(s||sl(t,o.top,o.bottom))}function iV(r){return r.topLeft||r.topRight||r.bottomLeft||r.bottomRight}function sV(r,e){r.rect(e.x,e.y,e.w,e.h)}function u1(r,e,t={}){const n=r.x!==t.x?-e:0,i=r.y!==t.y?-e:0,s=(r.x+r.w!==t.x+t.w?e:0)-n,a=(r.y+r.h!==t.y+t.h?e:0)-i;return{x:r.x+n,y:r.y+i,w:r.w+s,h:r.h+a,radius:r.radius}}class ip extends xl{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:s,outer:a}=nV(this),o=iV(a.radius)?Mp:sV;e.save(),(a.w!==s.w||a.h!==s.h)&&(e.beginPath(),o(e,u1(a,t,s)),e.clip(),o(e,u1(s,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,u1(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return c1(this,e,t,n)}inXRange(e,t){return c1(this,e,null,t)}inYRange(e,t){return c1(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ke(ip,"id","bar"),ke(ip,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ke(ip,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var aV=Object.freeze({__proto__:null,ArcElement:Eh,BarElement:ip,LineElement:fc,PointElement:np});const j_=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],pS=j_.map(r=>r.replace("rgb(","rgba(").replace(")",", 0.5)"));function q3(r){return j_[r%j_.length]}function W3(r){return pS[r%pS.length]}function oV(r,e){return r.borderColor=q3(e),r.backgroundColor=W3(e),++e}function AV(r,e){return r.backgroundColor=r.data.map(()=>q3(e++)),e}function lV(r,e){return r.backgroundColor=r.data.map(()=>W3(e++)),e}function cV(r){let e=0;return(t,n)=>{const i=r.getDatasetMeta(n).controller;i instanceof Gu?e=AV(t,e):i instanceof rp?e=lV(t,e):i&&(e=oV(t,e))}}function mS(r){let e;for(e in r)if(r[e].borderColor||r[e].backgroundColor)return!0;return!1}function uV(r){return r&&(r.borderColor||r.backgroundColor)}function dV(){return Bn.borderColor!=="rgba(0,0,0,0.1)"||Bn.backgroundColor!=="rgba(0,0,0,0.1)"}var hV={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(r,e,t){if(!t.enabled)return;const{data:{datasets:n},options:i}=r.config,{elements:s}=i,a=mS(n)||uV(i)||s&&mS(s)||dV();if(!t.forceOverride&&a)return;const o=cV(r);n.forEach(o)}};function fV(r,e,t,n,i){const s=i.samples||n;if(s>=t)return r.slice(e,e+t);const a=[],o=(t-2)/(s-2);let A=0;const l=e+t-1;let c=e,u,h,d,p,f;for(a[A++]=r[c],u=0;u<s-2;u++){let y=0,b=0,B;const S=Math.floor((u+1)*o)+1+e,C=Math.min(Math.floor((u+2)*o)+1,t)+e,P=C-S;for(B=S;B<C;B++)y+=r[B].x,b+=r[B].y;y/=P,b/=P;const M=Math.floor(u*o)+1+e,L=Math.min(Math.floor((u+1)*o)+1,t)+e,{x:_,y:v}=r[c];for(d=p=-1,B=M;B<L;B++)p=.5*Math.abs((_-y)*(r[B].y-v)-(_-r[B].x)*(b-v)),p>d&&(d=p,h=r[B],f=B);a[A++]=h,c=f}return a[A++]=r[l],a}function gV(r,e,t,n){let i=0,s=0,a,o,A,l,c,u,h,d,p,f;const y=[],b=e+t-1,B=r[e].x,C=r[b].x-B;for(a=e;a<e+t;++a){o=r[a],A=(o.x-B)/C*n,l=o.y;const P=A|0;if(P===c)l<p?(p=l,u=a):l>f&&(f=l,h=a),i=(s*i+o.x)/++s;else{const M=a-1;if(!ir(u)&&!ir(h)){const L=Math.min(u,h),_=Math.max(u,h);L!==d&&L!==M&&y.push({...r[L],x:i}),_!==d&&_!==M&&y.push({...r[_],x:i})}a>0&&M!==d&&y.push(r[M]),y.push(o),c=P,s=0,p=f=l,u=h=d=a}}return y}function Y3(r){if(r._decimated){const e=r._data;delete r._decimated,delete r._data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function yS(r){r.data.datasets.forEach(e=>{Y3(e)})}function pV(r,e){const t=e.length;let n=0,i;const{iScale:s}=r,{min:a,max:o,minDefined:A,maxDefined:l}=s.getUserBounds();return A&&(n=Wi(al(e,s.axis,a).lo,0,t-1)),l?i=Wi(al(e,s.axis,o).hi+1,n,t)-n:i=t-n,{start:n,count:i}}var mV={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(r,e,t)=>{if(!t.enabled){yS(r);return}const n=r.width;r.data.datasets.forEach((i,s)=>{const{_data:a,indexAxis:o}=i,A=r.getDatasetMeta(s),l=a||i.data;if(yn([o,r.options.indexAxis])==="y"||!A.controller.supportsDecimation)return;const c=r.scales[A.xAxisID];if(c.type!=="linear"&&c.type!=="time"||r.options.parsing)return;let{start:u,count:h}=pV(A,l);const d=t.threshold||4*n;if(h<=d){Y3(i);return}ir(a)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(f){this._data=f}}));let p;switch(t.algorithm){case"lttb":p=fV(l,u,h,n,t);break;case"min-max":p=gV(l,u,h,n);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=p})},destroy(r){yS(r)}};function yV(r,e,t){const n=r.segments,i=r.points,s=e.points,a=[];for(const o of n){let{start:A,end:l}=o;l=Lw(A,l,i);const c=G_(t,i[A],i[l],o.loop);if(!e.segments){a.push({source:o,target:c,start:i[A],end:i[l]});continue}const u=T3(e,c);for(const h of u){const d=G_(t,s[h.start],s[h.end],h.loop),p=k3(o,i,d);for(const f of p)a.push({source:f,target:h,start:{[t]:bS(c,d,"start",Math.max)},end:{[t]:bS(c,d,"end",Math.min)}})}}return a}function G_(r,e,t,n){if(n)return;let i=e[r],s=t[r];return r==="angle"&&(i=Ss(i),s=Ss(s)),{property:r,start:i,end:s}}function bV(r,e){const{x:t=null,y:n=null}=r||{},i=e.points,s=[];return e.segments.forEach(({start:a,end:o})=>{o=Lw(a,o,i);const A=i[a],l=i[o];n!==null?(s.push({x:A.x,y:n}),s.push({x:l.x,y:n})):t!==null&&(s.push({x:t,y:A.y}),s.push({x:t,y:l.y}))}),s}function Lw(r,e,t){for(;e>r;e--){const n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function bS(r,e,t,n){return r&&e?n(r[t],e[t]):r?r[t]:e?e[t]:0}function X3(r,e){let t=[],n=!1;return wn(r)?(n=!0,t=r):t=bV(r,e),t.length?new fc({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function wS(r){return r&&r.fill!==!1}function wV(r,e,t){let i=r[e].fill;const s=[e];let a;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!zn(i))return i;if(a=r[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function vV(r,e,t){const n=CV(r);if(fr(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return zn(i)&&Math.floor(i)===i?_V(n[0],e,i,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function _V(r,e,t,n){return(r==="-"||r==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function xV(r,e){let t=null;return r==="start"?t=e.bottom:r==="end"?t=e.top:fr(r)?t=e.getPixelForValue(r.value):e.getBasePixel&&(t=e.getBasePixel()),t}function BV(r,e,t){let n;return r==="start"?n=t:r==="end"?n=e.options.reverse?e.min:e.max:fr(r)?n=r.value:n=e.getBaseValue(),n}function CV(r){const e=r.options,t=e.fill;let n=jt(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function EV(r){const{scale:e,index:t,line:n}=r,i=[],s=n.segments,a=n.points,o=SV(e,t);o.push(X3({x:null,y:e.bottom},n));for(let A=0;A<s.length;A++){const l=s[A];for(let c=l.start;c<=l.end;c++)IV(i,a[c],o)}return new fc({points:i,options:{}})}function SV(r,e){const t=[],n=r.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const s=n[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function IV(r,e,t){const n=[];for(let i=0;i<t.length;i++){const s=t[i],{first:a,last:o,point:A}=kV(s,e,"x");if(!(!A||a&&o)){if(a)n.unshift(A);else if(r.push(A),!o)break}}r.push(...n)}function kV(r,e,t){const n=r.interpolate(e,t);if(!n)return{};const i=n[t],s=r.segments,a=r.points;let o=!1,A=!1;for(let l=0;l<s.length;l++){const c=s[l],u=a[c.start][t],h=a[c.end][t];if(sl(i,u,h)){o=i===u,A=i===h;break}}return{first:o,last:A,point:n}}class J3{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:i,y:s,radius:a}=this;return t=t||{start:0,end:xn},e.arc(i,s,a,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:n+Math.sin(s)*i,angle:s}}}function TV(r){const{chart:e,fill:t,line:n}=r;if(zn(t))return FV(e,t);if(t==="stack")return EV(r);if(t==="shape")return!0;const i=LV(r);return i instanceof J3?i:X3(i,n)}function FV(r,e){const t=r.getDatasetMeta(e);return t&&r.isDatasetVisible(e)?t.dataset:null}function LV(r){return(r.scale||{}).getPointPositionForValue?NV(r):PV(r)}function PV(r){const{scale:e={},fill:t}=r,n=xV(t,e);if(zn(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function NV(r){const{scale:e,fill:t}=r,n=e.options,i=e.getLabels().length,s=n.reverse?e.max:e.min,a=BV(t,e,s),o=[];if(n.grid.circular){const A=e.getPointPositionForValue(0,s);return new J3({x:A.x,y:A.y,radius:e.getDistanceFromCenterForValue(a)})}for(let A=0;A<i;++A)o.push(e.getPointPositionForValue(A,a));return o}function d1(r,e,t){const n=TV(e),{chart:i,index:s,line:a,scale:o,axis:A}=e,l=a.options,c=l.fill,u=l.backgroundColor,{above:h=u,below:d=u}=c||{},p=i.getDatasetMeta(s),f=F3(i,p);n&&a.points.length&&(Iw(r,t),DV(r,{line:a,target:n,above:h,below:d,area:t,scale:o,axis:A,clip:f}),kw(r))}function DV(r,e){const{line:t,target:n,above:i,below:s,area:a,scale:o,clip:A}=e,l=t._loop?"angle":e.axis;r.save();let c=s;s!==i&&(l==="x"?(vS(r,n,a.top),h1(r,{line:t,target:n,color:i,scale:o,property:l,clip:A}),r.restore(),r.save(),vS(r,n,a.bottom)):l==="y"&&(_S(r,n,a.left),h1(r,{line:t,target:n,color:s,scale:o,property:l,clip:A}),r.restore(),r.save(),_S(r,n,a.right),c=i)),h1(r,{line:t,target:n,color:c,scale:o,property:l,clip:A}),r.restore()}function vS(r,e,t){const{segments:n,points:i}=e;let s=!0,a=!1;r.beginPath();for(const o of n){const{start:A,end:l}=o,c=i[A],u=i[Lw(A,l,i)];s?(r.moveTo(c.x,c.y),s=!1):(r.lineTo(c.x,t),r.lineTo(c.x,c.y)),a=!!e.pathSegment(r,o,{move:a}),a?r.closePath():r.lineTo(u.x,t)}r.lineTo(e.first().x,t),r.closePath(),r.clip()}function _S(r,e,t){const{segments:n,points:i}=e;let s=!0,a=!1;r.beginPath();for(const o of n){const{start:A,end:l}=o,c=i[A],u=i[Lw(A,l,i)];s?(r.moveTo(c.x,c.y),s=!1):(r.lineTo(t,c.y),r.lineTo(c.x,c.y)),a=!!e.pathSegment(r,o,{move:a}),a?r.closePath():r.lineTo(t,u.y)}r.lineTo(t,e.first().y),r.closePath(),r.clip()}function h1(r,e){const{line:t,target:n,property:i,color:s,scale:a,clip:o}=e,A=yV(t,n,i);for(const{source:l,target:c,start:u,end:h}of A){const{style:{backgroundColor:d=s}={}}=l,p=n!==!0;r.save(),r.fillStyle=d,RV(r,a,o,p&&G_(i,u,h)),r.beginPath();const f=!!t.pathSegment(r,l);let y;if(p){f?r.closePath():xS(r,n,h,i);const b=!!n.pathSegment(r,c,{move:f,reverse:!0});y=f&&b,y||xS(r,n,u,i)}r.closePath(),r.fill(y?"evenodd":"nonzero"),r.restore()}}function RV(r,e,t,n){const i=e.chart.chartArea,{property:s,start:a,end:o}=n||{};if(s==="x"||s==="y"){let A,l,c,u;s==="x"?(A=a,l=i.top,c=o,u=i.bottom):(A=i.left,l=a,c=i.right,u=o),r.beginPath(),t&&(A=Math.max(A,t.left),c=Math.min(c,t.right),l=Math.max(l,t.top),u=Math.min(u,t.bottom)),r.rect(A,l,c-A,u-l),r.clip()}}function xS(r,e,t,n){const i=e.interpolate(t,n);i&&r.lineTo(i.x,i.y)}var UV={id:"filler",afterDatasetsUpdate(r,e,t){const n=(r.data.datasets||[]).length,i=[];let s,a,o,A;for(a=0;a<n;++a)s=r.getDatasetMeta(a),o=s.dataset,A=null,o&&o.options&&o instanceof fc&&(A={visible:r.isDatasetVisible(a),index:a,fill:vV(o,a,n),chart:r,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=A,i.push(A);for(a=0;a<n;++a)A=i[a],!(!A||A.fill===!1)&&(A.fill=wV(i,a,t.propagate))},beforeDraw(r,e,t){const n=t.drawTime==="beforeDraw",i=r.getSortedVisibleDatasetMetas(),s=r.chartArea;for(let a=i.length-1;a>=0;--a){const o=i[a].$filler;o&&(o.line.updateControlPoints(s,o.axis),n&&o.fill&&d1(r.ctx,o,s))}},beforeDatasetsDraw(r,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const n=r.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const s=n[i].$filler;wS(s)&&d1(r.ctx,s,r.chartArea)}},beforeDatasetDraw(r,e,t){const n=e.meta.$filler;!wS(n)||t.drawTime!=="beforeDatasetDraw"||d1(r.ctx,n,r.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const BS=(r,e)=>{let{boxHeight:t=e,boxWidth:n=e}=r;return r.usePointStyle&&(t=Math.min(t,e),n=r.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},MV=(r,e)=>r!==null&&e!==null&&r.datasetIndex===e.datasetIndex&&r.index===e.index;class CS extends xl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=$t(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=vi(n.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:A}=BS(n,s);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,s,o,A)+10):(c=this.maxHeight,l=this._fitCols(a,i,o,A)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,A=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=e;s.textAlign="left",s.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((p,f)=>{const y=n+t/2+s.measureText(p.text).width;(f===0||l[l.length-1]+y+2*o>a)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),A[f]={left:0,top:d,row:h,width:y,height:i},l[l.length-1]+=y+o}),u}_fitCols(e,t,n,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,A=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let u=o,h=0,d=0,p=0,f=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:B,itemHeight:S}=OV(n,t,s,y,i);b>0&&d+S+2*o>c&&(u+=h+o,l.push({width:h,height:d}),p+=h+o,f++,h=d=0),A[b]={left:p,top:d,col:f,width:B,height:S},h=Math.max(h,B),d+=S+o}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:s}}=this,a=Nh(s,this.left,this.width);if(this.isHorizontal()){let o=0,A=Cs(n,this.left+i,this.right-this.lineWidths[o]);for(const l of t)o!==l.row&&(o=l.row,A=Cs(n,this.left+i,this.right-this.lineWidths[o])),l.top+=this.top+e+i,l.left=a.leftForLtr(a.x(A),l.width),A+=l.width+i}else{let o=0,A=Cs(n,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const l of t)l.col!==o&&(o=l.col,A=Cs(n,this.top+e+i,this.bottom-this.columnSizes[o].height)),l.top=A,l.left+=this.left+i,l.left=a.leftForLtr(a.x(l.left),l.width),A+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Iw(e,this),this._draw(),kw(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:s,labels:a}=e,o=Bn.color,A=Nh(e.rtl,this.left,this.width),l=vi(a.font),{padding:c}=a,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=A.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:y}=BS(a,u),b=function(M,L,_){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;i.save();const v=jt(_.lineWidth,1);if(i.fillStyle=jt(_.fillStyle,o),i.lineCap=jt(_.lineCap,"butt"),i.lineDashOffset=jt(_.lineDashOffset,0),i.lineJoin=jt(_.lineJoin,"miter"),i.lineWidth=v,i.strokeStyle=jt(_.strokeStyle,o),i.setLineDash(jt(_.lineDash,[])),a.usePointStyle){const T={radius:f*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:v},E=A.xPlus(M,p/2),x=L+h;y3(i,T,E,x,a.pointStyleWidth&&p)}else{const T=L+Math.max((u-f)/2,0),E=A.leftForLtr(M,p),x=rd(_.borderRadius);i.beginPath(),Object.values(x).some(F=>F!==0)?Mp(i,{x:E,y:T,w:p,h:f,radius:x}):i.rect(E,T,p,f),i.fill(),v!==0&&i.stroke()}i.restore()},B=function(M,L,_){fd(i,_.text,M,L+y/2,l,{strikethrough:_.hidden,textAlign:A.textAlign(_.textAlign)})},S=this.isHorizontal(),C=this._computeTitleHeight();S?d={x:Cs(s,this.left+c,this.right-n[0]),y:this.top+c+C,line:0}:d={x:this.left+c,y:Cs(s,this.top+C+c,this.bottom-t[0].height),line:0},E3(this.ctx,e.textDirection);const P=y+c;this.legendItems.forEach((M,L)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const _=i.measureText(M.text).width,v=A.textAlign(M.textAlign||(M.textAlign=a.textAlign)),T=p+h+_;let E=d.x,x=d.y;A.setWidth(this.width),S?L>0&&E+T+c>this.right&&(x=d.y+=P,d.line++,E=d.x=Cs(s,this.left+c,this.right-n[d.line])):L>0&&x+P>this.bottom&&(E=d.x=E+t[d.line].width+c,d.line++,x=d.y=Cs(s,this.top+C+c,this.bottom-t[d.line].height));const F=A.x(E);if(b(F,x,M),E=s8(v,E+p+h,S?E+T:this.right,e.rtl),B(A.x(E),x,M),S)d.x+=T+c;else if(typeof M.text!="string"){const k=l.lineHeight;d.y+=Z3(M,k)+c}else d.y+=P}),S3(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=vi(t.font),i=hs(t.padding);if(!t.display)return;const s=Nh(e.rtl,this.left,this.width),a=this.ctx,o=t.position,A=n.size/2,l=i.top+A;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=Cs(e.align,u,this.right-h);else{const p=this.columnSizes.reduce((f,y)=>Math.max(f,y.height),0);c=l+Cs(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const d=Cs(o,u,u+h);a.textAlign=s.textAlign(Jx(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,fd(a,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=vi(e.font),n=hs(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,s;if(sl(e,this.left,this.right)&&sl(t,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],sl(e,i.left,i.left+i.width)&&sl(t,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const t=this.options;if(!VV(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=MV(i,n);i&&!s&&$t(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!s&&$t(t.onHover,[e,n,this],this)}else n&&$t(t.onClick,[e,n,this],this)}}function OV(r,e,t,n,i){const s=QV(n,r,e,t),a=HV(i,n,e.lineHeight);return{itemWidth:s,itemHeight:a}}function QV(r,e,t,n){let i=r.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),e+t.size/2+n.measureText(i).width}function HV(r,e,t){let n=r;return typeof e.text!="string"&&(n=Z3(e,t)),n}function Z3(r,e){const t=r.text?r.text.length:0;return e*t}function VV(r,e){return!!((r==="mousemove"||r==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(r==="click"||r==="mouseup"))}var $V={id:"legend",_element:CS,start(r,e,t){const n=r.legend=new CS({ctx:r.ctx,options:t,chart:r});Fs.configure(r,n,t),Fs.addBox(r,n)},stop(r){Fs.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,e,t){const n=r.legend;Fs.configure(r,n,t),n.options=t},afterUpdate(r){const e=r.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(r,e){e.replay||r.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,e,t){const n=e.datasetIndex,i=t.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){const e=r.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=r.legend.options;return r._getSortedDatasetMetas().map(A=>{const l=A.controller.getStyle(t?0:void 0),c=hs(l.borderWidth);return{text:e[A.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!A.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:A.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}};class oB extends xl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=wn(n.text)?n.text.length:1;this._padding=hs(n.padding);const s=i*vi(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:n,bottom:i,right:s,options:a}=this,o=a.align;let A=0,l,c,u;return this.isHorizontal()?(c=Cs(o,n,s),u=t+e,l=s-n):(a.position==="left"?(c=n+e,u=Cs(o,i,t),A=Lr*-.5):(c=s-e,u=Cs(o,t,i),A=Lr*.5),l=i-t),{titleX:c,titleY:u,maxWidth:l,rotation:A}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=vi(t.font),s=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:A,rotation:l}=this._drawArgs(s);fd(e,t.text,0,0,n,{color:t.color,maxWidth:A,rotation:l,textAlign:Jx(t.align),textBaseline:"middle",translation:[a,o]})}}function jV(r,e){const t=new oB({ctx:r.ctx,options:e,chart:r});Fs.configure(r,t,e),Fs.addBox(r,t),r.titleBlock=t}var GV={id:"title",_element:oB,start(r,e,t){jV(r,t)},stop(r){const e=r.titleBlock;Fs.removeBox(r,e),delete r.titleBlock},beforeUpdate(r,e,t){const n=r.titleBlock;Fs.configure(r,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const R0=new WeakMap;var KV={id:"subtitle",start(r,e,t){const n=new oB({ctx:r.ctx,options:t,chart:r});Fs.configure(r,n,t),Fs.addBox(r,n),R0.set(r,n)},stop(r){Fs.removeBox(r,R0.get(r)),R0.delete(r)},beforeUpdate(r,e,t){const n=R0.get(r);Fs.configure(r,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ng={average(r){if(!r.length)return!1;let e,t,n=new Set,i=0,s=0;for(e=0,t=r.length;e<t;++e){const o=r[e].element;if(o&&o.hasValue()){const A=o.tooltipPosition();n.add(A.x),i+=A.y,++s}}return s===0||n.size===0?!1:{x:[...n].reduce((o,A)=>o+A)/n.size,y:i/s}},nearest(r,e){if(!r.length)return!1;let t=e.x,n=e.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=r.length;s<a;++s){const A=r[s].element;if(A&&A.hasValue()){const l=A.getCenterPoint(),c=U_(e,l);c<i&&(i=c,o=A)}}if(o){const A=o.tooltipPosition();t=A.x,n=A.y}return{x:t,y:n}}};function Jo(r,e){return e&&(wn(e)?Array.prototype.push.apply(r,e):r.push(e)),r}function el(r){return(typeof r=="string"||r instanceof String)&&r.indexOf(`
`)>-1?r.split(`
`):r}function zV(r,e){const{element:t,datasetIndex:n,index:i}=e,s=r.getDatasetMeta(n).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:r,label:a,parsed:s.getParsed(i),raw:r.data.datasets[n].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:n,element:t}}function ES(r,e){const t=r.chart.ctx,{body:n,footer:i,title:s}=r,{boxWidth:a,boxHeight:o}=e,A=vi(e.bodyFont),l=vi(e.titleFont),c=vi(e.footerFont),u=s.length,h=i.length,d=n.length,p=hs(e.padding);let f=p.height,y=0,b=n.reduce((C,P)=>C+P.before.length+P.lines.length+P.after.length,0);if(b+=r.beforeBody.length+r.afterBody.length,u&&(f+=u*l.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),b){const C=e.displayColors?Math.max(o,A.lineHeight):A.lineHeight;f+=d*C+(b-d)*A.lineHeight+(b-1)*e.bodySpacing}h&&(f+=e.footerMarginTop+h*c.lineHeight+(h-1)*e.footerSpacing);let B=0;const S=function(C){y=Math.max(y,t.measureText(C).width+B)};return t.save(),t.font=l.string,cr(r.title,S),t.font=A.string,cr(r.beforeBody.concat(r.afterBody),S),B=e.displayColors?a+2+e.boxPadding:0,cr(n,C=>{cr(C.before,S),cr(C.lines,S),cr(C.after,S)}),B=0,t.font=c.string,cr(r.footer,S),t.restore(),y+=p.width,{width:y,height:f}}function qV(r,e){const{y:t,height:n}=e;return t<n/2?"top":t>r.height-n/2?"bottom":"center"}function WV(r,e,t,n){const{x:i,width:s}=n,a=t.caretSize+t.caretPadding;if(r==="left"&&i+s+a>e.width||r==="right"&&i-s-a<0)return!0}function YV(r,e,t,n){const{x:i,width:s}=t,{width:a,chartArea:{left:o,right:A}}=r;let l="center";return n==="center"?l=i<=(o+A)/2?"left":"right":i<=s/2?l="left":i>=a-s/2&&(l="right"),WV(l,r,e,t)&&(l="center"),l}function SS(r,e,t){const n=t.yAlign||e.yAlign||qV(r,t);return{xAlign:t.xAlign||e.xAlign||YV(r,e,t,n),yAlign:n}}function XV(r,e){let{x:t,width:n}=r;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function JV(r,e,t){let{y:n,height:i}=r;return e==="top"?n+=t:e==="bottom"?n-=i+t:n-=i/2,n}function IS(r,e,t,n){const{caretSize:i,caretPadding:s,cornerRadius:a}=r,{xAlign:o,yAlign:A}=t,l=i+s,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:d}=rd(a);let p=XV(e,o);const f=JV(e,A,l);return A==="center"?o==="left"?p+=l:o==="right"&&(p-=l):o==="left"?p-=Math.max(c,h)+i:o==="right"&&(p+=Math.max(u,d)+i),{x:Wi(p,0,n.width-e.width),y:Wi(f,0,n.height-e.height)}}function U0(r,e,t){const n=hs(t.padding);return e==="center"?r.x+r.width/2:e==="right"?r.x+r.width-n.right:r.x+n.left}function kS(r){return Jo([],el(r))}function ZV(r,e,t){return ru(r,{tooltip:e,tooltipItems:t,type:"tooltip"})}function TS(r,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?r.override(t):r}const eL={beforeTitle:zA,title(r){if(r.length>0){const e=r[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:zA,beforeBody:zA,beforeLabel:zA,label(r){if(this&&this.options&&this.options.mode==="dataset")return r.label+": "+r.formattedValue||r.formattedValue;let e=r.dataset.label||"";e&&(e+=": ");const t=r.formattedValue;return ir(t)||(e+=t),e},labelColor(r){const t=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){const t=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:zA,afterBody:zA,beforeFooter:zA,footer:zA,afterFooter:zA};function Aa(r,e,t,n){const i=r[e].call(t,n);return typeof i>"u"?eL[e].call(t,n):i}class K_ extends xl{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,s=new L3(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=ZV(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,i=Aa(n,"beforeTitle",this,e),s=Aa(n,"title",this,e),a=Aa(n,"afterTitle",this,e);let o=[];return o=Jo(o,el(i)),o=Jo(o,el(s)),o=Jo(o,el(a)),o}getBeforeBody(e,t){return kS(Aa(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return cr(e,s=>{const a={before:[],lines:[],after:[]},o=TS(n,s);Jo(a.before,el(Aa(o,"beforeLabel",this,s))),Jo(a.lines,Aa(o,"label",this,s)),Jo(a.after,el(Aa(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(e,t){return kS(Aa(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=Aa(n,"beforeFooter",this,e),s=Aa(n,"footer",this,e),a=Aa(n,"afterFooter",this,e);let o=[];return o=Jo(o,el(i)),o=Jo(o,el(s)),o=Jo(o,el(a)),o}_createItems(e){const t=this._active,n=this.chart.data,i=[],s=[],a=[];let o=[],A,l;for(A=0,l=t.length;A<l;++A)o.push(zV(this.chart,t[A]));return e.filter&&(o=o.filter((c,u,h)=>e.filter(c,u,h,n))),e.itemSort&&(o=o.sort((c,u)=>e.itemSort(c,u,n))),cr(o,c=>{const u=TS(e.callbacks,c);i.push(Aa(u,"labelColor",this,c)),s.push(Aa(u,"labelPointStyle",this,c)),a.push(Aa(u,"labelTextColor",this,c))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=Ng[n.position].call(this,i,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const A=this._size=ES(this,n),l=Object.assign({},o,A),c=SS(this.chart,n,l),u=IS(n,l,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:u.x,y:u.y,width:A.width,height:A.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const s=this.getCaretPosition(e,n,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:A,topRight:l,bottomLeft:c,bottomRight:u}=rd(o),{x:h,y:d}=e,{width:p,height:f}=t;let y,b,B,S,C,P;return s==="center"?(C=d+f/2,i==="left"?(y=h,b=y-a,S=C+a,P=C-a):(y=h+p,b=y+a,S=C-a,P=C+a),B=y):(i==="left"?b=h+Math.max(A,c)+a:i==="right"?b=h+p-Math.max(l,u)-a:b=this.caretX,s==="top"?(S=d,C=S-a,y=b-a,B=b+a):(S=d+f,C=S+a,y=b+a,B=b-a),P=S),{x1:y,x2:b,x3:B,y1:S,y2:C,y3:P}}drawTitle(e,t,n){const i=this.title,s=i.length;let a,o,A;if(s){const l=Nh(n.rtl,this.x,this.width);for(e.x=U0(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=vi(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,A=0;A<s;++A)t.fillText(i[A],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,A+1===s&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,i,s){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:A,boxWidth:l}=s,c=vi(s.bodyFont),u=U0(this,"left",s),h=i.x(u),d=A<c.lineHeight?(c.lineHeight-A)/2:0,p=t.y+d;if(s.usePointStyle){const f={radius:Math.min(l,A)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},y=i.leftForLtr(h,l)+l/2,b=p+A/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,O_(e,f,y,b),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,O_(e,f,y,b)}else{e.lineWidth=fr(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const f=i.leftForLtr(h,l),y=i.leftForLtr(i.xPlus(h,1),l-2),b=rd(a.borderRadius);Object.values(b).some(B=>B!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Mp(e,{x:f,y:p,w:l,h:A,radius:b}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Mp(e,{x:y,y:p+1,w:l-2,h:A-2,radius:b}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(f,p,l,A),e.strokeRect(f,p,l,A),e.fillStyle=a.backgroundColor,e.fillRect(y,p+1,l-2,A-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:A,boxWidth:l,boxPadding:c}=n,u=vi(n.bodyFont);let h=u.lineHeight,d=0;const p=Nh(n.rtl,this.x,this.width),f=function(_){t.fillText(_,p.x(e.x+d),e.y+h/2),e.y+=h+s},y=p.textAlign(a);let b,B,S,C,P,M,L;for(t.textAlign=a,t.textBaseline="middle",t.font=u.string,e.x=U0(this,y,n),t.fillStyle=n.bodyColor,cr(this.beforeBody,f),d=o&&y!=="right"?a==="center"?l/2+c:l+2+c:0,C=0,M=i.length;C<M;++C){for(b=i[C],B=this.labelTextColors[C],t.fillStyle=B,cr(b.before,f),S=b.lines,o&&S.length&&(this._drawColorBox(t,e,C,p,n),h=Math.max(u.lineHeight,A)),P=0,L=S.length;P<L;++P)f(S[P]),h=u.lineHeight;cr(b.after,f)}d=0,h=u.lineHeight,cr(this.afterBody,f),e.y-=s}drawFooter(e,t,n){const i=this.footer,s=i.length;let a,o;if(s){const A=Nh(n.rtl,this.x,this.width);for(e.x=U0(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=A.textAlign(n.footerAlign),t.textBaseline="middle",a=vi(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,o=0;o<s;++o)t.fillText(i[o],A.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:s,yAlign:a}=this,{x:o,y:A}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=rd(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+u,A),a==="top"&&this.drawCaret(e,t,n,i),t.lineTo(o+l-h,A),t.quadraticCurveTo(o+l,A,o+l,A+h),a==="center"&&s==="right"&&this.drawCaret(e,t,n,i),t.lineTo(o+l,A+c-p),t.quadraticCurveTo(o+l,A+c,o+l-p,A+c),a==="bottom"&&this.drawCaret(e,t,n,i),t.lineTo(o+d,A+c),t.quadraticCurveTo(o,A+c,o,A+c-d),a==="center"&&s==="left"&&this.drawCaret(e,t,n,i),t.lineTo(o,A+u),t.quadraticCurveTo(o,A,o+u,A),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){const a=Ng[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=ES(this,e),A=Object.assign({},a,this._size),l=SS(t,e,A),c=IS(e,A,l,t);(i._to!==c.x||s._to!==c.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=hs(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,i,t),E3(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),S3(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(({datasetIndex:o,index:A})=>{const l=this.chart.getDatasetMeta(o);if(!l)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:l.data[A],index:A}}),s=!Cb(n,i),a=this._positionChanged(i,t);(s||a)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,n),o=this._positionChanged(a,e),A=t||!Cb(a,s)||o;return A&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),A}_getActiveElements(e,t,n,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:i,options:s}=this,a=Ng[s.position].call(this,e,t);return a!==!1&&(n!==a.x||i!==a.y)}}ke(K_,"positioners",Ng);var e9={id:"tooltip",_element:K_,positioners:Ng,afterInit(r,e,t){t&&(r.tooltip=new K_({chart:r,options:t}))},beforeUpdate(r,e,t){r.tooltip&&r.tooltip.initialize(t)},reset(r,e,t){r.tooltip&&r.tooltip.initialize(t)},afterDraw(r){const e=r.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(r.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",t)}},afterEvent(r,e){if(r.tooltip){const t=e.replay;r.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,e)=>e.bodyFont.size,boxWidth:(r,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:eL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>r!=="filter"&&r!=="itemSort"&&r!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},t9=Object.freeze({__proto__:null,Colors:hV,Decimation:mV,Filler:UV,Legend:$V,SubTitle:KV,Title:GV,Tooltip:e9});const r9=(r,e,t,n)=>(typeof e=="string"?(t=r.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function n9(r,e,t,n){const i=r.indexOf(e);if(i===-1)return r9(r,e,t,n);const s=r.lastIndexOf(e);return i!==s?t:i}const i9=(r,e)=>r===null?null:Wi(Math.round(r),0,e);function FS(r){const e=this.getLabels();return r>=0&&r<e.length?e[r]:r}class z_ extends Ld{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:i,label:s}of t)n[i]===s&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ir(e))return null;const n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:n9(n,e,jt(t,e),this._addedLabels),i9(t,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)i.push({value:a});return i}getLabelForValue(e){return FS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ke(z_,"id","category"),ke(z_,"defaults",{ticks:{callback:FS}});function s9(r,e){const t=[],{bounds:i,step:s,min:a,max:o,precision:A,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=r,d=s||1,p=c-1,{min:f,max:y}=e,b=!ir(a),B=!ir(o),S=!ir(l),C=(y-f)/(u+1);let P=EE((y-f)/p/d)*d,M,L,_,v;if(P<1e-14&&!b&&!B)return[{value:f},{value:y}];v=Math.ceil(y/P)-Math.floor(f/P),v>p&&(P=EE(v*P/p/d)*d),ir(A)||(M=Math.pow(10,A),P=Math.ceil(P*M)/M),i==="ticks"?(L=Math.floor(f/P)*P,_=Math.ceil(y/P)*P):(L=f,_=y),b&&B&&s&&JQ((o-a)/s,P/1e3)?(v=Math.round(Math.min((o-a)/P,c)),P=(o-a)/v,L=a,_=o):S?(L=b?a:L,_=B?o:_,v=l-1,P=(_-L)/v):(v=(_-L)/P,td(v,Math.round(v),P/1e3)?v=Math.round(v):v=Math.ceil(v));const T=Math.max(SE(P),SE(L));M=Math.pow(10,ir(A)?T:A),L=Math.round(L*M)/M,_=Math.round(_*M)/M;let E=0;for(b&&(h&&L!==a?(t.push({value:a}),L<a&&E++,td(Math.round((L+E*P)*M)/M,a,LS(a,C,r))&&E++):L<a&&E++);E<v;++E){const x=Math.round((L+E*P)*M)/M;if(B&&x>o)break;t.push({value:x})}return B&&h&&_!==o?t.length&&td(t[t.length-1].value,o,LS(o,C,r))?t[t.length-1].value=o:t.push({value:o}):(!B||_===o)&&t.push({value:_}),t}function LS(r,e,{horizontal:t,minRotation:n}){const i=Eo(n),s=(t?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+r).length;return Math.min(e/s,a)}class Lb extends Ld{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ir(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this;const a=A=>i=t?i:A,o=A=>s=n?s:A;if(e){const A=co(i),l=co(s);A<0&&l<0?o(0):A>0&&l>0&&a(0)}if(i===s){let A=s===0?1:Math.abs(s*.05);o(s+A),e||a(i-A)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,a=s9(i,s);return e.bounds==="ticks"&&l3(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Bm(e,this.chart.options.locale,this.options.ticks.format)}}class q_ extends Lb{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=zn(e)?e:0,this.max=zn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Eo(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ke(q_,"id","linear"),ke(q_,"defaults",{ticks:{callback:Sw.formatters.numeric}});const Qp=r=>Math.floor(dc(r)),Eu=(r,e)=>Math.pow(10,Qp(r)+e);function PS(r){return r/Math.pow(10,Qp(r))===1}function NS(r,e,t){const n=Math.pow(10,t),i=Math.floor(r/n);return Math.ceil(e/n)-i}function a9(r,e){const t=e-r;let n=Qp(t);for(;NS(r,e,n)>10;)n++;for(;NS(r,e,n)<10;)n--;return Math.min(n,Qp(r))}function o9(r,{min:e,max:t}){e=Ma(r.min,e);const n=[],i=Qp(e);let s=a9(e,t),a=s<0?Math.pow(10,Math.abs(s)):1;const o=Math.pow(10,s),A=i>s?Math.pow(10,i):0,l=Math.round((e-A)*a)/a,c=Math.floor((e-A)/o/10)*o*10;let u=Math.floor((l-c)/Math.pow(10,s)),h=Ma(r.min,Math.round((A+c+u*Math.pow(10,s))*a)/a);for(;h<t;)n.push({value:h,major:PS(h),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(s++,u=2,a=s>=0?1:a),h=Math.round((A+c+u*Math.pow(10,s))*a)/a;const d=Ma(r.max,h);return n.push({value:d,major:PS(d),significand:u}),n}class W_ extends Ld{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Lb.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return zn(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=zn(e)?Math.max(0,e):null,this.max=zn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!zn(this._userMin)&&(this.min=e===Eu(this.min,0)?Eu(this.min,-1):Eu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const s=o=>n=e?n:o,a=o=>i=t?i:o;n===i&&(n<=0?(s(1),a(10)):(s(Eu(n,-1)),a(Eu(i,1)))),n<=0&&s(Eu(i,-1)),i<=0&&a(Eu(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},n=o9(t,this);return e.bounds==="ticks"&&l3(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Bm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=dc(e),this._valueRange=dc(this.max)-dc(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(dc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}ke(W_,"id","logarithmic"),ke(W_,"defaults",{ticks:{callback:Sw.formatters.logarithmic,major:{enabled:!0}}});function Y_(r){const e=r.ticks;if(e.display&&r.display){const t=hs(e.backdropPadding);return jt(e.font&&e.font.size,Bn.font.size)+t.height}return 0}function A9(r,e,t){return t=wn(t)?t:[t],{w:g8(r,e.string,t),h:t.length*e.lineHeight}}function DS(r,e,t,n,i){return r===n||r===i?{start:e-t/2,end:e+t/2}:r<n||r>i?{start:e-t,end:e}:{start:e,end:e+t}}function l9(r){const e={l:r.left+r._padding.left,r:r.right-r._padding.right,t:r.top+r._padding.top,b:r.bottom-r._padding.bottom},t=Object.assign({},e),n=[],i=[],s=r._pointLabels.length,a=r.options.pointLabels,o=a.centerPointLabels?Lr/s:0;for(let A=0;A<s;A++){const l=a.setContext(r.getPointLabelContext(A));i[A]=l.padding;const c=r.getPointPosition(A,r.drawingArea+i[A],o),u=vi(l.font),h=A9(r.ctx,u,r._pointLabels[A]);n[A]=h;const d=Ss(r.getIndexAngle(A)+o),p=Math.round(Yx(d)),f=DS(p,c.x,h.w,0,180),y=DS(p,c.y,h.h,90,270);c9(t,e,d,f,y)}r.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),r._pointLabelItems=h9(r,n,i)}function c9(r,e,t,n,i){const s=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let o=0,A=0;n.start<e.l?(o=(e.l-n.start)/s,r.l=Math.min(r.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/s,r.r=Math.max(r.r,e.r+o)),i.start<e.t?(A=(e.t-i.start)/a,r.t=Math.min(r.t,e.t-A)):i.end>e.b&&(A=(i.end-e.b)/a,r.b=Math.max(r.b,e.b+A))}function u9(r,e,t){const n=r.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=t,A=r.getPointPosition(e,n+i+a,s),l=Math.round(Yx(Ss(A.angle+ui))),c=p9(A.y,o.h,l),u=f9(l),h=g9(A.x,o.w,u);return{visible:!0,x:A.x,y:c,textAlign:u,left:h,top:c,right:h+o.w,bottom:c+o.h}}function d9(r,e){if(!e)return!0;const{left:t,top:n,right:i,bottom:s}=r;return!(cA({x:t,y:n},e)||cA({x:t,y:s},e)||cA({x:i,y:n},e)||cA({x:i,y:s},e))}function h9(r,e,t){const n=[],i=r._pointLabels.length,s=r.options,{centerPointLabels:a,display:o}=s.pointLabels,A={extra:Y_(s)/2,additionalAngle:a?Lr/i:0};let l;for(let c=0;c<i;c++){A.padding=t[c],A.size=e[c];const u=u9(r,c,A);n.push(u),o==="auto"&&(u.visible=d9(u,l),u.visible&&(l=u))}return n}function f9(r){return r===0||r===180?"center":r<180?"left":"right"}function g9(r,e,t){return t==="right"?r-=e:t==="center"&&(r-=e/2),r}function p9(r,e,t){return t===90||t===270?r-=e/2:(t>270||t<90)&&(r-=e),r}function m9(r,e,t){const{left:n,top:i,right:s,bottom:a}=t,{backdropColor:o}=e;if(!ir(o)){const A=rd(e.borderRadius),l=hs(e.backdropPadding);r.fillStyle=o;const c=n-l.left,u=i-l.top,h=s-n+l.width,d=a-i+l.height;Object.values(A).some(p=>p!==0)?(r.beginPath(),Mp(r,{x:c,y:u,w:h,h:d,radius:A}),r.fill()):r.fillRect(c,u,h,d)}}function y9(r,e){const{ctx:t,options:{pointLabels:n}}=r;for(let i=e-1;i>=0;i--){const s=r._pointLabelItems[i];if(!s.visible)continue;const a=n.setContext(r.getPointLabelContext(i));m9(t,a,s);const o=vi(a.font),{x:A,y:l,textAlign:c}=s;fd(t,r._pointLabels[i],A,l+o.lineHeight/2,o,{color:a.color,textAlign:c,textBaseline:"middle"})}}function tL(r,e,t,n){const{ctx:i}=r;if(t)i.arc(r.xCenter,r.yCenter,e,0,xn);else{let s=r.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let a=1;a<n;a++)s=r.getPointPosition(a,e),i.lineTo(s.x,s.y)}}function b9(r,e,t,n,i){const s=r.ctx,a=e.circular,{color:o,lineWidth:A}=e;!a&&!n||!o||!A||t<0||(s.save(),s.strokeStyle=o,s.lineWidth=A,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),tL(r,t,a,n),s.closePath(),s.stroke(),s.restore())}function w9(r,e,t){return ru(r,{label:t,index:e,type:"pointLabel"})}class Dg extends Lb{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=hs(Y_(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=zn(e)&&!isNaN(e)?e:0,this.max=zn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Y_(this.options))}generateTickLabels(e){Lb.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{const i=$t(this.options.pointLabels.callback,[t,n],this);return i||i===0?i:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?l9(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){const t=xn/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ss(e*t+Eo(n))}getDistanceFromCenterForValue(e){if(ir(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(ir(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return w9(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const i=this.getIndexAngle(e)-ui+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),tL(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:s}=t,a=this._pointLabels.length;let o,A,l;if(t.pointLabels.display&&y9(this,a),i.display&&this.ticks.forEach((c,u)=>{if(u!==0||u===0&&this.min<0){A=this.getDistanceFromCenterForValue(c.value);const h=this.getContext(u),d=i.setContext(h),p=s.setContext(h);b9(this,d,A,a,p)}}),n.display){for(e.save(),o=a-1;o>=0;o--){const c=n.setContext(this.getPointLabelContext(o)),{color:u,lineWidth:h}=c;!h||!u||(e.lineWidth=h,e.strokeStyle=u,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,A=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,A),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,A)=>{if(A===0&&this.min>=0&&!t.reverse)return;const l=n.setContext(this.getContext(A)),c=vi(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[A].value),l.showLabelBackdrop){e.font=c.string,a=e.measureText(o.label).width,e.fillStyle=l.backdropColor;const u=hs(l.backdropPadding);e.fillRect(-a/2-u.left,-s-c.size/2-u.top,a+u.width,c.size+u.height)}fd(e,o.label,0,-s,c,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}}ke(Dg,"id","radialLinear"),ke(Dg,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Sw.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ke(Dg,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ke(Dg,"descriptors",{angleLines:{_fallback:"grid"}});const Pw={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pa=Object.keys(Pw);function RS(r,e){return r-e}function US(r,e){if(ir(e))return null;const t=r._adapter,{parser:n,round:i,isoWeekday:s}=r._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),zn(a)||(a=typeof n=="string"?t.parse(a,n):t.parse(a)),a===null?null:(i&&(a=i==="week"&&(Wh(s)||s===!0)?t.startOf(a,"isoWeek",s):t.startOf(a,i)),+a)}function MS(r,e,t,n){const i=pa.length;for(let s=pa.indexOf(r);s<i-1;++s){const a=Pw[pa[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=n)return pa[s]}return pa[i-1]}function v9(r,e,t,n,i){for(let s=pa.length-1;s>=pa.indexOf(t);s--){const a=pa[s];if(Pw[a].common&&r._adapter.diff(i,n,a)>=e-1)return a}return pa[t?pa.indexOf(t):0]}function _9(r){for(let e=pa.indexOf(r)+1,t=pa.length;e<t;++e)if(Pw[pa[e]].common)return pa[e]}function OS(r,e,t){if(!t)r[e]=!0;else if(t.length){const{lo:n,hi:i}=Xx(t,e),s=t[n]>=e?t[n]:t[i];r[s]=!0}}function x9(r,e,t,n){const i=r._adapter,s=+i.startOf(e[0].value,n),a=e[e.length-1].value;let o,A;for(o=s;o<=a;o=+i.add(o,1,n))A=t[o],A>=0&&(e[A].major=!0);return e}function QS(r,e,t){const n=[],i={},s=e.length;let a,o;for(a=0;a<s;++a)o=e[a],i[o]=a,n.push({value:o,major:!1});return s===0||!t?n:x9(r,n,i,t)}class Hp extends Ld{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),i=this._adapter=new D3._date(e.adapters.date);i.init(t),Zg(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:US(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function A(l){!a&&!isNaN(l.min)&&(i=Math.min(i,l.min)),!o&&!isNaN(l.max)&&(s=Math.max(s,l.max))}(!a||!o)&&(A(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&A(this.getMinMax(!1))),i=zn(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),s=zn(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=r8(i,s,a);return this._unit=t.unit||(n.autoSkip?MS(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):v9(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:_9(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),QS(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?n=s:n=(s-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=Wi(t,0,a),n=Wi(n,0,a),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,s=i.time,a=s.unit||MS(s.minUnit,t,n,this._getLabelCapacity(t)),o=jt(i.ticks.stepSize,1),A=a==="week"?s.isoWeekday:!1,l=Wh(A)||A===!0,c={};let u=t,h,d;if(l&&(u=+e.startOf(u,"isoWeek",A)),u=+e.startOf(u,l?"day":a),e.diff(n,t,a)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+a);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(h=u,d=0;h<n;h=+e.add(h,o,a),d++)OS(c,h,p);return(h===n||i.bounds==="ticks"||d===1)&&OS(c,h,p),Object.keys(c).sort(RS).map(f=>+f)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,s=this._unit,a=t||i[s];return this._adapter.format(e,a)}_tickFormatFunction(e,t,n,i){const s=this.options,a=s.ticks.callback;if(a)return $t(a,[e,t,n],this);const o=s.time.displayFormats,A=this._unit,l=this._majorUnit,c=A&&o[A],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=Eo(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*s+o*a,h:n*a+o*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,QS(this,[e],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,n=i.length;t<n;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(US(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return d3(e.sort(RS))}}ke(Hp,"id","time"),ke(Hp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function M0(r,e,t){let n=0,i=r.length-1,s,a,o,A;t?(e>=r[n].pos&&e<=r[i].pos&&({lo:n,hi:i}=al(r,"pos",e)),{pos:s,time:o}=r[n],{pos:a,time:A}=r[i]):(e>=r[n].time&&e<=r[i].time&&({lo:n,hi:i}=al(r,"time",e)),{time:s,pos:o}=r[n],{time:a,pos:A}=r[i]);const l=a-s;return l?o+(A-o)*(e-s)/l:o}class X_ extends Hp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=M0(t,this.min),this._tableRange=M0(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],s=[];let a,o,A,l,c;for(a=0,o=e.length;a<o;++a)l=e[a],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,o=i.length;a<o;++a)c=i[a+1],A=i[a-1],l=i[a],Math.round((c+A)/2)!==l&&s.push({time:l,pos:a/(o-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(M0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return M0(this._table,n*this._tableRange+this._minPos,!0)}}ke(X_,"id","timeseries"),ke(X_,"defaults",Hp.defaults);var B9=Object.freeze({__proto__:null,CategoryScale:z_,LinearScale:q_,LogarithmicScale:W_,RadialLinearScale:Dg,TimeScale:Hp,TimeSeriesScale:X_});const rL=[FH,aV,t9,B9],nL=6048e5,C9=864e5,Cm=6e4,Em=36e5,E9=1e3,HS=Symbol.for("constructDateFrom");function qn(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&HS in r?r[HS](e):r instanceof Date?new r.constructor(e):new Date(e)}function er(r,e){return qn(e||r,r)}function Nw(r,e,t){const n=er(r,t==null?void 0:t.in);return isNaN(e)?qn((t==null?void 0:t.in)||r,NaN):(e&&n.setDate(n.getDate()+e),n)}function AB(r,e,t){const n=er(r,t==null?void 0:t.in);if(isNaN(e))return qn(r,NaN);if(!e)return n;const i=n.getDate(),s=qn(r,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return i>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}function lB(r,e,t){return qn(r,+er(r)+e)}function S9(r,e,t){return lB(r,e*Em)}let I9={};function Pd(){return I9}function EA(r,e){var o,A,l,c;const t=Pd(),n=(e==null?void 0:e.weekStartsOn)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.weekStartsOn)??t.weekStartsOn??((c=(l=t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,i=er(r,e==null?void 0:e.in),s=i.getDay(),a=(s<n?7:0)+s-n;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Jh(r,e){return EA(r,{...e,weekStartsOn:1})}function iL(r,e){const t=er(r,e==null?void 0:e.in),n=t.getFullYear(),i=qn(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const s=Jh(i),a=qn(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Jh(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Pb(r){const e=er(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function Nd(r,...e){const t=qn.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function J_(r,e){const t=er(r,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function sL(r,e,t){const[n,i]=Nd(t==null?void 0:t.in,r,e),s=J_(n),a=J_(i),o=+s-Pb(s),A=+a-Pb(a);return Math.round((o-A)/C9)}function k9(r,e){const t=iL(r,e),n=qn(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Jh(n)}function T9(r,e,t){const n=er(r,t==null?void 0:t.in);return n.setTime(n.getTime()+e*Cm),n}function F9(r,e,t){return AB(r,e*3,t)}function L9(r,e,t){return lB(r,e*1e3)}function P9(r,e,t){return Nw(r,e*7,t)}function N9(r,e,t){return AB(r,e*12,t)}function sp(r,e){const t=+er(r)-+er(e);return t<0?-1:t>0?1:t}function D9(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function aL(r){return!(!D9(r)&&typeof r!="number"||isNaN(+er(r)))}function R9(r,e,t){const[n,i]=Nd(t==null?void 0:t.in,r,e),s=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return s*12+a}function U9(r,e,t){const[n,i]=Nd(t==null?void 0:t.in,r,e);return n.getFullYear()-i.getFullYear()}function oL(r,e,t){const[n,i]=Nd(t==null?void 0:t.in,r,e),s=VS(n,i),a=Math.abs(sL(n,i));n.setDate(n.getDate()-s*a);const o=+(VS(n,i)===-s),A=s*(a-o);return A===0?0:A}function VS(r,e){const t=r.getFullYear()-e.getFullYear()||r.getMonth()-e.getMonth()||r.getDate()-e.getDate()||r.getHours()-e.getHours()||r.getMinutes()-e.getMinutes()||r.getSeconds()-e.getSeconds()||r.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Sm(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function M9(r,e,t){const[n,i]=Nd(t==null?void 0:t.in,r,e),s=(+n-+i)/Em;return Sm(t==null?void 0:t.roundingMethod)(s)}function cB(r,e){return+er(r)-+er(e)}function O9(r,e,t){const n=cB(r,e)/Cm;return Sm(t==null?void 0:t.roundingMethod)(n)}function AL(r,e){const t=er(r,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function lL(r,e){const t=er(r,e==null?void 0:e.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Q9(r,e){const t=er(r,e==null?void 0:e.in);return+AL(t,e)==+lL(t,e)}function cL(r,e,t){const[n,i,s]=Nd(t==null?void 0:t.in,r,r,e),a=sp(i,s),o=Math.abs(R9(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let A=sp(i,s)===-a;Q9(n)&&o===1&&sp(n,s)===1&&(A=!1);const l=a*(o-+A);return l===0?0:l}function H9(r,e,t){const n=cL(r,e,t)/3;return Sm(t==null?void 0:t.roundingMethod)(n)}function V9(r,e,t){const n=cB(r,e)/1e3;return Sm(t==null?void 0:t.roundingMethod)(n)}function $9(r,e,t){const n=oL(r,e,t)/7;return Sm(t==null?void 0:t.roundingMethod)(n)}function j9(r,e,t){const[n,i]=Nd(t==null?void 0:t.in,r,e),s=sp(n,i),a=Math.abs(U9(n,i));n.setFullYear(1584),i.setFullYear(1584);const o=sp(n,i)===-s,A=s*(a-+o);return A===0?0:A}function G9(r,e){const t=er(r,e==null?void 0:e.in),n=t.getMonth(),i=n-n%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function K9(r,e){const t=er(r,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function z9(r,e){const t=er(r,e==null?void 0:e.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function uL(r,e){const t=er(r,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function q9(r,e){const t=er(r,e==null?void 0:e.in);return t.setMinutes(59,59,999),t}function W9(r,e){var o,A;const t=Pd(),n=t.weekStartsOn??((A=(o=t.locale)==null?void 0:o.options)==null?void 0:A.weekStartsOn)??0,i=er(r,e==null?void 0:e.in),s=i.getDay(),a=(s<n?-7:0)+6-(s-n);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function Y9(r,e){const t=er(r,e==null?void 0:e.in);return t.setSeconds(59,999),t}function X9(r,e){const t=er(r,e==null?void 0:e.in),n=t.getMonth(),i=n-n%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function J9(r,e){const t=er(r,e==null?void 0:e.in);return t.setMilliseconds(999),t}const Z9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},e$=(r,e,t)=>{let n;const i=Z9[r];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function f1(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const t$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},r$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},n$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},i$={date:f1({formats:t$,defaultWidth:"full"}),time:f1({formats:r$,defaultWidth:"full"}),dateTime:f1({formats:n$,defaultWidth:"full"})},s$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},a$=(r,e,t,n)=>s$[r];function ug(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let i;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):a;i=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;i=r.values[o]||r.values[a]}const s=r.argumentCallback?r.argumentCallback(e):e;return i[s]}}const o$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},A$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},l$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},c$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},d$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},h$=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},f$={ordinalNumber:h$,era:ug({values:o$,defaultWidth:"wide"}),quarter:ug({values:A$,defaultWidth:"wide",argumentCallback:r=>r-1}),month:ug({values:l$,defaultWidth:"wide"}),day:ug({values:c$,defaultWidth:"wide"}),dayPeriod:ug({values:u$,defaultWidth:"wide",formattingValues:d$,defaultFormattingWidth:"wide"})};function dg(r){return(e,t={})=>{const n=t.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],A=Array.isArray(o)?p$(o,u=>u.test(a)):g$(o,u=>u.test(a));let l;l=r.valueCallback?r.valueCallback(A):A,l=t.valueCallback?t.valueCallback(l):l;const c=e.slice(a.length);return{value:l,rest:c}}}function g$(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function p$(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function m$(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const i=n[0],s=e.match(r.parsePattern);if(!s)return null;let a=r.valueCallback?r.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const y$=/^(\d+)(th|st|nd|rd)?/i,b$=/\d+/i,w$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},v$={any:[/^b/i,/^(a|c)/i]},_$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},x$={any:[/1/i,/2/i,/3/i,/4/i]},B$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},C$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},E$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},S$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},I$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},k$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},T$={ordinalNumber:m$({matchPattern:y$,parsePattern:b$,valueCallback:r=>parseInt(r,10)}),era:dg({matchPatterns:w$,defaultMatchWidth:"wide",parsePatterns:v$,defaultParseWidth:"any"}),quarter:dg({matchPatterns:_$,defaultMatchWidth:"wide",parsePatterns:x$,defaultParseWidth:"any",valueCallback:r=>r+1}),month:dg({matchPatterns:B$,defaultMatchWidth:"wide",parsePatterns:C$,defaultParseWidth:"any"}),day:dg({matchPatterns:E$,defaultMatchWidth:"wide",parsePatterns:S$,defaultParseWidth:"any"}),dayPeriod:dg({matchPatterns:I$,defaultMatchWidth:"any",parsePatterns:k$,defaultParseWidth:"any"})},dL={code:"en-US",formatDistance:e$,formatLong:i$,formatRelative:a$,localize:f$,match:T$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function F$(r,e){const t=er(r,e==null?void 0:e.in);return sL(t,uL(t))+1}function hL(r,e){const t=er(r,e==null?void 0:e.in),n=+Jh(t)-+k9(t);return Math.round(n/nL)+1}function uB(r,e){var c,u,h,d;const t=er(r,e==null?void 0:e.in),n=t.getFullYear(),i=Pd(),s=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??i.firstWeekContainsDate??((d=(h=i.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,a=qn((e==null?void 0:e.in)||r,0);a.setFullYear(n+1,0,s),a.setHours(0,0,0,0);const o=EA(a,e),A=qn((e==null?void 0:e.in)||r,0);A.setFullYear(n,0,s),A.setHours(0,0,0,0);const l=EA(A,e);return+t>=+o?n+1:+t>=+l?n:n-1}function L$(r,e){var o,A,l,c;const t=Pd(),n=(e==null?void 0:e.firstWeekContainsDate)??((A=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:A.firstWeekContainsDate)??t.firstWeekContainsDate??((c=(l=t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??1,i=uB(r,e),s=qn((e==null?void 0:e.in)||r,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),EA(s,e)}function fL(r,e){const t=er(r,e==null?void 0:e.in),n=+EA(t,e)-+L$(t,e);return Math.round(n/nL)+1}function Gr(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const Yl={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return Gr(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Gr(t+1,2)},d(r,e){return Gr(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Gr(r.getHours()%12||12,e.length)},H(r,e){return Gr(r.getHours(),e.length)},m(r,e){return Gr(r.getMinutes(),e.length)},s(r,e){return Gr(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),i=Math.trunc(n*Math.pow(10,t-3));return Gr(i,e.length)}},Zd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$S={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),i=n>0?n:1-n;return t.ordinalNumber(i,{unit:"year"})}return Yl.y(r,e)},Y:function(r,e,t,n){const i=uB(r,n),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Gr(a,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Gr(s,e.length)},R:function(r,e){const t=iL(r);return Gr(t,e.length)},u:function(r,e){const t=r.getFullYear();return Gr(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Gr(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Gr(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return Yl.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return Gr(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const i=fL(r,n);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Gr(i,e.length)},I:function(r,e,t){const n=hL(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Gr(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Yl.d(r,e)},D:function(r,e,t){const n=F$(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Gr(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const i=r.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Gr(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const i=r.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Gr(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Gr(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const i=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let i;switch(n===12?i=Zd.noon:n===0?i=Zd.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let i;switch(n>=17?i=Zd.evening:n>=12?i=Zd.afternoon:n>=4?i=Zd.morning:i=Zd.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Yl.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Yl.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Gr(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Gr(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Yl.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Yl.s(r,e)},S:function(r,e){return Yl.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return GS(n);case"XXXX":case"XX":return Tu(n);case"XXXXX":case"XXX":default:return Tu(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return GS(n);case"xxxx":case"xx":return Tu(n);case"xxxxx":case"xxx":default:return Tu(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+jS(n,":");case"OOOO":default:return"GMT"+Tu(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+jS(n,":");case"zzzz":default:return"GMT"+Tu(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return Gr(n,e.length)},T:function(r,e,t){return Gr(+r,e.length)}};function jS(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),i=Math.trunc(n/60),s=n%60;return s===0?t+String(i):t+String(i)+e+Gr(s,2)}function GS(r,e){return r%60===0?(r>0?"-":"+")+Gr(Math.abs(r)/60,2):Tu(r,e)}function Tu(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),i=Gr(Math.trunc(n/60),2),s=Gr(n%60,2);return t+i+e+s}const KS=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},gL=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},P$=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],i=t[2];if(!i)return KS(r,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",KS(n,e)).replace("{{time}}",gL(i,e))},Z_={p:gL,P:P$},N$=/^D+$/,D$=/^Y+$/,R$=["D","DD","YY","YYYY"];function pL(r){return N$.test(r)}function mL(r){return D$.test(r)}function e2(r,e,t){const n=U$(r,e,t);if(console.warn(n),R$.includes(r))throw new RangeError(n)}function U$(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const M$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,O$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Q$=/^'([^]*?)'?$/,H$=/''/g,V$=/[a-zA-Z]/;function $$(r,e,t){var c,u,h,d,p,f,y,b;const n=Pd(),i=(t==null?void 0:t.locale)??n.locale??dL,s=(t==null?void 0:t.firstWeekContainsDate)??((u=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(h=n.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((f=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((b=(y=n.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0,o=er(r,t==null?void 0:t.in);if(!aL(o))throw new RangeError("Invalid time value");let A=e.match(O$).map(B=>{const S=B[0];if(S==="p"||S==="P"){const C=Z_[S];return C(B,i.formatLong)}return B}).join("").match(M$).map(B=>{if(B==="''")return{isToken:!1,value:"'"};const S=B[0];if(S==="'")return{isToken:!1,value:j$(B)};if($S[S])return{isToken:!0,value:B};if(S.match(V$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:B}});i.localize.preprocessor&&(A=i.localize.preprocessor(o,A));const l={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return A.map(B=>{if(!B.isToken)return B.value;const S=B.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&mL(S)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&pL(S))&&e2(S,e,String(r));const C=$S[S[0]];return C(o,S,i.localize,l)}).join("")}function j$(r){const e=r.match(Q$);return e?e[1].replace(H$,"'"):r}function G$(){return Object.assign({},Pd())}function K$(r,e){const t=er(r,e==null?void 0:e.in).getDay();return t===0?7:t}function z$(r,e){const t=q$(e)?new e(0):qn(e,0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}function q$(r){var e;return typeof r=="function"&&((e=r.prototype)==null?void 0:e.constructor)===r}const W$=10;class yL{constructor(){ke(this,"subPriority",0)}validate(e,t){return!0}}class Y$ extends yL{constructor(e,t,n,i,s){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=i,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class X$ extends yL{constructor(t,n){super();ke(this,"priority",W$);ke(this,"subPriority",-1);this.context=t||(i=>qn(n,i))}set(t,n){return n.timestampIsSet?t:qn(t,z$(t,this.context))}}let Rr=class{run(e,t,n,i){const s=this.parse(e,t,n,i);return s?{setter:new Y$(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,n){return!0}};class J$ extends Rr{constructor(){super(...arguments);ke(this,"priority",140);ke(this,"incompatibleTokens",["R","u","t","T"])}parse(t,n,i){switch(n){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,n,i){return n.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const di={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},iA={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function hi(r,e){return r&&{value:e(r.value),rest:r.rest}}function Dn(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function sA(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:n*(i*Em+s*Cm+a*E9),rest:e.slice(t[0].length)}}function bL(r){return Dn(di.anyDigitsSigned,r)}function Wn(r,e){switch(r){case 1:return Dn(di.singleDigit,e);case 2:return Dn(di.twoDigits,e);case 3:return Dn(di.threeDigits,e);case 4:return Dn(di.fourDigits,e);default:return Dn(new RegExp("^\\d{1,"+r+"}"),e)}}function Nb(r,e){switch(r){case 1:return Dn(di.singleDigitSigned,e);case 2:return Dn(di.twoDigitsSigned,e);case 3:return Dn(di.threeDigitsSigned,e);case 4:return Dn(di.fourDigitsSigned,e);default:return Dn(new RegExp("^-?\\d{1,"+r+"}"),e)}}function dB(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function wL(r,e){const t=e>0,n=t?e:1-e;let i;if(n<=50)i=r||100;else{const s=n+50,a=Math.trunc(s/100)*100,o=r>=s%100;i=r+a-(o?100:0)}return t?i:1-i}function vL(r){return r%400===0||r%4===0&&r%100!==0}class Z$ extends Rr{constructor(){super(...arguments);ke(this,"priority",130);ke(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,n,i){const s=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return hi(Wn(4,t),s);case"yo":return hi(i.ordinalNumber(t,{unit:"year"}),s);default:return hi(Wn(n.length,t),s)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,i){const s=t.getFullYear();if(i.isTwoDigitYear){const o=wL(i.year,s);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const a=!("era"in n)||n.era===1?i.year:1-i.year;return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}class ej extends Rr{constructor(){super(...arguments);ke(this,"priority",130);ke(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,n,i){const s=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return hi(Wn(4,t),s);case"Yo":return hi(i.ordinalNumber(t,{unit:"year"}),s);default:return hi(Wn(n.length,t),s)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,i,s){const a=uB(t,s);if(i.isTwoDigitYear){const A=wL(i.year,a);return t.setFullYear(A,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),EA(t,s)}const o=!("era"in n)||n.era===1?i.year:1-i.year;return t.setFullYear(o,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),EA(t,s)}}class tj extends Rr{constructor(){super(...arguments);ke(this,"priority",130);ke(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,n){return Nb(n==="R"?4:n.length,t)}set(t,n,i){const s=qn(t,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Jh(s)}}class rj extends Rr{constructor(){super(...arguments);ke(this,"priority",130);ke(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,n){return Nb(n==="u"?4:n.length,t)}set(t,n,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class nj extends Rr{constructor(){super(...arguments);ke(this,"priority",120);ke(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"Q":case"QQ":return Wn(n.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class ij extends Rr{constructor(){super(...arguments);ke(this,"priority",120);ke(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"q":case"qq":return Wn(n.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class sj extends Rr{constructor(){super(...arguments);ke(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ke(this,"priority",110)}parse(t,n,i){const s=a=>a-1;switch(n){case"M":return hi(Dn(di.month,t),s);case"MM":return hi(Wn(2,t),s);case"Mo":return hi(i.ordinalNumber(t,{unit:"month"}),s);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class aj extends Rr{constructor(){super(...arguments);ke(this,"priority",110);ke(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,n,i){const s=a=>a-1;switch(n){case"L":return hi(Dn(di.month,t),s);case"LL":return hi(Wn(2,t),s);case"Lo":return hi(i.ordinalNumber(t,{unit:"month"}),s);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function oj(r,e,t){const n=er(r,t==null?void 0:t.in),i=fL(n,t)-e;return n.setDate(n.getDate()-i*7),er(n,t==null?void 0:t.in)}class Aj extends Rr{constructor(){super(...arguments);ke(this,"priority",100);ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,n,i){switch(n){case"w":return Dn(di.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Wn(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,i,s){return EA(oj(t,i,s),s)}}function lj(r,e,t){const n=er(r,t==null?void 0:t.in),i=hL(n,t)-e;return n.setDate(n.getDate()-i*7),n}class cj extends Rr{constructor(){super(...arguments);ke(this,"priority",100);ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,n,i){switch(n){case"I":return Dn(di.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Wn(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,i){return Jh(lj(t,i))}}const uj=[31,28,31,30,31,30,31,31,30,31,30,31],dj=[31,29,31,30,31,30,31,31,30,31,30,31];class hj extends Rr{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"subPriority",1);ke(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"d":return Dn(di.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Wn(n.length,t)}}validate(t,n){const i=t.getFullYear(),s=vL(i),a=t.getMonth();return s?n>=1&&n<=dj[a]:n>=1&&n<=uj[a]}set(t,n,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class fj extends Rr{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"subpriority",1);ke(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,n,i){switch(n){case"D":case"DD":return Dn(di.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Wn(n.length,t)}}validate(t,n){const i=t.getFullYear();return vL(i)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function hB(r,e,t){var u,h,d,p;const n=Pd(),i=(t==null?void 0:t.weekStartsOn)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((p=(d=n.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,s=er(r,t==null?void 0:t.in),a=s.getDay(),A=(e%7+7)%7,l=7-i,c=e<0||e>6?e-(a+l)%7:(A+l)%7-(a+l)%7;return Nw(s,c,t)}class gj extends Rr{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,s){return t=hB(t,i,s),t.setHours(0,0,0,0),t}}class pj extends Rr{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,n,i,s){const a=o=>{const A=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+A};switch(n){case"e":case"ee":return hi(Wn(n.length,t),a);case"eo":return hi(i.ordinalNumber(t,{unit:"day"}),a);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,s){return t=hB(t,i,s),t.setHours(0,0,0,0),t}}class mj extends Rr{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,n,i,s){const a=o=>{const A=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+A};switch(n){case"c":case"cc":return hi(Wn(n.length,t),a);case"co":return hi(i.ordinalNumber(t,{unit:"day"}),a);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,s){return t=hB(t,i,s),t.setHours(0,0,0,0),t}}function yj(r,e,t){const n=er(r,t==null?void 0:t.in),i=K$(n,t),s=e-i;return Nw(n,s,t)}class bj extends Rr{constructor(){super(...arguments);ke(this,"priority",90);ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,n,i){const s=a=>a===0?7:a;switch(n){case"i":case"ii":return Wn(n.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return hi(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return hi(i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return hi(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return hi(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,n){return n>=1&&n<=7}set(t,n,i){return t=yj(t,i),t.setHours(0,0,0,0),t}}class wj extends Rr{constructor(){super(...arguments);ke(this,"priority",80);ke(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,n,i){switch(n){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(dB(i),0,0,0),t}}class vj extends Rr{constructor(){super(...arguments);ke(this,"priority",80);ke(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,n,i){switch(n){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(dB(i),0,0,0),t}}class _j extends Rr{constructor(){super(...arguments);ke(this,"priority",80);ke(this,"incompatibleTokens",["a","b","t","T"])}parse(t,n,i){switch(n){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(dB(i),0,0,0),t}}class xj extends Rr{constructor(){super(...arguments);ke(this,"priority",70);ke(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,n,i){switch(n){case"h":return Dn(di.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Wn(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,i){const s=t.getHours()>=12;return s&&i<12?t.setHours(i+12,0,0,0):!s&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class Bj extends Rr{constructor(){super(...arguments);ke(this,"priority",70);ke(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,n,i){switch(n){case"H":return Dn(di.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Wn(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,i){return t.setHours(i,0,0,0),t}}class Cj extends Rr{constructor(){super(...arguments);ke(this,"priority",70);ke(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,n,i){switch(n){case"K":return Dn(di.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Wn(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class Ej extends Rr{constructor(){super(...arguments);ke(this,"priority",70);ke(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,n,i){switch(n){case"k":return Dn(di.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Wn(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,i){const s=i<=24?i%24:i;return t.setHours(s,0,0,0),t}}class Sj extends Rr{constructor(){super(...arguments);ke(this,"priority",60);ke(this,"incompatibleTokens",["t","T"])}parse(t,n,i){switch(n){case"m":return Dn(di.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Wn(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,i){return t.setMinutes(i,0,0),t}}class Ij extends Rr{constructor(){super(...arguments);ke(this,"priority",50);ke(this,"incompatibleTokens",["t","T"])}parse(t,n,i){switch(n){case"s":return Dn(di.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Wn(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,i){return t.setSeconds(i,0),t}}class kj extends Rr{constructor(){super(...arguments);ke(this,"priority",30);ke(this,"incompatibleTokens",["t","T"])}parse(t,n){const i=s=>Math.trunc(s*Math.pow(10,-n.length+3));return hi(Wn(n.length,t),i)}set(t,n,i){return t.setMilliseconds(i),t}}class Tj extends Rr{constructor(){super(...arguments);ke(this,"priority",10);ke(this,"incompatibleTokens",["t","T","x"])}parse(t,n){switch(n){case"X":return sA(iA.basicOptionalMinutes,t);case"XX":return sA(iA.basic,t);case"XXXX":return sA(iA.basicOptionalSeconds,t);case"XXXXX":return sA(iA.extendedOptionalSeconds,t);case"XXX":default:return sA(iA.extended,t)}}set(t,n,i){return n.timestampIsSet?t:qn(t,t.getTime()-Pb(t)-i)}}class Fj extends Rr{constructor(){super(...arguments);ke(this,"priority",10);ke(this,"incompatibleTokens",["t","T","X"])}parse(t,n){switch(n){case"x":return sA(iA.basicOptionalMinutes,t);case"xx":return sA(iA.basic,t);case"xxxx":return sA(iA.basicOptionalSeconds,t);case"xxxxx":return sA(iA.extendedOptionalSeconds,t);case"xxx":default:return sA(iA.extended,t)}}set(t,n,i){return n.timestampIsSet?t:qn(t,t.getTime()-Pb(t)-i)}}class Lj extends Rr{constructor(){super(...arguments);ke(this,"priority",40);ke(this,"incompatibleTokens","*")}parse(t){return bL(t)}set(t,n,i){return[qn(t,i*1e3),{timestampIsSet:!0}]}}class Pj extends Rr{constructor(){super(...arguments);ke(this,"priority",20);ke(this,"incompatibleTokens","*")}parse(t){return bL(t)}set(t,n,i){return[qn(t,i),{timestampIsSet:!0}]}}const Nj={G:new J$,y:new Z$,Y:new ej,R:new tj,u:new rj,Q:new nj,q:new ij,M:new sj,L:new aj,w:new Aj,I:new cj,d:new hj,D:new fj,E:new gj,e:new pj,c:new mj,i:new bj,a:new wj,b:new vj,B:new _j,h:new xj,H:new Bj,K:new Cj,k:new Ej,m:new Sj,s:new Ij,S:new kj,X:new Tj,x:new Fj,t:new Lj,T:new Pj},Dj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Uj=/^'([^]*?)'?$/,Mj=/''/g,Oj=/\S/,Qj=/[a-zA-Z]/;function Hj(r,e,t,n){var y,b,B,S,C,P,M,L;const i=()=>qn((n==null?void 0:n.in)||t,NaN),s=G$(),a=(n==null?void 0:n.locale)??s.locale??dL,o=(n==null?void 0:n.firstWeekContainsDate)??((b=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:b.firstWeekContainsDate)??s.firstWeekContainsDate??((S=(B=s.locale)==null?void 0:B.options)==null?void 0:S.firstWeekContainsDate)??1,A=(n==null?void 0:n.weekStartsOn)??((P=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:P.weekStartsOn)??s.weekStartsOn??((L=(M=s.locale)==null?void 0:M.options)==null?void 0:L.weekStartsOn)??0;if(!e)return r?i():er(t,n==null?void 0:n.in);const l={firstWeekContainsDate:o,weekStartsOn:A,locale:a},c=[new X$(n==null?void 0:n.in,t)],u=e.match(Rj).map(_=>{const v=_[0];if(v in Z_){const T=Z_[v];return T(_,a.formatLong)}return _}).join("").match(Dj),h=[];for(let _ of u){!(n!=null&&n.useAdditionalWeekYearTokens)&&mL(_)&&e2(_,e,r),!(n!=null&&n.useAdditionalDayOfYearTokens)&&pL(_)&&e2(_,e,r);const v=_[0],T=Nj[v];if(T){const{incompatibleTokens:E}=T;if(Array.isArray(E)){const F=h.find(k=>E.includes(k.token)||k.token===v);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${_}\` at the same time`)}else if(T.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);h.push({token:v,fullToken:_});const x=T.run(r,_,a.match,l);if(!x)return i();c.push(x.setter),r=x.rest}else{if(v.match(Qj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");if(_==="''"?_="'":v==="'"&&(_=Vj(_)),r.indexOf(_)===0)r=r.slice(_.length);else return i()}}if(r.length>0&&Oj.test(r))return i();const d=c.map(_=>_.priority).sort((_,v)=>v-_).filter((_,v,T)=>T.indexOf(_)===v).map(_=>c.filter(v=>v.priority===_).sort((v,T)=>T.subPriority-v.subPriority)).map(_=>_[0]);let p=er(t,n==null?void 0:n.in);if(isNaN(+p))return i();const f={};for(const _ of d){if(!_.validate(p,l))return i();const v=_.set(p,f,l);Array.isArray(v)?(p=v[0],Object.assign(f,v[1])):p=v}return p}function Vj(r){return r.match(Uj)[1].replace(Mj,"'")}function $j(r,e){const t=er(r,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function jj(r,e){const t=er(r,e==null?void 0:e.in);return t.setSeconds(0,0),t}function Gj(r,e){const t=er(r,e==null?void 0:e.in);return t.setMilliseconds(0),t}function Kj(r,e){const t=()=>qn(e==null?void 0:e.in,NaN),n=(e==null?void 0:e.additionalDigits)??2,i=Yj(r);let s;if(i.date){const l=Xj(i.date,n);s=Jj(l.restDateString,l.year)}if(!s||isNaN(+s))return t();const a=+s;let o=0,A;if(i.time&&(o=Zj(i.time),isNaN(o)))return t();if(i.timezone){if(A=eG(i.timezone),isNaN(A))return t()}else{const l=new Date(a+o),c=er(0,e==null?void 0:e.in);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return er(a+o+A,e==null?void 0:e.in)}const O0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zj=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,qj=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Wj=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Yj(r){const e={},t=r.split(O0.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],O0.timeZoneDelimiter.test(e.date)&&(e.date=r.split(O0.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){const i=O0.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function Xj(r,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(t);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?i:s*100,restDateString:r.slice((n[1]||n[2]).length)}}function Jj(r,e){if(e===null)return new Date(NaN);const t=r.match(zj);if(!t)return new Date(NaN);const n=!!t[4],i=hg(t[1]),s=hg(t[2])-1,a=hg(t[3]),o=hg(t[4]),A=hg(t[5])-1;if(n)return sG(e,o,A)?tG(e,o,A):new Date(NaN);{const l=new Date(0);return!nG(e,s,a)||!iG(e,i)?new Date(NaN):(l.setUTCFullYear(e,s,Math.max(i,a)),l)}}function hg(r){return r?parseInt(r):1}function Zj(r){const e=r.match(qj);if(!e)return NaN;const t=g1(e[1]),n=g1(e[2]),i=g1(e[3]);return aG(t,n,i)?t*Em+n*Cm+i*1e3:NaN}function g1(r){return r&&parseFloat(r.replace(",","."))||0}function eG(r){if(r==="Z")return 0;const e=r.match(Wj);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return oG(n,i)?t*(n*Em+i*Cm):NaN}function tG(r,e,t){const n=new Date(0);n.setUTCFullYear(r,0,4);const i=n.getUTCDay()||7,s=(e-1)*7+t+1-i;return n.setUTCDate(n.getUTCDate()+s),n}const rG=[31,null,31,30,31,30,31,31,30,31,30,31];function _L(r){return r%400===0||r%4===0&&r%100!==0}function nG(r,e,t){return e>=0&&e<=11&&t>=1&&t<=(rG[e]||(_L(r)?29:28))}function iG(r,e){return e>=1&&e<=(_L(r)?366:365)}function sG(r,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function aG(r,e,t){return r===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&r>=0&&r<25}function oG(r,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const AG={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};D3._date.override({_id:"date-fns",formats:function(){return AG},parse:function(r,e){if(r===null||typeof r>"u")return null;const t=typeof r;return t==="number"||r instanceof Date?r=er(r):t==="string"&&(typeof e=="string"?r=Hj(r,e,new Date,this.options):r=Kj(r,this.options)),aL(r)?r.getTime():null},format:function(r,e){return $$(r,e,this.options)},add:function(r,e,t){switch(t){case"millisecond":return lB(r,e);case"second":return L9(r,e);case"minute":return T9(r,e);case"hour":return S9(r,e);case"day":return Nw(r,e);case"week":return P9(r,e);case"month":return AB(r,e);case"quarter":return F9(r,e);case"year":return N9(r,e);default:return r}},diff:function(r,e,t){switch(t){case"millisecond":return cB(r,e);case"second":return V9(r,e);case"minute":return O9(r,e);case"hour":return M9(r,e);case"day":return oL(r,e);case"week":return $9(r,e);case"month":return cL(r,e);case"quarter":return H9(r,e);case"year":return j9(r,e);default:return 0}},startOf:function(r,e,t){switch(e){case"second":return Gj(r);case"minute":return jj(r);case"hour":return $j(r);case"day":return J_(r);case"week":return EA(r);case"isoWeek":return EA(r,{weekStartsOn:+t});case"month":return K9(r);case"quarter":return G9(r);case"year":return uL(r);default:return r}},endOf:function(r,e){switch(e){case"second":return J9(r);case"minute":return Y9(r);case"hour":return q9(r);case"day":return AL(r);case"week":return W9(r);case"month":return lL(r);case"quarter":return X9(r);case"year":return z9(r);default:return r}}});/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var zS=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var r=window.screen;if(r)return(r.deviceXDPI||1)/(r.logicalXDPI||1)}return 1})(),ap={toTextLines:function(r){var e=[],t;for(r=[].concat(r);r.length;)t=r.pop(),typeof t=="string"?e.unshift.apply(e,t.split(`
`)):Array.isArray(t)?r.push.apply(r,t):ir(r)||e.unshift(""+t);return e},textSize:function(r,e,t){var n=[].concat(e),i=n.length,s=r.font,a=0,o;for(r.font=t.string,o=0;o<i;++o)a=Math.max(r.measureText(n[o]).width,a);return r.font=s,{height:i*t.lineHeight,width:a}},bound:function(r,e,t){return Math.max(r,Math.min(e,t))},arrayDiff:function(r,e){var t=r.slice(),n=[],i,s,a,o;for(i=0,a=e.length;i<a;++i)o=e[i],s=t.indexOf(o),s===-1?n.push([o,1]):t.splice(s,1);for(i=0,a=t.length;i<a;++i)n.push([t[i],-1]);return n},rasterize:function(r){return Math.round(r*zS)/zS}};function p1(r,e){var t=e.x,n=e.y;if(t===null)return{x:0,y:-1};if(n===null)return{x:1,y:0};var i=r.x-t,s=r.y-n,a=Math.sqrt(i*i+s*s);return{x:a?i/a:0,y:a?s/a:-1}}function lG(r,e,t,n,i){switch(i){case"center":t=n=0;break;case"bottom":t=0,n=1;break;case"right":t=1,n=0;break;case"left":t=-1,n=0;break;case"top":t=0,n=-1;break;case"start":t=-t,n=-n;break;case"end":break;default:i*=Math.PI/180,t=Math.cos(i),n=Math.sin(i);break}return{x:r,y:e,vx:t,vy:n}}var cG=0,xL=1,BL=2,CL=4,EL=8;function Q0(r,e,t){var n=cG;return r<t.left?n|=xL:r>t.right&&(n|=BL),e<t.top?n|=EL:e>t.bottom&&(n|=CL),n}function uG(r,e){for(var t=r.x0,n=r.y0,i=r.x1,s=r.y1,a=Q0(t,n,e),o=Q0(i,s,e),A,l,c;!(!(a|o)||a&o);)A=a||o,A&EL?(l=t+(i-t)*(e.top-n)/(s-n),c=e.top):A&CL?(l=t+(i-t)*(e.bottom-n)/(s-n),c=e.bottom):A&BL?(c=n+(s-n)*(e.right-t)/(i-t),l=e.right):A&xL&&(c=n+(s-n)*(e.left-t)/(i-t),l=e.left),A===a?(t=l,n=c,a=Q0(t,n,e)):(i=l,s=c,o=Q0(i,s,e));return{x0:t,x1:i,y0:n,y1:s}}function H0(r,e){var t=e.anchor,n=r,i,s;return e.clamp&&(n=uG(n,e.area)),t==="start"?(i=n.x0,s=n.y0):t==="end"?(i=n.x1,s=n.y1):(i=(n.x0+n.x1)/2,s=(n.y0+n.y1)/2),lG(i,s,r.vx,r.vy,e.align)}var V0={arc:function(r,e){var t=(r.startAngle+r.endAngle)/2,n=Math.cos(t),i=Math.sin(t),s=r.innerRadius,a=r.outerRadius;return H0({x0:r.x+n*s,y0:r.y+i*s,x1:r.x+n*a,y1:r.y+i*a,vx:n,vy:i},e)},point:function(r,e){var t=p1(r,e.origin),n=t.x*r.options.radius,i=t.y*r.options.radius;return H0({x0:r.x-n,y0:r.y-i,x1:r.x+n,y1:r.y+i,vx:t.x,vy:t.y},e)},bar:function(r,e){var t=p1(r,e.origin),n=r.x,i=r.y,s=0,a=0;return r.horizontal?(n=Math.min(r.x,r.base),s=Math.abs(r.base-r.x)):(i=Math.min(r.y,r.base),a=Math.abs(r.base-r.y)),H0({x0:n,y0:i+a,x1:n+s,y1:i,vx:t.x,vy:t.y},e)},fallback:function(r,e){var t=p1(r,e.origin);return H0({x0:r.x,y0:r.y,x1:r.x+(r.width||0),y1:r.y+(r.height||0),vx:t.x,vy:t.y},e)}},ol=ap.rasterize;function dG(r){var e=r.borderWidth||0,t=r.padding,n=r.size.height,i=r.size.width,s=-i/2,a=-n/2;return{frame:{x:s-t.left-e,y:a-t.top-e,w:i+t.width+e*2,h:n+t.height+e*2},text:{x:s,y:a,w:i,h:n}}}function hG(r,e){var t=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var n=t.getBasePixel();return r.horizontal?{x:n,y:null}:{x:null,y:n}}function fG(r){return r instanceof Eh?V0.arc:r instanceof np?V0.point:r instanceof ip?V0.bar:V0.fallback}function gG(r,e,t,n,i,s){var a=Math.PI/2;if(s){var o=Math.min(s,i/2,n/2),A=e+o,l=t+o,c=e+n-o,u=t+i-o;r.moveTo(e,l),A<c&&l<u?(r.arc(A,l,o,-Math.PI,-a),r.arc(c,l,o,-a,0),r.arc(c,u,o,0,a),r.arc(A,u,o,a,Math.PI)):A<c?(r.moveTo(A,t),r.arc(c,l,o,-a,a),r.arc(A,l,o,a,Math.PI+a)):l<u?(r.arc(A,l,o,-Math.PI,0),r.arc(A,u,o,0,Math.PI)):r.arc(A,l,o,-Math.PI,Math.PI),r.closePath(),r.moveTo(e,t)}else r.rect(e,t,n,i)}function pG(r,e,t){var n=t.backgroundColor,i=t.borderColor,s=t.borderWidth;!n&&(!i||!s)||(r.beginPath(),gG(r,ol(e.x)+s/2,ol(e.y)+s/2,ol(e.w)-s,ol(e.h)-s,t.borderRadius),r.closePath(),n&&(r.fillStyle=n,r.fill()),i&&s&&(r.strokeStyle=i,r.lineWidth=s,r.lineJoin="miter",r.stroke()))}function mG(r,e,t){var n=t.lineHeight,i=r.w,s=r.x,a=r.y+n/2;return e==="center"?s+=i/2:(e==="end"||e==="right")&&(s+=i),{h:n,w:i,x:s,y:a}}function yG(r,e,t){var n=r.shadowBlur,i=t.stroked,s=ol(t.x),a=ol(t.y),o=ol(t.w);i&&r.strokeText(e,s,a,o),t.filled&&(n&&i&&(r.shadowBlur=0),r.fillText(e,s,a,o),n&&i&&(r.shadowBlur=n))}function bG(r,e,t,n){var i=n.textAlign,s=n.color,a=!!s,o=n.font,A=e.length,l=n.textStrokeColor,c=n.textStrokeWidth,u=l&&c,h;if(!(!A||!a&&!u))for(t=mG(t,i,o),r.font=o.string,r.textAlign=i,r.textBaseline="middle",r.shadowBlur=n.textShadowBlur,r.shadowColor=n.textShadowColor,a&&(r.fillStyle=s),u&&(r.lineJoin="round",r.lineWidth=c,r.strokeStyle=l),h=0,A=e.length;h<A;++h)yG(r,e[h],{stroked:u,filled:a,w:t.w,x:t.x,y:t.y+t.h*h})}var SL=function(r,e,t,n){var i=this;i._config=r,i._index=n,i._model=null,i._rects=null,i._ctx=e,i._el=t};CA(SL.prototype,{_modelize:function(r,e,t,n){var i=this,s=i._index,a=vi(yn([t.font,{}],n,s)),o=yn([t.color,Bn.color],n,s);return{align:yn([t.align,"center"],n,s),anchor:yn([t.anchor,"center"],n,s),area:n.chart.chartArea,backgroundColor:yn([t.backgroundColor,null],n,s),borderColor:yn([t.borderColor,null],n,s),borderRadius:yn([t.borderRadius,0],n,s),borderWidth:yn([t.borderWidth,0],n,s),clamp:yn([t.clamp,!1],n,s),clip:yn([t.clip,!1],n,s),color:o,display:r,font:a,lines:e,offset:yn([t.offset,4],n,s),opacity:yn([t.opacity,1],n,s),origin:hG(i._el,n),padding:hs(yn([t.padding,4],n,s)),positioner:fG(i._el),rotation:yn([t.rotation,0],n,s)*(Math.PI/180),size:ap.textSize(i._ctx,e,a),textAlign:yn([t.textAlign,"start"],n,s),textShadowBlur:yn([t.textShadowBlur,0],n,s),textShadowColor:yn([t.textShadowColor,o],n,s),textStrokeColor:yn([t.textStrokeColor,o],n,s),textStrokeWidth:yn([t.textStrokeWidth,0],n,s)}},update:function(r){var e=this,t=null,n=null,i=e._index,s=e._config,a,o,A,l=yn([s.display,!0],r,i);l&&(a=r.dataset.data[i],o=jt($t(s.formatter,[a,r]),a),A=ir(o)?[]:ap.toTextLines(o),A.length&&(t=e._modelize(l,A,s,r),n=dG(t))),e._model=t,e._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(r,e){var t=this,n=r.ctx,i=t._model,s=t._rects,a;this.visible()&&(n.save(),i.clip&&(a=i.area,n.beginPath(),n.rect(a.left,a.top,a.right-a.left,a.bottom-a.top),n.clip()),n.globalAlpha=ap.bound(0,i.opacity,1),n.translate(ol(e.x),ol(e.y)),n.rotate(i.rotation),pG(n,s.frame,i),bG(n,i.lines,s.text,i),n.restore())}});var wG=Number.MIN_SAFE_INTEGER||-9007199254740991,vG=Number.MAX_SAFE_INTEGER||9007199254740991;function fg(r,e,t){var n=Math.cos(t),i=Math.sin(t),s=e.x,a=e.y;return{x:s+n*(r.x-s)-i*(r.y-a),y:a+i*(r.x-s)+n*(r.y-a)}}function qS(r,e){var t=vG,n=wG,i=e.origin,s,a,o,A,l;for(s=0;s<r.length;++s)a=r[s],o=a.x-i.x,A=a.y-i.y,l=e.vx*o+e.vy*A,t=Math.min(t,l),n=Math.max(n,l);return{min:t,max:n}}function $0(r,e){var t=e.x-r.x,n=e.y-r.y,i=Math.sqrt(t*t+n*n);return{vx:(e.x-r.x)/i,vy:(e.y-r.y)/i,origin:r,ln:i}}var IL=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};CA(IL.prototype,{center:function(){var r=this._rect;return{x:r.x+r.w/2,y:r.y+r.h/2}},update:function(r,e,t){this._rotation=t,this._rect={x:e.x+r.x,y:e.y+r.y,w:e.w,h:e.h}},contains:function(r){var e=this,t=1,n=e._rect;return r=fg(r,e.center(),-e._rotation),!(r.x<n.x-t||r.y<n.y-t||r.x>n.x+n.w+t*2||r.y>n.y+n.h+t*2)},intersects:function(r){var e=this._points(),t=r._points(),n=[$0(e[0],e[1]),$0(e[0],e[3])],i,s,a;for(this._rotation!==r._rotation&&n.push($0(t[0],t[1]),$0(t[0],t[3])),i=0;i<n.length;++i)if(s=qS(e,n[i]),a=qS(t,n[i]),s.max<a.min||a.max<s.min)return!1;return!0},_points:function(){var r=this,e=r._rect,t=r._rotation,n=r.center();return[fg({x:e.x,y:e.y},n,t),fg({x:e.x+e.w,y:e.y},n,t),fg({x:e.x+e.w,y:e.y+e.h},n,t),fg({x:e.x,y:e.y+e.h},n,t)]}});function kL(r,e,t){var n=e.positioner(r,e),i=n.vx,s=n.vy;if(!i&&!s)return{x:n.x,y:n.y};var a=t.w,o=t.h,A=e.rotation,l=Math.abs(a/2*Math.cos(A))+Math.abs(o/2*Math.sin(A)),c=Math.abs(a/2*Math.sin(A))+Math.abs(o/2*Math.cos(A)),u=1/Math.max(Math.abs(i),Math.abs(s));return l*=i*u,c*=s*u,l+=e.offset*i,c+=e.offset*s,{x:n.x+l,y:n.y+c}}function _G(r,e){var t,n,i,s;for(t=r.length-1;t>=0;--t)for(i=r[t].$layout,n=t-1;n>=0&&i._visible;--n)s=r[n].$layout,s._visible&&i._box.intersects(s._box)&&e(i,s);return r}function xG(r){var e,t,n,i,s,a,o;for(e=0,t=r.length;e<t;++e)n=r[e],i=n.$layout,i._visible&&(o=new Proxy(n._el,{get:(A,l)=>A.getProps([l],!0)[l]}),s=n.geometry(),a=kL(o,n.model(),s),i._box.update(a,s,n.rotation()));return _G(r,function(A,l){var c=A._hidable,u=l._hidable;c&&u||u?l._visible=!1:c&&(A._visible=!1)})}var op={prepare:function(r){var e=[],t,n,i,s,a;for(t=0,i=r.length;t<i;++t)for(n=0,s=r[t].length;n<s;++n)a=r[t][n],e.push(a),a.$layout={_box:new IL,_hidable:!1,_visible:!0,_set:t,_idx:a._index};return e.sort(function(o,A){var l=o.$layout,c=A.$layout;return l._idx===c._idx?c._set-l._set:c._idx-l._idx}),this.update(e),e},update:function(r){var e=!1,t,n,i,s,a;for(t=0,n=r.length;t<n;++t)i=r[t],s=i.model(),a=i.$layout,a._hidable=s&&s.display==="auto",a._visible=i.visible(),e|=a._hidable;e&&xG(r)},lookup:function(r,e){var t,n;for(t=r.length-1;t>=0;--t)if(n=r[t].$layout,n&&n._visible&&n._box.contains(e))return r[t];return null},draw:function(r,e){var t,n,i,s,a,o;for(t=0,n=e.length;t<n;++t)i=e[t],s=i.$layout,s._visible&&(a=i.geometry(),o=kL(i._el,i.model(),a),s._box.update(o,a,i.rotation()),i.draw(r,o))}},BG=function(r){if(ir(r))return null;var e=r,t,n,i;if(fr(r))if(!ir(r.label))e=r.label;else if(!ir(r.r))e=r.r;else for(e="",t=Object.keys(r),i=0,n=t.length;i<n;++i)e+=(i!==0?", ":"")+t[i]+": "+r[t[i]];return""+e},CG={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:BG,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},la="$datalabels",TL="$default";function EG(r,e){var t=r.datalabels,n={},i=[],s,a;return t===!1?null:(t===!0&&(t={}),e=CA({},[e,t]),s=e.labels||{},a=Object.keys(s),delete e.labels,a.length?a.forEach(function(o){s[o]&&i.push(CA({},[e,s[o],{_key:o}]))}):i.push(e),n=i.reduce(function(o,A){return cr(A.listeners||{},function(l,c){o[c]=o[c]||{},o[c][A._key||TL]=l}),delete A.listeners,o},{}),{labels:i,listeners:n})}function t2(r,e,t,n){if(e){var i=t.$context,s=t.$groups,a;e[s._set]&&(a=e[s._set][s._key],a&&$t(a,[i,n])===!0&&(r[la]._dirty=!0,t.update(i)))}}function SG(r,e,t,n,i){var s,a;!t&&!n||(t?n?t!==n&&(a=s=!0):a=!0:s=!0,a&&t2(r,e.leave,t,i),s&&t2(r,e.enter,n,i))}function IG(r,e){var t=r[la],n=t._listeners,i,s;if(!(!n.enter&&!n.leave)){if(e.type==="mousemove")s=op.lookup(t._labels,e);else if(e.type!=="mouseout")return;i=t._hovered,t._hovered=s,SG(r,n,i,s,e)}}function kG(r,e){var t=r[la],n=t._listeners.click,i=n&&op.lookup(t._labels,e);i&&t2(r,n,i,e)}var fB={id:"datalabels",defaults:CG,beforeInit:function(r){r[la]={_actives:[]}},beforeUpdate:function(r){var e=r[la];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(r,e,t){var n=e.index,i=r[la],s=i._datasets[n]=[],a=r.isDatasetVisible(n),o=r.data.datasets[n],A=EG(o,t),l=e.meta.data||[],c=r.ctx,u,h,d,p,f,y,b,B;for(c.save(),u=0,d=l.length;u<d;++u)if(b=l[u],b[la]=[],a&&b&&r.getDataVisibility(u)&&!b.skip)for(h=0,p=A.labels.length;h<p;++h)f=A.labels[h],y=f._key,B=new SL(f,c,b,u),B.$groups={_set:n,_key:y||TL},B.$context={active:!1,chart:r,dataIndex:u,dataset:o,datasetIndex:n},B.update(B.$context),b[la].push(B),s.push(B);c.restore(),CA(i._listeners,A.listeners,{merger:function(S,C,P){C[S]=C[S]||{},C[S][e.index]=P[S],i._listened=!0}})},afterUpdate:function(r){r[la]._labels=op.prepare(r[la]._datasets)},afterDatasetsDraw:function(r){op.draw(r,r[la]._labels)},beforeEvent:function(r,e){if(r[la]._listened){var t=e.event;switch(t.type){case"mousemove":case"mouseout":IG(r,t);break;case"click":kG(r,t);break}}},afterEvent:function(r){var e=r[la],t=e._actives,n=e._actives=r.getActiveElements(),i=ap.arrayDiff(t,n),s,a,o,A,l,c,u;for(s=0,a=i.length;s<a;++s)if(l=i[s],l[1])for(u=l[0].element[la]||[],o=0,A=u.length;o<A;++o)c=u[o],c.$context.active=l[1]===1,c.update(c.$context);(e._dirty||i.length)&&(op.update(e._labels),r.render()),delete e._dirty}},j0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gB(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var m1={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var WS;function TG(){return WS||(WS=1,(function(r){(function(e,t,n,i){var s=["","webkit","Moz","MS","ms","o"],a=t.createElement("div"),o="function",A=Math.round,l=Math.abs,c=Date.now;function u(J,le,me){return setTimeout(S(J,me),le)}function h(J,le,me){return Array.isArray(J)?(d(J,me[le],me),!0):!1}function d(J,le,me){var Ue;if(J)if(J.forEach)J.forEach(le,me);else if(J.length!==i)for(Ue=0;Ue<J.length;)le.call(me,J[Ue],Ue,J),Ue++;else for(Ue in J)J.hasOwnProperty(Ue)&&le.call(me,J[Ue],Ue,J)}function p(J,le,me){var Ue="DEPRECATED METHOD: "+le+`
`+me+` AT 
`;return function(){var Xe=new Error("get-stack-trace"),ht=Xe&&Xe.stack?Xe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Xt=e.console&&(e.console.warn||e.console.log);return Xt&&Xt.call(e.console,Ue,ht),J.apply(this,arguments)}}var f;typeof Object.assign!="function"?f=function(le){if(le===i||le===null)throw new TypeError("Cannot convert undefined or null to object");for(var me=Object(le),Ue=1;Ue<arguments.length;Ue++){var Xe=arguments[Ue];if(Xe!==i&&Xe!==null)for(var ht in Xe)Xe.hasOwnProperty(ht)&&(me[ht]=Xe[ht])}return me}:f=Object.assign;var y=p(function(le,me,Ue){for(var Xe=Object.keys(me),ht=0;ht<Xe.length;)(!Ue||Ue&&le[Xe[ht]]===i)&&(le[Xe[ht]]=me[Xe[ht]]),ht++;return le},"extend","Use `assign`."),b=p(function(le,me){return y(le,me,!0)},"merge","Use `assign`.");function B(J,le,me){var Ue=le.prototype,Xe;Xe=J.prototype=Object.create(Ue),Xe.constructor=J,Xe._super=Ue,me&&f(Xe,me)}function S(J,le){return function(){return J.apply(le,arguments)}}function C(J,le){return typeof J==o?J.apply(le&&le[0]||i,le):J}function P(J,le){return J===i?le:J}function M(J,le,me){d(T(le),function(Ue){J.addEventListener(Ue,me,!1)})}function L(J,le,me){d(T(le),function(Ue){J.removeEventListener(Ue,me,!1)})}function _(J,le){for(;J;){if(J==le)return!0;J=J.parentNode}return!1}function v(J,le){return J.indexOf(le)>-1}function T(J){return J.trim().split(/\s+/g)}function E(J,le,me){if(J.indexOf&&!me)return J.indexOf(le);for(var Ue=0;Ue<J.length;){if(me&&J[Ue][me]==le||!me&&J[Ue]===le)return Ue;Ue++}return-1}function x(J){return Array.prototype.slice.call(J,0)}function F(J,le,me){for(var Ue=[],Xe=[],ht=0;ht<J.length;){var Xt=J[ht][le];E(Xe,Xt)<0&&Ue.push(J[ht]),Xe[ht]=Xt,ht++}return Ue=Ue.sort(function(Tr,an){return Tr[le]>an[le]}),Ue}function k(J,le){for(var me,Ue,Xe=le[0].toUpperCase()+le.slice(1),ht=0;ht<s.length;){if(me=s[ht],Ue=me?me+Xe:le,Ue in J)return Ue;ht++}return i}var Z=1;function ue(){return Z++}function ne(J){var le=J.ownerDocument||J;return le.defaultView||le.parentWindow||e}var j=/mobile|tablet|ip(ad|hone|od)|android/i,G="ontouchstart"in e,pe=k(e,"PointerEvent")!==i,q=G&&j.test(navigator.userAgent),N="touch",Q="pen",V="mouse",X="kinect",Ae=25,te=1,se=2,de=4,ve=8,xe=1,Oe=2,Ve=4,R=8,$=16,ye=Oe|Ve,re=R|$,W=ye|re,ae=["x","y"],Ce=["clientX","clientY"];function _e(J,le){var me=this;this.manager=J,this.callback=le,this.element=J.element,this.target=J.options.inputTarget,this.domHandler=function(Ue){C(J.options.enable,[J])&&me.handler(Ue)},this.init()}_e.prototype={handler:function(){},init:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L(ne(this.element),this.evWin,this.domHandler)}};function be(J){var le,me=J.options.inputClass;return me?le=me:pe?le=Ft:q?le=Bi:G?le=Wr:le=Qt,new le(J,Ie)}function Ie(J,le,me){var Ue=me.pointers.length,Xe=me.changedPointers.length,ht=le&te&&Ue-Xe===0,Xt=le&(de|ve)&&Ue-Xe===0;me.isFirst=!!ht,me.isFinal=!!Xt,ht&&(J.session={}),me.eventType=le,Qe(J,me),J.emit("hammer.input",me),J.recognize(me),J.session.prevInput=me}function Qe(J,le){var me=J.session,Ue=le.pointers,Xe=Ue.length;me.firstInput||(me.firstInput=At(le)),Xe>1&&!me.firstMultiple?me.firstMultiple=At(le):Xe===1&&(me.firstMultiple=!1);var ht=me.firstInput,Xt=me.firstMultiple,Jr=Xt?Xt.center:ht.center,Tr=le.center=tt(Ue);le.timeStamp=c(),le.deltaTime=le.timeStamp-ht.timeStamp,le.angle=ut(Jr,Tr),le.distance=at(Jr,Tr),Pe(me,le),le.offsetDirection=xt(le.deltaX,le.deltaY);var an=lt(le.deltaTime,le.deltaX,le.deltaY);le.overallVelocityX=an.x,le.overallVelocityY=an.y,le.overallVelocity=l(an.x)>l(an.y)?an.x:an.y,le.scale=Xt?it(Xt.pointers,Ue):1,le.rotation=Xt?rt(Xt.pointers,Ue):0,le.maxPointers=me.prevInput?le.pointers.length>me.prevInput.maxPointers?le.pointers.length:me.prevInput.maxPointers:le.pointers.length,He(me,le);var ps=J.element;_(le.srcEvent.target,ps)&&(ps=le.srcEvent.target),le.target=ps}function Pe(J,le){var me=le.center,Ue=J.offsetDelta||{},Xe=J.prevDelta||{},ht=J.prevInput||{};(le.eventType===te||ht.eventType===de)&&(Xe=J.prevDelta={x:ht.deltaX||0,y:ht.deltaY||0},Ue=J.offsetDelta={x:me.x,y:me.y}),le.deltaX=Xe.x+(me.x-Ue.x),le.deltaY=Xe.y+(me.y-Ue.y)}function He(J,le){var me=J.lastInterval||le,Ue=le.timeStamp-me.timeStamp,Xe,ht,Xt,Jr;if(le.eventType!=ve&&(Ue>Ae||me.velocity===i)){var Tr=le.deltaX-me.deltaX,an=le.deltaY-me.deltaY,ps=lt(Ue,Tr,an);ht=ps.x,Xt=ps.y,Xe=l(ps.x)>l(ps.y)?ps.x:ps.y,Jr=xt(Tr,an),J.lastInterval=le}else Xe=me.velocity,ht=me.velocityX,Xt=me.velocityY,Jr=me.direction;le.velocity=Xe,le.velocityX=ht,le.velocityY=Xt,le.direction=Jr}function At(J){for(var le=[],me=0;me<J.pointers.length;)le[me]={clientX:A(J.pointers[me].clientX),clientY:A(J.pointers[me].clientY)},me++;return{timeStamp:c(),pointers:le,center:tt(le),deltaX:J.deltaX,deltaY:J.deltaY}}function tt(J){var le=J.length;if(le===1)return{x:A(J[0].clientX),y:A(J[0].clientY)};for(var me=0,Ue=0,Xe=0;Xe<le;)me+=J[Xe].clientX,Ue+=J[Xe].clientY,Xe++;return{x:A(me/le),y:A(Ue/le)}}function lt(J,le,me){return{x:le/J||0,y:me/J||0}}function xt(J,le){return J===le?xe:l(J)>=l(le)?J<0?Oe:Ve:le<0?R:$}function at(J,le,me){me||(me=ae);var Ue=le[me[0]]-J[me[0]],Xe=le[me[1]]-J[me[1]];return Math.sqrt(Ue*Ue+Xe*Xe)}function ut(J,le,me){me||(me=ae);var Ue=le[me[0]]-J[me[0]],Xe=le[me[1]]-J[me[1]];return Math.atan2(Xe,Ue)*180/Math.PI}function rt(J,le){return ut(le[1],le[0],Ce)+ut(J[1],J[0],Ce)}function it(J,le){return at(le[0],le[1],Ce)/at(J[0],J[1],Ce)}var pt={mousedown:te,mousemove:se,mouseup:de},Rt="mousedown",Bt="mousemove mouseup";function Qt(){this.evEl=Rt,this.evWin=Bt,this.pressed=!1,_e.apply(this,arguments)}B(Qt,_e,{handler:function(le){var me=pt[le.type];me&te&&le.button===0&&(this.pressed=!0),me&se&&le.which!==1&&(me=de),this.pressed&&(me&de&&(this.pressed=!1),this.callback(this.manager,me,{pointers:[le],changedPointers:[le],pointerType:V,srcEvent:le}))}});var Ut={pointerdown:te,pointermove:se,pointerup:de,pointercancel:ve,pointerout:ve},lr={2:N,3:Q,4:V,5:X},kr="pointerdown",Tt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(kr="MSPointerDown",Tt="MSPointerMove MSPointerUp MSPointerCancel");function Ft(){this.evEl=kr,this.evWin=Tt,_e.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}B(Ft,_e,{handler:function(le){var me=this.store,Ue=!1,Xe=le.type.toLowerCase().replace("ms",""),ht=Ut[Xe],Xt=lr[le.pointerType]||le.pointerType,Jr=Xt==N,Tr=E(me,le.pointerId,"pointerId");ht&te&&(le.button===0||Jr)?Tr<0&&(me.push(le),Tr=me.length-1):ht&(de|ve)&&(Ue=!0),!(Tr<0)&&(me[Tr]=le,this.callback(this.manager,ht,{pointers:me,changedPointers:[le],pointerType:Xt,srcEvent:le}),Ue&&me.splice(Tr,1))}});var sr={touchstart:te,touchmove:se,touchend:de,touchcancel:ve},pi="touchstart",Pn="touchstart touchmove touchend touchcancel";function gs(){this.evTarget=pi,this.evWin=Pn,this.started=!1,_e.apply(this,arguments)}B(gs,_e,{handler:function(le){var me=sr[le.type];if(me===te&&(this.started=!0),!!this.started){var Ue=xi.call(this,le,me);me&(de|ve)&&Ue[0].length-Ue[1].length===0&&(this.started=!1),this.callback(this.manager,me,{pointers:Ue[0],changedPointers:Ue[1],pointerType:N,srcEvent:le})}}});function xi(J,le){var me=x(J.touches),Ue=x(J.changedTouches);return le&(de|ve)&&(me=F(me.concat(Ue),"identifier")),[me,Ue]}var Ot={touchstart:te,touchmove:se,touchend:de,touchcancel:ve},xa="touchstart touchmove touchend touchcancel";function Bi(){this.evTarget=xa,this.targetIds={},_e.apply(this,arguments)}B(Bi,_e,{handler:function(le){var me=Ot[le.type],Ue=Xi.call(this,le,me);Ue&&this.callback(this.manager,me,{pointers:Ue[0],changedPointers:Ue[1],pointerType:N,srcEvent:le})}});function Xi(J,le){var me=x(J.touches),Ue=this.targetIds;if(le&(te|se)&&me.length===1)return Ue[me[0].identifier]=!0,[me,me];var Xe,ht,Xt=x(J.changedTouches),Jr=[],Tr=this.target;if(ht=me.filter(function(an){return _(an.target,Tr)}),le===te)for(Xe=0;Xe<ht.length;)Ue[ht[Xe].identifier]=!0,Xe++;for(Xe=0;Xe<Xt.length;)Ue[Xt[Xe].identifier]&&Jr.push(Xt[Xe]),le&(de|ve)&&delete Ue[Xt[Xe].identifier],Xe++;if(Jr.length)return[F(ht.concat(Jr),"identifier"),Jr]}var Ji=2500,Hr=25;function Wr(){_e.apply(this,arguments);var J=S(this.handler,this);this.touch=new Bi(this.manager,J),this.mouse=new Qt(this.manager,J),this.primaryTouch=null,this.lastTouches=[]}B(Wr,_e,{handler:function(le,me,Ue){var Xe=Ue.pointerType==N,ht=Ue.pointerType==V;if(!(ht&&Ue.sourceCapabilities&&Ue.sourceCapabilities.firesTouchEvents)){if(Xe)Zn.call(this,me,Ue);else if(ht&&Ba.call(this,Ue))return;this.callback(le,me,Ue)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Zn(J,le){J&te?(this.primaryTouch=le.changedPointers[0].identifier,Ci.call(this,le)):J&(de|ve)&&Ci.call(this,le)}function Ci(J){var le=J.changedPointers[0];if(le.identifier===this.primaryTouch){var me={x:le.clientX,y:le.clientY};this.lastTouches.push(me);var Ue=this.lastTouches,Xe=function(){var ht=Ue.indexOf(me);ht>-1&&Ue.splice(ht,1)};setTimeout(Xe,Ji)}}function Ba(J){for(var le=J.srcEvent.clientX,me=J.srcEvent.clientY,Ue=0;Ue<this.lastTouches.length;Ue++){var Xe=this.lastTouches[Ue],ht=Math.abs(le-Xe.x),Xt=Math.abs(me-Xe.y);if(ht<=Hr&&Xt<=Hr)return!0}return!1}var Zi=k(a.style,"touchAction"),es=Zi!==i,Ri="compute",ts="auto",Ui="manipulation",Mi="none",Oi="pan-x",Qi="pan-y",Ws=Ca();function Ys(J,le){this.manager=J,this.set(le)}Ys.prototype={set:function(J){J==Ri&&(J=this.compute()),es&&this.manager.element.style&&Ws[J]&&(this.manager.element.style[Zi]=J),this.actions=J.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var J=[];return d(this.manager.recognizers,function(le){C(le.options.enable,[le])&&(J=J.concat(le.getTouchAction()))}),Xs(J.join(" "))},preventDefaults:function(J){var le=J.srcEvent,me=J.offsetDirection;if(this.manager.session.prevented){le.preventDefault();return}var Ue=this.actions,Xe=v(Ue,Mi)&&!Ws[Mi],ht=v(Ue,Qi)&&!Ws[Qi],Xt=v(Ue,Oi)&&!Ws[Oi];if(Xe){var Jr=J.pointers.length===1,Tr=J.distance<2,an=J.deltaTime<250;if(Jr&&Tr&&an)return}if(!(Xt&&ht)&&(Xe||ht&&me&ye||Xt&&me&re))return this.preventSrc(le)},preventSrc:function(J){this.manager.session.prevented=!0,J.preventDefault()}};function Xs(J){if(v(J,Mi))return Mi;var le=v(J,Oi),me=v(J,Qi);return le&&me?Mi:le||me?le?Oi:Qi:v(J,Ui)?Ui:ts}function Ca(){if(!es)return!1;var J={},le=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(me){J[me]=le?e.CSS.supports("touch-action",me):!0}),J}var Js=1,Ei=2,Zs=4,Cn=8,Hi=Cn,ea=16,mi=32;function rs(J){this.options=f({},this.defaults,J||{}),this.id=ue(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=Js,this.simultaneous={},this.requireFail=[]}rs.prototype={defaults:{},set:function(J){return f(this.options,J),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(J){if(h(J,"recognizeWith",this))return this;var le=this.simultaneous;return J=Ea(J,this),le[J.id]||(le[J.id]=J,J.recognizeWith(this)),this},dropRecognizeWith:function(J){return h(J,"dropRecognizeWith",this)?this:(J=Ea(J,this),delete this.simultaneous[J.id],this)},requireFailure:function(J){if(h(J,"requireFailure",this))return this;var le=this.requireFail;return J=Ea(J,this),E(le,J)===-1&&(le.push(J),J.requireFailure(this)),this},dropRequireFailure:function(J){if(h(J,"dropRequireFailure",this))return this;J=Ea(J,this);var le=E(this.requireFail,J);return le>-1&&this.requireFail.splice(le,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(J){return!!this.simultaneous[J.id]},emit:function(J){var le=this,me=this.state;function Ue(Xe){le.manager.emit(Xe,J)}me<Cn&&Ue(le.options.event+Oo(me)),Ue(le.options.event),J.additionalEvent&&Ue(J.additionalEvent),me>=Cn&&Ue(le.options.event+Oo(me))},tryEmit:function(J){if(this.canEmit())return this.emit(J);this.state=mi},canEmit:function(){for(var J=0;J<this.requireFail.length;){if(!(this.requireFail[J].state&(mi|Js)))return!1;J++}return!0},recognize:function(J){var le=f({},J);if(!C(this.options.enable,[this,le])){this.reset(),this.state=mi;return}this.state&(Hi|ea|mi)&&(this.state=Js),this.state=this.process(le),this.state&(Ei|Zs|Cn|ea)&&this.tryEmit(le)},process:function(J){},getTouchAction:function(){},reset:function(){}};function Oo(J){return J&ea?"cancel":J&Cn?"end":J&Zs?"move":J&Ei?"start":""}function Qo(J){return J==$?"down":J==R?"up":J==Oe?"left":J==Ve?"right":""}function Ea(J,le){var me=le.manager;return me?me.get(J):J}function En(){rs.apply(this,arguments)}B(En,rs,{defaults:{pointers:1},attrTest:function(J){var le=this.options.pointers;return le===0||J.pointers.length===le},process:function(J){var le=this.state,me=J.eventType,Ue=le&(Ei|Zs),Xe=this.attrTest(J);return Ue&&(me&ve||!Xe)?le|ea:Ue||Xe?me&de?le|Cn:le&Ei?le|Zs:Ei:mi}});function gr(){En.apply(this,arguments),this.pX=null,this.pY=null}B(gr,En,{defaults:{event:"pan",threshold:10,pointers:1,direction:W},getTouchAction:function(){var J=this.options.direction,le=[];return J&ye&&le.push(Qi),J&re&&le.push(Oi),le},directionTest:function(J){var le=this.options,me=!0,Ue=J.distance,Xe=J.direction,ht=J.deltaX,Xt=J.deltaY;return Xe&le.direction||(le.direction&ye?(Xe=ht===0?xe:ht<0?Oe:Ve,me=ht!=this.pX,Ue=Math.abs(J.deltaX)):(Xe=Xt===0?xe:Xt<0?R:$,me=Xt!=this.pY,Ue=Math.abs(J.deltaY))),J.direction=Xe,me&&Ue>le.threshold&&Xe&le.direction},attrTest:function(J){return En.prototype.attrTest.call(this,J)&&(this.state&Ei||!(this.state&Ei)&&this.directionTest(J))},emit:function(J){this.pX=J.deltaX,this.pY=J.deltaY;var le=Qo(J.direction);le&&(J.additionalEvent=this.options.event+le),this._super.emit.call(this,J)}});function ta(){En.apply(this,arguments)}B(ta,En,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mi]},attrTest:function(J){return this._super.attrTest.call(this,J)&&(Math.abs(J.scale-1)>this.options.threshold||this.state&Ei)},emit:function(J){if(J.scale!==1){var le=J.scale<1?"in":"out";J.additionalEvent=this.options.event+le}this._super.emit.call(this,J)}});function ra(){rs.apply(this,arguments),this._timer=null,this._input=null}B(ra,rs,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ts]},process:function(J){var le=this.options,me=J.pointers.length===le.pointers,Ue=J.distance<le.threshold,Xe=J.deltaTime>le.time;if(this._input=J,!Ue||!me||J.eventType&(de|ve)&&!Xe)this.reset();else if(J.eventType&te)this.reset(),this._timer=u(function(){this.state=Hi,this.tryEmit()},le.time,this);else if(J.eventType&de)return Hi;return mi},reset:function(){clearTimeout(this._timer)},emit:function(J){this.state===Hi&&(J&&J.eventType&de?this.manager.emit(this.options.event+"up",J):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function ns(){En.apply(this,arguments)}B(ns,En,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mi]},attrTest:function(J){return this._super.attrTest.call(this,J)&&(Math.abs(J.rotation)>this.options.threshold||this.state&Ei)}});function ur(){En.apply(this,arguments)}B(ur,En,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ye|re,pointers:1},getTouchAction:function(){return gr.prototype.getTouchAction.call(this)},attrTest:function(J){var le=this.options.direction,me;return le&(ye|re)?me=J.overallVelocity:le&ye?me=J.overallVelocityX:le&re&&(me=J.overallVelocityY),this._super.attrTest.call(this,J)&&le&J.offsetDirection&&J.distance>this.options.threshold&&J.maxPointers==this.options.pointers&&l(me)>this.options.velocity&&J.eventType&de},emit:function(J){var le=Qo(J.offsetDirection);le&&this.manager.emit(this.options.event+le,J),this.manager.emit(this.options.event,J)}});function ei(){rs.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}B(ei,rs,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ui]},process:function(J){var le=this.options,me=J.pointers.length===le.pointers,Ue=J.distance<le.threshold,Xe=J.deltaTime<le.time;if(this.reset(),J.eventType&te&&this.count===0)return this.failTimeout();if(Ue&&Xe&&me){if(J.eventType!=de)return this.failTimeout();var ht=this.pTime?J.timeStamp-this.pTime<le.interval:!0,Xt=!this.pCenter||at(this.pCenter,J.center)<le.posThreshold;this.pTime=J.timeStamp,this.pCenter=J.center,!Xt||!ht?this.count=1:this.count+=1,this._input=J;var Jr=this.count%le.taps;if(Jr===0)return this.hasRequireFailures()?(this._timer=u(function(){this.state=Hi,this.tryEmit()},le.interval,this),Ei):Hi}return mi},failTimeout:function(){return this._timer=u(function(){this.state=mi},this.options.interval,this),mi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Hi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Qn(J,le){return le=le||{},le.recognizers=P(le.recognizers,Qn.defaults.preset),new Vo(J,le)}Qn.VERSION="2.0.7",Qn.defaults={domEvents:!1,touchAction:Ri,enable:!0,inputTarget:null,inputClass:null,preset:[[ns,{enable:!1}],[ta,{enable:!1},["rotate"]],[ur,{direction:ye}],[gr,{direction:ye},["swipe"]],[ei],[ei,{event:"doubletap",taps:2},["tap"]],[ra]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Vr=1,Ho=2;function Vo(J,le){this.options=f({},Qn.defaults,le||{}),this.options.inputTarget=this.options.inputTarget||J,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=J,this.input=be(this),this.touchAction=new Ys(this,this.options.touchAction),Tl(this,!0),d(this.options.recognizers,function(me){var Ue=this.add(new me[0](me[1]));me[2]&&Ue.recognizeWith(me[2]),me[3]&&Ue.requireFailure(me[3])},this)}Vo.prototype={set:function(J){return f(this.options,J),J.touchAction&&this.touchAction.update(),J.inputTarget&&(this.input.destroy(),this.input.target=J.inputTarget,this.input.init()),this},stop:function(J){this.session.stopped=J?Ho:Vr},recognize:function(J){var le=this.session;if(!le.stopped){this.touchAction.preventDefaults(J);var me,Ue=this.recognizers,Xe=le.curRecognizer;(!Xe||Xe&&Xe.state&Hi)&&(Xe=le.curRecognizer=null);for(var ht=0;ht<Ue.length;)me=Ue[ht],le.stopped!==Ho&&(!Xe||me==Xe||me.canRecognizeWith(Xe))?me.recognize(J):me.reset(),!Xe&&me.state&(Ei|Zs|Cn)&&(Xe=le.curRecognizer=me),ht++}},get:function(J){if(J instanceof rs)return J;for(var le=this.recognizers,me=0;me<le.length;me++)if(le[me].options.event==J)return le[me];return null},add:function(J){if(h(J,"add",this))return this;var le=this.get(J.options.event);return le&&this.remove(le),this.recognizers.push(J),J.manager=this,this.touchAction.update(),J},remove:function(J){if(h(J,"remove",this))return this;if(J=this.get(J),J){var le=this.recognizers,me=E(le,J);me!==-1&&(le.splice(me,1),this.touchAction.update())}return this},on:function(J,le){if(J!==i&&le!==i){var me=this.handlers;return d(T(J),function(Ue){me[Ue]=me[Ue]||[],me[Ue].push(le)}),this}},off:function(J,le){if(J!==i){var me=this.handlers;return d(T(J),function(Ue){le?me[Ue]&&me[Ue].splice(E(me[Ue],le),1):delete me[Ue]}),this}},emit:function(J,le){this.options.domEvents&&du(J,le);var me=this.handlers[J]&&this.handlers[J].slice();if(!(!me||!me.length)){le.type=J,le.preventDefault=function(){le.srcEvent.preventDefault()};for(var Ue=0;Ue<me.length;)me[Ue](le),Ue++}},destroy:function(){this.element&&Tl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Tl(J,le){var me=J.element;if(me.style){var Ue;d(J.options.cssProps,function(Xe,ht){Ue=k(me.style,ht),le?(J.oldCssProps[Ue]=me.style[Ue],me.style[Ue]=Xe):me.style[Ue]=J.oldCssProps[Ue]||""}),le||(J.oldCssProps={})}}function du(J,le){var me=t.createEvent("Event");me.initEvent(J,!0,!0),me.gesture=le,le.target.dispatchEvent(me)}f(Qn,{INPUT_START:te,INPUT_MOVE:se,INPUT_END:de,INPUT_CANCEL:ve,STATE_POSSIBLE:Js,STATE_BEGAN:Ei,STATE_CHANGED:Zs,STATE_ENDED:Cn,STATE_RECOGNIZED:Hi,STATE_CANCELLED:ea,STATE_FAILED:mi,DIRECTION_NONE:xe,DIRECTION_LEFT:Oe,DIRECTION_RIGHT:Ve,DIRECTION_UP:R,DIRECTION_DOWN:$,DIRECTION_HORIZONTAL:ye,DIRECTION_VERTICAL:re,DIRECTION_ALL:W,Manager:Vo,Input:_e,TouchAction:Ys,TouchInput:Bi,MouseInput:Qt,PointerEventInput:Ft,TouchMouseInput:Wr,SingleTouchInput:gs,Recognizer:rs,AttrRecognizer:En,Tap:ei,Pan:gr,Swipe:ur,Pinch:ta,Rotate:ns,Press:ra,on:M,off:L,each:d,merge:b,extend:y,assign:f,inherit:B,bindFn:S,prefixed:k});var na=typeof e<"u"?e:typeof self<"u"?self:{};na.Hammer=Qn,r.exports?r.exports=Qn:e[n]=Qn})(window,document,"Hammer")})(m1)),m1.exports}var FG=TG();const Ap=gB(FG);/*!
* chartjs-plugin-zoom v2.2.0
* https://www.chartjs.org/chartjs-plugin-zoom/2.2.0/
 * (c) 2016-2024 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const Vp=r=>r&&r.enabled&&r.modifierKey,FL=(r,e)=>r&&e[r+"Key"],pB=(r,e)=>r&&!e[r+"Key"];function Mc(r,e,t){return r===void 0?!0:typeof r=="string"?r.indexOf(e)!==-1:typeof r=="function"?r({chart:t}).indexOf(e)!==-1:!1}function y1(r,e){return typeof r=="function"&&(r=r({chart:e})),typeof r=="string"?{x:r.indexOf("x")!==-1,y:r.indexOf("y")!==-1}:{x:!1,y:!1}}function LG(r,e){let t;return function(){return clearTimeout(t),t=setTimeout(r,e),e}}function PG({x:r,y:e},t){const n=t.scales,i=Object.keys(n);for(let s=0;s<i.length;s++){const a=n[i[s]];if(e>=a.top&&e<=a.bottom&&r>=a.left&&r<=a.right)return a}return null}function LL(r,e,t){const{mode:n="xy",scaleMode:i,overScaleMode:s}=r||{},a=PG(e,t),o=y1(n,t),A=y1(i,t);if(s){const c=y1(s,t);for(const u of["x","y"])c[u]&&(A[u]=o[u],o[u]=!1)}if(a&&A[a.axis])return[a];const l=[];return cr(t.scales,function(c){o[c.axis]&&l.push(c)}),l}const r2=new WeakMap;function Rn(r){let e=r2.get(r);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},r2.set(r,e)),e}function NG(r){r2.delete(r)}function PL(r,e,t,n){const i=Math.max(0,Math.min(1,(r-e)/t||0)),s=1-i;return{min:n*i,max:n*s}}function NL(r,e){const t=r.isHorizontal()?e.x:e.y;return r.getValueForPixel(t)}function DL(r,e,t){const n=r.max-r.min,i=n*(e-1),s=NL(r,t);return PL(s,r.min,n,i)}function DG(r,e,t){const n=NL(r,t);if(n===void 0)return{min:r.min,max:r.max};const i=Math.log10(r.min),s=Math.log10(r.max),a=Math.log10(n),o=s-i,A=o*(e-1),l=PL(a,i,o,A);return{min:Math.pow(10,i+l.min),max:Math.pow(10,s-l.max)}}function RG(r,e){return e&&(e[r.id]||e[r.axis])||{}}function YS(r,e,t,n,i){let s=t[n];if(s==="original"){const a=r.originalScaleLimits[e.id][n];s=jt(a.options,a.scale)}return jt(s,i)}function UG(r,e,t){const n=r.getValueForPixel(e),i=r.getValueForPixel(t);return{min:Math.min(n,i),max:Math.max(n,i)}}function MG(r,{min:e,max:t,minLimit:n,maxLimit:i},s){const a=(r-t+e)/2;e-=a,t+=a;const o=s.min.options??s.min.scale,A=s.max.options??s.max.scale,l=r/1e6;return td(e,o,l)&&(e=o),td(t,A,l)&&(t=A),e<n?(e=n,t=Math.min(n+r,i)):t>i&&(t=i,e=Math.max(i-r,n)),{min:e,max:t}}function Dd(r,{min:e,max:t},n,i=!1){const s=Rn(r.chart),{options:a}=r,o=RG(r,n),{minRange:A=0}=o,l=YS(s,r,o,"min",-1/0),c=YS(s,r,o,"max",1/0);if(i==="pan"&&(e<l||t>c))return!0;const u=r.max-r.min,h=i?Math.max(t-e,A):u;if(i&&h===A&&u<=A)return!0;const d=MG(h,{min:e,max:t,minLimit:l,maxLimit:c},s.originalScaleLimits[r.id]);return a.min=d.min,a.max=d.max,s.updatedScaleLimits[r.id]=d,r.parse(d.min)!==r.min||r.parse(d.max)!==r.max}function OG(r,e,t,n){const i=DL(r,e,t),s={min:r.min+i.min,max:r.max-i.max};return Dd(r,s,n,!0)}function QG(r,e,t,n){const i=DG(r,e,t);return Dd(r,i,n,!0)}function HG(r,e,t,n){Dd(r,UG(r,e,t),n,!0)}const XS=r=>r===0||isNaN(r)?0:r<0?Math.min(Math.round(r),-1):Math.max(Math.round(r),1);function VG(r){const t=r.getLabels().length-1;r.min>0&&(r.min-=1),r.max<t&&(r.max+=1)}function $G(r,e,t,n){const i=DL(r,e,t);r.min===r.max&&e<1&&VG(r);const s={min:r.min+XS(i.min),max:r.max-XS(i.max)};return Dd(r,s,n,!0)}function jG(r){return r.isHorizontal()?r.width:r.height}function GG(r,e,t){const i=r.getLabels().length-1;let{min:s,max:a}=r;const o=Math.max(a-s,1),A=Math.round(jG(r)/Math.max(o,10)),l=Math.round(Math.abs(e/A));let c;return e<-A?(a=Math.min(a+l,i),s=o===1?a:a-o,c=a===i):e>A&&(s=Math.max(0,s-l),a=o===1?s:s+o,c=s===0),Dd(r,{min:s,max:a},t)||c}const KG={second:500,minute:30*1e3,hour:1800*1e3,day:720*60*1e3,week:3.5*24*60*60*1e3,month:360*60*60*1e3,quarter:1440*60*60*1e3,year:4368*60*60*1e3};function RL(r,e,t,n=!1){const{min:i,max:s,options:a}=r,o=a.time&&a.time.round,A=KG[o]||0,l=r.getValueForPixel(r.getPixelForValue(i+A)-e),c=r.getValueForPixel(r.getPixelForValue(s+A)-e);return isNaN(l)||isNaN(c)?!0:Dd(r,{min:l,max:c},t,n?"pan":!1)}function JS(r,e,t){return RL(r,e,t,!0)}const n2={category:$G,default:OG,logarithmic:QG},i2={default:HG},s2={category:GG,default:RL,logarithmic:JS,timeseries:JS};function zG(r,e,t){const{id:n,options:{min:i,max:s}}=r;if(!e[n]||!t[n])return!0;const a=t[n];return a.min!==i||a.max!==s}function ZS(r,e){cr(r,(t,n)=>{e[n]||delete r[n]})}function If(r,e){const{scales:t}=r,{originalScaleLimits:n,updatedScaleLimits:i}=e;return cr(t,function(s){zG(s,n,i)&&(n[s.id]={min:{scale:s.min,options:s.options.min},max:{scale:s.max,options:s.options.max}})}),ZS(n,t),ZS(i,t),n}function eI(r,e,t,n){const i=n2[r.type]||n2.default;$t(i,[r,e,t,n])}function tI(r,e,t,n){const i=i2[r.type]||i2.default;$t(i,[r,e,t,n])}function qG(r){const e=r.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function mB(r,e,t="none",n="api"){const{x:i=1,y:s=1,focalPoint:a=qG(r)}=typeof e=="number"?{x:e,y:e}:e,o=Rn(r),{options:{limits:A,zoom:l}}=o;If(r,o);const c=i!==1,u=s!==1,h=LL(l,a,r);cr(h||r.scales,function(d){d.isHorizontal()&&c?eI(d,i,a,A):!d.isHorizontal()&&u&&eI(d,s,a,A)}),r.update(t),$t(l.onZoom,[{chart:r,trigger:n}])}function UL(r,e,t,n="none",i="api"){const s=Rn(r),{options:{limits:a,zoom:o}}=s,{mode:A="xy"}=o;If(r,s);const l=Mc(A,"x",r),c=Mc(A,"y",r);cr(r.scales,function(u){u.isHorizontal()&&l?tI(u,e.x,t.x,a):!u.isHorizontal()&&c&&tI(u,e.y,t.y,a)}),r.update(n),$t(o.onZoom,[{chart:r,trigger:i}])}function WG(r,e,t,n="none",i="api"){var o;const s=Rn(r);If(r,s);const a=r.scales[e];Dd(a,t,void 0,!0),r.update(n),$t((o=s.options.zoom)==null?void 0:o.onZoom,[{chart:r,trigger:i}])}function YG(r,e="default"){const t=Rn(r),n=If(r,t);cr(r.scales,function(i){const s=i.options;n[i.id]?(s.min=n[i.id].min.options,s.max=n[i.id].max.options):(delete s.min,delete s.max),delete t.updatedScaleLimits[i.id]}),r.update(e),$t(t.options.zoom.onZoomComplete,[{chart:r}])}function XG(r,e){const t=r.originalScaleLimits[e];if(!t)return;const{min:n,max:i}=t;return jt(i.options,i.scale)-jt(n.options,n.scale)}function JG(r){const e=Rn(r);let t=1,n=1;return cr(r.scales,function(i){const s=XG(e,i.id);if(s){const a=Math.round(s/(i.max-i.min)*100)/100;t=Math.min(t,a),n=Math.max(n,a)}}),t<1?t:n}function rI(r,e,t,n){const{panDelta:i}=n,s=i[r.id]||0;co(s)===co(e)&&(e+=s);const a=s2[r.type]||s2.default;$t(a,[r,e,t])?i[r.id]=0:i[r.id]=e}function ML(r,e,t,n="none"){const{x:i=0,y:s=0}=typeof e=="number"?{x:e,y:e}:e,a=Rn(r),{options:{pan:o,limits:A}}=a,{onPan:l}=o||{};If(r,a);const c=i!==0,u=s!==0;cr(t||r.scales,function(h){h.isHorizontal()&&c?rI(h,i,A,a):!h.isHorizontal()&&u&&rI(h,s,A,a)}),r.update(n),$t(l,[{chart:r}])}function OL(r){const e=Rn(r);If(r,e);const t={};for(const n of Object.keys(r.scales)){const{min:i,max:s}=e.originalScaleLimits[n]||{min:{},max:{}};t[n]={min:i.scale,max:s.scale}}return t}function ZG(r){const e=Rn(r),t={};for(const n of Object.keys(r.scales))t[n]=e.updatedScaleLimits[n];return t}function eK(r){const e=OL(r);for(const t of Object.keys(r.scales)){const{min:n,max:i}=e[t];if(n!==void 0&&r.scales[t].min!==n||i!==void 0&&r.scales[t].max!==i)return!0}return!1}function nI(r){const e=Rn(r);return e.panning||e.dragging}const iI=(r,e,t)=>Math.min(t,Math.max(e,r));function fa(r,e){const{handlers:t}=Rn(r),n=t[e];n&&n.target&&(n.target.removeEventListener(e,n),delete t[e])}function lp(r,e,t,n){const{handlers:i,options:s}=Rn(r),a=i[t];if(a&&a.target===e)return;fa(r,t),i[t]=A=>n(r,A,s),i[t].target=e;const o=t==="wheel"?!1:void 0;e.addEventListener(t,i[t],{passive:o})}function tK(r,e){const t=Rn(r);t.dragStart&&(t.dragging=!0,t.dragEnd=e,r.update("none"))}function rK(r,e){const t=Rn(r);!t.dragStart||e.key!=="Escape"||(fa(r,"keydown"),t.dragging=!1,t.dragStart=t.dragEnd=null,r.update("none"))}function a2(r,e){if(r.target!==e.canvas){const t=e.canvas.getBoundingClientRect();return{x:r.clientX-t.left,y:r.clientY-t.top}}return rA(r,e)}function QL(r,e,t){const{onZoomStart:n,onZoomRejected:i}=t;if(n){const s=a2(e,r);if($t(n,[{chart:r,event:e,point:s}])===!1)return $t(i,[{chart:r,event:e}]),!1}}function nK(r,e){if(r.legend){const s=rA(e,r);if(cA(s,r.legend))return}const t=Rn(r),{pan:n,zoom:i={}}=t.options;if(e.button!==0||FL(Vp(n),e)||pB(Vp(i.drag),e))return $t(i.onZoomRejected,[{chart:r,event:e}]);QL(r,e,i)!==!1&&(t.dragStart=e,lp(r,r.canvas.ownerDocument,"mousemove",tK),lp(r,window.document,"keydown",rK))}function iK({begin:r,end:e},t){let n=e.x-r.x,i=e.y-r.y;const s=Math.abs(n/i);s>t?n=Math.sign(n)*Math.abs(i*t):s<t&&(i=Math.sign(i)*Math.abs(n/t)),e.x=r.x+n,e.y=r.y+i}function sI(r,e,t,{min:n,max:i,prop:s}){r[n]=iI(Math.min(t.begin[s],t.end[s]),e[n],e[i]),r[i]=iI(Math.max(t.begin[s],t.end[s]),e[n],e[i])}function sK(r,e,t){const n={begin:a2(e.dragStart,r),end:a2(e.dragEnd,r)};if(t){const i=r.chartArea.width/r.chartArea.height;iK(n,i)}return n}function HL(r,e,t,n){const i=Mc(e,"x",r),s=Mc(e,"y",r),{top:a,left:o,right:A,bottom:l,width:c,height:u}=r.chartArea,h={top:a,left:o,right:A,bottom:l},d=sK(r,t,n&&i&&s);i&&sI(h,r.chartArea,d,{min:"left",max:"right",prop:"x"}),s&&sI(h,r.chartArea,d,{min:"top",max:"bottom",prop:"y"});const p=h.right-h.left,f=h.bottom-h.top;return{...h,width:p,height:f,zoomX:i&&p?1+(c-p)/c:1,zoomY:s&&f?1+(u-f)/u:1}}function aK(r,e){const t=Rn(r);if(!t.dragStart)return;fa(r,"mousemove");const{mode:n,onZoomComplete:i,drag:{threshold:s=0,maintainAspectRatio:a}}=t.options.zoom,o=HL(r,n,{dragStart:t.dragStart,dragEnd:e},a),A=Mc(n,"x",r)?o.width:0,l=Mc(n,"y",r)?o.height:0,c=Math.sqrt(A*A+l*l);if(t.dragStart=t.dragEnd=null,c<=s){t.dragging=!1,r.update("none");return}UL(r,{x:o.left,y:o.top},{x:o.right,y:o.bottom},"zoom","drag"),t.dragging=!1,t.filterNextClick=!0,$t(i,[{chart:r}])}function oK(r,e,t){if(pB(Vp(t.wheel),e)){$t(t.onZoomRejected,[{chart:r,event:e}]);return}if(QL(r,e,t)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function AK(r,e){const{handlers:{onZoomComplete:t},options:{zoom:n}}=Rn(r);if(!oK(r,e,n))return;const i=e.target.getBoundingClientRect(),s=n.wheel.speed,a=e.deltaY>=0?2-1/(1-s):1+s,o={x:a,y:a,focalPoint:{x:e.clientX-i.left,y:e.clientY-i.top}};mB(r,o,"zoom","wheel"),$t(t,[{chart:r}])}function lK(r,e,t,n){t&&(Rn(r).handlers[e]=LG(()=>$t(t,[{chart:r}]),n))}function cK(r,e){const t=r.canvas,{wheel:n,drag:i,onZoomComplete:s}=e.zoom;n.enabled?(lp(r,t,"wheel",AK),lK(r,"onZoomComplete",s,250)):fa(r,"wheel"),i.enabled?(lp(r,t,"mousedown",nK),lp(r,t.ownerDocument,"mouseup",aK)):(fa(r,"mousedown"),fa(r,"mousemove"),fa(r,"mouseup"),fa(r,"keydown"))}function uK(r){fa(r,"mousedown"),fa(r,"mousemove"),fa(r,"mouseup"),fa(r,"wheel"),fa(r,"click"),fa(r,"keydown")}function dK(r,e){return function(t,n){const{pan:i,zoom:s={}}=e.options;if(!i||!i.enabled)return!1;const a=n&&n.srcEvent;return a&&!e.panning&&n.pointerType==="mouse"&&(pB(Vp(i),a)||FL(Vp(s.drag),a))?($t(i.onPanRejected,[{chart:r,event:n}]),!1):!0}}function hK(r,e){const t=Math.abs(r.clientX-e.clientX),n=Math.abs(r.clientY-e.clientY),i=t/n;let s,a;return i>.3&&i<1.7?s=a=!0:t>n?s=!0:a=!0,{x:s,y:a}}function VL(r,e,t){if(e.scale){const{center:n,pointers:i}=t,s=1/e.scale*t.scale,a=t.target.getBoundingClientRect(),o=hK(i[0],i[1]),A=e.options.zoom.mode,l={x:o.x&&Mc(A,"x",r)?s:1,y:o.y&&Mc(A,"y",r)?s:1,focalPoint:{x:n.x-a.left,y:n.y-a.top}};mB(r,l,"zoom","pinch"),e.scale=t.scale}}function fK(r,e,t){if(e.options.zoom.pinch.enabled){const n=rA(t,r);$t(e.options.zoom.onZoomStart,[{chart:r,event:t,point:n}])===!1?(e.scale=null,$t(e.options.zoom.onZoomRejected,[{chart:r,event:t}])):e.scale=1}}function gK(r,e,t){e.scale&&(VL(r,e,t),e.scale=null,$t(e.options.zoom.onZoomComplete,[{chart:r}]))}function $L(r,e,t){const n=e.delta;n&&(e.panning=!0,ML(r,{x:t.deltaX-n.x,y:t.deltaY-n.y},e.panScales),e.delta={x:t.deltaX,y:t.deltaY})}function pK(r,e,t){const{enabled:n,onPanStart:i,onPanRejected:s}=e.options.pan;if(!n)return;const a=t.target.getBoundingClientRect(),o={x:t.center.x-a.left,y:t.center.y-a.top};if($t(i,[{chart:r,event:t,point:o}])===!1)return $t(s,[{chart:r,event:t}]);e.panScales=LL(e.options.pan,o,r),e.delta={x:0,y:0},$L(r,e,t)}function mK(r,e){e.delta=null,e.panning&&(e.panning=!1,e.filterNextClick=!0,$t(e.options.pan.onPanComplete,[{chart:r}]))}const o2=new WeakMap;function aI(r,e){const t=Rn(r),n=r.canvas,{pan:i,zoom:s}=e,a=new Ap.Manager(n);s&&s.pinch.enabled&&(a.add(new Ap.Pinch),a.on("pinchstart",o=>fK(r,t,o)),a.on("pinch",o=>VL(r,t,o)),a.on("pinchend",o=>gK(r,t,o))),i&&i.enabled&&(a.add(new Ap.Pan({threshold:i.threshold,enable:dK(r,t)})),a.on("panstart",o=>pK(r,t,o)),a.on("panmove",o=>$L(r,t,o)),a.on("panend",()=>mK(r,t))),o2.set(r,a)}function oI(r){const e=o2.get(r);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),o2.delete(r))}function yK(r,e){var a,o,A,l;const{pan:t,zoom:n}=r,{pan:i,zoom:s}=e;return((o=(a=n==null?void 0:n.zoom)==null?void 0:a.pinch)==null?void 0:o.enabled)!==((l=(A=s==null?void 0:s.zoom)==null?void 0:A.pinch)==null?void 0:l.enabled)||(t==null?void 0:t.enabled)!==(i==null?void 0:i.enabled)||(t==null?void 0:t.threshold)!==(i==null?void 0:i.threshold)}var bK="2.2.0";function G0(r,e,t){const n=t.zoom.drag,{dragStart:i,dragEnd:s}=Rn(r);if(n.drawTime!==e||!s)return;const{left:a,top:o,width:A,height:l}=HL(r,t.zoom.mode,{dragStart:i,dragEnd:s},n.maintainAspectRatio),c=r.ctx;c.save(),c.beginPath(),c.fillStyle=n.backgroundColor||"rgba(225,225,225,0.3)",c.fillRect(a,o,A,l),n.borderWidth>0&&(c.lineWidth=n.borderWidth,c.strokeStyle=n.borderColor||"rgba(225,225,225)",c.strokeRect(a,o,A,l)),c.restore()}var jL={id:"zoom",version:bK,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(r,e,t){const n=Rn(r);n.options=t,Object.prototype.hasOwnProperty.call(t.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(t.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(t.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),Ap&&aI(r,t),r.pan=(i,s,a)=>ML(r,i,s,a),r.zoom=(i,s)=>mB(r,i,s),r.zoomRect=(i,s,a)=>UL(r,i,s,a),r.zoomScale=(i,s,a)=>WG(r,i,s,a),r.resetZoom=i=>YG(r,i),r.getZoomLevel=()=>JG(r),r.getInitialScaleBounds=()=>OL(r),r.getZoomedScaleBounds=()=>ZG(r),r.isZoomedOrPanned=()=>eK(r),r.isZoomingOrPanning=()=>nI(r)},beforeEvent(r,{event:e}){if(nI(r))return!1;if(e.type==="click"||e.type==="mouseup"){const t=Rn(r);if(t.filterNextClick)return t.filterNextClick=!1,!1}},beforeUpdate:function(r,e,t){const n=Rn(r),i=n.options;n.options=t,yK(i,t)&&(oI(r),aI(r,t)),cK(r,t)},beforeDatasetsDraw(r,e,t){G0(r,"beforeDatasetsDraw",t)},afterDatasetsDraw(r,e,t){G0(r,"afterDatasetsDraw",t)},beforeDraw(r,e,t){G0(r,"beforeDraw",t)},afterDraw(r,e,t){G0(r,"afterDraw",t)},stop:function(r){uK(r),Ap&&oI(r),NG(r)},panFunctions:s2,zoomFunctions:n2,zoomRectFunctions:i2};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A2=function(r,e){return A2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},A2(r,e)};function Ro(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");A2(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var l2=function(){return l2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},l2.apply(this,arguments)};function Qs(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(u){a(u)}}function A(c){try{l(n.throw(c))}catch(u){a(u)}}function l(c){c.done?s(c.value):i(c.value).then(o,A)}l((n=n.apply(r,[])).next())})}function Bs(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(c){return A([l,c])}}function A(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function K0(r,e,t){if(arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||e)}var ml=(function(){function r(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return r.prototype.add=function(e,t,n,i){return new r(this.left+e,this.top+t,this.width+n,this.height+i)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(i){return i.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),Dw=function(r,e){return ml.fromClientRect(r,e.getBoundingClientRect())},wK=function(r){var e=r.body,t=r.documentElement;if(!e||!t)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),i=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new ml(0,0,n,i)},Rw=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var s=r.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},ai=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,s="";++i<t;){var a=r[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===t||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},AI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var z0=0;z0<AI.length;z0++)vK[AI.charCodeAt(z0)]=z0;var lI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var q0=0;q0<lI.length;q0++)Rg[lI.charCodeAt(q0)]=q0;var _K=function(r){var e=r.length*.75,t=r.length,n,i=0,s,a,o,A;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)s=Rg[r.charCodeAt(n)],a=Rg[r.charCodeAt(n+1)],o=Rg[r.charCodeAt(n+2)],A=Rg[r.charCodeAt(n+3)],c[i++]=s<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|A&63;return l},xK=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},BK=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},id=5,yB=11,b1=2,CK=yB-id,GL=65536>>id,EK=1<<id,w1=EK-1,SK=1024>>id,IK=GL+SK,kK=IK,TK=32,FK=kK+TK,LK=65536>>yB,PK=1<<CK,NK=PK-1,cI=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},DK=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},RK=function(r,e){var t=_K(r),n=Array.isArray(t)?BK(t):new Uint32Array(t),i=Array.isArray(t)?xK(t):new Uint16Array(t),s=24,a=cI(i,s/2,n[4]/2),o=n[5]===2?cI(i,(s+n[4])/2):DK(n,Math.ceil((s+n[4])/4));return new UK(n[0],n[1],n[2],n[3],a,o)},UK=(function(){function r(e,t,n,i,s,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>id],t=(t<<b1)+(e&w1),this.data[t];if(e<=65535)return t=this.index[GL+(e-55296>>id)],t=(t<<b1)+(e&w1),this.data[t];if(e<this.highStart)return t=FK-LK+(e>>yB),t=this.index[t],t+=e>>id&NK,t=this.index[t],t=(t<<b1)+(e&w1),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),uI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",MK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var W0=0;W0<uI.length;W0++)MK[uI.charCodeAt(W0)]=W0;var OK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",dI=50,QK=1,KL=2,zL=3,HK=4,VK=5,hI=7,qL=8,fI=9,pc=10,c2=11,gI=12,u2=13,$K=14,Ug=15,d2=16,Y0=17,gg=18,jK=19,pI=20,h2=21,pg=22,v1=23,eh=24,Ua=25,Mg=26,Og=27,th=28,GK=29,Du=30,KK=31,X0=32,J0=33,f2=34,g2=35,p2=36,$p=37,m2=38,zy=39,qy=40,_1=41,WL=42,zK=43,qK=[9001,65288],YL="!",mr="",Z0="",y2=RK(OK),qA=[Du,p2],b2=[QK,KL,zL,VK],XL=[pc,qL],mI=[Og,Mg],WK=b2.concat(XL),yI=[m2,zy,qy,f2,g2],YK=[Ug,u2],XK=function(r,e){e===void 0&&(e="strict");var t=[],n=[],i=[];return r.forEach(function(s,a){var o=y2.get(s);if(o>dI?(i.push(!0),o-=dI):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(a),t.push(d2);if(o===HK||o===c2){if(a===0)return n.push(a),t.push(Du);var A=t[a-1];return WK.indexOf(A)===-1?(n.push(n[a-1]),t.push(A)):(n.push(a),t.push(Du))}if(n.push(a),o===KK)return t.push(e==="strict"?h2:$p);if(o===WL||o===GK)return t.push(Du);if(o===zK)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push($p):t.push(Du);t.push(o)}),[n,t,i]},x1=function(r,e,t,n){var i=n[t];if(Array.isArray(r)?r.indexOf(i)!==-1:r===i)for(var s=t;s<=n.length;){s++;var a=n[s];if(a===e)return!0;if(a!==pc)break}if(i===pc)for(var s=t;s>0;){s--;var o=n[s];if(Array.isArray(r)?r.indexOf(o)!==-1:r===o)for(var A=t;A<=n.length;){A++;var a=n[A];if(a===e)return!0;if(a!==pc)break}if(o!==pc)break}return!1},bI=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===pc)t--;else return n}return 0},JK=function(r,e,t,n,i){if(t[n]===0)return mr;var s=n-1;if(Array.isArray(i)&&i[s]===!0)return mr;var a=s-1,o=s+1,A=e[s],l=a>=0?e[a]:0,c=e[o];if(A===KL&&c===zL)return mr;if(b2.indexOf(A)!==-1)return YL;if(b2.indexOf(c)!==-1||XL.indexOf(c)!==-1)return mr;if(bI(s,e)===qL)return Z0;if(y2.get(r[s])===c2||(A===X0||A===J0)&&y2.get(r[o])===c2||A===hI||c===hI||A===fI||[pc,u2,Ug].indexOf(A)===-1&&c===fI||[Y0,gg,jK,eh,th].indexOf(c)!==-1||bI(s,e)===pg||x1(v1,pg,s,e)||x1([Y0,gg],h2,s,e)||x1(gI,gI,s,e))return mr;if(A===pc)return Z0;if(A===v1||c===v1)return mr;if(c===d2||A===d2)return Z0;if([u2,Ug,h2].indexOf(c)!==-1||A===$K||l===p2&&YK.indexOf(A)!==-1||A===th&&c===p2||c===pI||qA.indexOf(c)!==-1&&A===Ua||qA.indexOf(A)!==-1&&c===Ua||A===Og&&[$p,X0,J0].indexOf(c)!==-1||[$p,X0,J0].indexOf(A)!==-1&&c===Mg||qA.indexOf(A)!==-1&&mI.indexOf(c)!==-1||mI.indexOf(A)!==-1&&qA.indexOf(c)!==-1||[Og,Mg].indexOf(A)!==-1&&(c===Ua||[pg,Ug].indexOf(c)!==-1&&e[o+1]===Ua)||[pg,Ug].indexOf(A)!==-1&&c===Ua||A===Ua&&[Ua,th,eh].indexOf(c)!==-1)return mr;if([Ua,th,eh,Y0,gg].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===Ua)return mr;if([th,eh].indexOf(h)!==-1)u--;else break}if([Og,Mg].indexOf(c)!==-1)for(var u=[Y0,gg].indexOf(A)!==-1?a:s;u>=0;){var h=e[u];if(h===Ua)return mr;if([th,eh].indexOf(h)!==-1)u--;else break}if(m2===A&&[m2,zy,f2,g2].indexOf(c)!==-1||[zy,f2].indexOf(A)!==-1&&[zy,qy].indexOf(c)!==-1||[qy,g2].indexOf(A)!==-1&&c===qy||yI.indexOf(A)!==-1&&[pI,Mg].indexOf(c)!==-1||yI.indexOf(c)!==-1&&A===Og||qA.indexOf(A)!==-1&&qA.indexOf(c)!==-1||A===eh&&qA.indexOf(c)!==-1||qA.concat(Ua).indexOf(A)!==-1&&c===pg&&qK.indexOf(r[o])===-1||qA.concat(Ua).indexOf(c)!==-1&&A===gg)return mr;if(A===_1&&c===_1){for(var d=t[s],p=1;d>0&&(d--,e[d]===_1);)p++;if(p%2!==0)return mr}return A===X0&&c===J0?mr:Z0},ZK=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=XK(r,e.lineBreak),n=t[0],i=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[Ua,Du,WL].indexOf(o)!==-1?$p:o}));var a=e.wordBreak==="keep-all"?s.map(function(o,A){return o&&r[A]>=19968&&r[A]<=40959}):void 0;return[n,i,a]},ez=(function(){function r(e,t,n,i){this.codePoints=e,this.required=t===YL,this.start=n,this.end=i}return r.prototype.slice=function(){return ai.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),tz=function(r,e){var t=Rw(r),n=ZK(t,e),i=n[0],s=n[1],a=n[2],o=t.length,A=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var c=mr;l<o&&(c=JK(t,s,i,++l,a))===mr;);if(c!==mr||l===o){var u=new ez(t,c,A,l);return A=l,{value:u,done:!1}}return{done:!0,value:null}}}},rz=1,nz=2,Im=4,wI=8,Db=10,vI=47,cp=92,iz=9,sz=32,ey=34,mg=61,az=35,oz=36,Az=37,ty=39,ry=40,yg=41,lz=95,ha=45,cz=33,uz=60,dz=62,hz=64,fz=91,gz=93,pz=61,mz=123,ny=63,yz=125,_I=124,bz=126,wz=128,xI=65533,B1=42,Ku=43,vz=44,_z=58,xz=59,jp=46,Bz=0,Cz=8,Ez=11,Sz=14,Iz=31,kz=127,Yo=-1,JL=48,ZL=97,eP=101,Tz=102,Fz=117,Lz=122,tP=65,rP=69,nP=70,Pz=85,Nz=90,Is=function(r){return r>=JL&&r<=57},Dz=function(r){return r>=55296&&r<=57343},rh=function(r){return Is(r)||r>=tP&&r<=nP||r>=ZL&&r<=Tz},Rz=function(r){return r>=ZL&&r<=Lz},Uz=function(r){return r>=tP&&r<=Nz},Mz=function(r){return Rz(r)||Uz(r)},Oz=function(r){return r>=wz},iy=function(r){return r===Db||r===iz||r===sz},Rb=function(r){return Mz(r)||Oz(r)||r===lz},BI=function(r){return Rb(r)||Is(r)||r===ha},Qz=function(r){return r>=Bz&&r<=Cz||r===Ez||r>=Sz&&r<=Iz||r===kz},Ac=function(r,e){return r!==cp?!1:e!==Db},sy=function(r,e,t){return r===ha?Rb(e)||Ac(e,t):Rb(r)?!0:!!(r===cp&&Ac(r,e))},C1=function(r,e,t){return r===Ku||r===ha?Is(e)?!0:e===jp&&Is(t):Is(r===jp?e:r)},Hz=function(r){var e=0,t=1;(r[e]===Ku||r[e]===ha)&&(r[e]===ha&&(t=-1),e++);for(var n=[];Is(r[e]);)n.push(r[e++]);var i=n.length?parseInt(ai.apply(void 0,n),10):0;r[e]===jp&&e++;for(var s=[];Is(r[e]);)s.push(r[e++]);var a=s.length,o=a?parseInt(ai.apply(void 0,s),10):0;(r[e]===rP||r[e]===eP)&&e++;var A=1;(r[e]===Ku||r[e]===ha)&&(r[e]===ha&&(A=-1),e++);for(var l=[];Is(r[e]);)l.push(r[e++]);var c=l.length?parseInt(ai.apply(void 0,l),10):0;return t*(i+o*Math.pow(10,-a))*Math.pow(10,A*c)},Vz={type:2},$z={type:3},jz={type:4},Gz={type:13},Kz={type:8},zz={type:21},qz={type:9},Wz={type:10},Yz={type:11},Xz={type:12},Jz={type:14},ay={type:23},Zz={type:1},eq={type:25},tq={type:24},rq={type:26},nq={type:27},iq={type:28},sq={type:29},aq={type:31},w2={type:32},iP=(function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(Rw(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==w2;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ey:return this.consumeStringToken(ey);case az:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(BI(t)||Ac(n,i)){var s=sy(t,n,i)?nz:rz,a=this.consumeName();return{type:5,value:a,flags:s}}break;case oz:if(this.peekCodePoint(0)===mg)return this.consumeCodePoint(),Gz;break;case ty:return this.consumeStringToken(ty);case ry:return Vz;case yg:return $z;case B1:if(this.peekCodePoint(0)===mg)return this.consumeCodePoint(),Jz;break;case Ku:if(C1(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case vz:return jz;case ha:var o=e,A=this.peekCodePoint(0),l=this.peekCodePoint(1);if(C1(o,A,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(sy(o,A,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===ha&&l===dz)return this.consumeCodePoint(),this.consumeCodePoint(),tq;break;case jp:if(C1(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case vI:if(this.peekCodePoint(0)===B1)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===B1&&(c=this.consumeCodePoint(),c===vI))return this.consumeToken();if(c===Yo)return this.consumeToken()}break;case _z:return rq;case xz:return nq;case uz:if(this.peekCodePoint(0)===cz&&this.peekCodePoint(1)===ha&&this.peekCodePoint(2)===ha)return this.consumeCodePoint(),this.consumeCodePoint(),eq;break;case hz:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),d=this.peekCodePoint(2);if(sy(u,h,d)){var a=this.consumeName();return{type:7,value:a}}break;case fz:return iq;case cp:if(Ac(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case gz:return sq;case pz:if(this.peekCodePoint(0)===mg)return this.consumeCodePoint(),Kz;break;case mz:return Yz;case yz:return Xz;case Fz:case Pz:var p=this.peekCodePoint(0),f=this.peekCodePoint(1);return p===Ku&&(rh(f)||f===ny)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case _I:if(this.peekCodePoint(0)===mg)return this.consumeCodePoint(),qz;if(this.peekCodePoint(0)===_I)return this.consumeCodePoint(),zz;break;case bz:if(this.peekCodePoint(0)===mg)return this.consumeCodePoint(),Wz;break;case Yo:return w2}return iy(e)?(this.consumeWhiteSpace(),aq):Is(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Rb(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ai(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();rh(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===ny&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(ai.apply(void 0,e.map(function(A){return A===ny?JL:A})),16),s=parseInt(ai.apply(void 0,e.map(function(A){return A===ny?nP:A})),16);return{type:30,start:i,end:s}}var a=parseInt(ai.apply(void 0,e),16);if(this.peekCodePoint(0)===ha&&rh(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];rh(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var s=parseInt(ai.apply(void 0,o),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ry?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ry?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Yo)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===ty||t===ey){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Yo||this.peekCodePoint(0)===yg)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),ay)}for(;;){var i=this.consumeCodePoint();if(i===Yo||i===yg)return{type:22,value:ai.apply(void 0,e)};if(iy(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Yo||this.peekCodePoint(0)===yg?(this.consumeCodePoint(),{type:22,value:ai.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ay);if(i===ey||i===ty||i===ry||Qz(i))return this.consumeBadUrlRemnants(),ay;if(i===cp)if(Ac(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ay;else e.push(i)}},r.prototype.consumeWhiteSpace=function(){for(;iy(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===yg||e===Yo)return;Ac(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var i=Math.min(t,e);n+=ai.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var i=this._value[n];if(i===Yo||i===void 0||i===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(i===Db)return this._value.splice(0,n),Zz;if(i===cp){var s=this._value[n+1];s!==Yo&&s!==void 0&&(s===Db?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):Ac(i,s)&&(t+=this.consumeStringSlice(n),t+=ai(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=Im,n=this.peekCodePoint(0);for((n===Ku||n===ha)&&e.push(this.consumeCodePoint());Is(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===jp&&Is(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=wI;Is(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===rP||n===eP)&&((i===Ku||i===ha)&&Is(s)||Is(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=wI;Is(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Hz(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(sy(i,s,a)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return i===Az?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(rh(e)){for(var t=ai(e);rh(this.peekCodePoint(0))&&t.length<6;)t+=ai(this.consumeCodePoint());iy(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||Dz(n)||n>1114111?xI:n}return e===Yo?xI:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(BI(t))e+=ai(t);else if(Ac(t,this.peekCodePoint(0)))e+=ai(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r})(),sP=(function(){function r(e){this._tokens=e}return r.create=function(e){var t=new iP;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Aq(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?w2:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r})(),km=function(r){return r.type===15},kf=function(r){return r.type===17},Xr=function(r){return r.type===20},oq=function(r){return r.type===0},v2=function(r,e){return Xr(r)&&r.value===e},aP=function(r){return r.type!==31},Zh=function(r){return r.type!==31&&r.type!==4},FA=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},Aq=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},Oc=function(r){return r.type===17||r.type===15},wi=function(r){return r.type===16||Oc(r)},oP=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},cs={type:17,number:0,flags:Im},bB={type:16,number:50,flags:Im},mc={type:16,number:100,flags:Im},Qg=function(r,e,t){var n=r[0],i=r[1];return[hn(n,e),hn(typeof i<"u"?i:n,t)]},hn=function(r,e){if(r.type===16)return r.number/100*e;if(km(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},AP="deg",lP="grad",cP="rad",uP="turn",Uw={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case AP:return Math.PI*e.number/180;case lP:return Math.PI/200*e.number;case cP:return e.number;case uP:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},dP=function(r){return r.type===15&&(r.unit===AP||r.unit===lP||r.unit===cP||r.unit===uP)},hP=function(r){var e=r.filter(Xr).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[cs,cs];case"to top":case"bottom":return so(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[cs,mc];case"to right":case"left":return so(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[mc,mc];case"to bottom":case"top":return so(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[mc,cs];case"to left":case"right":return so(270)}return 0},so=function(r){return Math.PI*r/180},Ec={name:"color",parse:function(r,e){if(e.type===18){var t=lq[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return yc(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),a=e.value.substring(3,4);return yc(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return yc(parseInt(n,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),a=e.value.substring(6,8);return yc(parseInt(n,16),parseInt(i,16),parseInt(s,16),parseInt(a,16)/255)}}if(e.type===20){var o=fl[e.value.toUpperCase()];if(typeof o<"u")return o}return fl.TRANSPARENT}},Sc=function(r){return(255&r)===0},$i=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,i=255&r>>24;return e<255?"rgba("+i+","+n+","+t+","+e/255+")":"rgb("+i+","+n+","+t+")"},yc=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},CI=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},EI=function(r,e){var t=e.filter(Zh);if(t.length===3){var n=t.map(CI),i=n[0],s=n[1],a=n[2];return yc(i,s,a,1)}if(t.length===4){var o=t.map(CI),i=o[0],s=o[1],a=o[2],A=o[3];return yc(i,s,a,A)}return 0};function E1(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var SI=function(r,e){var t=e.filter(Zh),n=t[0],i=t[1],s=t[2],a=t[3],o=(n.type===17?so(n.number):Uw.parse(r,n))/(Math.PI*2),A=wi(i)?i.number/100:0,l=wi(s)?s.number/100:0,c=typeof a<"u"&&wi(a)?hn(a,1):1;if(A===0)return yc(l*255,l*255,l*255,1);var u=l<=.5?l*(A+1):l+A-l*A,h=l*2-u,d=E1(h,u,o+1/3),p=E1(h,u,o),f=E1(h,u,o-1/3);return yc(d*255,p*255,f*255,c)},lq={hsl:SI,hsla:SI,rgb:EI,rgba:EI},up=function(r,e){return Ec.parse(r,sP.create(e).parseComponentValue())},fl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},cq={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Xr(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},uq={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Mw=function(r,e){var t=Ec.parse(r,e[0]),n=e[1];return n&&wi(n)?{color:t,stop:n}:{color:t,stop:null}},II=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=cs),n.stop===null&&(n.stop=mc);for(var i=[],s=0,a=0;a<r.length;a++){var o=r[a].stop;if(o!==null){var A=hn(o,e);A>s?i.push(A):i.push(s),s=A}else i.push(null)}for(var l=null,a=0;a<i.length;a++){var c=i[a];if(c===null)l===null&&(l=a);else if(l!==null){for(var u=a-l,h=i[l-1],d=(c-h)/(u+1),p=1;p<=u;p++)i[l+p-1]=d*p;l=null}}return r.map(function(f,y){var b=f.color;return{color:b,stop:Math.max(Math.min(1,i[y]/e),0)}})},dq=function(r,e,t){var n=e/2,i=t/2,s=hn(r[0],e)-n,a=i-hn(r[1],t);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},hq=function(r,e,t){var n=typeof r=="number"?r:dq(r,e,t),i=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),s=e/2,a=t/2,o=i/2,A=Math.sin(n-Math.PI/2)*o,l=Math.cos(n-Math.PI/2)*o;return[i,s-l,s+l,a-A,a+A]},vo=function(r,e){return Math.sqrt(r*r+e*e)},kI=function(r,e,t,n,i){var s=[[0,0],[0,e],[r,0],[r,e]];return s.reduce(function(a,o){var A=o[0],l=o[1],c=vo(t-A,n-l);return(i?c<a.optimumDistance:c>a.optimumDistance)?{optimumCorner:o,optimumDistance:c}:a},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},fq=function(r,e,t,n,i){var s=0,a=0;switch(r.size){case 0:r.shape===0?s=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(r.shape===0)s=a=Math.min(vo(e,t),vo(e,t-i),vo(e-n,t),vo(e-n,t-i));else if(r.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-n)),A=kI(n,i,e,t,!0),l=A[0],c=A[1];s=vo(l-e,(c-t)/o),a=o*s}break;case 1:r.shape===0?s=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(r.shape===0)s=a=Math.max(vo(e,t),vo(e,t-i),vo(e-n,t),vo(e-n,t-i));else if(r.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-n)),u=kI(n,i,e,t,!1),l=u[0],c=u[1];s=vo(l-e,(c-t)/o),a=o*s}break}return Array.isArray(r.size)&&(s=hn(r.size[0],n),a=r.size.length===2?hn(r.size[1],i):s),[s,a]},gq=function(r,e){var t=so(180),n=[];return FA(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&a.value==="to"){t=hP(i);return}else if(dP(a)){t=Uw.parse(r,a);return}}var o=Mw(r,i);n.push(o)}),{angle:t,stops:n,type:1}},oy=function(r,e){var t=so(180),n=[];return FA(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){t=hP(i);return}else if(dP(a)){t=(Uw.parse(r,a)+so(270))%so(360);return}}var o=Mw(r,i);n.push(o)}),{angle:t,stops:n,type:1}},pq=function(r,e){var t=so(180),n=[],i=1,s=0,a=3,o=[];return FA(e).forEach(function(A,l){var c=A[0];if(l===0){if(Xr(c)&&c.value==="linear"){i=1;return}else if(Xr(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=Ec.parse(r,c.values[0]);n.push({stop:cs,color:u})}else if(c.name==="to"){var u=Ec.parse(r,c.values[0]);n.push({stop:mc,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(Zh);if(h.length===2){var u=Ec.parse(r,h[1]),d=h[0];kf(d)&&n.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),i===1?{angle:(t+so(180))%so(360),stops:n,type:i}:{size:a,shape:s,stops:n,position:o,type:i}},fP="closest-side",gP="farthest-side",pP="closest-corner",mP="farthest-corner",yP="circle",bP="ellipse",wP="cover",vP="contain",mq=function(r,e){var t=0,n=3,i=[],s=[];return FA(e).forEach(function(a,o){var A=!0;if(o===0){var l=!1;A=a.reduce(function(u,h){if(l)if(Xr(h))switch(h.value){case"center":return s.push(bB),u;case"top":case"left":return s.push(cs),u;case"right":case"bottom":return s.push(mc),u}else(wi(h)||Oc(h))&&s.push(h);else if(Xr(h))switch(h.value){case yP:return t=0,!1;case bP:return t=1,!1;case"at":return l=!0,!1;case fP:return n=0,!1;case wP:case gP:return n=1,!1;case vP:case pP:return n=2,!1;case mP:return n=3,!1}else if(Oc(h)||wi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return u},A)}if(A){var c=Mw(r,a);i.push(c)}}),{size:n,shape:t,stops:i,position:s,type:2}},Ay=function(r,e){var t=0,n=3,i=[],s=[];return FA(e).forEach(function(a,o){var A=!0;if(o===0?A=a.reduce(function(c,u){if(Xr(u))switch(u.value){case"center":return s.push(bB),!1;case"top":case"left":return s.push(cs),!1;case"right":case"bottom":return s.push(mc),!1}else if(wi(u)||Oc(u))return s.push(u),!1;return c},A):o===1&&(A=a.reduce(function(c,u){if(Xr(u))switch(u.value){case yP:return t=0,!1;case bP:return t=1,!1;case vP:case fP:return n=0,!1;case gP:return n=1,!1;case pP:return n=2,!1;case wP:case mP:return n=3,!1}else if(Oc(u)||wi(u))return Array.isArray(n)||(n=[]),n.push(u),!1;return c},A)),A){var l=Mw(r,a);i.push(l)}}),{size:n,shape:t,stops:i,position:s,type:2}},yq=function(r){return r.type===1},bq=function(r){return r.type===2},wB={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=_P[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function wq(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!_P[r.name])}var _P={"linear-gradient":gq,"-moz-linear-gradient":oy,"-ms-linear-gradient":oy,"-o-linear-gradient":oy,"-webkit-linear-gradient":oy,"radial-gradient":mq,"-moz-radial-gradient":Ay,"-ms-radial-gradient":Ay,"-o-radial-gradient":Ay,"-webkit-radial-gradient":Ay,"-webkit-gradient":pq},vq={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return Zh(n)&&wq(n)}).map(function(n){return wB.parse(r,n)})}},_q={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Xr(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},xq={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return FA(e).map(function(t){return t.filter(wi)}).map(oP)}},Bq={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return FA(e).map(function(t){return t.filter(Xr).map(function(n){return n.value}).join(" ")}).map(Cq)}},Cq=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Dh;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(Dh||(Dh={}));var Eq={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return FA(e).map(function(t){return t.filter(Sq)})}},Sq=function(r){return Xr(r)||wi(r)},Ow=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Iq=Ow("top"),kq=Ow("right"),Tq=Ow("bottom"),Fq=Ow("left"),Qw=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return oP(t.filter(wi))}}},Lq=Qw("top-left"),Pq=Qw("top-right"),Nq=Qw("bottom-right"),Dq=Qw("bottom-left"),Hw=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Rq=Hw("top"),Uq=Hw("right"),Mq=Hw("bottom"),Oq=Hw("left"),Vw=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return km(t)?t.number:0}}},Qq=Vw("top"),Hq=Vw("right"),Vq=Vw("bottom"),$q=Vw("left"),jq={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Gq={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Kq={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Xr).reduce(function(t,n){return t|zq(n.value)},0)}},zq=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},qq={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Wq={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Ub;(function(r){r.NORMAL="normal",r.STRICT="strict"})(Ub||(Ub={}));var Yq={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return Ub.STRICT;case"normal":default:return Ub.NORMAL}}},Xq={name:"line-height",initialValue:"normal",prefix:!1,type:4},TI=function(r,e){return Xr(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:wi(r)?hn(r,e):e},Jq={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:wB.parse(r,e)}},Zq={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},_2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},$w=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},eW=$w("top"),tW=$w("right"),rW=$w("bottom"),nW=$w("left"),iW={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Xr).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},sW={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},jw=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},aW=jw("top"),oW=jw("right"),AW=jw("bottom"),lW=jw("left"),cW={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},uW={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},dW={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&v2(e[0],"none")?[]:FA(e).map(function(t){for(var n={color:fl.TRANSPARENT,offsetX:cs,offsetY:cs,blur:cs},i=0,s=0;s<t.length;s++){var a=t[s];Oc(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:n.blur=a,i++):n.color=Ec.parse(r,a)}return n})}},hW={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},fW={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=mW[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},gW=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},pW=function(r){var e=r.filter(function(A){return A.type===17}).map(function(A){return A.number}),t=e[0],n=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[t,n,i,s,a,o]:null},mW={matrix:gW,matrix3d:pW},FI={type:16,number:50,flags:Im},yW=[FI,FI],bW={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(wi);return t.length!==2?yW:[t[0],t[1]]}},wW={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},dp;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(dp||(dp={}));var vW={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return dp.BREAK_ALL;case"keep-all":return dp.KEEP_ALL;case"normal":default:return dp.NORMAL}}},_W={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(kf(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},xP={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},xW={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return kf(e)?e.number:1}},BW={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},CW={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Xr).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},EW={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},SW={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},IW={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(kf(e))return e.number;if(Xr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},kW={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Xr).map(function(t){return t.value})}},TW={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Li=function(r,e){return(r&e)!==0},FW={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},LW={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var n=[],i=e.filter(aP),s=0;s<i.length;s++){var a=i[s],o=i[s+1];if(a.type===20){var A=o&&kf(o)?o.number:1;n.push({counter:a.value,increment:A})}}return n}},PW={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var t=[],n=e.filter(aP),i=0;i<n.length;i++){var s=n[i],a=n[i+1];if(Xr(s)&&s.value!=="none"){var o=a&&kf(a)?a.number:0;t.push({counter:s.value,reset:o})}}return t}},NW={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(km).map(function(t){return xP.parse(r,t)})}},DW={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var n=[],i=e.filter(oq);if(i.length%2!==0)return null;for(var s=0;s<i.length;s+=2){var a=i[s].value,o=i[s+1].value;n.push({open:a,close:o})}return n}},LI=function(r,e,t){if(!r)return"";var n=r[Math.min(e,r.length-1)];return n?t?n.open:n.close:""},RW={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&v2(e[0],"none")?[]:FA(e).map(function(t){for(var n={color:255,offsetX:cs,offsetY:cs,blur:cs,spread:cs,inset:!1},i=0,s=0;s<t.length;s++){var a=t[s];v2(a,"inset")?n.inset=!0:Oc(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:i===2?n.blur=a:n.spread=a,i++):n.color=Ec.parse(r,a)}return n})}},UW={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(Xr).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},MW={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},OW={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return km(e)?e.number:0}},QW=(function(){function r(e,t){var n,i;this.animationDuration=mt(e,NW,t.animationDuration),this.backgroundClip=mt(e,cq,t.backgroundClip),this.backgroundColor=mt(e,uq,t.backgroundColor),this.backgroundImage=mt(e,vq,t.backgroundImage),this.backgroundOrigin=mt(e,_q,t.backgroundOrigin),this.backgroundPosition=mt(e,xq,t.backgroundPosition),this.backgroundRepeat=mt(e,Bq,t.backgroundRepeat),this.backgroundSize=mt(e,Eq,t.backgroundSize),this.borderTopColor=mt(e,Iq,t.borderTopColor),this.borderRightColor=mt(e,kq,t.borderRightColor),this.borderBottomColor=mt(e,Tq,t.borderBottomColor),this.borderLeftColor=mt(e,Fq,t.borderLeftColor),this.borderTopLeftRadius=mt(e,Lq,t.borderTopLeftRadius),this.borderTopRightRadius=mt(e,Pq,t.borderTopRightRadius),this.borderBottomRightRadius=mt(e,Nq,t.borderBottomRightRadius),this.borderBottomLeftRadius=mt(e,Dq,t.borderBottomLeftRadius),this.borderTopStyle=mt(e,Rq,t.borderTopStyle),this.borderRightStyle=mt(e,Uq,t.borderRightStyle),this.borderBottomStyle=mt(e,Mq,t.borderBottomStyle),this.borderLeftStyle=mt(e,Oq,t.borderLeftStyle),this.borderTopWidth=mt(e,Qq,t.borderTopWidth),this.borderRightWidth=mt(e,Hq,t.borderRightWidth),this.borderBottomWidth=mt(e,Vq,t.borderBottomWidth),this.borderLeftWidth=mt(e,$q,t.borderLeftWidth),this.boxShadow=mt(e,RW,t.boxShadow),this.color=mt(e,jq,t.color),this.direction=mt(e,Gq,t.direction),this.display=mt(e,Kq,t.display),this.float=mt(e,qq,t.cssFloat),this.fontFamily=mt(e,EW,t.fontFamily),this.fontSize=mt(e,SW,t.fontSize),this.fontStyle=mt(e,TW,t.fontStyle),this.fontVariant=mt(e,kW,t.fontVariant),this.fontWeight=mt(e,IW,t.fontWeight),this.letterSpacing=mt(e,Wq,t.letterSpacing),this.lineBreak=mt(e,Yq,t.lineBreak),this.lineHeight=mt(e,Xq,t.lineHeight),this.listStyleImage=mt(e,Jq,t.listStyleImage),this.listStylePosition=mt(e,Zq,t.listStylePosition),this.listStyleType=mt(e,_2,t.listStyleType),this.marginTop=mt(e,eW,t.marginTop),this.marginRight=mt(e,tW,t.marginRight),this.marginBottom=mt(e,rW,t.marginBottom),this.marginLeft=mt(e,nW,t.marginLeft),this.opacity=mt(e,xW,t.opacity);var s=mt(e,iW,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=mt(e,sW,t.overflowWrap),this.paddingTop=mt(e,aW,t.paddingTop),this.paddingRight=mt(e,oW,t.paddingRight),this.paddingBottom=mt(e,AW,t.paddingBottom),this.paddingLeft=mt(e,lW,t.paddingLeft),this.paintOrder=mt(e,UW,t.paintOrder),this.position=mt(e,uW,t.position),this.textAlign=mt(e,cW,t.textAlign),this.textDecorationColor=mt(e,BW,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=mt(e,CW,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=mt(e,dW,t.textShadow),this.textTransform=mt(e,hW,t.textTransform),this.transform=mt(e,fW,t.transform),this.transformOrigin=mt(e,bW,t.transformOrigin),this.visibility=mt(e,wW,t.visibility),this.webkitTextStrokeColor=mt(e,MW,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=mt(e,OW,t.webkitTextStrokeWidth),this.wordBreak=mt(e,vW,t.wordBreak),this.zIndex=mt(e,_W,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return Sc(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Li(this.display,4)||Li(this.display,33554432)||Li(this.display,268435456)||Li(this.display,536870912)||Li(this.display,67108864)||Li(this.display,134217728)},r})(),HW=(function(){function r(e,t){this.content=mt(e,FW,t.content),this.quotes=mt(e,DW,t.quotes)}return r})(),PI=(function(){function r(e,t){this.counterIncrement=mt(e,LW,t.counterIncrement),this.counterReset=mt(e,PW,t.counterReset)}return r})(),mt=function(r,e,t){var n=new iP,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(i);var s=new sP(n.read());switch(e.type){case 2:var a=s.parseComponentValue();return e.parse(r,Xr(a)?a.value:e.initialValue);case 0:return e.parse(r,s.parseComponentValue());case 1:return e.parse(r,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Uw.parse(r,s.parseComponentValue());case"color":return Ec.parse(r,s.parseComponentValue());case"image":return wB.parse(r,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Oc(o)?o:cs;case"length-percentage":var A=s.parseComponentValue();return wi(A)?A:cs;case"time":return xP.parse(r,s.parseComponentValue())}break}},VW="data-html2canvas-debug",$W=function(r){var e=r.getAttribute(VW);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},x2=function(r,e){var t=$W(r);return t===1||e===t},LA=(function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,x2(t,3))debugger;this.styles=new QW(e,window.getComputedStyle(t,null)),E2(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Dw(this.context,t),x2(t,4)&&(this.flags|=16)}return r})(),jW="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",NI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ly=0;ly<NI.length;ly++)Hg[NI.charCodeAt(ly)]=ly;var GW=function(r){var e=r.length*.75,t=r.length,n,i=0,s,a,o,A;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)s=Hg[r.charCodeAt(n)],a=Hg[r.charCodeAt(n+1)],o=Hg[r.charCodeAt(n+2)],A=Hg[r.charCodeAt(n+3)],c[i++]=s<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|A&63;return l},KW=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},zW=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},sd=5,vB=11,S1=2,qW=vB-sd,BP=65536>>sd,WW=1<<sd,I1=WW-1,YW=1024>>sd,XW=BP+YW,JW=XW,ZW=32,eY=JW+ZW,tY=65536>>vB,rY=1<<qW,nY=rY-1,DI=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},iY=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},sY=function(r,e){var t=GW(r),n=Array.isArray(t)?zW(t):new Uint32Array(t),i=Array.isArray(t)?KW(t):new Uint16Array(t),s=24,a=DI(i,s/2,n[4]/2),o=n[5]===2?DI(i,(s+n[4])/2):iY(n,Math.ceil((s+n[4])/4));return new aY(n[0],n[1],n[2],n[3],a,o)},aY=(function(){function r(e,t,n,i,s,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>sd],t=(t<<S1)+(e&I1),this.data[t];if(e<=65535)return t=this.index[BP+(e-55296>>sd)],t=(t<<S1)+(e&I1),this.data[t];if(e<this.highStart)return t=eY-tY+(e>>vB),t=this.index[t],t+=e>>sd&nY,t=this.index[t],t=(t<<S1)+(e&I1),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),RI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oY=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cy=0;cy<RI.length;cy++)oY[RI.charCodeAt(cy)]=cy;var AY=1,k1=2,T1=3,UI=4,MI=5,lY=7,OI=8,F1=9,L1=10,QI=11,HI=12,VI=13,$I=14,P1=15,cY=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var s=r.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},uY=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,s="";++i<t;){var a=r[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===t||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},dY=sY(jW),no="",N1="",hY=function(r){return dY.get(r)},fY=function(r,e,t){var n=t-2,i=e[n],s=e[t-1],a=e[t];if(s===k1&&a===T1)return no;if(s===k1||s===T1||s===UI||a===k1||a===T1||a===UI)return N1;if(s===OI&&[OI,F1,QI,HI].indexOf(a)!==-1||(s===QI||s===F1)&&(a===F1||a===L1)||(s===HI||s===L1)&&a===L1||a===VI||a===MI||a===lY||s===AY)return no;if(s===VI&&a===$I){for(;i===MI;)i=e[--n];if(i===$I)return no}if(s===P1&&a===P1){for(var o=0;i===P1;)o++,i=e[--n];if(o%2===0)return no}return N1},gY=function(r){var e=cY(r),t=e.length,n=0,i=0,s=e.map(hY);return{next:function(){if(n>=t)return{done:!0,value:null};for(var a=no;n<t&&(a=fY(e,s,++n))===no;);if(a!==no||n===t){var o=uY.apply(null,e.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},pY=function(r){for(var e=gY(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},mY=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(r.body.removeChild(n),s===e)return!0}}return!1},yY=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=Rw(n.data).map(function(A){return ai(A)}),s=0,a={},o=i.every(function(A,l){t.setStart(n,s),t.setEnd(n,s+A.length);var c=t.getBoundingClientRect();s+=A.length;var u=c.x>a.x||c.y>a.y;return a=c,l===0?!0:u});return r.body.removeChild(e),o},bY=function(){return typeof new Image().crossOrigin<"u"},wY=function(){return typeof new XMLHttpRequest().responseType=="string"},vY=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},jI=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},_Y=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var i=new Image,s=e.toDataURL();i.src=s;var a=B2(t,t,0,0,i);return n.fillStyle="red",n.fillRect(0,0,t,t),GI(a).then(function(o){n.drawImage(o,0,0);var A=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var l=r.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=t+"px",jI(A)?GI(B2(t,t,0,0,l)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),jI(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},B2=function(r,e,t,n,i){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",r.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(i),a},GI=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},os={get SUPPORT_RANGE_BOUNDS(){var r=mY(document);return Object.defineProperty(os,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=os.SUPPORT_RANGE_BOUNDS&&yY(document);return Object.defineProperty(os,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=vY(document);return Object.defineProperty(os,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?_Y(document):Promise.resolve(!1);return Object.defineProperty(os,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=bY();return Object.defineProperty(os,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=wY();return Object.defineProperty(os,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(os,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(os,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},hp=(function(){function r(e,t){this.text=e,this.bounds=t}return r})(),xY=function(r,e,t,n){var i=EY(e,t),s=[],a=0;return i.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(os.SUPPORT_RANGE_BOUNDS){var A=KI(n,a,o.length).getClientRects();if(A.length>1){var l=_B(o),c=0;l.forEach(function(h){s.push(new hp(h,ml.fromDOMRectList(r,KI(n,c+a,h.length).getClientRects()))),c+=h.length})}else s.push(new hp(o,ml.fromDOMRectList(r,A)))}else{var u=n.splitText(o.length);s.push(new hp(o,BY(r,n))),n=u}else os.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),s},BY=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var s=Dw(r,n);return n.firstChild&&i.replaceChild(n.firstChild,n),s}}return ml.EMPTY},KI=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(r,e),i.setEnd(r,e+t),i},_B=function(r){if(os.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return pY(r)},CY=function(r,e){if(os.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return IY(r,e)},EY=function(r,e){return e.letterSpacing!==0?_B(r):CY(r,e)},SY=[32,160,4961,65792,65793,4153,4241],IY=function(r,e){for(var t=tz(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,s=function(){if(i.value){var a=i.value.slice(),o=Rw(a),A="";o.forEach(function(l){SY.indexOf(l)===-1?A+=ai(l):(A.length&&n.push(A),n.push(ai(l)),A="")}),A.length&&n.push(A)}};!(i=t.next()).done;)s();return n},kY=(function(){function r(e,t,n){this.text=TY(t.data,n.textTransform),this.textBounds=xY(e,this.text,n,t)}return r})(),TY=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(FY,LY);case 2:return r.toUpperCase();default:return r}},FY=/(^|\s|:|-|\(|\))([a-z])/g,LY=function(r,e,t){return r.length>0?e+t.toUpperCase():r},CP=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e})(LA),EP=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e})(LA),SP=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this,s=new XMLSerializer,a=Dw(t,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e})(LA),IP=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e})(LA),C2=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e})(LA),PY=[{type:15,flags:0,unit:"px",number:3}],NY=[{type:16,flags:0,number:50}],DY=function(r){return r.width>r.height?new ml(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new ml(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},RY=function(r){var e=r.type===UY?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},Mb="checkbox",Ob="radio",UY="password",zI=707406591,xB=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=RY(n),(i.type===Mb||i.type===Ob)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=DY(i.bounds)),i.type){case Mb:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=PY;break;case Ob:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=NY;break}return i}return e})(LA),kP=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return i.value=s&&s.text||"",i}return e})(LA),TP=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e})(LA),FP=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=PP(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?up(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):fl.TRANSPARENT,a=n.contentWindow.document.body?up(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):fl.TRANSPARENT;i.backgroundColor=Sc(s)?Sc(a)?i.styles.backgroundColor:a:s}}catch{}return i}return e})(LA),MY=["OL","UL","MENU"],Wy=function(r,e,t,n){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,NP(i)&&i.data.trim().length>0)t.textNodes.push(new kY(r,i,t.styles));else if(Sh(i))if(MP(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return Wy(r,o,t,n)});else{var a=LP(r,i);a.styles.isVisible()&&(OY(i,a,n)?a.flags|=4:QY(a.styles)&&(a.flags|=2),MY.indexOf(i.tagName)!==-1&&(a.flags|=8),t.elements.push(a),i.slot,i.shadowRoot?Wy(r,i.shadowRoot,a,n):!Qb(i)&&!DP(i)&&!Hb(i)&&Wy(r,i,a,n))}},LP=function(r,e){return S2(e)?new CP(r,e):RP(e)?new EP(r,e):DP(e)?new SP(r,e):HY(e)?new IP(r,e):VY(e)?new C2(r,e):$Y(e)?new xB(r,e):Hb(e)?new kP(r,e):Qb(e)?new TP(r,e):UP(e)?new FP(r,e):new LA(r,e)},PP=function(r,e){var t=LP(r,e);return t.flags|=4,Wy(r,e,t,t),t},OY=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||BB(r)&&t.styles.isTransparent()},QY=function(r){return r.isPositioned()||r.isFloating()},NP=function(r){return r.nodeType===Node.TEXT_NODE},Sh=function(r){return r.nodeType===Node.ELEMENT_NODE},E2=function(r){return Sh(r)&&typeof r.style<"u"&&!Yy(r)},Yy=function(r){return typeof r.className=="object"},HY=function(r){return r.tagName==="LI"},VY=function(r){return r.tagName==="OL"},$Y=function(r){return r.tagName==="INPUT"},jY=function(r){return r.tagName==="HTML"},DP=function(r){return r.tagName==="svg"},BB=function(r){return r.tagName==="BODY"},RP=function(r){return r.tagName==="CANVAS"},qI=function(r){return r.tagName==="VIDEO"},S2=function(r){return r.tagName==="IMG"},UP=function(r){return r.tagName==="IFRAME"},WI=function(r){return r.tagName==="STYLE"},GY=function(r){return r.tagName==="SCRIPT"},Qb=function(r){return r.tagName==="TEXTAREA"},Hb=function(r){return r.tagName==="SELECT"},MP=function(r){return r.tagName==="SLOT"},YI=function(r){return r.tagName.indexOf("-")>0},KY=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},r.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},r.prototype.pop=function(e){var t=this;e.forEach(function(n){return t.counters[n].pop()})},r.prototype.parse=function(e){var t=this,n=e.counterIncrement,i=e.counterReset,s=!0;n!==null&&n.forEach(function(o){var A=t.counters[o.counter];A&&o.increment!==0&&(s=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=o.increment)});var a=[];return s&&i.forEach(function(o){var A=t.counters[o.counter];a.push(o.counter),A||(A=t.counters[o.counter]=[]),A.push(o.reset)}),a},r})(),XI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},JI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},zY={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},qY={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},nh=function(r,e,t,n,i,s){return r<e||r>t?Gp(r,i,s.length>0):n.integers.reduce(function(a,o,A){for(;r>=o;)r-=o,a+=n.values[A];return a},"")+s},OP=function(r,e,t,n){var i="";do t||r--,i=n(r)+i,r/=e;while(r*e>=e);return i},si=function(r,e,t,n,i){var s=t-e+1;return(r<0?"-":"")+(OP(Math.abs(r),s,n,function(a){return ai(Math.floor(a%s)+e)})+i)},Su=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return OP(Math.abs(r),n,!1,function(i){return e[Math.floor(i%n)]})+t},mh=1,ac=2,oc=4,Vg=8,WA=function(r,e,t,n,i,s){if(r<-9999||r>9999)return Gp(r,4,i.length>0);var a=Math.abs(r),o=i;if(a===0)return e[0]+o;for(var A=0;a>0&&A<=4;A++){var l=a%10;l===0&&Li(s,mh)&&o!==""?o=e[l]+o:l>1||l===1&&A===0||l===1&&A===1&&Li(s,ac)||l===1&&A===1&&Li(s,oc)&&r>100||l===1&&A>1&&Li(s,Vg)?o=e[l]+(A>0?t[A-1]:"")+o:l===1&&A>0&&(o=t[A-1]+o),a=Math.floor(a/10)}return(r<0?n:"")+o},ZI="",ek="",tk="",D1="",Gp=function(r,e,t){var n=t?". ":"",i=t?"":"",s=t?", ":"",a=t?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=si(r,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Su(r,"",i);case 6:return nh(r,1,3999,XI,3,n).toLowerCase();case 7:return nh(r,1,3999,XI,3,n);case 8:return si(r,945,969,!1,n);case 9:return si(r,97,122,!1,n);case 10:return si(r,65,90,!1,n);case 11:return si(r,1632,1641,!0,n);case 12:case 49:return nh(r,1,9999,JI,3,n);case 35:return nh(r,1,9999,JI,3,n).toLowerCase();case 13:return si(r,2534,2543,!0,n);case 14:case 30:return si(r,6112,6121,!0,n);case 15:return Su(r,"",i);case 16:return Su(r,"",i);case 17:case 48:return WA(r,"",ZI,"",i,ac|oc|Vg);case 47:return WA(r,"",ek,"",i,mh|ac|oc|Vg);case 42:return WA(r,"",ZI,"",i,ac|oc|Vg);case 41:return WA(r,"",ek,"",i,mh|ac|oc|Vg);case 26:return WA(r,"","",tk,i,0);case 25:return WA(r,"","",tk,i,mh|ac|oc);case 31:return WA(r,"","",D1,s,mh|ac|oc);case 33:return WA(r,"","",D1,s,0);case 32:return WA(r,"","",D1,s,mh|ac|oc);case 18:return si(r,2406,2415,!0,n);case 20:return nh(r,1,19999,qY,3,n);case 21:return si(r,2790,2799,!0,n);case 22:return si(r,2662,2671,!0,n);case 22:return nh(r,1,10999,zY,3,n);case 23:return Su(r,"");case 24:return Su(r,"");case 27:return si(r,3302,3311,!0,n);case 28:return Su(r,"",i);case 29:return Su(r,"",i);case 34:return si(r,3792,3801,!0,n);case 37:return si(r,6160,6169,!0,n);case 38:return si(r,4160,4169,!0,n);case 39:return si(r,2918,2927,!0,n);case 40:return si(r,1776,1785,!0,n);case 43:return si(r,3046,3055,!0,n);case 44:return si(r,3174,3183,!0,n);case 45:return si(r,3664,3673,!0,n);case 46:return si(r,3872,3881,!0,n);case 3:default:return si(r,48,57,!0,n)}},QP="data-html2canvas-ignore",rk=(function(){function r(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new KY,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,t){var n=this,i=WY(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=i.contentWindow,A=o.document,l=JY(i).then(function(){return Qs(n,void 0,void 0,function(){var c,u;return Bs(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(rX),o&&(o.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==t.top||o.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),c=this.options.onclone,u=this.clonedReferenceElement,typeof u>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,XY(A)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof c=="function"?[2,Promise.resolve().then(function(){return c(A,u)}).then(function(){return i})]:[2,i]}})})});return A.open(),A.write(eX(document.doctype)+"<html></html>"),tX(this.referenceElement.ownerDocument,s,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),l},r.prototype.createElementClone=function(e){if(x2(e,2))debugger;if(RP(e))return this.createCanvasClone(e);if(qI(e))return this.createVideoClone(e);if(WI(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return S2(t)&&(S2(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),YI(t)?this.createCustomElementClone(t):t},r.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return R1(e.style,t),t},r.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(s,a){return a&&typeof a.cssText=="string"?s+a.cssText:s},""),i=e.cloneNode(!1);return i.textContent=n,i}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var s=e.getContext("2d"),a=i.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(o){var A=o.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},r.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},r.prototype.appendChildNode=function(e,t,n){(!Sh(t)||!GY(t)&&!t.hasAttribute(QP)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Sh(t)||!WI(t))&&e.appendChild(this.cloneNode(t,n))},r.prototype.cloneChildNodes=function(e,t,n){for(var i=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Sh(s)&&MP(s)&&typeof s.assignedNodes=="function"){var a=s.assignedNodes();a.length&&a.forEach(function(o){return i.appendChildNode(t,o,n)})}else this.appendChildNode(t,s,n)},r.prototype.cloneNode=function(e,t){if(NP(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Sh(e)&&(E2(e)||Yy(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var s=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&E2(i)&&(this.clonedReferenceElement=i),BB(i)&&sX(i);var A=this.counters.parse(new PI(this.context,s)),l=this.resolvePseudoContent(e,i,a,fp.BEFORE);YI(e)&&(t=!0),qI(e)||this.cloneChildNodes(e,i,t),l&&i.insertBefore(l,i.firstChild);var c=this.resolvePseudoContent(e,i,o,fp.AFTER);return c&&i.appendChild(c),this.counters.pop(A),(s&&(this.options.copyStyles||Yy(e))&&!UP(e)||t)&&R1(s,i),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(Qb(e)||Hb(e))&&(Qb(i)||Hb(i))&&(i.value=e.value),i}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,t,n,i){var s=this;if(n){var a=n.content,o=t.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new PI(this.context,n));var A=new HW(this.context,n),l=o.createElement("html2canvaspseudoelement");R1(n,l),A.content.forEach(function(u){if(u.type===0)l.appendChild(o.createTextNode(u.value));else if(u.type===22){var h=o.createElement("img");h.src=u.value,h.style.opacity="1",l.appendChild(h)}else if(u.type===18){if(u.name==="attr"){var d=u.values.filter(Xr);d.length&&l.appendChild(o.createTextNode(e.getAttribute(d[0].value)||""))}else if(u.name==="counter"){var p=u.values.filter(Zh),f=p[0],y=p[1];if(f&&Xr(f)){var b=s.counters.getCounterValue(f.value),B=y&&Xr(y)?_2.parse(s.context,y.value):3;l.appendChild(o.createTextNode(Gp(b,B,!1)))}}else if(u.name==="counters"){var S=u.values.filter(Zh),f=S[0],C=S[1],y=S[2];if(f&&Xr(f)){var P=s.counters.getCounterValues(f.value),M=y&&Xr(y)?_2.parse(s.context,y.value):3,L=C&&C.type===0?C.value:"",_=P.map(function(E){return Gp(E,M,!1)}).join(L);l.appendChild(o.createTextNode(_))}}}else if(u.type===20)switch(u.value){case"open-quote":l.appendChild(o.createTextNode(LI(A.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(LI(A.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(u.value))}}),l.className=I2+" "+k2;var c=i===fp.BEFORE?" "+I2:" "+k2;return Yy(t)?t.className.baseValue+=c:t.className+=c,l}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r})(),fp;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(fp||(fp={}));var WY=function(r,e){var t=r.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(QP,"true"),r.body.appendChild(t),t},YY=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},XY=function(r){return Promise.all([].slice.call(r.images,0).map(YY))},JY=function(r){return new Promise(function(e,t){var n=r.contentWindow;if(!n)return t("No window assigned for iframe");var i=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var s=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(s),e(r))},50)}})},ZY=["all","d","content"],R1=function(r,e){for(var t=r.length-1;t>=0;t--){var n=r.item(t);ZY.indexOf(n)===-1&&e.style.setProperty(n,r.getPropertyValue(n))}return e},eX=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},tX=function(r,e,t){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||t!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,t)},rX=function(r){var e=r[0],t=r[1],n=r[2];e.scrollLeft=t,e.scrollTop=n},nX=":before",iX=":after",I2="___html2canvas___pseudoelement_before",k2="___html2canvas___pseudoelement_after",nk=`{
    content: "" !important;
    display: none !important;
}`,sX=function(r){aX(r,"."+I2+nX+nk+`
         .`+k2+iX+nk)},aX=function(r,e){var t=r.ownerDocument;if(t){var n=t.createElement("style");n.textContent=e,r.appendChild(n)}},HP=(function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r})(),oX=(function(){function r(e,t){this.context=e,this._options=t,this._cache={}}return r.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(M1(e)||uX(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return Qs(this,void 0,void 0,function(){var t,n,i,s,a=this;return Bs(this,function(o){switch(o.label){case 0:return t=HP.isSameOrigin(e),n=!U1(e)&&this._options.useCORS===!0&&os.SUPPORT_CORS_IMAGES&&!t,i=!U1(e)&&!t&&!M1(e)&&typeof this._options.proxy=="string"&&os.SUPPORT_CORS_XHR&&!n,!t&&this._options.allowTaint===!1&&!U1(e)&&!M1(e)&&!i&&!n?[2]:(s=e,i?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,l){var c=new Image;c.onload=function(){return A(c)},c.onerror=l,(dX(s)||n)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return A(c)},500),a._options.imageTimeout>0&&setTimeout(function(){return l("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(s,a){var o=os.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(o==="text")s(A.response);else{var u=new FileReader;u.addEventListener("load",function(){return s(u.result)},!1),u.addEventListener("error",function(h){return a(h)},!1),u.readAsDataURL(A.response)}else a("Failed to proxy resource "+i+" with status code "+A.status)},A.onerror=a;var l=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=o),t._options.imageTimeout){var c=t._options.imageTimeout;A.timeout=c,A.ontimeout=function(){return a("Timed out ("+c+"ms) proxying "+i)}}A.send()})},r})(),AX=/^data:image\/svg\+xml/i,lX=/^data:image\/.*;base64,/i,cX=/^data:image\/.*/i,uX=function(r){return os.SUPPORT_SVG_DRAWING||!hX(r)},U1=function(r){return cX.test(r)},dX=function(r){return lX.test(r)},M1=function(r){return r.substr(0,4)==="blob"},hX=function(r){return r.substr(-3).toLowerCase()==="svg"||AX.test(r)},ft=(function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r})(),ih=function(r,e,t){return new ft(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},uy=(function(){function r(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return r.prototype.subdivide=function(e,t){var n=ih(this.start,this.startControl,e),i=ih(this.startControl,this.endControl,e),s=ih(this.endControl,this.end,e),a=ih(n,i,e),o=ih(i,s,e),A=ih(a,o,e);return t?new r(this.start,n,a,A):new r(A,o,s,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),io=function(r){return r.type===1},fX=(function(){function r(e){var t=e.styles,n=e.bounds,i=Qg(t.borderTopLeftRadius,n.width,n.height),s=i[0],a=i[1],o=Qg(t.borderTopRightRadius,n.width,n.height),A=o[0],l=o[1],c=Qg(t.borderBottomRightRadius,n.width,n.height),u=c[0],h=c[1],d=Qg(t.borderBottomLeftRadius,n.width,n.height),p=d[0],f=d[1],y=[];y.push((s+A)/n.width),y.push((p+u)/n.width),y.push((a+f)/n.height),y.push((l+h)/n.height);var b=Math.max.apply(Math,y);b>1&&(s/=b,a/=b,A/=b,l/=b,u/=b,h/=b,p/=b,f/=b);var B=n.width-A,S=n.height-h,C=n.width-u,P=n.height-f,M=t.borderTopWidth,L=t.borderRightWidth,_=t.borderBottomWidth,v=t.borderLeftWidth,T=hn(t.paddingTop,e.bounds.width),E=hn(t.paddingRight,e.bounds.width),x=hn(t.paddingBottom,e.bounds.width),F=hn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?Sn(n.left+v/3,n.top+M/3,s-v/3,a-M/3,Mr.TOP_LEFT):new ft(n.left+v/3,n.top+M/3),this.topRightBorderDoubleOuterBox=s>0||a>0?Sn(n.left+B,n.top+M/3,A-L/3,l-M/3,Mr.TOP_RIGHT):new ft(n.left+n.width-L/3,n.top+M/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?Sn(n.left+C,n.top+S,u-L/3,h-_/3,Mr.BOTTOM_RIGHT):new ft(n.left+n.width-L/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=p>0||f>0?Sn(n.left+v/3,n.top+P,p-v/3,f-_/3,Mr.BOTTOM_LEFT):new ft(n.left+v/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?Sn(n.left+v*2/3,n.top+M*2/3,s-v*2/3,a-M*2/3,Mr.TOP_LEFT):new ft(n.left+v*2/3,n.top+M*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?Sn(n.left+B,n.top+M*2/3,A-L*2/3,l-M*2/3,Mr.TOP_RIGHT):new ft(n.left+n.width-L*2/3,n.top+M*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?Sn(n.left+C,n.top+S,u-L*2/3,h-_*2/3,Mr.BOTTOM_RIGHT):new ft(n.left+n.width-L*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||f>0?Sn(n.left+v*2/3,n.top+P,p-v*2/3,f-_*2/3,Mr.BOTTOM_LEFT):new ft(n.left+v*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=s>0||a>0?Sn(n.left+v/2,n.top+M/2,s-v/2,a-M/2,Mr.TOP_LEFT):new ft(n.left+v/2,n.top+M/2),this.topRightBorderStroke=s>0||a>0?Sn(n.left+B,n.top+M/2,A-L/2,l-M/2,Mr.TOP_RIGHT):new ft(n.left+n.width-L/2,n.top+M/2),this.bottomRightBorderStroke=u>0||h>0?Sn(n.left+C,n.top+S,u-L/2,h-_/2,Mr.BOTTOM_RIGHT):new ft(n.left+n.width-L/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=p>0||f>0?Sn(n.left+v/2,n.top+P,p-v/2,f-_/2,Mr.BOTTOM_LEFT):new ft(n.left+v/2,n.top+n.height-_/2),this.topLeftBorderBox=s>0||a>0?Sn(n.left,n.top,s,a,Mr.TOP_LEFT):new ft(n.left,n.top),this.topRightBorderBox=A>0||l>0?Sn(n.left+B,n.top,A,l,Mr.TOP_RIGHT):new ft(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||h>0?Sn(n.left+C,n.top+S,u,h,Mr.BOTTOM_RIGHT):new ft(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=p>0||f>0?Sn(n.left,n.top+P,p,f,Mr.BOTTOM_LEFT):new ft(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||a>0?Sn(n.left+v,n.top+M,Math.max(0,s-v),Math.max(0,a-M),Mr.TOP_LEFT):new ft(n.left+v,n.top+M),this.topRightPaddingBox=A>0||l>0?Sn(n.left+Math.min(B,n.width-L),n.top+M,B>n.width+L?0:Math.max(0,A-L),Math.max(0,l-M),Mr.TOP_RIGHT):new ft(n.left+n.width-L,n.top+M),this.bottomRightPaddingBox=u>0||h>0?Sn(n.left+Math.min(C,n.width-v),n.top+Math.min(S,n.height-_),Math.max(0,u-L),Math.max(0,h-_),Mr.BOTTOM_RIGHT):new ft(n.left+n.width-L,n.top+n.height-_),this.bottomLeftPaddingBox=p>0||f>0?Sn(n.left+v,n.top+Math.min(P,n.height-_),Math.max(0,p-v),Math.max(0,f-_),Mr.BOTTOM_LEFT):new ft(n.left+v,n.top+n.height-_),this.topLeftContentBox=s>0||a>0?Sn(n.left+v+F,n.top+M+T,Math.max(0,s-(v+F)),Math.max(0,a-(M+T)),Mr.TOP_LEFT):new ft(n.left+v+F,n.top+M+T),this.topRightContentBox=A>0||l>0?Sn(n.left+Math.min(B,n.width+v+F),n.top+M+T,B>n.width+v+F?0:A-v+F,l-(M+T),Mr.TOP_RIGHT):new ft(n.left+n.width-(L+E),n.top+M+T),this.bottomRightContentBox=u>0||h>0?Sn(n.left+Math.min(C,n.width-(v+F)),n.top+Math.min(S,n.height+M+T),Math.max(0,u-(L+E)),h-(_+x),Mr.BOTTOM_RIGHT):new ft(n.left+n.width-(L+E),n.top+n.height-(_+x)),this.bottomLeftContentBox=p>0||f>0?Sn(n.left+v+F,n.top+P,Math.max(0,p-(v+F)),f-(_+x),Mr.BOTTOM_LEFT):new ft(n.left+v+F,n.top+n.height-(_+x))}return r})(),Mr;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Mr||(Mr={}));var Sn=function(r,e,t,n,i){var s=4*((Math.sqrt(2)-1)/3),a=t*s,o=n*s,A=r+t,l=e+n;switch(i){case Mr.TOP_LEFT:return new uy(new ft(r,l),new ft(r,l-o),new ft(A-a,e),new ft(A,e));case Mr.TOP_RIGHT:return new uy(new ft(r,e),new ft(r+a,e),new ft(A,l-o),new ft(A,l));case Mr.BOTTOM_RIGHT:return new uy(new ft(A,e),new ft(A,e+o),new ft(r+a,l),new ft(r,l));case Mr.BOTTOM_LEFT:default:return new uy(new ft(A,l),new ft(A-a,l),new ft(r,e+o),new ft(r,e))}},Vb=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},gX=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},$b=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},pX=(function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r})(),dy=(function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r})(),mX=(function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r})(),yX=function(r){return r.type===0},VP=function(r){return r.type===1},bX=function(r){return r.type===2},ik=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},wX=function(r,e,t,n,i){return r.map(function(s,a){switch(a){case 0:return s.add(e,t);case 1:return s.add(e+n,t);case 2:return s.add(e+n,t+i);case 3:return s.add(e,t+i)}return s})},$P=(function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),jP=(function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new fX(this.container),this.container.styles.opacity<1&&this.effects.push(new mX(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new pX(n,i,s))}if(this.container.styles.overflowX!==0){var a=Vb(this.curves),o=$b(this.curves);ik(a,o)?this.effects.push(new dy(a,6)):(this.effects.push(new dy(a,2)),this.effects.push(new dy(o,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var s=n.effects.filter(function(A){return!VP(A)});if(t||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,s),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=Vb(n.curves),o=$b(n.curves);ik(a,o)||i.unshift(new dy(o,6))}}else i.unshift.apply(i,s);n=n.parent}return i.filter(function(A){return Li(A.target,e)})},r})(),T2=function(r,e,t,n){r.container.elements.forEach(function(i){var s=Li(i.flags,4),a=Li(i.flags,2),o=new jP(i,r);Li(i.styles.display,2048)&&n.push(o);var A=Li(i.flags,8)?[]:n;if(s||a){var l=s||i.styles.isPositioned()?t:e,c=new $P(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;l.negativeZIndex.some(function(p,f){return u>p.element.container.styles.zIndex.order?(h=f,!1):h>0}),l.negativeZIndex.splice(h,0,c)}else if(u>0){var d=0;l.positiveZIndex.some(function(p,f){return u>=p.element.container.styles.zIndex.order?(d=f+1,!1):d>0}),l.positiveZIndex.splice(d,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);T2(o,c,s?c:t,A)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),T2(o,e,t,A);Li(i.flags,8)&&GP(i,A)})},GP=function(r,e){for(var t=r instanceof C2?r.start:1,n=r instanceof C2?r.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof IP&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=Gp(t,s.container.styles.listStyleType,!0),t+=n?-1:1}},vX=function(r){var e=new jP(r,null),t=new $P(e),n=[];return T2(e,t,t,n),GP(e.container,n),t},sk=function(r,e){switch(e){case 0:return ao(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return ao(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return ao(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return ao(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},_X=function(r,e){switch(e){case 0:return ao(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return ao(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return ao(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return ao(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},xX=function(r,e){switch(e){case 0:return ao(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return ao(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return ao(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return ao(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},BX=function(r,e){switch(e){case 0:return hy(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return hy(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return hy(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return hy(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},hy=function(r,e){var t=[];return io(r)?t.push(r.subdivide(.5,!1)):t.push(r),io(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},ao=function(r,e,t,n){var i=[];return io(r)?i.push(r.subdivide(.5,!1)):i.push(r),io(t)?i.push(t.subdivide(.5,!0)):i.push(t),io(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),io(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},KP=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},jb=function(r){var e=r.styles,t=r.bounds,n=hn(e.paddingLeft,t.width),i=hn(e.paddingRight,t.width),s=hn(e.paddingTop,t.width),a=hn(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+s+a))},CX=function(r,e){return r===0?e.bounds:r===2?jb(e):KP(e)},EX=function(r,e){return r===0?e.bounds:r===2?jb(e):KP(e)},O1=function(r,e,t){var n=CX(yh(r.styles.backgroundOrigin,e),r),i=EX(yh(r.styles.backgroundClip,e),r),s=SX(yh(r.styles.backgroundSize,e),t,n),a=s[0],o=s[1],A=Qg(yh(r.styles.backgroundPosition,e),n.width-a,n.height-o),l=IX(yh(r.styles.backgroundRepeat,e),A,s,n,i),c=Math.round(n.left+A[0]),u=Math.round(n.top+A[1]);return[l,c,u,a,o]},sh=function(r){return Xr(r)&&r.value===Dh.AUTO},fy=function(r){return typeof r=="number"},SX=function(r,e,t){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1];if(!a)return[0,0];if(wi(a)&&o&&wi(o))return[hn(a,t.width),hn(o,t.height)];var A=fy(s);if(Xr(a)&&(a.value===Dh.CONTAIN||a.value===Dh.COVER)){if(fy(s)){var l=t.width/t.height;return l<s!=(a.value===Dh.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=fy(n),u=fy(i),h=c||u;if(sh(a)&&(!o||sh(o))){if(c&&u)return[n,i];if(!A&&!h)return[t.width,t.height];if(h&&A){var d=c?n:i*s,p=u?i:n/s;return[d,p]}var f=c?n:t.width,y=u?i:t.height;return[f,y]}if(A){var b=0,B=0;return wi(a)?b=hn(a,t.width):wi(o)&&(B=hn(o,t.height)),sh(a)?b=B*s:(!o||sh(o))&&(B=b/s),[b,B]}var S=null,C=null;if(wi(a)?S=hn(a,t.width):o&&wi(o)&&(C=hn(o,t.height)),S!==null&&(!o||sh(o))&&(C=c&&u?S/n*i:t.height),C!==null&&sh(a)&&(S=c&&u?C/i*n:t.width),S!==null&&C!==null)return[S,C];throw new Error("Unable to calculate background-size for element")},yh=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},IX=function(r,e,t,n,i){var s=e[0],a=e[1],o=t[0],A=t[1];switch(r){case 2:return[new ft(Math.round(n.left),Math.round(n.top+a)),new ft(Math.round(n.left+n.width),Math.round(n.top+a)),new ft(Math.round(n.left+n.width),Math.round(A+n.top+a)),new ft(Math.round(n.left),Math.round(A+n.top+a))];case 3:return[new ft(Math.round(n.left+s),Math.round(n.top)),new ft(Math.round(n.left+s+o),Math.round(n.top)),new ft(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ft(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ft(Math.round(n.left+s),Math.round(n.top+a)),new ft(Math.round(n.left+s+o),Math.round(n.top+a)),new ft(Math.round(n.left+s+o),Math.round(n.top+a+A)),new ft(Math.round(n.left+s),Math.round(n.top+a+A))];default:return[new ft(Math.round(i.left),Math.round(i.top)),new ft(Math.round(i.left+i.width),Math.round(i.top)),new ft(Math.round(i.left+i.width),Math.round(i.height+i.top)),new ft(Math.round(i.left),Math.round(i.height+i.top))]}},kX="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ak="Hidden Text",TX=(function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),i.src=kX,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(ak)),n.appendChild(s),n.appendChild(i);var o=i.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(ak)),n.style.lineHeight="normal",i.style.verticalAlign="super";var A=i.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:A}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r})(),zP=(function(){function r(e,t){this.context=e,this.options=t}return r})(),FX=1e4,LX=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new TX(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),bX(t)&&(this.ctx.globalAlpha=t.opacity),yX(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),VP(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Qs(this,void 0,void 0,function(){var n;return Bs(this,function(i){switch(i.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Qs(this,void 0,void 0,function(){return Bs(this,function(n){switch(n.label){case 0:if(Li(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,i){var s=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var a=_B(t.text);a.reduce(function(o,A){return s.ctx.fillText(A,o,t.bounds.top+i),o+s.ctx.measureText(A).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),i=UX(t.fontFamily).join(", "),s=km(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(t,n){return Qs(this,void 0,void 0,function(){var i,s,a,o,A,l,c,u,h=this;return Bs(this,function(d){return i=this.createFontStyle(n),s=i[0],a=i[1],o=i[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(a,o),l=A.baseline,c=A.middle,u=n.paintOrder,t.textBounds.forEach(function(p){u.forEach(function(f){switch(f){case 0:h.ctx.fillStyle=$i(n.color),h.renderTextWithLetterSpacing(p,n.letterSpacing,l);var y=n.textShadow;y.length&&p.text.trim().length&&(y.slice(0).reverse().forEach(function(b){h.ctx.shadowColor=$i(b.color),h.ctx.shadowOffsetX=b.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=b.offsetY.number*h.options.scale,h.ctx.shadowBlur=b.blur.number,h.renderTextWithLetterSpacing(p,n.letterSpacing,l)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=$i(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(b){switch(b){case 1:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+l),p.bounds.width,1);break;case 2:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:h.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+c),p.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&p.text.trim().length&&(h.ctx.strokeStyle=$i(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+l)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var s=jb(t),a=$b(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Qs(this,void 0,void 0,function(){var n,i,s,a,o,A,B,B,l,c,u,h,C,d,p,P,f,y,b,B,S,C,P;return Bs(this,function(M){switch(M.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,i=t.curves,s=n.styles,a=0,o=n.textNodes,M.label=1;case 1:return a<o.length?(A=o[a],[4,this.renderTextNode(A,s)]):[3,4];case 2:M.sent(),M.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof CP))return[3,8];M.label=5;case 5:return M.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return B=M.sent(),this.renderReplacedElement(n,i,B),[3,8];case 7:return M.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof EP&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof SP))return[3,12];M.label=9;case 9:return M.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return B=M.sent(),this.renderReplacedElement(n,i,B),[3,12];case 11:return M.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof FP&&n.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:c=M.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),M.label=14;case 14:if(n instanceof xB&&(u=Math.min(n.bounds.width,n.bounds.height),n.type===Mb?n.checked&&(this.ctx.save(),this.path([new ft(n.bounds.left+u*.39363,n.bounds.top+u*.79),new ft(n.bounds.left+u*.16,n.bounds.top+u*.5549),new ft(n.bounds.left+u*.27347,n.bounds.top+u*.44071),new ft(n.bounds.left+u*.39694,n.bounds.top+u*.5649),new ft(n.bounds.left+u*.72983,n.bounds.top+u*.23),new ft(n.bounds.left+u*.84,n.bounds.top+u*.34085),new ft(n.bounds.left+u*.39363,n.bounds.top+u*.79)]),this.ctx.fillStyle=$i(zI),this.ctx.fill(),this.ctx.restore()):n.type===Ob&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+u/2,n.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=$i(zI),this.ctx.fill(),this.ctx.restore())),PX(n)&&n.value.length){switch(h=this.createFontStyle(s),C=h[0],d=h[1],p=this.fontMetrics.getMetrics(C,d).baseline,this.ctx.font=C,this.ctx.fillStyle=$i(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=DX(n.styles.textAlign),P=jb(n),f=0,n.styles.textAlign){case 1:f+=P.width/2;break;case 2:f+=P.width;break}y=P.add(f,0,0,-P.height/2+1),this.ctx.save(),this.path([new ft(P.left,P.top),new ft(P.left+P.width,P.top),new ft(P.left+P.width,P.top+P.height),new ft(P.left,P.top+P.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new hp(n.value,y),s.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Li(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(b=n.styles.listStyleImage,b.type!==0)return[3,18];B=void 0,S=b.url,M.label=15;case 15:return M.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return B=M.sent(),this.ctx.drawImage(B,n.bounds.left-(B.width+10),n.bounds.top),[3,18];case 17:return M.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(C=this.createFontStyle(s)[0],this.ctx.font=C,this.ctx.fillStyle=$i(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",P=new ml(n.bounds.left,n.bounds.top+hn(n.styles.paddingTop,n.bounds.width),n.bounds.width,TI(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new hp(t.listValue,P),s.letterSpacing,TI(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),M.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Qs(this,void 0,void 0,function(){var n,i,b,s,a,b,o,A,b,l,c,b,u,h,b,d,p,b,f,y,b;return Bs(this,function(B){switch(B.label){case 0:if(Li(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:B.sent(),n=0,i=t.negativeZIndex,B.label=2;case 2:return n<i.length?(b=i[n],[4,this.renderStack(b)]):[3,5];case 3:B.sent(),B.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:B.sent(),s=0,a=t.nonInlineLevel,B.label=7;case 7:return s<a.length?(b=a[s],[4,this.renderNode(b)]):[3,10];case 8:B.sent(),B.label=9;case 9:return s++,[3,7];case 10:o=0,A=t.nonPositionedFloats,B.label=11;case 11:return o<A.length?(b=A[o],[4,this.renderStack(b)]):[3,14];case 12:B.sent(),B.label=13;case 13:return o++,[3,11];case 14:l=0,c=t.nonPositionedInlineLevel,B.label=15;case 15:return l<c.length?(b=c[l],[4,this.renderStack(b)]):[3,18];case 16:B.sent(),B.label=17;case 17:return l++,[3,15];case 18:u=0,h=t.inlineLevel,B.label=19;case 19:return u<h.length?(b=h[u],[4,this.renderNode(b)]):[3,22];case 20:B.sent(),B.label=21;case 21:return u++,[3,19];case 22:d=0,p=t.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return d<p.length?(b=p[d],[4,this.renderStack(b)]):[3,26];case 24:B.sent(),B.label=25;case 25:return d++,[3,23];case 26:f=0,y=t.positiveZIndex,B.label=27;case 27:return f<y.length?(b=y[f],[4,this.renderStack(b)]):[3,30];case 28:B.sent(),B.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(i,s){var a=io(i)?i.start:i;s===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),io(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,n,i,s){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(t,n,i){var s;if(t.width===n&&t.height===i)return t;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var A=o.getContext("2d");return A.drawImage(t,0,0,t.width,t.height,0,0,n,i),o},e.prototype.renderBackgroundImage=function(t){return Qs(this,void 0,void 0,function(){var n,i,s,a,o,A;return Bs(this,function(l){switch(l.label){case 0:n=t.styles.backgroundImage.length-1,i=function(c){var u,h,d,T,ue,ne,F,k,_,p,T,ue,ne,F,k,f,y,b,B,S,C,P,M,L,_,v,T,E,x,F,k,Z,ue,ne,j,G,pe,q,N,Q,V,X;return Bs(this,function(Ae){switch(Ae.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,Ae.label=1;case 1:return Ae.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=Ae.sent(),[3,4];case 3:return Ae.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return u&&(d=O1(t,n,[u.width,u.height,u.width/u.height]),T=d[0],ue=d[1],ne=d[2],F=d[3],k=d[4],_=s.ctx.createPattern(s.resizeImage(u,F,k),"repeat"),s.renderRepeat(T,_,ue,ne)),[3,6];case 5:yq(c)?(p=O1(t,n,[null,null,null]),T=p[0],ue=p[1],ne=p[2],F=p[3],k=p[4],f=hq(c.angle,F,k),y=f[0],b=f[1],B=f[2],S=f[3],C=f[4],P=document.createElement("canvas"),P.width=F,P.height=k,M=P.getContext("2d"),L=M.createLinearGradient(b,S,B,C),II(c.stops,y).forEach(function(te){return L.addColorStop(te.stop,$i(te.color))}),M.fillStyle=L,M.fillRect(0,0,F,k),F>0&&k>0&&(_=s.ctx.createPattern(P,"repeat"),s.renderRepeat(T,_,ue,ne))):bq(c)&&(v=O1(t,n,[null,null,null]),T=v[0],E=v[1],x=v[2],F=v[3],k=v[4],Z=c.position.length===0?[bB]:c.position,ue=hn(Z[0],F),ne=hn(Z[Z.length-1],k),j=fq(c,ue,ne,F,k),G=j[0],pe=j[1],G>0&&pe>0&&(q=s.ctx.createRadialGradient(E+ue,x+ne,0,E+ue,x+ne,G),II(c.stops,G*2).forEach(function(te){return q.addColorStop(te.stop,$i(te.color))}),s.path(T),s.ctx.fillStyle=q,G!==pe?(N=t.bounds.left+.5*t.bounds.width,Q=t.bounds.top+.5*t.bounds.height,V=pe/G,X=1/V,s.ctx.save(),s.ctx.translate(N,Q),s.ctx.transform(1,0,0,V,0,0),s.ctx.translate(-N,-Q),s.ctx.fillRect(E,X*(x-Q)+Q,F,k*X),s.ctx.restore()):s.ctx.fill())),Ae.label=6;case 6:return n--,[2]}})},s=this,a=0,o=t.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return a<o.length?(A=o[a],[5,i(A)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,i){return Qs(this,void 0,void 0,function(){return Bs(this,function(s){return this.path(sk(i,n)),this.ctx.fillStyle=$i(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,i,s){return Qs(this,void 0,void 0,function(){var a,o;return Bs(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(t,i,s)]:[3,2];case 1:return A.sent(),[2];case 2:return a=_X(s,i),this.path(a),this.ctx.fillStyle=$i(t),this.ctx.fill(),o=xX(s,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Qs(this,void 0,void 0,function(){var n,i,s,a,o,A,l,c,u=this;return Bs(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,i=!Sc(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=NX(yh(n.backgroundClip,0),t.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Sc(n.backgroundColor)||(this.ctx.fillStyle=$i(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var p=Vb(t.curves),f=d.inset?0:FX,y=wX(p,-f+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(p),u.ctx.clip(),u.mask(y)):(u.mask(p),u.ctx.clip(),u.path(y)),u.ctx.shadowOffsetX=d.offsetX.number+f,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=$i(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?$i(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:o=0,A=0,l=s,h.label=3;case 3:return A<l.length?(c=l[A],c.style!==0&&!Sc(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,t.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,i,s,a){return Qs(this,void 0,void 0,function(){var o,A,l,c,u,h,d,p,f,y,b,B,S,C,P,M,P,M;return Bs(this,function(L){return this.ctx.save(),o=BX(s,i),A=sk(s,i),a===2&&(this.path(A),this.ctx.clip()),io(A[0])?(l=A[0].start.x,c=A[0].start.y):(l=A[0].x,c=A[0].y),io(A[1])?(u=A[1].end.x,h=A[1].end.y):(u=A[1].x,h=A[1].y),i===0||i===2?d=Math.abs(l-u):d=Math.abs(c-h),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(A.slice(0,2)),p=n<3?n*3:n*2,f=n<3?n*2:n,a===3&&(p=n,f=n),y=!0,d<=p*2?y=!1:d<=p*2+f?(b=d/(2*p+f),p*=b,f*=b):(B=Math.floor((d+f)/(p+f)),S=(d-B*p)/(B-1),C=(d-(B+1)*p)/B,f=C<=0||Math.abs(f-S)<Math.abs(f-C)?S:C),y&&(a===3?this.ctx.setLineDash([0,p+f]):this.ctx.setLineDash([p,f])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=$i(t),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(io(A[0])&&(P=A[3],M=A[0],this.ctx.beginPath(),this.formatPath([new ft(P.end.x,P.end.y),new ft(M.start.x,M.start.y)]),this.ctx.stroke()),io(A[1])&&(P=A[1],M=A[2],this.ctx.beginPath(),this.formatPath([new ft(P.end.x,P.end.y),new ft(M.start.x,M.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Qs(this,void 0,void 0,function(){var n;return Bs(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=$i(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=vX(t),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(zP),PX=function(r){return r instanceof TP||r instanceof kP?!0:r instanceof xB&&r.type!==Ob&&r.type!==Mb},NX=function(r,e){switch(r){case 0:return Vb(e);case 2:return gX(e);case 1:default:return $b(e)}},DX=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},RX=["-apple-system","system-ui"],UX=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return RX.indexOf(e)===-1}):r},MX=(function(r){Ro(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(t){return Qs(this,void 0,void 0,function(){var n,i;return Bs(this,function(s){switch(s.label){case 0:return n=B2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,OX(n)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=$i(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(zP),OX=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},QX=(function(){function r(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,K0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,K0([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,K0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,K0([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r})(),HX=(function(){function r(e,t){var n;this.windowBounds=t,this.instanceName="#"+r.instanceCount++,this.logger=new QX({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new oX(this,e)}return r.instanceCount=1,r})(),qP=function(r,e){return e===void 0&&(e={}),VX(r,e)};typeof window<"u"&&HP.setContext(window);var VX=function(r,e){return Qs(void 0,void 0,void 0,function(){var t,n,i,s,a,o,A,l,c,u,h,d,p,f,y,b,B,S,C,P,L,M,L,_,v,T,E,x,F,k,Z,ue,ne,j,G,pe,q,N,Q,V;return Bs(this,function(X){switch(X.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=r.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(n=t.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(v=e.imageTimeout)!==null&&v!==void 0?v:15e3,proxy:e.proxy,useCORS:(T=e.useCORS)!==null&&T!==void 0?T:!1},s=l2({logging:(E=e.logging)!==null&&E!==void 0?E:!0,cache:e.cache},i),a={windowWidth:(x=e.windowWidth)!==null&&x!==void 0?x:n.innerWidth,windowHeight:(F=e.windowHeight)!==null&&F!==void 0?F:n.innerHeight,scrollX:(k=e.scrollX)!==null&&k!==void 0?k:n.pageXOffset,scrollY:(Z=e.scrollY)!==null&&Z!==void 0?Z:n.pageYOffset},o=new ml(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),A=new HX(s,o),l=(ue=e.foreignObjectRendering)!==null&&ue!==void 0?ue:!1,c={allowTaint:(ne=e.allowTaint)!==null&&ne!==void 0?ne:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:l,copyStyles:l},A.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),u=new rk(A,r,c),h=u.clonedReferenceElement,h?[4,u.toIFrame(t,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return d=X.sent(),p=BB(h)||jY(h)?wK(h.ownerDocument):Dw(A,h),f=p.width,y=p.height,b=p.left,B=p.top,S=$X(A,h,e.backgroundColor),C={canvas:e.canvas,backgroundColor:S,scale:(G=(j=e.scale)!==null&&j!==void 0?j:n.devicePixelRatio)!==null&&G!==void 0?G:1,x:((pe=e.x)!==null&&pe!==void 0?pe:0)+b,y:((q=e.y)!==null&&q!==void 0?q:0)+B,width:(N=e.width)!==null&&N!==void 0?N:Math.ceil(f),height:(Q=e.height)!==null&&Q!==void 0?Q:Math.ceil(y)},l?(A.logger.debug("Document cloned, using foreign object rendering"),L=new MX(A,C),[4,L.render(h)]):[3,3];case 2:return P=X.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+b+","+B+" with size "+f+"x"+y+" using computed rendering"),A.logger.debug("Starting DOM parsing"),M=PP(A,h),S===M.styles.backgroundColor&&(M.styles.backgroundColor=fl.TRANSPARENT),A.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),L=new LX(A,C),[4,L.render(M)];case 4:P=X.sent(),X.label=5;case 5:return(!((V=e.removeContainer)!==null&&V!==void 0)||V)&&(rk.destroy(d)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,P]}})})},$X=function(r,e,t){var n=e.ownerDocument,i=n.documentElement?up(r,getComputedStyle(n.documentElement).backgroundColor):fl.TRANSPARENT,s=n.body?up(r,getComputedStyle(n.body).backgroundColor):fl.TRANSPARENT,a=typeof t=="string"?up(r,t):t===null?fl.TRANSPARENT:4294967295;return e===n.documentElement?Sc(i)?Sc(s)?a:s:i:a};const jX=Object.freeze(Object.defineProperty({__proto__:null,default:qP},Symbol.toStringTag,{value:"Module"})),GX="modulepreload",KX=function(r){return"/"+r},ok={},Q1=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let a=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),A=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=a(t.map(l=>{if(l=KX(l),l in ok)return;ok[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":GX,c||(h.as="script"),h.crossOrigin="",h.href=l,A&&h.setAttribute("nonce",A),document.head.appendChild(h),c)return new Promise((d,p)=>{h.addEventListener("load",d),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Kr(r){"@babel/helpers - typeof";return Kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(r)}var Po=Uint8Array,Ha=Uint16Array,CB=Int32Array,EB=new Po([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),SB=new Po([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ak=new Po([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WP=function(r,e){for(var t=new Ha(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new CB(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return{b:t,r:i}},YP=WP(EB,2),zX=YP.b,F2=YP.r;zX[28]=258,F2[258]=28;var qX=WP(SB,0),lk=qX.r,L2=new Ha(32768);for(var vn=0;vn<32768;++vn){var Xl=(vn&43690)>>1|(vn&21845)<<1;Xl=(Xl&52428)>>2|(Xl&13107)<<2,Xl=(Xl&61680)>>4|(Xl&3855)<<4,L2[vn]=((Xl&65280)>>8|(Xl&255)<<8)>>1}var gp=(function(r,e,t){for(var n=r.length,i=0,s=new Ha(e);i<n;++i)r[i]&&++s[r[i]-1];var a=new Ha(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new Ha(1<<e);var A=15-e;for(i=0;i<n;++i)if(r[i])for(var l=i<<4|r[i],c=e-r[i],u=a[r[i]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)o[L2[u]>>A]=l}else for(o=new Ha(n),i=0;i<n;++i)r[i]&&(o[i]=L2[a[r[i]-1]++]>>15-r[i]);return o}),gd=new Po(288);for(var vn=0;vn<144;++vn)gd[vn]=8;for(var vn=144;vn<256;++vn)gd[vn]=9;for(var vn=256;vn<280;++vn)gd[vn]=7;for(var vn=280;vn<288;++vn)gd[vn]=8;var Gb=new Po(32);for(var vn=0;vn<32;++vn)Gb[vn]=5;var WX=gp(gd,9,0),YX=gp(Gb,5,0),XP=function(r){return(r+7)/8|0},XX=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Po(r.subarray(e,t))},YA=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},bg=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},H1=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,s=t.slice();if(!i)return{t:ZP,l:0};if(i==1){var a=new Po(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(P,M){return P.f-M.f}),t.push({s:-1,f:25001});var o=t[0],A=t[1],l=0,c=1,u=2;for(t[0]={s:-1,f:o.f+A.f,l:o,r:A};c!=i-1;)o=t[t[l].f<t[u].f?l++:u++],A=t[l!=c&&t[l].f<t[u].f?l++:u++],t[c++]={s:-1,f:o.f+A.f,l:o,r:A};for(var h=s[0].s,n=1;n<i;++n)s[n].s>h&&(h=s[n].s);var d=new Ha(h+1),p=P2(t[c-1],d,0);if(p>e){var n=0,f=0,y=p-e,b=1<<y;for(s.sort(function(M,L){return d[L.s]-d[M.s]||M.f-L.f});n<i;++n){var B=s[n].s;if(d[B]>e)f+=b-(1<<p-d[B]),d[B]=e;else break}for(f>>=y;f>0;){var S=s[n].s;d[S]<e?f-=1<<e-d[S]++-1:++n}for(;n>=0&&f;--n){var C=s[n].s;d[C]==e&&(--d[C],++f)}p=e}return{t:new Po(d),l:p}},P2=function(r,e,t){return r.s==-1?Math.max(P2(r.l,e,t+1),P2(r.r,e,t+1)):e[r.s]=t},ck=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Ha(++e),n=0,i=r[0],s=1,a=function(A){t[n++]=A},o=1;o<=e;++o)if(r[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=r[o]}return{c:t.subarray(0,n),n:e}},wg=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},JP=function(r,e,t){var n=t.length,i=XP(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=t[s];return(i+4+n)*8},uk=function(r,e,t,n,i,s,a,o,A,l,c){YA(e,c++,t),++i[256];for(var u=H1(i,15),h=u.t,d=u.l,p=H1(s,15),f=p.t,y=p.l,b=ck(h),B=b.c,S=b.n,C=ck(f),P=C.c,M=C.n,L=new Ha(19),_=0;_<B.length;++_)++L[B[_]&31];for(var _=0;_<P.length;++_)++L[P[_]&31];for(var v=H1(L,7),T=v.t,E=v.l,x=19;x>4&&!T[Ak[x-1]];--x);var F=l+5<<3,k=wg(i,gd)+wg(s,Gb)+a,Z=wg(i,h)+wg(s,f)+a+14+3*x+wg(L,T)+2*L[16]+3*L[17]+7*L[18];if(A>=0&&F<=k&&F<=Z)return JP(e,c,r.subarray(A,A+l));var ue,ne,j,G;if(YA(e,c,1+(Z<k)),c+=2,Z<k){ue=gp(h,d,0),ne=h,j=gp(f,y,0),G=f;var pe=gp(T,E,0);YA(e,c,S-257),YA(e,c+5,M-1),YA(e,c+10,x-4),c+=14;for(var _=0;_<x;++_)YA(e,c+3*_,T[Ak[_]]);c+=3*x;for(var q=[B,P],N=0;N<2;++N)for(var Q=q[N],_=0;_<Q.length;++_){var V=Q[_]&31;YA(e,c,pe[V]),c+=T[V],V>15&&(YA(e,c,Q[_]>>5&127),c+=Q[_]>>12)}}else ue=WX,ne=gd,j=YX,G=Gb;for(var _=0;_<o;++_){var X=n[_];if(X>255){var V=X>>18&31;bg(e,c,ue[V+257]),c+=ne[V+257],V>7&&(YA(e,c,X>>23&31),c+=EB[V]);var Ae=X&31;bg(e,c,j[Ae]),c+=G[Ae],Ae>3&&(bg(e,c,X>>5&8191),c+=SB[Ae])}else bg(e,c,ue[X]),c+=ne[X]}return bg(e,c,ue[256]),c+ne[256]},JX=new CB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ZP=new Po(0),ZX=function(r,e,t,n,i,s){var a=s.z||r.length,o=new Po(n+a+5*(1+Math.ceil(a/7e3))+i),A=o.subarray(n,o.length-i),l=s.l,c=(s.r||0)&7;if(e){c&&(A[0]=s.r>>3);for(var u=JX[e-1],h=u>>13,d=u&8191,p=(1<<t)-1,f=s.p||new Ha(32768),y=s.h||new Ha(p+1),b=Math.ceil(t/3),B=2*b,S=function(R){return(r[R]^r[R+1]<<b^r[R+2]<<B)&p},C=new CB(25e3),P=new Ha(288),M=new Ha(32),L=0,_=0,v=s.i||0,T=0,E=s.w||0,x=0;v+2<a;++v){var F=S(v),k=v&32767,Z=y[F];if(f[k]=Z,y[F]=k,E<=v){var ue=a-v;if((L>7e3||T>24576)&&(ue>423||!l)){c=uk(r,A,0,C,P,M,_,T,x,v-x,c),T=L=_=0,x=v;for(var ne=0;ne<286;++ne)P[ne]=0;for(var ne=0;ne<30;++ne)M[ne]=0}var j=2,G=0,pe=d,q=k-Z&32767;if(ue>2&&F==S(v-q))for(var N=Math.min(h,ue)-1,Q=Math.min(32767,v),V=Math.min(258,ue);q<=Q&&--pe&&k!=Z;){if(r[v+j]==r[v+j-q]){for(var X=0;X<V&&r[v+X]==r[v+X-q];++X);if(X>j){if(j=X,G=q,X>N)break;for(var Ae=Math.min(q,X-2),te=0,ne=0;ne<Ae;++ne){var se=v-q+ne&32767,de=f[se],ve=se-de&32767;ve>te&&(te=ve,Z=se)}}}k=Z,Z=f[k],q+=k-Z&32767}if(G){C[T++]=268435456|F2[j]<<18|lk[G];var xe=F2[j]&31,Oe=lk[G]&31;_+=EB[xe]+SB[Oe],++P[257+xe],++M[Oe],E=v+j,++L}else C[T++]=r[v],++P[r[v]]}}for(v=Math.max(v,E);v<a;++v)C[T++]=r[v],++P[r[v]];c=uk(r,A,l,C,P,M,_,T,x,v-x,c),l||(s.r=c&7|A[c/8|0]<<3,c-=7,s.h=y,s.p=f,s.i=v,s.w=E)}else{for(var v=s.w||0;v<a+l;v+=65535){var Ve=v+65535;Ve>=a&&(A[c/8|0]=l,Ve=a),c=JP(A,c+1,r.subarray(v,Ve))}s.i=a}return XX(o,0,n+XP(c)+i)},eN=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=t[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},eJ=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Po(s.length+r.length);a.set(s),a.set(r,s.length),r=a,i.w=s.length}return ZX(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},tN=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},tJ=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=eN();i.p(e.dictionary),tN(r,2,i.d())}};function N2(r,e){e||(e={});var t=eN();t.p(r);var n=eJ(r,e,e.dictionary?6:2,4);return tJ(n,e),tN(n,n.length-4,t.d()),n}var rJ=typeof TextDecoder<"u"&&new TextDecoder,nJ=0;try{rJ.decode(ZP,{stream:!0}),nJ=1}catch{}function iJ(r){if(Array.isArray(r))return r}function sJ(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,a,o=[],A=!0,l=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(A=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);A=!0);}catch(c){l=!0,i=c}finally{try{if(!A&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return o}}function dk(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function aJ(r,e){if(r){if(typeof r=="string")return dk(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?dk(r,e):void 0}}function oJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hk(r,e){return iJ(r)||sJ(r,e)||aJ(r,e)||oJ()}function fk(r,e="utf8"){return new TextDecoder(e).decode(r)}const AJ=new TextEncoder;function lJ(r){return AJ.encode(r)}const cJ=1024*8,uJ=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),V1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IB{constructor(e=cJ,t={}){ke(this,"buffer");ke(this,"byteLength");ke(this,"byteOffset");ke(this,"length");ke(this,"offset");ke(this,"lastWrittenByte");ke(this,"littleEndian");ke(this,"_data");ke(this,"_mark");ke(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,s=e.byteLength-i;let a=i;(ArrayBuffer.isView(e)||e instanceof IB)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=V1[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===uJ&&t!=="uint8"&&t!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const A=new V1[t](o.buffer);return this.offset+=n,A.reverse(),A}const a=new V1[t](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return fk(this.readBytes(e))}decodeText(e=1,t="utf8"){return fk(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(lJ(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Tf(r){let e=r.length;for(;--e>=0;)r[e]=0}const dJ=3,hJ=258,rN=29,fJ=256,gJ=fJ+1+rN,nN=30,pJ=512,mJ=new Array((gJ+2)*2);Tf(mJ);const yJ=new Array(nN*2);Tf(yJ);const bJ=new Array(pJ);Tf(bJ);const wJ=new Array(hJ-dJ+1);Tf(wJ);const vJ=new Array(rN);Tf(vJ);const _J=new Array(nN);Tf(_J);const xJ=(r,e,t,n)=>{let i=r&65535|0,s=r>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var D2=xJ;const BJ=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},CJ=new Uint32Array(BJ()),EJ=(r,e,t,n)=>{const i=CJ,s=n+t;r^=-1;for(let a=n;a<s;a++)r=r>>>8^i[(r^e[a])&255];return r^-1};var Xo=EJ,R2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},iN={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const SJ=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var IJ=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)SJ(t,n)&&(r[n]=t[n])}}return r},kJ=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,s=r.length;n<s;n++){let a=r[n];t.set(a,i),i+=a.length}return t},sN={assign:IJ,flattenChunks:kJ};let aN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{aN=!1}const Kp=new Uint8Array(256);for(let r=0;r<256;r++)Kp[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Kp[254]=Kp[254]=1;var TJ=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,s,a=r.length,o=0;for(i=0;i<a;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const FJ=(r,e)=>{if(e<65534&&r.subarray&&aN)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var LJ=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const s=new Array(t*2);for(i=0,n=0;n<t;){let a=r[n++];if(a<128){s[i++]=a;continue}let o=Kp[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<t;)a=a<<6|r[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return FJ(s,i)},PJ=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+Kp[r[t]]>e?t:e},U2={string2buf:TJ,buf2string:LJ,utf8border:PJ};function NJ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var DJ=NJ;const gy=16209,RJ=16191;var UJ=function(e,t){let n,i,s,a,o,A,l,c,u,h,d,p,f,y,b,B,S,C,P,M,L,_,v,T;const E=e.state;n=e.next_in,v=e.input,i=n+(e.avail_in-5),s=e.next_out,T=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),A=E.dmax,l=E.wsize,c=E.whave,u=E.wnext,h=E.window,d=E.hold,p=E.bits,f=E.lencode,y=E.distcode,b=(1<<E.lenbits)-1,B=(1<<E.distbits)-1;e:do{p<15&&(d+=v[n++]<<p,p+=8,d+=v[n++]<<p,p+=8),S=f[d&b];t:for(;;){if(C=S>>>24,d>>>=C,p-=C,C=S>>>16&255,C===0)T[s++]=S&65535;else if(C&16){P=S&65535,C&=15,C&&(p<C&&(d+=v[n++]<<p,p+=8),P+=d&(1<<C)-1,d>>>=C,p-=C),p<15&&(d+=v[n++]<<p,p+=8,d+=v[n++]<<p,p+=8),S=y[d&B];r:for(;;){if(C=S>>>24,d>>>=C,p-=C,C=S>>>16&255,C&16){if(M=S&65535,C&=15,p<C&&(d+=v[n++]<<p,p+=8,p<C&&(d+=v[n++]<<p,p+=8)),M+=d&(1<<C)-1,M>A){e.msg="invalid distance too far back",E.mode=gy;break e}if(d>>>=C,p-=C,C=s-a,M>C){if(C=M-C,C>c&&E.sane){e.msg="invalid distance too far back",E.mode=gy;break e}if(L=0,_=h,u===0){if(L+=l-C,C<P){P-=C;do T[s++]=h[L++];while(--C);L=s-M,_=T}}else if(u<C){if(L+=l+u-C,C-=u,C<P){P-=C;do T[s++]=h[L++];while(--C);if(L=0,u<P){C=u,P-=C;do T[s++]=h[L++];while(--C);L=s-M,_=T}}}else if(L+=u-C,C<P){P-=C;do T[s++]=h[L++];while(--C);L=s-M,_=T}for(;P>2;)T[s++]=_[L++],T[s++]=_[L++],T[s++]=_[L++],P-=3;P&&(T[s++]=_[L++],P>1&&(T[s++]=_[L++]))}else{L=s-M;do T[s++]=T[L++],T[s++]=T[L++],T[s++]=T[L++],P-=3;while(P>2);P&&(T[s++]=T[L++],P>1&&(T[s++]=T[L++]))}}else if((C&64)===0){S=y[(S&65535)+(d&(1<<C)-1)];continue r}else{e.msg="invalid distance code",E.mode=gy;break e}break}}else if((C&64)===0){S=f[(S&65535)+(d&(1<<C)-1)];continue t}else if(C&32){E.mode=RJ;break e}else{e.msg="invalid literal/length code",E.mode=gy;break e}break}}while(n<i&&s<o);P=p>>3,n-=P,p-=P<<3,d&=(1<<p)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<o?257+(o-s):257-(s-o),E.hold=d,E.bits=p};const ah=15,gk=852,pk=592,mk=0,$1=1,yk=2,MJ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),OJ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),QJ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),HJ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),VJ=(r,e,t,n,i,s,a,o)=>{const A=o.bits;let l=0,c=0,u=0,h=0,d=0,p=0,f=0,y=0,b=0,B=0,S,C,P,M,L,_=null,v;const T=new Uint16Array(ah+1),E=new Uint16Array(ah+1);let x=null,F,k,Z;for(l=0;l<=ah;l++)T[l]=0;for(c=0;c<n;c++)T[e[t+c]]++;for(d=A,h=ah;h>=1&&T[h]===0;h--);if(d>h&&(d=h),h===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(u=1;u<h&&T[u]===0;u++);for(d<u&&(d=u),y=1,l=1;l<=ah;l++)if(y<<=1,y-=T[l],y<0)return-1;if(y>0&&(r===mk||h!==1))return-1;for(E[1]=0,l=1;l<ah;l++)E[l+1]=E[l]+T[l];for(c=0;c<n;c++)e[t+c]!==0&&(a[E[e[t+c]]++]=c);if(r===mk?(_=x=a,v=20):r===$1?(_=MJ,x=OJ,v=257):(_=QJ,x=HJ,v=0),B=0,c=0,l=u,L=s,p=d,f=0,P=-1,b=1<<d,M=b-1,r===$1&&b>gk||r===yk&&b>pk)return 1;for(;;){F=l-f,a[c]+1<v?(k=0,Z=a[c]):a[c]>=v?(k=x[a[c]-v],Z=_[a[c]-v]):(k=96,Z=0),S=1<<l-f,C=1<<p,u=C;do C-=S,i[L+(B>>f)+C]=F<<24|k<<16|Z|0;while(C!==0);for(S=1<<l-1;B&S;)S>>=1;if(S!==0?(B&=S-1,B+=S):B=0,c++,--T[l]===0){if(l===h)break;l=e[t+a[c]]}if(l>d&&(B&M)!==P){for(f===0&&(f=d),L+=u,p=l-f,y=1<<p;p+f<h&&(y-=T[p+f],!(y<=0));)p++,y<<=1;if(b+=1<<p,r===$1&&b>gk||r===yk&&b>pk)return 1;P=B&M,i[P]=d<<24|p<<16|L-s|0}}return B!==0&&(i[L+B]=l-f<<24|64<<16|0),o.bits=d,0};var pp=VJ;const $J=0,oN=1,AN=2,{Z_FINISH:bk,Z_BLOCK:jJ,Z_TREES:py,Z_OK:pd,Z_STREAM_END:GJ,Z_NEED_DICT:KJ,Z_STREAM_ERROR:fo,Z_DATA_ERROR:lN,Z_MEM_ERROR:cN,Z_BUF_ERROR:zJ,Z_DEFLATED:wk}=iN,Gw=16180,vk=16181,_k=16182,xk=16183,Bk=16184,Ck=16185,Ek=16186,Sk=16187,Ik=16188,kk=16189,Kb=16190,XA=16191,j1=16192,Tk=16193,G1=16194,Fk=16195,Lk=16196,Pk=16197,Nk=16198,my=16199,yy=16200,Dk=16201,Rk=16202,Uk=16203,Mk=16204,Ok=16205,K1=16206,Qk=16207,Hk=16208,In=16209,uN=16210,dN=16211,qJ=852,WJ=592,YJ=15,XJ=YJ,Vk=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function JJ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Rd=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Gw||e.mode>dN?1:0},hN=r=>{if(Rd(r))return fo;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Gw,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(qJ),e.distcode=e.distdyn=new Int32Array(WJ),e.sane=1,e.back=-1,pd},fN=r=>{if(Rd(r))return fo;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,hN(r)},gN=(r,e)=>{let t;if(Rd(r))return fo;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?fo:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,fN(r))},pN=(r,e)=>{if(!r)return fo;const t=new JJ;r.state=t,t.strm=r,t.window=null,t.mode=Gw;const n=gN(r,e);return n!==pd&&(r.state=null),n},ZJ=r=>pN(r,XJ);let $k=!0,z1,q1;const eZ=r=>{if($k){z1=new Int32Array(512),q1=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(pp(oN,r.lens,0,288,z1,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;pp(AN,r.lens,0,32,q1,0,r.work,{bits:5}),$k=!1}r.lencode=z1,r.lenbits=9,r.distcode=q1,r.distbits=5},mN=(r,e,t,n)=>{let i;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(t-n,t-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},tZ=(r,e)=>{let t,n,i,s,a,o,A,l,c,u,h,d,p,f,y=0,b,B,S,C,P,M,L,_;const v=new Uint8Array(4);let T,E;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Rd(r)||!r.output||!r.input&&r.avail_in!==0)return fo;t=r.state,t.mode===XA&&(t.mode=j1),a=r.next_out,i=r.output,A=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,l=t.hold,c=t.bits,u=o,h=A,_=pd;e:for(;;)switch(t.mode){case Gw:if(t.wrap===0){t.mode=j1;break}for(;c<16;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,v[0]=l&255,v[1]=l>>>8&255,t.check=Xo(t.check,v,2,0),l=0,c=0,t.mode=vk;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){r.msg="incorrect header check",t.mode=In;break}if((l&15)!==wk){r.msg="unknown compression method",t.mode=In;break}if(l>>>=4,c-=4,L=(l&15)+8,t.wbits===0&&(t.wbits=L),L>15||L>t.wbits){r.msg="invalid window size",t.mode=In;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=l&512?kk:XA,l=0,c=0;break;case vk:for(;c<16;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if(t.flags=l,(t.flags&255)!==wk){r.msg="unknown compression method",t.mode=In;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=In;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(v[0]=l&255,v[1]=l>>>8&255,t.check=Xo(t.check,v,2,0)),l=0,c=0,t.mode=_k;case _k:for(;c<32;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(v[0]=l&255,v[1]=l>>>8&255,v[2]=l>>>16&255,v[3]=l>>>24&255,t.check=Xo(t.check,v,4,0)),l=0,c=0,t.mode=xk;case xk:for(;c<16;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(v[0]=l&255,v[1]=l>>>8&255,t.check=Xo(t.check,v,2,0)),l=0,c=0,t.mode=Bk;case Bk:if(t.flags&1024){for(;c<16;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(v[0]=l&255,v[1]=l>>>8&255,t.check=Xo(t.check,v,2,0)),l=0,c=0}else t.head&&(t.head.extra=null);t.mode=Ck;case Ck:if(t.flags&1024&&(d=t.length,d>o&&(d=o),d&&(t.head&&(L=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+d),L)),t.flags&512&&t.wrap&4&&(t.check=Xo(t.check,n,d,s)),o-=d,s+=d,t.length-=d),t.length))break e;t.length=0,t.mode=Ek;case Ek:if(t.flags&2048){if(o===0)break e;d=0;do L=n[s+d++],t.head&&L&&t.length<65536&&(t.head.name+=String.fromCharCode(L));while(L&&d<o);if(t.flags&512&&t.wrap&4&&(t.check=Xo(t.check,n,d,s)),o-=d,s+=d,L)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Sk;case Sk:if(t.flags&4096){if(o===0)break e;d=0;do L=n[s+d++],t.head&&L&&t.length<65536&&(t.head.comment+=String.fromCharCode(L));while(L&&d<o);if(t.flags&512&&t.wrap&4&&(t.check=Xo(t.check,n,d,s)),o-=d,s+=d,L)break e}else t.head&&(t.head.comment=null);t.mode=Ik;case Ik:if(t.flags&512){for(;c<16;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if(t.wrap&4&&l!==(t.check&65535)){r.msg="header crc mismatch",t.mode=In;break}l=0,c=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=XA;break;case kk:for(;c<32;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}r.adler=t.check=Vk(l),l=0,c=0,t.mode=Kb;case Kb:if(t.havedict===0)return r.next_out=a,r.avail_out=A,r.next_in=s,r.avail_in=o,t.hold=l,t.bits=c,KJ;r.adler=t.check=1,t.mode=XA;case XA:if(e===jJ||e===py)break e;case j1:if(t.last){l>>>=c&7,c-=c&7,t.mode=K1;break}for(;c<3;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}switch(t.last=l&1,l>>>=1,c-=1,l&3){case 0:t.mode=Tk;break;case 1:if(eZ(t),t.mode=my,e===py){l>>>=2,c-=2;break e}break;case 2:t.mode=Lk;break;case 3:r.msg="invalid block type",t.mode=In}l>>>=2,c-=2;break;case Tk:for(l>>>=c&7,c-=c&7;c<32;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if((l&65535)!==(l>>>16^65535)){r.msg="invalid stored block lengths",t.mode=In;break}if(t.length=l&65535,l=0,c=0,t.mode=G1,e===py)break e;case G1:t.mode=Fk;case Fk:if(d=t.length,d){if(d>o&&(d=o),d>A&&(d=A),d===0)break e;i.set(n.subarray(s,s+d),a),o-=d,s+=d,A-=d,a+=d,t.length-=d;break}t.mode=XA;break;case Lk:for(;c<14;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if(t.nlen=(l&31)+257,l>>>=5,c-=5,t.ndist=(l&31)+1,l>>>=5,c-=5,t.ncode=(l&15)+4,l>>>=4,c-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=In;break}t.have=0,t.mode=Pk;case Pk:for(;t.have<t.ncode;){for(;c<3;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}t.lens[x[t.have++]]=l&7,l>>>=3,c-=3}for(;t.have<19;)t.lens[x[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},_=pp($J,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,_){r.msg="invalid code lengths set",t.mode=In;break}t.have=0,t.mode=Nk;case Nk:for(;t.have<t.nlen+t.ndist;){for(;y=t.lencode[l&(1<<t.lenbits)-1],b=y>>>24,B=y>>>16&255,S=y&65535,!(b<=c);){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if(S<16)l>>>=b,c-=b,t.lens[t.have++]=S;else{if(S===16){for(E=b+2;c<E;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if(l>>>=b,c-=b,t.have===0){r.msg="invalid bit length repeat",t.mode=In;break}L=t.lens[t.have-1],d=3+(l&3),l>>>=2,c-=2}else if(S===17){for(E=b+3;c<E;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}l>>>=b,c-=b,L=0,d=3+(l&7),l>>>=3,c-=3}else{for(E=b+7;c<E;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}l>>>=b,c-=b,L=0,d=11+(l&127),l>>>=7,c-=7}if(t.have+d>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=In;break}for(;d--;)t.lens[t.have++]=L}}if(t.mode===In)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=In;break}if(t.lenbits=9,T={bits:t.lenbits},_=pp(oN,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,_){r.msg="invalid literal/lengths set",t.mode=In;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},_=pp(AN,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,_){r.msg="invalid distances set",t.mode=In;break}if(t.mode=my,e===py)break e;case my:t.mode=yy;case yy:if(o>=6&&A>=258){r.next_out=a,r.avail_out=A,r.next_in=s,r.avail_in=o,t.hold=l,t.bits=c,UJ(r,h),a=r.next_out,i=r.output,A=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,l=t.hold,c=t.bits,t.mode===XA&&(t.back=-1);break}for(t.back=0;y=t.lencode[l&(1<<t.lenbits)-1],b=y>>>24,B=y>>>16&255,S=y&65535,!(b<=c);){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if(B&&(B&240)===0){for(C=b,P=B,M=S;y=t.lencode[M+((l&(1<<C+P)-1)>>C)],b=y>>>24,B=y>>>16&255,S=y&65535,!(C+b<=c);){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}l>>>=C,c-=C,t.back+=C}if(l>>>=b,c-=b,t.back+=b,t.length=S,B===0){t.mode=Ok;break}if(B&32){t.back=-1,t.mode=XA;break}if(B&64){r.msg="invalid literal/length code",t.mode=In;break}t.extra=B&15,t.mode=Dk;case Dk:if(t.extra){for(E=t.extra;c<E;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,c-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Rk;case Rk:for(;y=t.distcode[l&(1<<t.distbits)-1],b=y>>>24,B=y>>>16&255,S=y&65535,!(b<=c);){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if((B&240)===0){for(C=b,P=B,M=S;y=t.distcode[M+((l&(1<<C+P)-1)>>C)],b=y>>>24,B=y>>>16&255,S=y&65535,!(C+b<=c);){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}l>>>=C,c-=C,t.back+=C}if(l>>>=b,c-=b,t.back+=b,B&64){r.msg="invalid distance code",t.mode=In;break}t.offset=S,t.extra=B&15,t.mode=Uk;case Uk:if(t.extra){for(E=t.extra;c<E;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,c-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=In;break}t.mode=Mk;case Mk:if(A===0)break e;if(d=h-A,t.offset>d){if(d=t.offset-d,d>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=In;break}d>t.wnext?(d-=t.wnext,p=t.wsize-d):p=t.wnext-d,d>t.length&&(d=t.length),f=t.window}else f=i,p=a-t.offset,d=t.length;d>A&&(d=A),A-=d,t.length-=d;do i[a++]=f[p++];while(--d);t.length===0&&(t.mode=yy);break;case Ok:if(A===0)break e;i[a++]=t.length,A--,t.mode=yy;break;case K1:if(t.wrap){for(;c<32;){if(o===0)break e;o--,l|=n[s++]<<c,c+=8}if(h-=A,r.total_out+=h,t.total+=h,t.wrap&4&&h&&(r.adler=t.check=t.flags?Xo(t.check,i,h,a-h):D2(t.check,i,h,a-h)),h=A,t.wrap&4&&(t.flags?l:Vk(l))!==t.check){r.msg="incorrect data check",t.mode=In;break}l=0,c=0}t.mode=Qk;case Qk:if(t.wrap&&t.flags){for(;c<32;){if(o===0)break e;o--,l+=n[s++]<<c,c+=8}if(t.wrap&4&&l!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=In;break}l=0,c=0}t.mode=Hk;case Hk:_=GJ;break e;case In:_=lN;break e;case uN:return cN;case dN:default:return fo}return r.next_out=a,r.avail_out=A,r.next_in=s,r.avail_in=o,t.hold=l,t.bits=c,(t.wsize||h!==r.avail_out&&t.mode<In&&(t.mode<K1||e!==bk))&&mN(r,r.output,r.next_out,h-r.avail_out),u-=r.avail_in,h-=r.avail_out,r.total_in+=u,r.total_out+=h,t.total+=h,t.wrap&4&&h&&(r.adler=t.check=t.flags?Xo(t.check,i,h,r.next_out-h):D2(t.check,i,h,r.next_out-h)),r.data_type=t.bits+(t.last?64:0)+(t.mode===XA?128:0)+(t.mode===my||t.mode===G1?256:0),(u===0&&h===0||e===bk)&&_===pd&&(_=zJ),_},rZ=r=>{if(Rd(r))return fo;let e=r.state;return e.window&&(e.window=null),r.state=null,pd},nZ=(r,e)=>{if(Rd(r))return fo;const t=r.state;return(t.wrap&2)===0?fo:(t.head=e,e.done=!1,pd)},iZ=(r,e)=>{const t=e.length;let n,i,s;return Rd(r)||(n=r.state,n.wrap!==0&&n.mode!==Kb)?fo:n.mode===Kb&&(i=1,i=D2(i,e,t,0),i!==n.check)?lN:(s=mN(r,e,t,t),s?(n.mode=uN,cN):(n.havedict=1,pd))};var sZ=fN,aZ=gN,oZ=hN,AZ=ZJ,lZ=pN,cZ=tZ,uZ=rZ,dZ=nZ,hZ=iZ,fZ="pako inflate (from Nodeca project)",rl={inflateReset:sZ,inflateReset2:aZ,inflateResetKeep:oZ,inflateInit:AZ,inflateInit2:lZ,inflate:cZ,inflateEnd:uZ,inflateGetHeader:dZ,inflateSetDictionary:hZ,inflateInfo:fZ};function gZ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var pZ=gZ;const yN=Object.prototype.toString,{Z_NO_FLUSH:mZ,Z_FINISH:yZ,Z_OK:zp,Z_STREAM_END:W1,Z_NEED_DICT:Y1,Z_STREAM_ERROR:bZ,Z_DATA_ERROR:jk,Z_MEM_ERROR:wZ}=iN;function Tm(r){this.options=sN.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DJ,this.strm.avail_out=0;let t=rl.inflateInit2(this.strm,e.windowBits);if(t!==zp)throw new Error(R2[t]);if(this.header=new pZ,rl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=U2.string2buf(e.dictionary):yN.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=rl.inflateSetDictionary(this.strm,e.dictionary),t!==zp)))throw new Error(R2[t])}Tm.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?yZ:mZ,yN.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=rl.inflate(t,a),s===Y1&&i&&(s=rl.inflateSetDictionary(t,i),s===zp?s=rl.inflate(t,a):s===jk&&(s=Y1));t.avail_in>0&&s===W1&&t.state.wrap>0&&r[t.next_in]!==0;)rl.inflateReset(t),s=rl.inflate(t,a);switch(s){case bZ:case jk:case Y1:case wZ:return this.onEnd(s),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||s===W1))if(this.options.to==="string"){let A=U2.utf8border(t.output,t.next_out),l=t.next_out-A,c=U2.buf2string(t.output,A);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(A,A+l),0),this.onData(c)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===zp&&o===0)){if(s===W1)return s=rl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Tm.prototype.onData=function(r){this.chunks.push(r)};Tm.prototype.onEnd=function(r){r===zp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=sN.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function vZ(r,e){const t=new Tm(e);if(t.push(r),t.err)throw t.msg||R2[t.err];return t.result}var _Z=Tm,xZ=vZ,BZ={Inflate:_Z,inflate:xZ};const{Inflate:CZ,inflate:EZ}=BZ;var Gk=CZ,SZ=EZ;const bN=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;bN[r]=e}const Kk=4294967295;function IZ(r,e,t){let n=r;for(let i=0;i<t;i++)n=bN[(n^e[i])&255]^n>>>8;return n}function kZ(r,e){return(IZ(Kk,r,e)^Kk)>>>0}function zk(r,e,t){const n=r.readUint32(),i=kZ(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${i}`)}function wN(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function vN(r,e,t,n){let i=0;for(;i<n;i++)e[i]=r[i];for(;i<t;i++)e[i]=r[i]+e[i-n]&255}function _N(r,e,t,n){let i=0;if(t.length===0)for(;i<n;i++)e[i]=r[i];else for(;i<n;i++)e[i]=r[i]+t[i]&255}function xN(r,e,t,n,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=r[s]+(t[s]>>1)&255;for(;s<n;s++)e[s]=r[s]+(e[s-i]+t[s]>>1)&255}}function BN(r,e,t,n,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=r[s]+t[s]&255;for(;s<n;s++)e[s]=r[s]+TZ(e[s-i],t[s],t[s-i])&255}}function TZ(r,e,t){const n=r+e-t,i=Math.abs(n-r),s=Math.abs(n-e),a=Math.abs(n-t);return i<=s&&i<=a?r:s<=a?e:t}function FZ(r,e,t,n,i,s){switch(r){case 0:wN(e,t,i);break;case 1:vN(e,t,i,s);break;case 2:_N(e,t,n,i);break;case 3:xN(e,t,n,i,s);break;case 4:BN(e,t,n,i,s);break;default:throw new Error(`Unsupported filter: ${r}`)}}const LZ=new Uint16Array([255]),PZ=new Uint8Array(LZ.buffer),NZ=PZ[0]===255;function DZ(r){const{data:e,width:t,height:n,channels:i,depth:s}=r,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,A=new Uint8Array(n*t*o);let l=0;for(let c=0;c<7;c++){const u=a[c],h=Math.ceil((t-u.x)/u.xStep),d=Math.ceil((n-u.y)/u.yStep);if(h<=0||d<=0)continue;const p=h*o,f=new Uint8Array(p);for(let y=0;y<d;y++){const b=e[l++],B=e.subarray(l,l+p);l+=p;const S=new Uint8Array(p);FZ(b,B,S,f,p,o),f.set(S);for(let C=0;C<h;C++){const P=u.x+C*u.xStep,M=u.y+y*u.yStep;if(!(P>=t||M>=n))for(let L=0;L<o;L++)A[(M*t+P)*o+L]=S[C*o+L]}}}if(s===16){const c=new Uint16Array(A.buffer);if(NZ)for(let u=0;u<c.length;u++)c[u]=RZ(c[u]);return c}else return A}function RZ(r){return(r&255)<<8|r>>8&255}const UZ=new Uint16Array([255]),MZ=new Uint8Array(UZ.buffer),OZ=MZ[0]===255,QZ=new Uint8Array(0);function qk(r){const{data:e,width:t,height:n,channels:i,depth:s}=r,a=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*t),A=new Uint8Array(n*o);let l=QZ,c=0,u,h;for(let d=0;d<n;d++){switch(u=e.subarray(c+1,c+1+o),h=A.subarray(d*o,(d+1)*o),e[c]){case 0:wN(u,h,o);break;case 1:vN(u,h,o,a);break;case 2:_N(u,h,l,o);break;case 3:xN(u,h,l,o,a);break;case 4:BN(u,h,l,o,a);break;default:throw new Error(`Unsupported filter: ${e[c]}`)}l=h,c+=o+1}if(s===16){const d=new Uint16Array(A.buffer);if(OZ)for(let p=0;p<d.length;p++)d[p]=HZ(d[p]);return d}else return A}function HZ(r){return(r&255)<<8|r>>8&255}const Xy=Uint8Array.of(137,80,78,71,13,10,26,10);function Wk(r){if(!VZ(r.readBytes(Xy.length)))throw new Error("wrong PNG signature")}function VZ(r){if(r.length<Xy.length)return!1;for(let e=0;e<Xy.length;e++)if(r[e]!==Xy[e])return!1;return!0}const $Z="tEXt",jZ=0,CN=new TextDecoder("latin1");function GZ(r){if(zZ(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const KZ=/^[\u0000-\u00FF]*$/;function zZ(r){if(!KZ.test(r))throw new Error("invalid latin1 text")}function qZ(r,e,t){const n=EN(e);r[n]=WZ(e,t-n.length-1)}function EN(r){for(r.mark();r.readByte()!==jZ;);const e=r.offset;r.reset();const t=CN.decode(r.readBytes(e-r.offset-1));return r.skip(1),GZ(t),t}function WZ(r,e){return CN.decode(r.readBytes(e))}const Ra={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},X1={UNKNOWN:-1,DEFLATE:0},Yk={UNKNOWN:-1,ADAPTIVE:0},J1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},by={NONE:0,BACKGROUND:1,PREVIOUS:2},Z1={SOURCE:0,OVER:1};class YZ extends IB{constructor(t,n={}){super(t);ke(this,"_checkCrc");ke(this,"_inflator");ke(this,"_png");ke(this,"_apng");ke(this,"_end");ke(this,"_hasPalette");ke(this,"_palette");ke(this,"_hasTransparency");ke(this,"_transparency");ke(this,"_compressionMethod");ke(this,"_filterMethod");ke(this,"_interlaceMethod");ke(this,"_colorType");ke(this,"_isAnimated");ke(this,"_numberOfFrames");ke(this,"_numberOfPlays");ke(this,"_frames");ke(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new Gk,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=X1.UNKNOWN,this._filterMethod=Yk.UNKNOWN,this._interlaceMethod=J1.UNKNOWN,this._colorType=Ra.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Wk(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(Wk(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case $Z:qZ(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?zk(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?zk(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=XZ(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Ra.GREYSCALE:i=1;break;case Ra.TRUECOLOUR:i=3;break;case Ra.INDEXED_COLOUR:i=1;break;case Ra.GREYSCALE_ALPHA:i=2;break;case Ra.TRUECOLOUR_ALPHA:i=4;break;case Ra.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==X1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Ra.GREYSCALE:case Ra.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case Ra.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ra.UNKNOWN:case Ra.GREYSCALE_ALPHA:case Ra.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=EN(this),i=this.readUint8();if(i!==X1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:SZ(s)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=qk({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case by.NONE:break;case by.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let a=0;a<this._png.width;a++){const o=(s*t.width+a)*this._png.channels;for(let A=0;A<this._png.channels;A++)i.data[o+A]=0}break;case by.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const i=1<<this._png.depth,s=(a,o)=>{const A=((a+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,l=(a*n.width+o)*this._png.channels;return{index:A,frameIndex:l}};switch(n.blendOp){case Z1.SOURCE:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:l}=s(a,o);for(let c=0;c<this._png.channels;c++)t.data[A+c]=n.data[l+c]}break;case Z1.OVER:for(let a=0;a<n.height;a++)for(let o=0;o<n.width;o++){const{index:A,frameIndex:l}=s(a,o);for(let c=0;c<this._png.channels;c++){const u=n.data[l+this._png.channels-1]/i,h=c%(this._png.channels-1)===0?1:n.data[l+c],d=Math.floor(u*h+(1-u)*t.data[A+c]);t.data[A+c]+=d}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Yk.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===J1.NO_INTERLACE)this._png.data=qk({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===J1.ADAM7)this._png.data=DZ({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:by.NONE,blendOp:Z1.SOURCE,data:t}),this._inflator=new Gk,this._writingDataChunks=!1}}function XZ(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Xk;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Xk||(Xk={}));function JZ(r,e){return new YZ(r,e).decode()}var qt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function e_(){qt.console&&typeof qt.console.log=="function"&&qt.console.log.apply(qt.console,arguments)}var nn={log:e_,warn:function(r){qt.console&&(typeof qt.console.warn=="function"?qt.console.warn.apply(qt.console,arguments):e_.call(null,arguments))},error:function(r){qt.console&&(typeof qt.console.error=="function"?qt.console.error.apply(qt.console,arguments):e_(r))}};function t_(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){Fu(n.response,e,t)},n.onerror=function(){nn.error("could not download file")},n.send()}function Jk(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function wy(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Fu=qt.saveAs||((typeof window>"u"?"undefined":Kr(window))!=="object"||window!==qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=qt.URL||qt.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?Jk(i.href)?t_(r,e,t):wy(i,i.target="_blank"):wy(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){wy(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Jk(r))t_(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){wy(n)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:Kr(s)!=="object"&&(nn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return t_(r,e,t);var i=r.type==="application/octet-stream",s=/constructor/i.test(qt.HTMLElement)||qt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Kr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var c=o.result;c=a?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=c:location=c,n=null},o.readAsDataURL(r)}else{var A=qt.URL||qt.webkitURL,l=A.createObjectURL(r);n?n.location=l:location.href=l,n=null,setTimeout(function(){A.revokeObjectURL(l)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function SN(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,s=t[n].process,a=i.exec(r);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),A=this.g.toString(16),l=this.b.toString(16);return o.length==1&&(o="0"+o),A.length==1&&(A="0"+A),l.length==1&&(l="0"+l),"#"+o+A+l}}var Jy=qt.atob.bind(qt),Zk=qt.btoa.bind(qt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function r_(r,e){var t=r[0],n=r[1],i=r[2],s=r[3];t=bs(t,n,i,s,e[0],7,-680876936),s=bs(s,t,n,i,e[1],12,-389564586),i=bs(i,s,t,n,e[2],17,606105819),n=bs(n,i,s,t,e[3],22,-1044525330),t=bs(t,n,i,s,e[4],7,-176418897),s=bs(s,t,n,i,e[5],12,1200080426),i=bs(i,s,t,n,e[6],17,-1473231341),n=bs(n,i,s,t,e[7],22,-45705983),t=bs(t,n,i,s,e[8],7,1770035416),s=bs(s,t,n,i,e[9],12,-1958414417),i=bs(i,s,t,n,e[10],17,-42063),n=bs(n,i,s,t,e[11],22,-1990404162),t=bs(t,n,i,s,e[12],7,1804603682),s=bs(s,t,n,i,e[13],12,-40341101),i=bs(i,s,t,n,e[14],17,-1502002290),t=ws(t,n=bs(n,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ws(s,t,n,i,e[6],9,-1069501632),i=ws(i,s,t,n,e[11],14,643717713),n=ws(n,i,s,t,e[0],20,-373897302),t=ws(t,n,i,s,e[5],5,-701558691),s=ws(s,t,n,i,e[10],9,38016083),i=ws(i,s,t,n,e[15],14,-660478335),n=ws(n,i,s,t,e[4],20,-405537848),t=ws(t,n,i,s,e[9],5,568446438),s=ws(s,t,n,i,e[14],9,-1019803690),i=ws(i,s,t,n,e[3],14,-187363961),n=ws(n,i,s,t,e[8],20,1163531501),t=ws(t,n,i,s,e[13],5,-1444681467),s=ws(s,t,n,i,e[2],9,-51403784),i=ws(i,s,t,n,e[7],14,1735328473),t=vs(t,n=ws(n,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=vs(s,t,n,i,e[8],11,-2022574463),i=vs(i,s,t,n,e[11],16,1839030562),n=vs(n,i,s,t,e[14],23,-35309556),t=vs(t,n,i,s,e[1],4,-1530992060),s=vs(s,t,n,i,e[4],11,1272893353),i=vs(i,s,t,n,e[7],16,-155497632),n=vs(n,i,s,t,e[10],23,-1094730640),t=vs(t,n,i,s,e[13],4,681279174),s=vs(s,t,n,i,e[0],11,-358537222),i=vs(i,s,t,n,e[3],16,-722521979),n=vs(n,i,s,t,e[6],23,76029189),t=vs(t,n,i,s,e[9],4,-640364487),s=vs(s,t,n,i,e[12],11,-421815835),i=vs(i,s,t,n,e[15],16,530742520),t=_s(t,n=vs(n,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=_s(s,t,n,i,e[7],10,1126891415),i=_s(i,s,t,n,e[14],15,-1416354905),n=_s(n,i,s,t,e[5],21,-57434055),t=_s(t,n,i,s,e[12],6,1700485571),s=_s(s,t,n,i,e[3],10,-1894986606),i=_s(i,s,t,n,e[10],15,-1051523),n=_s(n,i,s,t,e[1],21,-2054922799),t=_s(t,n,i,s,e[8],6,1873313359),s=_s(s,t,n,i,e[15],10,-30611744),i=_s(i,s,t,n,e[6],15,-1560198380),n=_s(n,i,s,t,e[13],21,1309151649),t=_s(t,n,i,s,e[4],6,-145523070),s=_s(s,t,n,i,e[11],10,-1120210379),i=_s(i,s,t,n,e[2],15,718787259),n=_s(n,i,s,t,e[9],21,-343485551),r[0]=bc(t,r[0]),r[1]=bc(n,r[1]),r[2]=bc(i,r[2]),r[3]=bc(s,r[3])}function Kw(r,e,t,n,i,s){return e=bc(bc(e,r),bc(n,s)),bc(e<<i|e>>>32-i,t)}function bs(r,e,t,n,i,s,a){return Kw(e&t|~e&n,r,e,i,s,a)}function ws(r,e,t,n,i,s,a){return Kw(e&n|t&~n,r,e,i,s,a)}function vs(r,e,t,n,i,s,a){return Kw(e^t^n,r,e,i,s,a)}function _s(r,e,t,n,i,s,a){return Kw(t^(e|~n),r,e,i,s,a)}function IN(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)r_(n,ZZ(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(r_(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,r_(n,i),n}function ZZ(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var eT="0123456789abcdef".split("");function eee(r){for(var e="",t=0;t<4;t++)e+=eT[r>>8*t+4&15]+eT[r>>8*t&15];return e}function tee(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function M2(r){return IN(r).map(tee).join("")}var ree=(function(r){for(var e=0;e<r.length;e++)r[e]=eee(r[e]);return r.join("")})(IN("hello"))!="5d41402abc4b2a76b9719d911017c592";function bc(r,e){if(ree){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function O2(r,e){var t,n,i,s;if(r!==t){for(var a=(i=r,s=1+(256/r.length|0),new Array(s+1).join(i)),o=[],A=0;A<256;A++)o[A]=A;var l=0;for(A=0;A<256;A++){var c=o[A];l=(l+c+a.charCodeAt(A))%256,o[A]=o[l],o[l]=c}t=r,n=o}else o=n;var u=e.length,h=0,d=0,p="";for(A=0;A<u;A++)d=(d+(c=o[h=(h+1)%256]))%256,o[h]=o[d],o[d]=c,a=o[(o[h]+o[d])%256],p+=String.fromCharCode(e.charCodeAt(A)^a);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var tT={print:4,modify:8,copy:16,"annot-forms":32};function bh(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(o){if(tT.perm!==void 0)throw new Error("Invalid permission: "+o);i+=tT[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=M2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=O2(this.encryptionKey,this.padding)}function wh(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return e}function rT(r){if(Kr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[n,!!i],s},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(r,n)}catch(o){qt.console&&nn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function zb(r){if(!(this instanceof zb))return new zb(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function kN(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Ru(r,e,t,n,i){if(!(this instanceof Ru))return new Ru(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,kN.call(this,n,i)}function Ih(r,e,t,n,i){if(!(this instanceof Ih))return new Ih(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,kN.call(this,n,i)}function Ct(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,A=16,l="S",c=null;Kr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,s=r.compress||r.compressPdf||s,(c=r.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(A=r.floatPrecision),l=r.defaultPathOperation||"S"),a=r.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",t=(""+(t||"P")).toLowerCase();var u=r.putOnlyUsedFonts||!1,h={},d={internal:{},__private__:{}};d.__private__.PubSub=rT;var p="1.3",f=d.__private__.getPdfVersion=function(){return p};d.__private__.setPdfVersion=function(I){p=I};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return y};var b=d.__private__.getPageFormat=function(I){return y[I]};i=i||"a4";var B="compat",S="advanced",C=B;function P(){this.saveGraphicsState(),$(new Ot(xt,0,0,-xt,0,po()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),l="n",C=S}function M(){this.restoreGraphicsState(),l="S",C=B}var L=d.__private__.combineFontStyleAndFontWeight=function(I,K){if(I=="bold"&&K=="normal"||I=="bold"&&K==400||I=="normal"&&K=="italic"||I=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(I=K==400||K==="normal"?I==="italic"?"italic":"normal":K!=700&&K!=="bold"||I!=="normal"?(K==700?"bold":K)+""+I:"bold"),I};d.advancedAPI=function(I){var K=C===B;return K&&P.call(this),typeof I!="function"||(I(this),K&&M.call(this)),this},d.compatAPI=function(I){var K=C===S;return K&&M.call(this),typeof I!="function"||(I(this),K&&P.call(this)),this},d.isAdvancedAPI=function(){return C===S};var _,v=function(I){if(C!==S)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=d.roundToPrecision=d.__private__.roundToPrecision=function(I,K){var he=e||K;if(isNaN(I)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(he).replace(/0+$/,"")};_=d.hpf=d.__private__.hpf=typeof A=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return T(I,A)}:A==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return T(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return T(I,16)};var E=d.f2=d.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return T(I,2)},x=d.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return T(I,3)},F=d.scale=d.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return C===B?I*xt:C===S?I:void 0},k=function(I){return F((function(K){return C===B?po()-K:C===S?K:void 0})(I))};d.__private__.setPrecision=d.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(e=parseInt(I,10))};var Z,ue="00000000000000000000000000000000",ne=d.__private__.getFileId=function(){return ue},j=d.__private__.setFileId=function(I){return ue=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Vr=new bh(c.userPermissions,c.userPassword,c.ownerPassword,ue)),ue};d.setFileId=function(I){return j(I),this},d.getFileId=function(){return ne()};var G=d.__private__.convertDateToPDFDate=function(I){var K=I.getTimezoneOffset(),he=K<0?"+":"-",we=Math.floor(Math.abs(K/60)),Se=Math.abs(K%60),je=[he,V(we),"'",V(Se),"'"].join("");return["D:",I.getFullYear(),V(I.getMonth()+1),V(I.getDate()),V(I.getHours()),V(I.getMinutes()),V(I.getSeconds()),je].join("")},pe=d.__private__.convertPDFDateToDate=function(I){var K=parseInt(I.substr(2,4),10),he=parseInt(I.substr(6,2),10)-1,we=parseInt(I.substr(8,2),10),Se=parseInt(I.substr(10,2),10),je=parseInt(I.substr(12,2),10),We=parseInt(I.substr(14,2),10);return new Date(K,he,we,Se,je,We,0)},q=d.__private__.setCreationDate=function(I){var K;if(I===void 0&&(I=new Date),I instanceof Date)K=G(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=I}return Z=K},N=d.__private__.getCreationDate=function(I){var K=Z;return I==="jsDate"&&(K=pe(Z)),K};d.setCreationDate=function(I){return q(I),this},d.getCreationDate=function(I){return N(I)};var Q,V=d.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},X=d.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},Ae=0,te=[],se=[],de=0,ve=[],xe=[],Oe=!1,Ve=se;d.__private__.setCustomOutputDestination=function(I){Oe=!0,Ve=I};var R=function(I){Oe||(Ve=I)};d.__private__.resetCustomOutputDestination=function(){Oe=!1,Ve=se};var $=d.__private__.out=function(I){return I=I.toString(),de+=I.length+1,Ve.push(I),Ve},ye=d.__private__.write=function(I){return $(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},re=d.__private__.getArrayBuffer=function(I){for(var K=I.length,he=new ArrayBuffer(K),we=new Uint8Array(he);K--;)we[K]=I.charCodeAt(K);return he},W=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return W};var ae=r.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(I){return ae=C===S?I/xt:I,this};var Ce,_e=d.__private__.getFontSize=d.getFontSize=function(){return C===B?ae:ae*xt},be=r.R2L||!1;d.__private__.setR2L=d.setR2L=function(I){return be=I,this},d.__private__.getR2L=d.getR2L=function(){return be};var Ie,Qe=d.__private__.setZoomMode=function(I){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))Ce=I;else if(isNaN(I)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');Ce=I}else Ce=parseInt(I,10)};d.__private__.getZoomMode=function(){return Ce};var Pe,He=d.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');Ie=I};d.__private__.getPageMode=function(){return Ie};var At=d.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');Pe=I};d.__private__.getLayoutMode=function(){return Pe},d.__private__.setDisplayMode=d.setDisplayMode=function(I,K,he){return Qe(I),At(K),He(he),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(I){if(Object.keys(tt).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[I]},d.__private__.getDocumentProperties=function(){return tt},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(I){for(var K in tt)tt.hasOwnProperty(K)&&I[K]&&(tt[K]=I[K]);return this},d.__private__.setDocumentProperty=function(I,K){if(Object.keys(tt).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[I]=K};var lt,xt,at,ut,rt,it={},pt={},Rt=[],Bt={},Qt={},Ut={},lr={},kr=null,Tt=0,Ft=[],sr=new rT(d),pi=r.hotfixes||[],Pn={},gs={},xi=[],Ot=function I(K,he,we,Se,je,We){if(!(this instanceof I))return new I(K,he,we,Se,je,We);isNaN(K)&&(K=1),isNaN(he)&&(he=0),isNaN(we)&&(we=0),isNaN(Se)&&(Se=1),isNaN(je)&&(je=0),isNaN(We)&&(We=0),this._matrix=[K,he,we,Se,je,We]};Object.defineProperty(Ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ot.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(I)},Ot.prototype.multiply=function(I){var K=I.sx*this.sx+I.shy*this.shx,he=I.sx*this.shy+I.shy*this.sy,we=I.shx*this.sx+I.sy*this.shx,Se=I.shx*this.shy+I.sy*this.sy,je=I.tx*this.sx+I.ty*this.shx+this.tx,We=I.tx*this.shy+I.ty*this.sy+this.ty;return new Ot(K,he,we,Se,je,We)},Ot.prototype.decompose=function(){var I=this.sx,K=this.shy,he=this.shx,we=this.sy,Se=this.tx,je=this.ty,We=Math.sqrt(I*I+K*K),bt=(I/=We)*he+(K/=We)*we;he-=I*bt,we-=K*bt;var St=Math.sqrt(he*he+we*we);return bt/=St,I*(we/=St)<K*(he/=St)&&(I=-I,K=-K,bt=-bt,We=-We),{scale:new Ot(We,0,0,St,0,0),translate:new Ot(1,0,0,1,Se,je),rotate:new Ot(I,K,-K,I,0,0),skew:new Ot(1,0,bt,1,0,0)}},Ot.prototype.toString=function(I){return this.join(" ")},Ot.prototype.inversed=function(){var I=this.sx,K=this.shy,he=this.shx,we=this.sy,Se=this.tx,je=this.ty,We=1/(I*we-K*he),bt=we*We,St=-K*We,Vt=-he*We,Nt=I*We;return new Ot(bt,St,Vt,Nt,-bt*Se-Vt*je,-St*Se-Nt*je)},Ot.prototype.applyToPoint=function(I){var K=I.x*this.sx+I.y*this.shx+this.tx,he=I.x*this.shy+I.y*this.sy+this.ty;return new Sa(K,he)},Ot.prototype.applyToRectangle=function(I){var K=this.applyToPoint(I),he=this.applyToPoint(new Sa(I.x+I.w,I.y+I.h));return new Dl(K.x,K.y,he.x-K.x,he.y-K.y)},Ot.prototype.clone=function(){var I=this.sx,K=this.shy,he=this.shx,we=this.sy,Se=this.tx,je=this.ty;return new Ot(I,K,he,we,Se,je)},d.Matrix=Ot;var xa=d.matrixMult=function(I,K){return K.multiply(I)},Bi=new Ot(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Bi;var Xi=function(I,K){if(!Qt[I]){var he=(K instanceof Ru?"Sh":"P")+(Object.keys(Bt).length+1).toString(10);K.id=he,Qt[I]=he,Bt[he]=K,sr.publish("addPattern",K)}};d.ShadingPattern=Ru,d.TilingPattern=Ih,d.addShadingPattern=function(I,K){return v("addShadingPattern()"),Xi(I,K),this},d.beginTilingPattern=function(I){v("beginTilingPattern()"),Go(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},d.endTilingPattern=function(I,K){v("endTilingPattern()"),K.stream=xe[Q].join(`
`),Xi(I,K),sr.publish("endTilingPattern",K),xi.pop().restore()};var Ji,Hr=d.__private__.newObject=function(){var I=Wr();return Zn(I,!0),I},Wr=d.__private__.newObjectDeferred=function(){return Ae++,te[Ae]=function(){return de},Ae},Zn=function(I,K){return K=typeof K=="boolean"&&K,te[I]=de,K&&$(I+" 0 obj"),I},Ci=d.__private__.newAdditionalObject=function(){var I={objId:Wr(),content:""};return ve.push(I),I},Ba=Wr(),Zi=Wr(),es=d.__private__.decodeColorString=function(I){var K=I.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length!==5||K[4]!=="k"&&K[4]!=="K"||(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var he=parseFloat(K[0]);K=[he,he,he,"r"]}for(var we="#",Se=0;Se<3;Se++)we+=("0"+Math.floor(255*parseFloat(K[Se])).toString(16)).slice(-2);return we},Ri=d.__private__.encodeColorString=function(I){var K;typeof I=="string"&&(I={ch1:I});var he=I.ch1,we=I.ch2,Se=I.ch3,je=I.ch4,We=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var bt=new SN(he);if(bt.ok)he=bt.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var St=parseInt(he.substr(1),16);he=St>>16&255,we=St>>8&255,Se=255&St}if(we===void 0||je===void 0&&he===we&&we===Se)K=typeof he=="string"?he+" "+We[0]:I.precision===2?E(he/255)+" "+We[0]:x(he/255)+" "+We[0];else if(je===void 0||Kr(je)==="object"){if(je&&!isNaN(je.a)&&je.a===0)return["1.","1.","1.",We[1]].join(" ");K=typeof he=="string"?[he,we,Se,We[1]].join(" "):I.precision===2?[E(he/255),E(we/255),E(Se/255),We[1]].join(" "):[x(he/255),x(we/255),x(Se/255),We[1]].join(" ")}else K=typeof he=="string"?[he,we,Se,je,We[2]].join(" "):I.precision===2?[E(he),E(we),E(Se),E(je),We[2]].join(" "):[x(he),x(we),x(Se),x(je),We[2]].join(" ");return K},ts=d.__private__.getFilters=function(){return a},Ui=d.__private__.putStream=function(I){var K=(I=I||{}).data||"",he=I.filters||ts(),we=I.alreadyAppliedFilters||[],Se=I.addLength1||!1,je=K.length,We=I.objectId,bt=function(U){return U};if(c!==null&&We===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(bt=Vr.encryptor(We,0));var St={};he===!0&&(he=["FlateEncode"]);var Vt=I.additionalKeyValues||[],Nt=(St=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(K,he):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(St.data.length!==0&&(Vt.push({key:"Length",value:St.data.length}),Se===!0&&Vt.push({key:"Length1",value:je})),Nt.length!=0)if(Nt.split("/").length-1==1)Vt.push({key:"Filter",value:Nt});else{Vt.push({key:"Filter",value:"["+Nt+"]"});for(var _r=0;_r<Vt.length;_r+=1)if(Vt[_r].key==="DecodeParms"){for(var An=[],Zr=0;Zr<St.reverseChain.split("/").length-1;Zr+=1)An.push("null");An.push(Vt[_r].value),Vt[_r].value="["+An.join(" ")+"]"}}$("<<");for(var m=0;m<Vt.length;m++)$("/"+Vt[m].key+" "+Vt[m].value);$(">>"),St.data.length!==0&&($("stream"),$(bt(St.data)),$("endstream"))},Mi=d.__private__.putPage=function(I){var K=I.number,he=I.data,we=I.objId,Se=I.contentsObjId;Zn(we,!0),$("<</Type /Page"),$("/Parent "+I.rootDictionaryObjId+" 0 R"),$("/Resources "+I.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(_(I.mediaBox.bottomLeftX))+" "+parseFloat(_(I.mediaBox.bottomLeftY))+" "+_(I.mediaBox.topRightX)+" "+_(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&$("/CropBox ["+_(I.cropBox.bottomLeftX)+" "+_(I.cropBox.bottomLeftY)+" "+_(I.cropBox.topRightX)+" "+_(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&$("/BleedBox ["+_(I.bleedBox.bottomLeftX)+" "+_(I.bleedBox.bottomLeftY)+" "+_(I.bleedBox.topRightX)+" "+_(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&$("/TrimBox ["+_(I.trimBox.bottomLeftX)+" "+_(I.trimBox.bottomLeftY)+" "+_(I.trimBox.topRightX)+" "+_(I.trimBox.topRightY)+"]"),I.artBox!==null&&$("/ArtBox ["+_(I.artBox.bottomLeftX)+" "+_(I.artBox.bottomLeftY)+" "+_(I.artBox.topRightX)+" "+_(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&$("/UserUnit "+I.userUnit),sr.publish("putPage",{objId:we,pageContext:Ft[K],pageNumber:K,page:he}),$("/Contents "+Se+" 0 R"),$(">>"),$("endobj");var je=he.join(`
`);return C===S&&(je+=`
Q`),Zn(Se,!0),Ui({data:je,filters:ts(),objectId:Se}),$("endobj"),we},Oi=d.__private__.putPages=function(){var I,K,he=[];for(I=1;I<=Tt;I++)Ft[I].objId=Wr(),Ft[I].contentsObjId=Wr();for(I=1;I<=Tt;I++)he.push(Mi({number:I,data:xe[I],objId:Ft[I].objId,contentsObjId:Ft[I].contentsObjId,mediaBox:Ft[I].mediaBox,cropBox:Ft[I].cropBox,bleedBox:Ft[I].bleedBox,trimBox:Ft[I].trimBox,artBox:Ft[I].artBox,userUnit:Ft[I].userUnit,rootDictionaryObjId:Ba,resourceDictionaryObjId:Zi}));Zn(Ba,!0),$("<</Type /Pages");var we="/Kids [";for(K=0;K<Tt;K++)we+=he[K]+" 0 R ";$(we+"]"),$("/Count "+Tt),$(">>"),$("endobj"),sr.publish("postPutPages")},Qi=function(I){sr.publish("putFont",{font:I,out:$,newObject:Hr,putStream:Ui}),I.isAlreadyPutted!==!0&&(I.objectNumber=Hr(),$("<<"),$("/Type /Font"),$("/BaseFont /"+wh(I.postScriptName)),$("/Subtype /Type1"),typeof I.encoding=="string"&&$("/Encoding /"+I.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},Ws=function(I){I.objectNumber=Hr();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[_(I.x),_(I.y),_(I.x+I.width),_(I.y+I.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var he=I.pages[1].join(`
`);Ui({data:he,additionalKeyValues:K,objectId:I.objectNumber}),$("endobj")},Ys=function(I,K){K||(K=21);var he=Hr(),we=(function(We,bt){var St,Vt=[],Nt=1/(bt-1);for(St=0;St<1;St+=Nt)Vt.push(St);if(Vt.push(1),We[0].offset!=0){var _r={offset:0,color:We[0].color};We.unshift(_r)}if(We[We.length-1].offset!=1){var An={offset:1,color:We[We.length-1].color};We.push(An)}for(var Zr="",m=0,U=0;U<Vt.length;U++){for(St=Vt[U];St>We[m+1].offset;)m++;var H=We[m].offset,oe=(St-H)/(We[m+1].offset-H),Te=We[m].color,Re=We[m+1].color;Zr+=X(Math.round((1-oe)*Te[0]+oe*Re[0]).toString(16))+X(Math.round((1-oe)*Te[1]+oe*Re[1]).toString(16))+X(Math.round((1-oe)*Te[2]+oe*Re[2]).toString(16))}return Zr.trim()})(I.colors,K),Se=[];Se.push({key:"FunctionType",value:"0"}),Se.push({key:"Domain",value:"[0.0 1.0]"}),Se.push({key:"Size",value:"["+K+"]"}),Se.push({key:"BitsPerSample",value:"8"}),Se.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Se.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ui({data:we,additionalKeyValues:Se,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),$("endobj"),I.objectNumber=Hr(),$("<< /ShadingType "+I.type),$("/ColorSpace /DeviceRGB");var je="/Coords ["+_(parseFloat(I.coords[0]))+" "+_(parseFloat(I.coords[1]))+" ";I.type===2?je+=_(parseFloat(I.coords[2]))+" "+_(parseFloat(I.coords[3])):je+=_(parseFloat(I.coords[2]))+" "+_(parseFloat(I.coords[3]))+" "+_(parseFloat(I.coords[4]))+" "+_(parseFloat(I.coords[5])),$(je+="]"),I.matrix&&$("/Matrix ["+I.matrix.toString()+"]"),$("/Function "+he+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},Xs=function(I,K){var he=Wr(),we=Hr();K.push({resourcesOid:he,objectOid:we}),I.objectNumber=we;var Se=[];Se.push({key:"Type",value:"/Pattern"}),Se.push({key:"PatternType",value:"1"}),Se.push({key:"PaintType",value:"1"}),Se.push({key:"TilingType",value:"1"}),Se.push({key:"BBox",value:"["+I.boundingBox.map(_).join(" ")+"]"}),Se.push({key:"XStep",value:_(I.xStep)}),Se.push({key:"YStep",value:_(I.yStep)}),Se.push({key:"Resources",value:he+" 0 R"}),I.matrix&&Se.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),Ui({data:I.stream,additionalKeyValues:Se,objectId:I.objectNumber}),$("endobj")},Ca=function(I){for(var K in I.objectNumber=Hr(),$("<<"),I)switch(K){case"opacity":$("/ca "+E(I[K]));break;case"stroke-opacity":$("/CA "+E(I[K]))}$(">>"),$("endobj")},Js=function(I){Zn(I.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var K in $("/Font <<"),it)it.hasOwnProperty(K)&&(u===!1||u===!0&&h.hasOwnProperty(K))&&$("/"+K+" "+it[K].objectNumber+" 0 R");$(">>")})(),(function(){if(Object.keys(Bt).length>0){for(var K in $("/Shading <<"),Bt)Bt.hasOwnProperty(K)&&Bt[K]instanceof Ru&&Bt[K].objectNumber>=0&&$("/"+K+" "+Bt[K].objectNumber+" 0 R");sr.publish("putShadingPatternDict"),$(">>")}})(),(function(K){if(Object.keys(Bt).length>0){for(var he in $("/Pattern <<"),Bt)Bt.hasOwnProperty(he)&&Bt[he]instanceof d.TilingPattern&&Bt[he].objectNumber>=0&&Bt[he].objectNumber<K&&$("/"+he+" "+Bt[he].objectNumber+" 0 R");sr.publish("putTilingPatternDict"),$(">>")}})(I.objectOid),(function(){if(Object.keys(Ut).length>0){var K;for(K in $("/ExtGState <<"),Ut)Ut.hasOwnProperty(K)&&Ut[K].objectNumber>=0&&$("/"+K+" "+Ut[K].objectNumber+" 0 R");sr.publish("putGStateDict"),$(">>")}})(),(function(){for(var K in $("/XObject <<"),Pn)Pn.hasOwnProperty(K)&&Pn[K].objectNumber>=0&&$("/"+K+" "+Pn[K].objectNumber+" 0 R");sr.publish("putXobjectDict"),$(">>")})(),$(">>"),$("endobj")},Ei=function(I){pt[I.fontName]=pt[I.fontName]||{},pt[I.fontName][I.fontStyle]=I.id},Zs=function(I,K,he,we,Se){var je={id:"F"+(Object.keys(it).length+1).toString(10),postScriptName:I,fontName:K,fontStyle:he,encoding:we,isStandardFont:Se||!1,metadata:{}};return sr.publish("addFont",{font:je,instance:this}),it[je.id]=je,Ei(je),je.id},Cn=d.__private__.pdfEscape=d.pdfEscape=function(I,K){return(function(he,we){var Se,je,We,bt,St,Vt,Nt,_r,An;if(We=(we=we||{}).sourceEncoding||"Unicode",St=we.outputEncoding,(we.autoencode||St)&&it[lt].metadata&&it[lt].metadata[We]&&it[lt].metadata[We].encoding&&(bt=it[lt].metadata[We].encoding,!St&&it[lt].encoding&&(St=it[lt].encoding),!St&&bt.codePages&&(St=bt.codePages[0]),typeof St=="string"&&(St=bt[St]),St)){for(Nt=!1,Vt=[],Se=0,je=he.length;Se<je;Se++)(_r=St[he.charCodeAt(Se)])?Vt.push(String.fromCharCode(_r)):Vt.push(he[Se]),Vt[Se].charCodeAt(0)>>8&&(Nt=!0);he=Vt.join("")}for(Se=he.length;Nt===void 0&&Se!==0;)he.charCodeAt(Se-1)>>8&&(Nt=!0),Se--;if(!Nt)return he;for(Vt=we.noBOM?[]:[254,255],Se=0,je=he.length;Se<je;Se++){if((An=(_r=he.charCodeAt(Se))>>8)>>8)throw new Error("Character at position "+Se+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(An),Vt.push(_r-(An<<8))}return String.fromCharCode.apply(void 0,Vt)})(I,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hi=d.__private__.beginPage=function(I){xe[++Tt]=[],Ft[Tt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},rs(Tt),R(xe[Q])},ea=function(I,K){var he,we,Se;switch(t=K||t,typeof I=="string"&&(he=b(I.toLowerCase()),Array.isArray(he)&&(we=he[0],Se=he[1])),Array.isArray(I)&&(we=I[0]*xt,Se=I[1]*xt),isNaN(we)&&(we=i[0],Se=i[1]),(we>14400||Se>14400)&&(nn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),Se=Math.min(14400,Se)),i=[we,Se],t.substr(0,1)){case"l":Se>we&&(i=[Se,we]);break;case"p":we>Se&&(i=[Se,we])}Hi(i),hu(ia),$(Ll),sa!==0&&$(sa+" J"),Nl!==0&&$(Nl+" j"),sr.publish("addPage",{pageNumber:Tt})},mi=function(I){I>0&&I<=Tt&&(xe.splice(I,1),Ft.splice(I,1),Tt--,Q>Tt&&(Q=Tt),this.setPage(Q))},rs=function(I){I>0&&I<=Tt&&(Q=I)},Oo=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return xe.length-1},Qo=function(I,K,he){var we,Se=void 0;return he=he||{},I=I!==void 0?I:it[lt].fontName,K=K!==void 0?K:it[lt].fontStyle,we=I.toLowerCase(),pt[we]!==void 0&&pt[we][K]!==void 0?Se=pt[we][K]:pt[I]!==void 0&&pt[I][K]!==void 0?Se=pt[I][K]:he.disableWarning===!1&&nn.warn("Unable to look up font label for font '"+I+"', '"+K+"'. Refer to getFontList() for available fonts."),Se||he.noFallback||(Se=pt.times[K])==null&&(Se=pt.times.normal),Se},Ea=d.__private__.putInfo=function(){var I=Hr(),K=function(we){return we};for(var he in c!==null&&(K=Vr.encryptor(I,0)),$("<<"),$("/Producer ("+Cn(K("jsPDF "+Ct.version))+")"),tt)tt.hasOwnProperty(he)&&tt[he]&&$("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+Cn(K(tt[he]))+")");$("/CreationDate ("+Cn(K(Z))+")"),$(">>"),$("endobj")},En=d.__private__.putCatalog=function(I){var K=(I=I||{}).rootDictionaryObjId||Ba;switch(Hr(),$("<<"),$("/Type /Catalog"),$("/Pages "+K+" 0 R"),Ce||(Ce="fullwidth"),Ce){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+Ce;he.substr(he.length-1)==="%"&&(Ce=parseInt(Ce)/100),typeof Ce=="number"&&$("/OpenAction [3 0 R /XYZ null null "+E(Ce)+"]")}switch(Pe||(Pe="continuous"),Pe){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}Ie&&$("/PageMode /"+Ie),sr.publish("putCatalog"),$(">>"),$("endobj")},gr=d.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(Ae+1)),$("/Root "+Ae+" 0 R"),$("/Info "+(Ae-1)+" 0 R"),c!==null&&$("/Encrypt "+Vr.oid+" 0 R"),$("/ID [ <"+ue+"> <"+ue+"> ]"),$(">>")},ta=d.__private__.putHeader=function(){$("%PDF-"+p),$("%")},ra=d.__private__.putXRef=function(){var I="0000000000";$("xref"),$("0 "+(Ae+1)),$("0000000000 65535 f ");for(var K=1;K<=Ae;K++)typeof te[K]=="function"?$((I+te[K]()).slice(-10)+" 00000 n "):te[K]!==void 0?$((I+te[K]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},ns=d.__private__.buildDocument=function(){var I;Ae=0,de=0,se=[],te=[],ve=[],Ba=Wr(),Zi=Wr(),R(se),sr.publish("buildDocument"),ta(),Oi(),(function(){sr.publish("putAdditionalObjects");for(var he=0;he<ve.length;he++){var we=ve[he];Zn(we.objId,!0),$(we.content),$("endobj")}sr.publish("postPutAdditionalObjects")})(),I=[],(function(){for(var he in it)it.hasOwnProperty(he)&&(u===!1||u===!0&&h.hasOwnProperty(he))&&Qi(it[he])})(),(function(){var he;for(he in Ut)Ut.hasOwnProperty(he)&&Ca(Ut[he])})(),(function(){for(var he in Pn)Pn.hasOwnProperty(he)&&Ws(Pn[he])})(),(function(he){var we;for(we in Bt)Bt.hasOwnProperty(we)&&(Bt[we]instanceof Ru?Ys(Bt[we]):Bt[we]instanceof Ih&&Xs(Bt[we],he))})(I),sr.publish("putResources"),I.forEach(Js),Js({resourcesOid:Zi,objectOid:Number.MAX_SAFE_INTEGER}),sr.publish("postPutResources"),c!==null&&(Vr.oid=Hr(),$("<<"),$("/Filter /Standard"),$("/V "+Vr.v),$("/R "+Vr.r),$("/U <"+Vr.toHexString(Vr.U)+">"),$("/O <"+Vr.toHexString(Vr.O)+">"),$("/P "+Vr.P),$(">>"),$("endobj")),Ea(),En();var K=de;return ra(),gr(),$("startxref"),$(""+K),$("%%EOF"),R(xe[Q]),se.join(`
`)},ur=d.__private__.getBlob=function(I){return new Blob([re(I)],{type:"application/pdf"})},ei=d.output=d.__private__.output=(Ji=function(I,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",I){case void 0:return ns();case"save":d.save(K.filename);break;case"arraybuffer":return re(ns());case"blob":return ur(ns());case"bloburi":case"bloburl":if(qt.URL!==void 0&&typeof qt.URL.createObjectURL=="function")return qt.URL&&qt.URL.createObjectURL(ur(ns()))||void 0;nn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",we=ns();try{he=Zk(we)}catch{he=Zk(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+K.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qt)==="[object Window]"){var Se="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(Se=K.pdfObjectUrl,je="");var We='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Se+'"'+je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",bt=qt.open();return bt!==null&&bt.document.write(We),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qt)==="[object Window]"){var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',Vt=qt.open();if(Vt!==null){Vt.document.write(St);var Nt=this;Vt.document.documentElement.querySelector("#pdfViewer").onload=function(){Vt.document.title=K.filename,Vt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nt.output("bloburl"))}}return Vt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',An=qt.open();if(An!==null&&(An.document.write(_r),An.document.title=K.filename),An||typeof safari>"u")return An;break;case"datauri":case"dataurl":return qt.document.location.href=this.output("datauristring",K);default:return null}},Ji.foo=function(){try{return Ji.apply(this,arguments)}catch(he){var I=he.stack||"";~I.indexOf(" at ")&&(I=I.split(" at ")[1]);var K="Error in function "+I.split(`
`)[0].split("<")[0]+": "+he.message;if(!qt.console)throw new Error(K);qt.console.error(K,he),qt.alert&&alert(K)}},Ji.foo.bar=Ji,Ji.foo),Qn=function(I){return Array.isArray(pi)===!0&&pi.indexOf(I)>-1};switch(n){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=Qn("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xt=n}var Vr=null;q(),j();var Ho=d.__private__.getPageInfo=d.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ft[I].objId,pageNumber:I,pageContext:Ft[I]}},Vo=d.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in Ft)if(Ft[K].objId===I)break;return Ho(K)},Tl=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:Ft[Q].objId,pageNumber:Q,pageContext:Ft[Q]}};d.addPage=function(){return ea.apply(this,arguments),this},d.setPage=function(){return rs.apply(this,arguments),R.call(this,xe[Q]),this},d.insertPage=function(I){return this.addPage(),this.movePage(Q,I),this},d.movePage=function(I,K){var he,we;if(I>K){he=xe[I],we=Ft[I];for(var Se=I;Se>K;Se--)xe[Se]=xe[Se-1],Ft[Se]=Ft[Se-1];xe[K]=he,Ft[K]=we,this.setPage(K)}else if(I<K){he=xe[I],we=Ft[I];for(var je=I;je<K;je++)xe[je]=xe[je+1],Ft[je]=Ft[je+1];xe[K]=he,Ft[K]=we,this.setPage(K)}return this},d.deletePage=function(){return mi.apply(this,arguments),this},d.__private__.text=d.text=function(I,K,he,we,Se){var je,We,bt,St,Vt,Nt,_r,An,Zr,m=(we=we||{}).scope||this;if(typeof I=="number"&&typeof K=="number"&&(typeof he=="string"||Array.isArray(he))){var U=he;he=K,K=I,I=U}if(arguments[3]instanceof Ot==0?(bt=arguments[4],St=arguments[5],Kr(_r=arguments[3])==="object"&&_r!==null||(typeof bt=="string"&&(St=bt,bt=null),typeof _r=="string"&&(St=_r,_r=null),typeof _r=="number"&&(bt=_r,_r=null),we={flags:_r,angle:bt,align:St})):(v("The transform parameter of text() with a Matrix value"),Zr=Se),isNaN(K)||isNaN(he)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return m;var H,oe="",Te=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:NA,Re=m.internal.scaleFactor;function st(Ur){return Ur=Ur.split("	").join(Array(we.TabLen||9).join(" ")),Cn(Ur,_r)}function zt(Ur){for(var tn,ri=Ur.concat(),Si=[],$A=ri.length;$A--;)typeof(tn=ri.shift())=="string"?Si.push(tn):Array.isArray(Ur)&&(tn.length===1||tn[1]===void 0&&tn[2]===void 0)?Si.push(tn[0]):Si.push([tn[0],tn[1],tn[2]]);return Si}function en(Ur,tn){var ri;if(typeof Ur=="string")ri=tn(Ur)[0];else if(Array.isArray(Ur)){for(var Si,$A,Zf=Ur.concat(),Wd=[],l0=Zf.length;l0--;)typeof(Si=Zf.shift())=="string"?Wd.push(tn(Si)[0]):Array.isArray(Si)&&typeof Si[0]=="string"&&($A=tn(Si[0],Si[1],Si[2]),Wd.push([$A[0],$A[1],$A[2]]));ri=Wd}return ri}var pr=!1,ln=!0;if(typeof I=="string")pr=!0;else if(Array.isArray(I)){var Vi=I.concat();We=[];for(var Rs,pn=Vi.length;pn--;)(typeof(Rs=Vi.shift())!="string"||Array.isArray(Rs)&&typeof Rs[0]!="string")&&(ln=!1);pr=ln}if(pr===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var ms=ae/m.internal.scaleFactor,Xa=ms*(Te-1);switch(we.baseline){case"bottom":he-=Xa;break;case"top":he+=ms-Xa;break;case"hanging":he+=ms-2*Xa;break;case"middle":he+=ms/2-Xa}if((Nt=we.maxWidth||0)>0&&(typeof I=="string"?I=m.splitTextToSize(I,Nt):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(Ur,tn){return Ur.concat(m.splitTextToSize(tn,Nt))},[]))),je={text:I,x:K,y:he,options:we,mutex:{pdfEscape:Cn,activeFontKey:lt,fonts:it,activeFontSize:ae}},sr.publish("preProcessText",je),I=je.text,bt=(we=je.options).angle,Zr instanceof Ot==0&&bt&&typeof bt=="number"){bt*=Math.PI/180,we.rotationDirection===0&&(bt=-bt),C===S&&(bt=-bt);var QA=Math.cos(bt),Gf=Math.sin(bt);Zr=new Ot(QA,Gf,-Gf,QA,0,0)}else bt&&bt instanceof Ot&&(Zr=bt);C!==S||Zr||(Zr=Bi),(Vt=we.charSpace||UA)!==void 0&&(oe+=_(F(Vt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(An=we.horizontalScale)!==void 0&&(oe+=_(100*An)+` Tz
`),we.lang;var Hn=-1,HA=we.renderingMode!==void 0?we.renderingMode:we.stroke,zd=m.internal.getCurrentPageInfo().pageContext;switch(HA){case 0:case!1:case"fill":Hn=0;break;case 1:case!0:case"stroke":Hn=1;break;case 2:case"fillThenStroke":Hn=2;break;case 3:case"invisible":Hn=3;break;case 4:case"fillAndAddForClipping":Hn=4;break;case 5:case"strokeAndAddPathForClipping":Hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Hn=6;break;case 7:case"addToPathForClipping":Hn=7}var o0=zd.usedRenderingMode!==void 0?zd.usedRenderingMode:-1;Hn!==-1?oe+=Hn+` Tr
`:o0!==-1&&(oe+=`0 Tr
`),Hn!==-1&&(zd.usedRenderingMode=Hn),St=we.align||"left";var Ja,yu=ae*Te,Kf=m.internal.pageSize.getWidth(),zf=it[lt];Vt=we.charSpace||UA,Nt=we.maxWidth||0,_r=Object.assign({autoencode:!0,noBOM:!0},we.flags);var Ul=[],bu=function(Ur){return m.getStringUnitWidth(Ur,{font:zf,charSpace:Vt,fontSize:ae,doKerning:!1})*ae/Re};if(Object.prototype.toString.call(I)==="[object Array]"){var Ia;We=zt(I),St!=="left"&&(Ja=We.map(bu));var ka,Ml=0;if(St==="right"){K-=Ja[0],I=[],pn=We.length;for(var VA=0;VA<pn;VA++)VA===0?(ka=Ns(K),Ia=Wa(he)):(ka=F(Ml-Ja[VA]),Ia=-yu),I.push([We[VA],ka,Ia]),Ml=Ja[VA]}else if(St==="center"){K-=Ja[0]/2,I=[],pn=We.length;for(var Ol=0;Ol<pn;Ol++)Ol===0?(ka=Ns(K),Ia=Wa(he)):(ka=F((Ml-Ja[Ol])/2),Ia=-yu),I.push([We[Ol],ka,Ia]),Ml=Ja[Ol]}else if(St==="left"){I=[],pn=We.length;for(var qf=0;qf<pn;qf++)I.push(We[qf])}else if(St==="justify"&&zf.encoding==="Identity-H"){I=[],pn=We.length,Nt=Nt!==0?Nt:Kf;for(var qd=0,ti=0;ti<pn;ti++)if(Ia=ti===0?Wa(he):-yu,ka=ti===0?Ns(K):qd,ti<pn-1){var A0=F((Nt-Ja[ti])/(We[ti].split(" ").length-1)),zo=We[ti].split(" ");I.push([zo[0]+" ",ka,Ia]),qd=0;for(var qo=1;qo<zo.length;qo++){var Wf=(bu(zo[qo-1]+" "+zo[qo])-bu(zo[qo]))*Re+A0;qo==zo.length-1?I.push([zo[qo],Wf,0]):I.push([zo[qo]+" ",Wf,0]),qd-=Wf}}else I.push([We[ti],ka,Ia]);I.push(["",qd,0])}else{if(St!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(I=[],pn=We.length,Nt=Nt!==0?Nt:Kf,ti=0;ti<pn;ti++){Ia=ti===0?Wa(he):-yu,ka=ti===0?Ns(K):0;var Yf=We[ti].split(" ").length-1,Xf=Yf>0?(Nt-Ja[ti])/Yf:0;ti<pn-1?Ul.push(_(F(Xf))):Ul.push(0),I.push([We[ti],ka,Ia])}}}(typeof we.R2L=="boolean"?we.R2L:be)===!0&&(I=en(I,function(Ur,tn,ri){return[Ur.split("").reverse().join(""),tn,ri]})),je={text:I,x:K,y:he,options:we,mutex:{pdfEscape:Cn,activeFontKey:lt,fonts:it,activeFontSize:ae}},sr.publish("postProcessText",je),I=je.text,H=je.mutex.isHex||!1;var Jf=it[lt].encoding;Jf!=="WinAnsiEncoding"&&Jf!=="StandardEncoding"||(I=en(I,function(Ur,tn,ri){return[st(Ur),tn,ri]})),We=zt(I),I=[];for(var Ql,Hl,Vl,wu=Array.isArray(We[0])?1:0,$l="",vu=function(Ur,tn,ri){var Si="";return ri instanceof Ot?(ri=typeof we.angle=="number"?xa(ri,new Ot(1,0,0,1,Ur,tn)):xa(new Ot(1,0,0,1,Ur,tn),ri),C===S&&(ri=xa(new Ot(1,0,0,-1,0,0),ri)),Si=ri.join(" ")+` Tm
`):Si=_(Ur)+" "+_(tn)+` Td
`,Si},Za=0;Za<We.length;Za++){switch($l="",wu){case 1:Vl=(H?"<":"(")+We[Za][0]+(H?">":")"),Ql=parseFloat(We[Za][1]),Hl=parseFloat(We[Za][2]);break;case 0:Vl=(H?"<":"(")+We[Za]+(H?">":")"),Ql=Ns(K),Hl=Wa(he)}Ul!==void 0&&Ul[Za]!==void 0&&($l=Ul[Za]+` Tw
`),Za===0?I.push($l+vu(Ql,Hl,Zr)+Vl):wu===0?I.push($l+Vl):wu===1&&I.push($l+vu(Ql,Hl,Zr)+Vl)}I=wu===0?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var Wo=`BT
/`;return Wo+=lt+" "+ae+` Tf
`,Wo+=_(ae*Te)+` TL
`,Wo+=$o+`
`,Wo+=oe,Wo+=I,$(Wo+="ET"),h[lt]=!0,m};var du=d.__private__.clip=d.clip=function(I){return $(I==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return du("evenodd")},d.__private__.discardPath=d.discardPath=function(){return $("n"),this};var na=d.__private__.isValidStyle=function(I){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(K=!0),K};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(I){return na(I)&&(l=I),this};var J=d.__private__.getStyle=d.getStyle=function(I){var K=l;switch(I){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=I}return K},le=d.close=function(){return $("h"),this};d.stroke=function(){return $("S"),this},d.fill=function(I){return me("f",I),this},d.fillEvenOdd=function(I){return me("f*",I),this},d.fillStroke=function(I){return me("B",I),this},d.fillStrokeEvenOdd=function(I){return me("B*",I),this};var me=function(I,K){Kr(K)==="object"?ht(K,I):$(I)},Ue=function(I){I===null||C===S&&I===void 0||(I=J(I),$(I))};function Xe(I,K,he,we,Se){var je=new Ih(K||this.boundingBox,he||this.xStep,we||this.yStep,this.gState,Se||this.matrix);je.stream=this.stream;var We=I+"$$"+this.cloneIndex+++"$$";return Xi(We,je),je}var ht=function(I,K){var he=Qt[I.key],we=Bt[he];if(we instanceof Ru)$("q"),$(Xt(K)),we.gState&&d.setGState(we.gState),$(I.matrix.toString()+" cm"),$("/"+he+" sh"),$("Q");else if(we instanceof Ih){var Se=new Ot(1,0,0,-1,0,po());I.matrix&&(Se=Se.multiply(I.matrix||Bi),he=Xe.call(we,I.key,I.boundingBox,I.xStep,I.yStep,Se).id),$("q"),$("/Pattern cs"),$("/"+he+" scn"),we.gState&&d.setGState(we.gState),$(K),$("Q")}},Xt=function(I){switch(I){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Jr=d.moveTo=function(I,K){return $(_(F(I))+" "+_(k(K))+" m"),this},Tr=d.lineTo=function(I,K){return $(_(F(I))+" "+_(k(K))+" l"),this},an=d.curveTo=function(I,K,he,we,Se,je){return $([_(F(I)),_(k(K)),_(F(he)),_(k(we)),_(F(Se)),_(k(je)),"c"].join(" ")),this};d.__private__.line=d.line=function(I,K,he,we,Se){if(isNaN(I)||isNaN(K)||isNaN(he)||isNaN(we)||!na(Se))throw new Error("Invalid arguments passed to jsPDF.line");return C===B?this.lines([[he-I,we-K]],I,K,[1,1],Se||"S"):this.lines([[he-I,we-K]],I,K,[1,1]).stroke()},d.__private__.lines=d.lines=function(I,K,he,we,Se,je){var We,bt,St,Vt,Nt,_r,An,Zr,m,U,H,oe;if(typeof I=="number"&&(oe=he,he=K,K=I,I=oe),we=we||[1,1],je=je||!1,isNaN(K)||isNaN(he)||!Array.isArray(I)||!Array.isArray(we)||!na(Se)||typeof je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Jr(K,he),We=we[0],bt=we[1],Vt=I.length,U=K,H=he,St=0;St<Vt;St++)(Nt=I[St]).length===2?(U=Nt[0]*We+U,H=Nt[1]*bt+H,Tr(U,H)):(_r=Nt[0]*We+U,An=Nt[1]*bt+H,Zr=Nt[2]*We+U,m=Nt[3]*bt+H,U=Nt[4]*We+U,H=Nt[5]*bt+H,an(_r,An,Zr,m,U,H));return je&&le(),Ue(Se),this},d.path=function(I){for(var K=0;K<I.length;K++){var he=I[K],we=he.c;switch(he.op){case"m":Jr(we[0],we[1]);break;case"l":Tr(we[0],we[1]);break;case"c":an.apply(this,we);break;case"h":le()}}return this},d.__private__.rect=d.rect=function(I,K,he,we,Se){if(isNaN(I)||isNaN(K)||isNaN(he)||isNaN(we)||!na(Se))throw new Error("Invalid arguments passed to jsPDF.rect");return C===B&&(we=-we),$([_(F(I)),_(k(K)),_(F(he)),_(F(we)),"re"].join(" ")),Ue(Se),this},d.__private__.triangle=d.triangle=function(I,K,he,we,Se,je,We){if(isNaN(I)||isNaN(K)||isNaN(he)||isNaN(we)||isNaN(Se)||isNaN(je)||!na(We))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-I,we-K],[Se-he,je-we],[I-Se,K-je]],I,K,[1,1],We,!0),this},d.__private__.roundedRect=d.roundedRect=function(I,K,he,we,Se,je,We){if(isNaN(I)||isNaN(K)||isNaN(he)||isNaN(we)||isNaN(Se)||isNaN(je)||!na(We))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return Se=Math.min(Se,.5*he),je=Math.min(je,.5*we),this.lines([[he-2*Se,0],[Se*bt,0,Se,je-je*bt,Se,je],[0,we-2*je],[0,je*bt,-Se*bt,je,-Se,je],[2*Se-he,0],[-Se*bt,0,-Se,-je*bt,-Se,-je],[0,2*je-we],[0,-je*bt,Se*bt,-je,Se,-je]],I+Se,K,[1,1],We,!0),this},d.__private__.ellipse=d.ellipse=function(I,K,he,we,Se){if(isNaN(I)||isNaN(K)||isNaN(he)||isNaN(we)||!na(Se))throw new Error("Invalid arguments passed to jsPDF.ellipse");var je=4/3*(Math.SQRT2-1)*he,We=4/3*(Math.SQRT2-1)*we;return Jr(I+he,K),an(I+he,K-We,I+je,K-we,I,K-we),an(I-je,K-we,I-he,K-We,I-he,K),an(I-he,K+We,I-je,K+we,I,K+we),an(I+je,K+we,I+he,K+We,I+he,K),Ue(Se),this},d.__private__.circle=d.circle=function(I,K,he,we){if(isNaN(I)||isNaN(K)||isNaN(he)||!na(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,K,he,he,we)},d.setFont=function(I,K,he){return he&&(K=L(K,he)),lt=Qo(I,K,{disableWarning:!1}),this};var ps=d.__private__.getFont=d.getFont=function(){return it[Qo.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var I,K,he={};for(I in pt)if(pt.hasOwnProperty(I))for(K in he[I]=[],pt[I])pt[I].hasOwnProperty(K)&&he[I].push(K);return he},d.addFont=function(I,K,he,we,Se){var je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&je.indexOf(arguments[3])!==-1?Se=arguments[3]:arguments[3]&&je.indexOf(arguments[3])==-1&&(he=L(he,we)),Zs.call(this,I,K,he,Se=Se||"Identity-H")};var NA,ia=r.lineWidth||.200025,Kt=d.__private__.getLineWidth=d.getLineWidth=function(){return ia},hu=d.__private__.setLineWidth=d.setLineWidth=function(I){return ia=I,$(_(F(I))+" w"),this};d.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(I,K){if(I=I||[],K=K||0,isNaN(K)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(he){return _(F(he))}).join(" "),K=_(F(K)),$("["+I+"] "+K+" d"),this};var Fl=d.__private__.getLineHeight=d.getLineHeight=function(){return ae*NA};d.__private__.getLineHeight=d.getLineHeight=function(){return ae*NA};var Gd=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(NA=I),this},DA=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return NA};Gd(r.lineHeight);var Ns=d.__private__.getHorizontalCoordinate=function(I){return F(I)},Wa=d.__private__.getVerticalCoordinate=function(I){return C===S?I:Ft[Q].mediaBox.topRightY-Ft[Q].mediaBox.bottomLeftY-F(I)},fu=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(I){return _(Ns(I))},on=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(I){return _(Wa(I))},Ll=r.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return es(Ll)},d.__private__.setStrokeColor=d.setDrawColor=function(I,K,he,we){return Ll=Ri({ch1:I,ch2:K,ch3:he,ch4:we,pdfColorType:"draw",precision:2}),$(Ll),this};var gu=r.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return es(gu)},d.__private__.setFillColor=d.setFillColor=function(I,K,he,we){return gu=Ri({ch1:I,ch2:K,ch3:he,ch4:we,pdfColorType:"fill",precision:2}),$(gu),this};var $o=r.textColor||"0 g",RA=d.__private__.getTextColor=d.getTextColor=function(){return es($o)};d.__private__.setTextColor=d.setTextColor=function(I,K,he,we){return $o=Ri({ch1:I,ch2:K,ch3:he,ch4:we,pdfColorType:"text",precision:3}),this};var UA=r.charSpace,Pl=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(UA||0)};d.__private__.setCharSpace=d.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return UA=I,this};var sa=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(I){var K=d.CapJoinStyles[I];if(K===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sa=K,$(K+" J"),this};var Nl=0;d.__private__.setLineJoin=d.setLineJoin=function(I){var K=d.CapJoinStyles[I];if(K===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=K,$(K+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(_(F(I))+" M"),this},d.GState=zb,d.setGState=function(I){(I=typeof I=="string"?Ut[lr[I]]:MA(null,I)).equals(kr)||($("/"+I.id+" gs"),kr=I)};var MA=function(I,K){if(!I||!lr[I]){var he=!1;for(var we in Ut)if(Ut.hasOwnProperty(we)&&Ut[we].equals(K)){he=!0;break}if(he)K=Ut[we];else{var Se="GS"+(Object.keys(Ut).length+1).toString(10);Ut[Se]=K,K.id=Se}return I&&(lr[I]=K.id),sr.publish("addGState",K),K}};d.addGState=function(I,K){return MA(I,K),this},d.saveGraphicsState=function(){return $("q"),Rt.push({key:lt,size:ae,color:$o}),this},d.restoreGraphicsState=function(){$("Q");var I=Rt.pop();return lt=I.key,ae=I.size,$o=I.color,kr=null,this},d.setCurrentTransformationMatrix=function(I){return $(I.toString()+" cm"),this},d.comment=function(I){return $("#"+I),this};var Sa=function(I,K){var he=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(je){isNaN(je)||(he=parseFloat(je))}});var we=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(je){isNaN(je)||(we=parseFloat(je))}});var Se="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Se},set:function(je){Se=je.toString()}}),this},Dl=function(I,K,he,we){Sa.call(this,I,K),this.type="rect";var Se=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Se},set:function(We){isNaN(We)||(Se=parseFloat(We))}});var je=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return je},set:function(We){isNaN(We)||(je=parseFloat(We))}}),this},jo=function(){this.page=Tt,this.currentPage=Q,this.pages=xe.slice(0),this.pagesContext=Ft.slice(0),this.x=at,this.y=ut,this.matrix=rt,this.width=OA(Q),this.height=Ya(Q),this.outputDestination=Ve,this.id="",this.objectNumber=-1};jo.prototype.restore=function(){Tt=this.page,Q=this.currentPage,Ft=this.pagesContext,xe=this.pages,at=this.x,ut=this.y,rt=this.matrix,Kd(Q,this.width),Ds(Q,this.height),Ve=this.outputDestination};var Go=function(I,K,he,we,Se){xi.push(new jo),Tt=Q=0,xe=[],at=I,ut=K,rt=Se,Hi([he,we])};for(var Ko in d.beginFormObject=function(I,K,he,we,Se){return Go(I,K,he,we,Se),this},d.endFormObject=function(I){return(function(K){if(gs[K])xi.pop().restore();else{var he=new jo,we="Xo"+(Object.keys(Pn).length+1).toString(10);he.id=we,gs[K]=we,Pn[we]=he,sr.publish("addFormObject",he),xi.pop().restore()}})(I),this},d.doFormObject=function(I,K){var he=Pn[gs[I]];return $("q"),$(K.toString()+" cm"),$("/"+he.id+" Do"),$("Q"),this},d.getFormObject=function(I){var K=Pn[gs[I]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},d.save=function(I,K){return I=I||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(Fu(ur(ns()),I),typeof Fu.unload=="function"&&qt.setTimeout&&setTimeout(Fu.unload,911),this):new Promise(function(he,we){try{var Se=Fu(ur(ns()),I);typeof Fu.unload=="function"&&qt.setTimeout&&setTimeout(Fu.unload,911),he(Se)}catch(je){we(je.message)}})},Ct.API)Ct.API.hasOwnProperty(Ko)&&(Ko==="events"&&Ct.API.events.length?(function(I,K){var he,we,Se;for(Se=K.length-1;Se!==-1;Se--)he=K[Se][0],we=K[Se][1],I.subscribe.apply(I,[he].concat(typeof we=="function"?[we]:we))})(sr,Ct.API.events):d[Ko]=Ct.API[Ko]);function OA(I){return Ft[I].mediaBox.topRightX-Ft[I].mediaBox.bottomLeftX}function Kd(I,K){Ft[I].mediaBox.topRightX=K+Ft[I].mediaBox.bottomLeftX}function Ya(I){return Ft[I].mediaBox.topRightY-Ft[I].mediaBox.bottomLeftY}function Ds(I,K){Ft[I].mediaBox.topRightY=K+Ft[I].mediaBox.bottomLeftY}var pu=d.getPageWidth=function(I){return OA(I=I||Q)/xt},mu=d.setPageWidth=function(I,K){Kd(I,K*xt)},po=d.getPageHeight=function(I){return Ya(I=I||Q)/xt},Rl=d.setPageHeight=function(I,K){Ds(I,K*xt)};return d.internal={pdfEscape:Cn,getStyle:J,getFont:ps,getFontSize:_e,getCharSpace:Pl,getTextColor:RA,getLineHeight:Fl,getLineHeightFactor:DA,getLineWidth:Kt,write:ye,getHorizontalCoordinate:Ns,getVerticalCoordinate:Wa,getCoordinateString:fu,getVerticalCoordinateString:on,collections:{},newObject:Hr,newAdditionalObject:Ci,newObjectDeferred:Wr,newObjectDeferredBegin:Zn,getFilters:ts,putStream:Ui,events:sr,scaleFactor:xt,pageSize:{getWidth:function(){return pu(Q)},setWidth:function(I){mu(Q,I)},getHeight:function(){return po(Q)},setHeight:function(I){Rl(Q,I)}},encryptionOptions:c,encryption:Vr,getEncryptor:function(I){return c!==null?Vr.encryptor(I,0):function(K){return K}},output:ei,getNumberOfPages:Oo,pages:xe,out:$,f2:E,f3:x,getPageInfo:Ho,getPageInfoByObjId:Vo,getCurrentPageInfo:Tl,getPDFVersion:f,Point:Sa,Rectangle:Dl,Matrix:Ot,hasHotfix:Qn},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return pu(Q)},set:function(I){mu(Q,I)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return po(Q)},set:function(I){Rl(Q,I)},enumerable:!0,configurable:!0}),(function(I){for(var K=0,he=W.length;K<he;K++){var we=Zs.call(this,I[K][0],I[K][1],I[K][2],W[K][3],!0);u===!1&&(h[we]=!0);var Se=I[K][0].split("-");Ei({id:we,fontName:Se[0],fontStyle:Se[1]||""})}sr.publish("addFonts",{fonts:it,dictionary:pt})}).call(d,W),lt="F1",ea(i,t),sr.publish("initialized"),d}bh.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},bh.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},bh.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},bh.prototype.processOwnerPassword=function(r,e){return O2(M2(e).substr(0,5),r)},bh.prototype.encryptor=function(r,e){var t=M2(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return O2(t,n)}},zb.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Kr(r)!==Kr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Ct.API={events:[]},Ct.version="3.0.3";var jn=Ct.API,kB=1,Ud=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oh=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jt=function(r){return r.toFixed(2)},Jl=function(r){return r.toFixed(5)};jn.__acroform__={};var _a=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},nT=function(r){return r*kB},Zo=function(r){var e=new FN,t=_t.internal.getHeight(r)||0,n=_t.internal.getWidth(r)||0;return e.BBox=[0,0,Number(Jt(n)),Number(Jt(t))],e},nee=jn.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},iee=jn.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},see=jn.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},oi=jn.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return see(r,e-1)},Ai=jn.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return nee(r,e-1)},li=jn.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return iee(r,e-1)},aee=jn.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],s=r[1],a=r[2],o=r[3],A={};return A.lowerLeft_X=t(i)||0,A.lowerLeft_Y=n(s+o)||0,A.upperRight_X=t(i+a)||0,A.upperRight_Y=n(s)||0,[Number(Jt(A.lowerLeft_X)),Number(Jt(A.lowerLeft_Y)),Number(Jt(A.upperRight_X)),Number(Jt(A.upperRight_Y))]},oee=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=Q2(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+Jt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Zo(r);return s.scope=r.scope,s.stream=e.join(`
`),s}},Q2=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(E){return E.split(`
`)}):i.map(function(E){return[E]});var s=t,a=_t.internal.getHeight(r)||0;a=a<0?-a:a;var o=_t.internal.getWidth(r)||0;o=o<0?-o:o;var A=function(E,x,F){if(E+1<i.length){var k=x+" "+i[E+1][0];return vy(k,r,F).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var l,c,u=vy("3",r,s).height,h=r.multiline?a-s:(a-u)/2,d=h+=2,p=0,f=0,y=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+vy(e,r,s=12).width+", FieldWidth:"+o+`
`;break}for(var b="",B=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var C=!1;if(i[S].length!==1&&y!==i[S].length-1){if((u+2)*(B+2)+2>a)continue e;b+=i[S][y],C=!0,f=S,S--}else{b=(b+=i[S][y]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var P=parseInt(S),M=A(P,b,s),L=S>=i.length-1;if(M&&!L){b+=" ",y=0;continue}if(M||L){if(L)f=P;else if(r.multiline&&(u+2)*(B+2)+2>a)continue e}else{if(!r.multiline||(u+2)*(B+2)+2>a)continue e;f=P}}for(var _="",v=p;v<=f;v++){var T=i[v];if(r.multiline){if(v===f){_+=T[y]+" ",y=(y+1)%T.length;continue}if(v===p){_+=T[T.length-1]+" ";continue}}_+=T[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,c=vy(_,r,s).width,r.textAlign){case"right":l=o-c-2;break;case"center":l=(o-c)/2;break;default:l=2}e+=Jt(l)+" "+Jt(d)+` Td
`,e+="("+Ud(_)+`) Tj
`,e+=-Jt(l)+` 0 Td
`,d=-(s+2),c=0,p=C?f:f+1,B++,b=""}break}return n.text=e,n.fontSize=s,n},vy=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Aee={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},lee=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},cee=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Uo.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(Aee)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");kB=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new LN,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&lee(s,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],A=[],l=o.Rect;if(o.Rect&&(o.Rect=aee(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=_t.createDefaultAppearanceStream(o),Kr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(A=o.getKeyValueListForStream()),o.Rect=l,o.hasAppearanceStream&&!o.appearanceStreamContent){var c=oee(o);A.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(o.appearanceStreamContent){var u="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var d=o.appearanceStreamContent[h];if(u+="/"+h+" ",u+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var p=d[a];typeof p=="function"&&(p=p.call(i,o)),u+="/"+a+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=d)=="function"&&(p=p.call(i,o)),u+="/"+a+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);u+=">>"}A.push({key:"AP",value:`<<
`+u+">>"})}i.internal.putStream({additionalKeyValues:A,objectId:o.objId}),i.internal.out("endobj")}s&&(function(f,y){for(var b in f)if(f.hasOwnProperty(b)){var B=b,S=f[b];y.internal.newObjectDeferredBegin(S.objId,!0),Kr(S)==="object"&&typeof S.putStream=="function"&&S.putStream(),delete f[B]}})(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},TN=jn.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(a){return a};if(Array.isArray(r)){for(var i="[",s=0;s<r.length;s++)switch(s!==0&&(i+=" "),Kr(r[s])){case"boolean":case"number":case"object":i+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+Ud(n(r[s].toString()))+")"):i+=r[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},n_=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Ud(n(r))+")"},uA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};uA.prototype.toString=function(){return this.objId+" 0 R"},uA.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},uA.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:TN(i,this.objId,this.scope)}):i instanceof uA?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var FN=function(){uA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};_a(FN,uA);var LN=function(){uA.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ud(t(r))+")"}},set:function(t){r=t}})};_a(LN,uA);var Uo=function r(){uA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!oi(e,3)},set:function(b){b?this.F=Ai(e,3):this.F=li(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');t=b}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(b){n=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(b){n[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(b){n[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(b){n[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(b){n[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof qb)return;s="FieldObject"+r.FieldNum++}var b=function(B){return B};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Ud(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(b){A=b}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/kB:l},set:function(b){l=b}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof qb||this instanceof ad))return n_(u,this.objId,this.scope)},set:function(b){b=b.toString(),u=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ki==0?n_(h,this.objId,this.scope):h},set:function(b){b=b.toString(),h=this instanceof Ki==0?b.substr(0,1)==="("?oh(b.substr(1,b.length-2)):oh(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki==1?oh(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof Ki==1?"/"+b:b}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Ki==0?n_(d,this.objId,this.scope):d},set:function(b){b=b.toString(),d=this instanceof Ki==0?b.substr(0,1)==="("?oh(b.substr(1,b.length-2)):oh(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki==1?oh(d.substr(1,d.length-1)):d},set:function(b){b=b.toString(),d=this instanceof Ki==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(b){b=!!b,f=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(b){p=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,1)},set:function(b){b?this.Ff=Ai(this.Ff,1):this.Ff=li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,2)},set:function(b){b?this.Ff=Ai(this.Ff,2):this.Ff=li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,3)},set:function(b){b?this.Ff=Ai(this.Ff,3):this.Ff=li(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');y=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(y){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};_a(Uo,uA);var Rh=function(){Uo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return TN(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=(function(s,a,o){o||(o=1);for(var A,l=[];A=a.exec(s);)l.push(A[o]);return l})(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,18)},set:function(t){t?this.Ff=Ai(this.Ff,18):this.Ff=li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ai(this.Ff,19):this.Ff=li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,20)},set:function(t){t?(this.Ff=Ai(this.Ff,20),e.sort()):this.Ff=li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,22)},set:function(t){t?this.Ff=Ai(this.Ff,22):this.Ff=li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,23)},set:function(t){t?this.Ff=Ai(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,27)},set:function(t){t?this.Ff=Ai(this.Ff,27):this.Ff=li(this.Ff,27)}}),this.hasAppearanceStream=!1};_a(Rh,Uo);var Uh=function(){Rh.call(this),this.fontName="helvetica",this.combo=!1};_a(Uh,Rh);var Mh=function(){Uh.call(this),this.combo=!0};_a(Mh,Uh);var Zy=function(){Mh.call(this),this.edit=!0};_a(Zy,Mh);var Ki=function(){Uo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,15)},set:function(t){t?this.Ff=Ai(this.Ff,15):this.Ff=li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,16)},set:function(t){t?this.Ff=Ai(this.Ff,16):this.Ff=li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,17)},set:function(t){t?this.Ff=Ai(this.Ff,17):this.Ff=li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,26)},set:function(t){t?this.Ff=Ai(this.Ff,26):this.Ff=li(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Ud(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Kr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};_a(Ki,Uo);var eb=function(){Ki.call(this),this.pushButton=!0};_a(eb,Ki);var Oh=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};_a(Oh,Ki);var qb=function(){var r,e;Uo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+Ud(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Kr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_t.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_a(qb,Uo),Oh.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Oh.prototype.createOption=function(r){var e=new qb;return e.Parent=this,e.optionName=r,this.Kids.push(e),uee.call(this.scope,e),e};var tb=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_t.CheckBox.createAppearanceStream()};_a(tb,Ki);var ad=function(){Uo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,13)},set:function(e){e?this.Ff=Ai(this.Ff,13):this.Ff=li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,21)},set:function(e){e?this.Ff=Ai(this.Ff,21):this.Ff=li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,23)},set:function(e){e?this.Ff=Ai(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,24)},set:function(e){e?this.Ff=Ai(this.Ff,24):this.Ff=li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,25)},set:function(e){e?this.Ff=Ai(this.Ff,25):this.Ff=li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,26)},set:function(e){e?this.Ff=Ai(this.Ff,26):this.Ff=li(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_a(ad,Uo);var rb=function(){ad.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,14)},set:function(r){r?this.Ff=Ai(this.Ff,14):this.Ff=li(this.Ff,14)}}),this.password=!0};_a(rb,ad);var _t={CheckBox:{createAppearanceStream:function(){return{N:{On:_t.CheckBox.YesNormal},D:{On:_t.CheckBox.YesPushDown,Off:_t.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Zo(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),s=Q2(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+Jt(_t.internal.getWidth(r))+" "+Jt(_t.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Jt(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Zo(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],s=_t.internal.getHeight(r),a=_t.internal.getWidth(r),o=Q2(r,r.caption);return i.push("1 g"),i.push("0 0 "+Jt(a)+" "+Jt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Jt(a-1)+" "+Jt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Jt(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=Zo(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Jt(_t.internal.getWidth(r))+" "+Jt(_t.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:_t.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=_t.RadioButton.Circle.YesNormal,e.D[r]=_t.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Zo(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=_t.internal.Bezier_C,s=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Jl(_t.internal.getWidth(r)/2)+" "+Jl(_t.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Zo(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*_t.internal.Bezier_C).toFixed(5)),a=Number((n*_t.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Jl(_t.internal.getWidth(r)/2)+" "+Jl(_t.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Jl(_t.internal.getWidth(r)/2)+" "+Jl(_t.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Zo(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*_t.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Jl(_t.internal.getWidth(r)/2)+" "+Jl(_t.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:_t.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=_t.RadioButton.Cross.YesNormal,e.D[r]=_t.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Zo(r);e.scope=r.scope;var t=[],n=_t.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+Jt(_t.internal.getWidth(r)-2)+" "+Jt(_t.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(Jt(n.x1.x)+" "+Jt(n.x1.y)+" m"),t.push(Jt(n.x2.x)+" "+Jt(n.x2.y)+" l"),t.push(Jt(n.x4.x)+" "+Jt(n.x4.y)+" m"),t.push(Jt(n.x3.x)+" "+Jt(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Zo(r);e.scope=r.scope;var t=_t.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Jt(_t.internal.getWidth(r))+" "+Jt(_t.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Jt(_t.internal.getWidth(r)-2)+" "+Jt(_t.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Jt(t.x1.x)+" "+Jt(t.x1.y)+" m"),n.push(Jt(t.x2.x)+" "+Jt(t.x2.y)+" l"),n.push(Jt(t.x4.x)+" "+Jt(t.x4.y)+" m"),n.push(Jt(t.x3.x)+" "+Jt(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Zo(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Jt(_t.internal.getWidth(r))+" "+Jt(_t.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};_t.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=_t.internal.getWidth(r),t=_t.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},_t.internal.getWidth=function(r){var e=0;return Kr(r)==="object"&&(e=nT(r.Rect[2])),e},_t.internal.getHeight=function(r){var e=0;return Kr(r)==="object"&&(e=nT(r.Rect[3])),e};var uee=jn.addField=function(r){if(cee(this,r),!(r instanceof Uo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};jn.AcroFormChoiceField=Rh,jn.AcroFormListBox=Uh,jn.AcroFormComboBox=Mh,jn.AcroFormEditBox=Zy,jn.AcroFormButton=Ki,jn.AcroFormPushButton=eb,jn.AcroFormRadioButton=Oh,jn.AcroFormCheckBox=tb,jn.AcroFormTextField=ad,jn.AcroFormPasswordField=rb,jn.AcroFormAppearance=_t,jn.AcroForm={ChoiceField:Rh,ListBox:Uh,ComboBox:Mh,EditBox:Zy,Button:Ki,PushButton:eb,RadioButton:Oh,CheckBox:tb,TextField:ad,PasswordField:rb,Appearance:_t},Ct.AcroForm={ChoiceField:Rh,ListBox:Uh,ComboBox:Mh,EditBox:Zy,Button:Ki,PushButton:eb,RadioButton:Oh,CheckBox:tb,TextField:ad,PasswordField:rb,Appearance:_t};Ct.AcroForm;function PN(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(E,x){var F,k,Z,ue,ne,j=t;if((x=x||t)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(M(E))for(ne in n)for(Z=n[ne],F=0;F<Z.length;F+=1){for(ue=!0,k=0;k<Z[F].length;k+=1)if(Z[F][k]!==void 0&&Z[F][k]!==E[k]){ue=!1;break}if(ue===!0){j=ne;break}}else for(ne in n)for(Z=n[ne],F=0;F<Z.length;F+=1){for(ue=!0,k=0;k<Z[F].length;k+=1)if(Z[F][k]!==void 0&&Z[F][k]!==E.charCodeAt(k)){ue=!1;break}if(ue===!0){j=ne;break}}return j===t&&x!==t&&(j=x),j},s=function E(x){for(var F=this.internal.write,k=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);x.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:x.width}),ue.push({key:"Height",value:x.height}),x.colorSpace===b.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(x.palette.length/3-1)+" "+("sMask"in x&&x.sMask!==void 0?x.objectId+2:x.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+x.colorSpace}),x.colorSpace===b.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:x.bitsPerComponent}),"decodeParameters"in x&&x.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+x.decodeParameters+">>"}),"transparency"in x&&Array.isArray(x.transparency)&&x.transparency.length>0){for(var ne="",j=0,G=x.transparency.length;j<G;j++)ne+=x.transparency[j]+" "+x.transparency[j]+" ";ue.push({key:"Mask",value:"["+ne+"]"})}x.sMask!==void 0&&ue.push({key:"SMask",value:x.objectId+1+" 0 R"});var pe=x.filter!==void 0?["/"+x.filter]:void 0;if(k({data:x.data,additionalKeyValues:ue,alreadyAppliedFilters:pe,objectId:x.objectId}),F("endobj"),"sMask"in x&&x.sMask!==void 0){var q,N=(q=x.sMaskBitsPerComponent)!==null&&q!==void 0?q:x.bitsPerComponent,Q={width:x.width,height:x.height,colorSpace:"DeviceGray",bitsPerComponent:N,data:x.sMask};"filter"in x&&(Q.decodeParameters="/Predictor ".concat(x.predictor," /Colors 1 /BitsPerComponent ").concat(N," /Columns ").concat(x.width),Q.filter=x.filter),E.call(this,Q)}if(x.colorSpace===b.INDEXED){var V=this.internal.newObject();k({data:_(new Uint8Array(x.palette)),objectId:V}),F("endobj")}},a=function(){var E=this.internal.collections[e+"images"];for(var x in E)s.call(this,E[x])},o=function(){var E,x=this.internal.collections[e+"images"],F=this.internal.write;for(var k in x)F("/I"+(E=x[k]).index,E.objectId,"0","R")},A=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var E=this.internal.collections[e+"images"];return A.call(this),E},c=function(){return Object.keys(this.internal.collections[e+"images"]).length},u=function(E){return typeof r["process"+E.toUpperCase()]=="function"},h=function(E){return Kr(E)==="object"&&E.nodeType===1},d=function(E,x){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var F=""+E.getAttribute("src");if(F.indexOf("data:image/")===0)return Jy(unescape(F).split("base64,").pop());var k=r.loadFile(F,!0);if(k!==void 0)return k}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var Z;switch(x){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return Jy(E.toDataURL(Z,1).split("base64,").pop())}},p=function(E){var x=this.internal.collections[e+"images"];if(x){for(var F in x)if(E===x[F].alias)return x[F]}},f=function(E,x,F){return E||x||(E=-96,x=-96),E<0&&(E=-1*F.width*72/E/this.internal.scaleFactor),x<0&&(x=-1*F.height*72/x/this.internal.scaleFactor),E===0&&(E=x*F.width/F.height),x===0&&(x=E*F.height/F.width),[E,x]},y=function(E,x,F,k,Z,ue){var ne=f.call(this,F,k,Z),j=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,pe=l.call(this);if(F=ne[0],k=ne[1],pe[Z.index]=Z,ue){ue*=Math.PI/180;var q=Math.cos(ue),N=Math.sin(ue),Q=function(X){return X.toFixed(4)},V=[Q(q),Q(N),Q(-1*N),Q(q),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,j(E),G(x+k),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([j(F),"0","0",j(k),"0","0","cm"].join(" "))):this.internal.write([j(F),"0","0",j(k),j(E),G(x+k),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},b=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=r.__addimage__.sHashCode=function(E){var x,F,k=0;if(typeof E=="string")for(F=E.length,x=0;x<F;x++)k=(k<<5)-k+E.charCodeAt(x),k|=0;else if(M(E))for(F=E.byteLength/2,x=0;x<F;x++)k=(k<<5)-k+E[x],k|=0;return k},C=r.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var x=!0;return E.length===0&&(x=!1),E.length%4!=0&&(x=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(x=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(x=!1),x},P=r.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var x=E.indexOf(",");return x<0?null:E.substring(0,x).trim().endsWith("base64")?E.substring(x+1):null};r.__addimage__.isArrayBuffer=function(E){return E instanceof ArrayBuffer};var M=r.__addimage__.isArrayBufferView=function(E){return E instanceof Int8Array||E instanceof Uint8Array||E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array},L=r.__addimage__.binaryStringToUint8Array=function(E){for(var x=E.length,F=new Uint8Array(x),k=0;k<x;k++)F[k]=E.charCodeAt(k);return F},_=r.__addimage__.arrayBufferToBinaryString=function(E){for(var x="",F=M(E)?E:new Uint8Array(E),k=0;k<F.length;k+=8192)x+=String.fromCharCode.apply(null,F.subarray(k,k+8192));return x};r.addImage=function(){var E,x,F,k,Z,ue,ne,j,G;if(typeof arguments[1]=="number"?(x=t,F=arguments[1],k=arguments[2],Z=arguments[3],ue=arguments[4],ne=arguments[5],j=arguments[6],G=arguments[7]):(x=arguments[1],F=arguments[2],k=arguments[3],Z=arguments[4],ue=arguments[5],ne=arguments[6],j=arguments[7],G=arguments[8]),Kr(E=arguments[0])==="object"&&!h(E)&&"imageData"in E){var pe=E;E=pe.imageData,x=pe.format||x||t,F=pe.x||F||0,k=pe.y||k||0,Z=pe.w||pe.width||Z,ue=pe.h||pe.height||ue,ne=pe.alias||ne,j=pe.compression||j,G=pe.rotation||pe.angle||G}var q=this.internal.getFilters();if(j===void 0&&q.indexOf("FlateEncode")!==-1&&(j="SLOW"),isNaN(F)||isNaN(k))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var N=v.call(this,E,x,ne,j);return y.call(this,F,k,Z,ue,N,G),this};var v=function(E,x,F,k){var Z,ue,ne;if(typeof E=="string"&&i(E)===t){E=unescape(E);var j=T(E,!1);(j!==""||(j=r.loadFile(E,!0))!==void 0)&&(E=j)}if(h(E)&&(E=d(E,x)),x=i(E,x),!u(x))throw new Error("addImage does not support files of type '"+x+"', please ensure that a plugin for '"+x+"' support is added.");if(((ne=F)==null||ne.length===0)&&(F=(function(G){return typeof G=="string"||M(G)?S(G):M(G.data)?S(G.data):null})(E)),(Z=p.call(this,F))||(E instanceof Uint8Array||x==="RGBA"||(ue=E,E=L(E)),Z=this["process"+x.toUpperCase()](E,c.call(this),F,(function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in r.image_compression?G:B.NONE})(k),ue)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},T=r.__addimage__.convertBase64ToBinaryString=function(E,x){x=typeof x!="boolean"||x;var F,k="";if(typeof E=="string"){var Z;F=(Z=P(E))!==null&&Z!==void 0?Z:E;try{k=Jy(F)}catch(ue){if(x)throw C(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return k};r.getImageProperties=function(E){var x,F,k="";if(h(E)&&(E=d(E)),typeof E=="string"&&i(E)===t&&((k=T(E,!1))===""&&(k=r.loadFile(E)||""),E=k),F=i(E),!u(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(E instanceof Uint8Array||(E=L(E)),!(x=this["process"+F.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return x.fileType=F,x}})(Ct.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Ct.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var h=0;h<l.length;h++){n=l[h];var d=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(f.objId),B=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+d(b(n.contents))+")",s+=" /Popup "+y.objId+" 0 R",s+=" /P "+A.objId+" 0 R",s+=" /T ("+d(b(B))+") >>",f.content=s;var S=f.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(s+=" /Open true"),s+=" >>",y.content=s,this.internal.write(f.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(p(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var P=this.annotations._nameMap[n.options.name];n.options.pageNumber=P.page,n.options.top=P.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var M=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+M+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,s,a){var o=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:A(t),y:l(n),w:A(t+i),h:l(n+s)},options:a,type:"link"})},r.textWithLink=function(t,n,i,s){var a,o,A=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var c=this.splitTextToSize(t,o).length;a=Math.ceil(l*c)}else o=A,a=l;return this.text(t,n,i,s),i+=.2*l,s.align==="center"&&(n-=A/2),s.align==="right"&&(n-=A),this.link(n,i-l,o,a,s),A},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(Ct.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(f){return e[f.charCodeAt(0)]!==void 0},a=r.__arabicParser__.isArabicLetter=function(f){return typeof f=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(f)},o=r.__arabicParser__.isArabicEndLetter=function(f){return a(f)&&s(f)&&e[f.charCodeAt(0)].length<=2},A=r.__arabicParser__.isArabicAlfLetter=function(f){return a(f)&&i.indexOf(f.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(f){return a(f)&&s(f)&&e[f.charCodeAt(0)].length>=1};var l=r.__arabicParser__.arabicLetterHasFinalForm=function(f){return a(f)&&s(f)&&e[f.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(f){return a(f)&&s(f)&&e[f.charCodeAt(0)].length>=3};var c=r.__arabicParser__.arabicLetterHasMedialForm=function(f){return a(f)&&s(f)&&e[f.charCodeAt(0)].length==4},u=r.__arabicParser__.resolveLigatures=function(f){var y=0,b=t,B="",S=0;for(y=0;y<f.length;y+=1)b[f.charCodeAt(y)]!==void 0?(S++,typeof(b=b[f.charCodeAt(y)])=="number"&&(B+=String.fromCharCode(b),b=t,S=0),y===f.length-1&&(b=t,B+=f.charAt(y-(S-1)),y-=S-1,S=0)):(b=t,B+=f.charAt(y-S),y-=S,S=0);return B};r.__arabicParser__.isArabicDiacritic=function(f){return f!==void 0&&n[f.charCodeAt(0)]!==void 0};var h=r.__arabicParser__.getCorrectForm=function(f,y,b){return a(f)?s(f)===!1?-1:!l(f)||!a(y)&&!a(b)||!a(b)&&o(y)||o(f)&&!a(y)||o(f)&&A(y)||o(f)&&o(y)?0:c(f)&&a(y)&&!o(y)&&a(b)&&l(b)?3:o(f)||!a(b)?1:2:-1},d=function(f){var y=0,b=0,B=0,S="",C="",P="",M=(f=f||"").split("\\s+"),L=[];for(y=0;y<M.length;y+=1){for(L.push(""),b=0;b<M[y].length;b+=1)S=M[y][b],C=M[y][b-1],P=M[y][b+1],a(S)?(B=h(S,C,P),L[y]+=B!==-1?String.fromCharCode(e[S.charCodeAt(0)][B]):S):L[y]+=S;L[y]=u(L[y])}return L.join(" ")},p=r.__arabicParser__.processArabic=r.processArabic=function(){var f,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(y)){var B=0;for(b=[],B=0;B<y.length;B+=1)Array.isArray(y[B])?b.push([d(y[B][0]),y[B][1],y[B][2]]):b.push([d(y[B])]);f=b}else f=d(y);return typeof arguments[0]=="string"?f:(arguments[0].text=f,arguments[0])};r.events.push(["preProcessText",p])})(Ct.API),Ct.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ct.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(f){A=f}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(f){l=f}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(f){c=f}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(f){u=f}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(f){h=f}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(f){d=f}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(f){p=f}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},r.getTextDimensions=function(A,l){n.call(this);var c=(l=l||{}).fontSize||this.getFontSize(),u=l.font||this.getFont(),h=l.scaleFactor||this.internal.scaleFactor,d=0,p=0,f=0,y=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var b=l.maxWidth;b>0?typeof A=="string"?A=this.splitTextToSize(A,b):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(S,C){return S.concat(y.splitTextToSize(C,b))},[])):A=Array.isArray(A)?A:[A];for(var B=0;B<A.length;B++)d<(f=this.getStringUnitWidth(A[B],{font:u})*c)&&(d=f);return d!==0&&(p=A.length),{w:d/=h,h:Math.max((p*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/h,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=r.cell=function(){var A;A=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var l=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,u=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===A.lineNumber?(A.x=(l.x||0)+(l.width||0),A.y=l.y||0):l.y+l.height+A.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=u.top,d&&h&&(this.printHeaderRow(A.lineNumber,!0),A.y+=h[0].height)):A.y=l.y+l.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,t===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-c,A.y+c,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+c,{align:"center",baseline:"top",maxWidth:A.width-c-c}):this.text(A.text,A.x+c,A.y+c,{align:"left",baseline:"top",maxWidth:A.width-c-c})),this.internal.__cell__.lastCell=A,this};r.table=function(A,l,c,u,h){if(n.call(this),!c)throw new Error("No data for PDF table.");var d,p,f,y,b=[],B=[],S=[],C={},P={},M=[],L=[],_=(h=h||{}).autoSize||!1,v=h.printHeaders!==!1,T=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,E=h.margins||Object.assign({width:this.getPageWidth()},e),x=typeof h.padding=="number"?h.padding:3,F=h.headerBackgroundColor||"#c8c8c8",k=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=v,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=T,this.internal.__cell__.padding=x,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=k,this.setFontSize(T),u==null)B=b=Object.keys(c[0]),S=b.map(function(){return"left"});else if(Array.isArray(u)&&Kr(u[0])==="object")for(b=u.map(function(pe){return pe.name}),B=u.map(function(pe){return pe.prompt||pe.name||""}),S=u.map(function(pe){return pe.align||"left"}),d=0;d<u.length;d+=1)P[u[d].name]=.7499990551181103*u[d].width;else Array.isArray(u)&&typeof u[0]=="string"&&(B=b=u,S=b.map(function(){return"left"}));if(_||Array.isArray(u)&&typeof u[0]=="string")for(d=0;d<b.length;d+=1){for(C[y=b[d]]=c.map(function(pe){return pe[y]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(B[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=C[y],this.setFont(void 0,"normal"),f=0;f<p.length;f+=1)M.push(this.getTextDimensions(p[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[y]=Math.max.apply(null,M)+x+x,M=[]}if(v){var Z={};for(d=0;d<b.length;d+=1)Z[b[d]]={},Z[b[d]].text=B[d],Z[b[d]].align=S[d];var ue=o.call(this,Z,P);L=b.map(function(pe){return new s(A,l,P[pe],ue,Z[pe].text,void 0,Z[pe].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var ne=u.reduce(function(pe,q){return pe[q.name]=q.align,pe},{});for(d=0;d<c.length;d+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:d,data:c[d]},this);var j=o.call(this,c[d],P);for(f=0;f<b.length;f+=1){var G=c[d][b[f]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:d,col:f,data:G},this),a.call(this,new s(A,l,P[b[f]],j,G,d+2,ne[b[f]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=l,this};var o=function(A,l){var c=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(A).map(function(d){var p=A[d];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,l[d]-c-c)},this).map(function(d){return this.getLineHeightFactor()*d.length*u/h+c+c},this).reduce(function(d,p){return Math.max(d,p)},0)};r.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},r.printHeaderRow=function(A,l){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){c=this.internal.__cell__.tableHeaderRow[d].clone(),l&&(c.y=this.internal.__cell__.margins.top||0,h.push(c)),c.lineNumber=A;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,c),this.setTextColor(p)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}})(Ct.API);var NN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},DN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],H2=PN(DN),RN=[100,200,300,400,500,600,700,800,900],dee=PN(RN);function i_(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(s){return NN[s=s||"normal"]?s:"normal"})(r.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(r.weight),i=(function(s){return typeof H2[s=s||"normal"]=="number"?s:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function iT(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var hee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},sT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function aT(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function oT(r){return r.trimLeft()}function fee(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function gee(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var _y,AT,lT,Ah,xy,cT,uT,dT,s_=["times"];function hT(r,e,t,n,i){var s=4,a=gT;switch(i){case Ct.API.image_compression.FAST:s=1,a=fT;break;case Ct.API.image_compression.MEDIUM:s=6,a=pT;break;case Ct.API.image_compression.SLOW:s=9,a=mT}r=(function(A,l,c,u){for(var h,d=A.length/l,p=new Uint8Array(A.length+d),f=[pee,fT,gT,pT,mT],y=0;y<d;y+=1){var b=y*l,B=A.subarray(b,b+l);if(u)p.set(u(B,c,h),b+y);else{for(var S=f.length,C=[],P=0;P<S;P+=1)C[P]=f[P](B,c,h);var M=yee(C.concat());p.set(C[M],b+y)}h=B}return p})(r,e,Math.ceil(t*n/8),a);var o=N2(r,{level:s});return Ct.API.__addimage__.arrayBufferToBinaryString(o)}function pee(r){var e=Array.apply([],r);return e.unshift(0),e}function fT(r,e){var t=r.length,n=[];n[0]=1;for(var i=0;i<t;i+=1){var s=r[i-e]||0;n[i+1]=r[i]-s+256&255}return n}function gT(r,e,t){var n=r.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var a=t&&t[s]||0;i[s+1]=r[s]-a+256&255}return i}function pT(r,e,t){var n=r.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var a=r[s-e]||0,o=t&&t[s]||0;i[s+1]=r[s]+256-(a+o>>>1)&255}return i}function mT(r,e,t){var n=r.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var a=mee(r[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);i[s+1]=r[s]-a+256&255}return i}function mee(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),i=Math.abs(r-t),s=Math.abs(r+e-t-t);return n<=i&&n<=s?r:i<=s?e:t}function yee(r){var e=r.map(function(t){return t.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function a_(r,e,t){var n=e*t,i=Math.floor(n/8),s=16-(n-8*i+t),a=(1<<t)-1;return UN(r,i)>>s&a}function yT(r,e,t,n){var i=t*n,s=Math.floor(i/8),a=16-(i-8*s+n),o=(1<<n)-1,A=(e&o)<<a;(function(l,c,u){if(c+1<l.byteLength)l.setUint16(c,u,!1);else{var h=u>>8&255;l.setUint8(c,h)}})(r,s,UN(r,s)&~(o<<a)&65535|A)}function UN(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function bee(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],s=i>>7,a=1<<1+(7&i);r[e++],r[e++];var o=null,A=null;s&&(o=e,A=a,e+=3*a);var l=!0,c=[],u=0,h=null,d=0,p=null;for(this.width=t,this.height=n;l&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,p=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((E=r[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var f=r[e++];u=r[e++]|r[e++]<<8,h=r[e++],1&f||(h=null),d=f>>2&7,e++;break;case 254:for(;;){if(!((E=r[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var y=r[e++]|r[e++]<<8,b=r[e++]|r[e++]<<8,B=r[e++]|r[e++]<<8,S=r[e++]|r[e++]<<8,C=r[e++],P=C>>6&1,M=1<<1+(7&C),L=o,_=A,v=!1;C>>7&&(v=!0,L=e,_=M,e+=3*M);var T=e;for(e++;;){var E;if(!((E=r[e++])>=0))throw Error("Invalid block size");if(E===0)break;e+=E}c.push({x:y,y:b,width:B,height:S,has_local_palette:v,palette_offset:L,palette_size:_,data_offset:T,data_length:e-T,transparent_index:h,interlaced:!!P,delay:u,disposal:d});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return p},this.frameInfo=function(x){if(x<0||x>=c.length)throw new Error("Frame index out of range.");return c[x]},this.decodeAndBlitFrameBGRA=function(x,F){var k=this.frameInfo(x),Z=k.width*k.height,ue=new Uint8Array(Z);bT(r,k.data_offset,ue,Z);var ne=k.palette_offset,j=k.transparent_index;j===null&&(j=256);var G=k.width,pe=t-G,q=G,N=4*(k.y*t+k.x),Q=4*((k.y+k.height)*t+k.x),V=N,X=4*pe;k.interlaced===!0&&(X+=4*t*7);for(var Ae=8,te=0,se=ue.length;te<se;++te){var de=ue[te];if(q===0&&(q=G,(V+=X)>=Q&&(X=4*pe+4*t*(Ae-1),V=N+(G+pe)*(Ae<<1),Ae>>=1)),de===j)V+=4;else{var ve=r[ne+3*de],xe=r[ne+3*de+1],Oe=r[ne+3*de+2];F[V++]=Oe,F[V++]=xe,F[V++]=ve,F[V++]=255}--q}},this.decodeAndBlitFrameRGBA=function(x,F){var k=this.frameInfo(x),Z=k.width*k.height,ue=new Uint8Array(Z);bT(r,k.data_offset,ue,Z);var ne=k.palette_offset,j=k.transparent_index;j===null&&(j=256);var G=k.width,pe=t-G,q=G,N=4*(k.y*t+k.x),Q=4*((k.y+k.height)*t+k.x),V=N,X=4*pe;k.interlaced===!0&&(X+=4*t*7);for(var Ae=8,te=0,se=ue.length;te<se;++te){var de=ue[te];if(q===0&&(q=G,(V+=X)>=Q&&(X=4*pe+4*t*(Ae-1),V=N+(G+pe)*(Ae<<1),Ae>>=1)),de===j)V+=4;else{var ve=r[ne+3*de],xe=r[ne+3*de+1],Oe=r[ne+3*de+2];F[V++]=ve,F[V++]=xe,F[V++]=Oe,F[V++]=255}--q}}}function bT(r,e,t,n){for(var i=r[e++],s=1<<i,a=s+1,o=a+1,A=i+1,l=(1<<A)-1,c=0,u=0,h=0,d=r[e++],p=new Int32Array(4096),f=null;;){for(;c<16&&d!==0;)u|=r[e++]<<c,c+=8,d===1?d=r[e++]:--d;if(c<A)break;var y=u&l;if(u>>=A,c-=A,y!==s){if(y===a)break;for(var b=y<o?y:f,B=0,S=b;S>s;)S=p[S]>>8,++B;var C=S;if(h+B+(b!==y?1:0)>n)return void nn.log("Warning, gif stream longer than expected.");t[h++]=C;var P=h+=B;for(b!==y&&(t[h++]=C),S=b;B--;)S=p[S],t[--P]=255&S,S>>=8;f!==null&&o<4096&&(p[o++]=f<<8|C,o>=l+1&&A<12&&(++A,l=l<<1|1)),f=y}else o=a+1,l=(1<<(A=i+1))-1,f=null}return h!==n&&nn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function o_(r){var e,t,n,i,s,a=Math.floor,o=new Array(64),A=new Array(64),l=new Array(64),c=new Array(64),u=new Array(65535),h=new Array(65535),d=new Array(64),p=new Array(64),f=[],y=0,b=7,B=new Array(64),S=new Array(64),C=new Array(64),P=new Array(256),M=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],v=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],x=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(N,Q){for(var V=0,X=0,Ae=new Array,te=1;te<=16;te++){for(var se=1;se<=N[te];se++)Ae[Q[X]]=[],Ae[Q[X]][0]=V,Ae[Q[X]][1]=te,X++,V++;V*=2}return Ae}function ne(N){for(var Q=N[0],V=N[1]-1;V>=0;)Q&1<<V&&(y|=1<<b),V--,--b<0&&(y==255?(j(255),j(0)):j(y),b=7,y=0)}function j(N){f.push(N)}function G(N){j(N>>8&255),j(255&N)}function pe(N,Q,V,X,Ae){for(var te,se=Ae[0],de=Ae[240],ve=(function(ae,Ce){var _e,be,Ie,Qe,Pe,He,At,tt,lt,xt,at=0;for(lt=0;lt<8;++lt){_e=ae[at],be=ae[at+1],Ie=ae[at+2],Qe=ae[at+3],Pe=ae[at+4],He=ae[at+5],At=ae[at+6];var ut=_e+(tt=ae[at+7]),rt=_e-tt,it=be+At,pt=be-At,Rt=Ie+He,Bt=Ie-He,Qt=Qe+Pe,Ut=Qe-Pe,lr=ut+Qt,kr=ut-Qt,Tt=it+Rt,Ft=it-Rt;ae[at]=lr+Tt,ae[at+4]=lr-Tt;var sr=.707106781*(Ft+kr);ae[at+2]=kr+sr,ae[at+6]=kr-sr;var pi=.382683433*((lr=Ut+Bt)-(Ft=pt+rt)),Pn=.5411961*lr+pi,gs=1.306562965*Ft+pi,xi=.707106781*(Tt=Bt+pt),Ot=rt+xi,xa=rt-xi;ae[at+5]=xa+Pn,ae[at+3]=xa-Pn,ae[at+1]=Ot+gs,ae[at+7]=Ot-gs,at+=8}for(at=0,lt=0;lt<8;++lt){_e=ae[at],be=ae[at+8],Ie=ae[at+16],Qe=ae[at+24],Pe=ae[at+32],He=ae[at+40],At=ae[at+48];var Bi=_e+(tt=ae[at+56]),Xi=_e-tt,Ji=be+At,Hr=be-At,Wr=Ie+He,Zn=Ie-He,Ci=Qe+Pe,Ba=Qe-Pe,Zi=Bi+Ci,es=Bi-Ci,Ri=Ji+Wr,ts=Ji-Wr;ae[at]=Zi+Ri,ae[at+32]=Zi-Ri;var Ui=.707106781*(ts+es);ae[at+16]=es+Ui,ae[at+48]=es-Ui;var Mi=.382683433*((Zi=Ba+Zn)-(ts=Hr+Xi)),Oi=.5411961*Zi+Mi,Qi=1.306562965*ts+Mi,Ws=.707106781*(Ri=Zn+Hr),Ys=Xi+Ws,Xs=Xi-Ws;ae[at+40]=Xs+Oi,ae[at+24]=Xs-Oi,ae[at+8]=Ys+Qi,ae[at+56]=Ys-Qi,at++}for(lt=0;lt<64;++lt)xt=ae[lt]*Ce[lt],d[lt]=xt>0?xt+.5|0:xt-.5|0;return d})(N,Q),xe=0;xe<64;++xe)p[L[xe]]=ve[xe];var Oe=p[0]-V;V=p[0],Oe==0?ne(X[0]):(ne(X[h[te=32767+Oe]]),ne(u[te]));for(var Ve=63;Ve>0&&p[Ve]==0;)Ve--;if(Ve==0)return ne(se),V;for(var R,$=1;$<=Ve;){for(var ye=$;p[$]==0&&$<=Ve;)++$;var re=$-ye;if(re>=16){R=re>>4;for(var W=1;W<=R;++W)ne(de);re&=15}te=32767+p[$],ne(Ae[(re<<4)+h[te]]),ne(u[te]),$++}return Ve!=63&&ne(se),V}function q(N){N=Math.min(Math.max(N,1),100),s!=N&&((function(Q){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var Ae=a((V[X]*Q+50)/100);Ae=Math.min(Math.max(Ae,1),255),o[L[X]]=Ae}for(var te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var de=a((te[se]*Q+50)/100);de=Math.min(Math.max(de,1),255),A[L[se]]=de}for(var ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,Oe=0;Oe<8;Oe++)for(var Ve=0;Ve<8;Ve++)l[xe]=1/(o[L[xe]]*ve[Oe]*ve[Ve]*8),c[xe]=1/(A[L[xe]]*ve[Oe]*ve[Ve]*8),xe++})(N<50?Math.floor(5e3/N):Math.floor(200-2*N)),s=N)}this.encode=function(N,Q){Q&&q(Q),f=new Array,y=0,b=7,G(65496),G(65504),G(16),j(74),j(70),j(73),j(70),j(0),j(1),j(1),j(0),G(1),G(1),j(0),j(0),(function(){G(65499),G(132),j(0);for(var be=0;be<64;be++)j(o[be]);j(1);for(var Ie=0;Ie<64;Ie++)j(A[Ie])})(),(function(be,Ie){G(65472),G(17),j(8),G(Ie),G(be),j(3),j(1),j(17),j(0),j(2),j(17),j(1),j(3),j(17),j(1)})(N.width,N.height),(function(){G(65476),G(418),j(0);for(var be=0;be<16;be++)j(_[be+1]);for(var Ie=0;Ie<=11;Ie++)j(v[Ie]);j(16);for(var Qe=0;Qe<16;Qe++)j(T[Qe+1]);for(var Pe=0;Pe<=161;Pe++)j(E[Pe]);j(1);for(var He=0;He<16;He++)j(x[He+1]);for(var At=0;At<=11;At++)j(F[At]);j(17);for(var tt=0;tt<16;tt++)j(k[tt+1]);for(var lt=0;lt<=161;lt++)j(Z[lt])})(),G(65498),G(12),j(3),j(1),j(0),j(2),j(17),j(3),j(17),j(0),j(63),j(0);var V=0,X=0,Ae=0;y=0,b=7,this.encode.displayName="_encode_";for(var te,se,de,ve,xe,Oe,Ve,R,$,ye=N.data,re=N.width,W=N.height,ae=4*re,Ce=0;Ce<W;){for(te=0;te<ae;){for(xe=ae*Ce+te,Ve=-1,R=0,$=0;$<64;$++)Oe=xe+(R=$>>3)*ae+(Ve=4*(7&$)),Ce+R>=W&&(Oe-=ae*(Ce+1+R-W)),te+Ve>=ae&&(Oe-=te+Ve-ae+4),se=ye[Oe++],de=ye[Oe++],ve=ye[Oe++],B[$]=(M[se]+M[de+256|0]+M[ve+512|0]>>16)-128,S[$]=(M[se+768|0]+M[de+1024|0]+M[ve+1280|0]>>16)-128,C[$]=(M[se+1280|0]+M[de+1536|0]+M[ve+1792|0]>>16)-128;V=pe(B,l,V,e,n),X=pe(S,c,X,t,i),Ae=pe(C,c,Ae,t,i),te+=32}Ce+=8}if(b>=0){var _e=[];_e[1]=b+1,_e[0]=(1<<b+1)-1,ne(_e)}return G(65497),new Uint8Array(f)},r=r||50,(function(){for(var N=String.fromCharCode,Q=0;Q<256;Q++)P[Q]=N(Q)})(),e=ue(_,v),t=ue(x,F),n=ue(T,E),i=ue(k,Z),(function(){for(var N=1,Q=2,V=1;V<=15;V++){for(var X=N;X<Q;X++)h[32767+X]=V,u[32767+X]=[],u[32767+X][1]=V,u[32767+X][0]=X;for(var Ae=-(Q-1);Ae<=-N;Ae++)h[32767+Ae]=V,u[32767+Ae]=[],u[32767+Ae][1]=V,u[32767+Ae][0]=Q-1+Ae;N<<=1,Q<<=1}})(),(function(){for(var N=0;N<256;N++)M[N]=19595*N,M[N+256|0]=38470*N,M[N+512|0]=7471*N+32768,M[N+768|0]=-11059*N,M[N+1024|0]=-21709*N,M[N+1280|0]=32768*N+8421375,M[N+1536|0]=-27439*N,M[N+1792|0]=-5329*N})(),q(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wo(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function wT(r){function e(v){if(!v)throw Error("assert :P")}function t(v,T,E){for(var x=0;4>x;x++)if(v[T+x]!=E.charCodeAt(x))return!0;return!1}function n(v,T,E,x,F){for(var k=0;k<F;k++)v[T+k]=E[x+k]}function i(v,T,E,x){for(var F=0;F<x;F++)v[T+F]=E}function s(v){return new Int32Array(v)}function a(v,T){for(var E=[],x=0;x<v;x++)E.push(new T);return E}function o(v,T){var E=[];return(function x(F,k,Z){for(var ue=Z[k],ne=0;ne<ue&&(F.push(Z.length>k+1?[]:new T),!(Z.length<k+1));ne++)x(F[ne],k+1,Z)})(E,0,v),E}var A=function(){var v=this;function T(g,w){for(var D=1<<w-1>>>0;g&D;)D>>>=1;return D?(g&D-1)+D:g}function E(g,w,D,O,z){e(!(O%D));do g[w+(O-=D)]=z;while(0<O)}function x(g,w,D,O,z){if(e(2328>=z),512>=z)var Y=s(512);else if((Y=s(z))==null)return 0;return(function(ee,ie,ce,fe,Be,De){var ge,Ee,Fe=ie,$e=1<<ce,Ne=s(16),Ge=s(16);for(e(Be!=0),e(fe!=null),e(ee!=null),e(0<ce),Ee=0;Ee<Be;++Ee){if(15<fe[Ee])return 0;++Ne[fe[Ee]]}if(Ne[0]==Be)return 0;for(Ge[1]=0,ge=1;15>ge;++ge){if(Ne[ge]>1<<ge)return 0;Ge[ge+1]=Ge[ge]+Ne[ge]}for(Ee=0;Ee<Be;++Ee)ge=fe[Ee],0<fe[Ee]&&(De[Ge[ge]++]=Ee);if(Ge[15]==1)return(fe=new F).g=0,fe.value=De[0],E(ee,Fe,1,$e,fe),$e;var Ke,Ze=-1,Ye=$e-1,Dt=0,vt=1,ar=1,It=1<<ce;for(Ee=0,ge=1,Be=2;ge<=ce;++ge,Be<<=1){if(vt+=ar<<=1,0>(ar-=Ne[ge]))return 0;for(;0<Ne[ge];--Ne[ge])(fe=new F).g=ge,fe.value=De[Ee++],E(ee,Fe+Dt,Be,It,fe),Dt=T(Dt,ge)}for(ge=ce+1,Be=2;15>=ge;++ge,Be<<=1){if(vt+=ar<<=1,0>(ar-=Ne[ge]))return 0;for(;0<Ne[ge];--Ne[ge]){if(fe=new F,(Dt&Ye)!=Ze){for(Fe+=It,Ke=1<<(Ze=ge)-ce;15>Ze&&!(0>=(Ke-=Ne[Ze]));)++Ze,Ke<<=1;$e+=It=1<<(Ke=Ze-ce),ee[ie+(Ze=Dt&Ye)].g=Ke+ce,ee[ie+Ze].value=Fe-ie-Ze}fe.g=ge-ce,fe.value=De[Ee++],E(ee,Fe+(Dt>>ce),Be,It,fe),Dt=T(Dt,ge)}}return vt!=2*Ge[15]-1?0:$e})(g,w,D,O,z,Y)}function F(){this.value=this.g=0}function k(){this.value=this.g=0}function Z(){this.G=a(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(bu,k)}function ue(g,w,D,O){e(g!=null),e(w!=null),e(2147483648>O),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=D,g.Jd=w,g.Yc=D+O,g.Zc=4<=O?D+O-4+1:D,se(g)}function ne(g,w){for(var D=0;0<w--;)D|=ve(g,128)<<w;return D}function j(g,w){var D=ne(g,w);return de(g)?-D:D}function G(g,w,D,O){var z,Y=0;for(e(g!=null),e(w!=null),e(4294967288>O),g.Sb=O,g.Ra=0,g.u=0,g.h=0,4<O&&(O=4),z=0;z<O;++z)Y+=w[D+z]<<8*z;g.Ra=Y,g.bb=O,g.oa=w,g.pa=D}function pe(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Ml-8>>>0,++g.bb,g.u-=8;X(g)&&(g.h=1,g.u=0)}function q(g,w){if(e(0<=w),!g.h&&w<=ka){var D=V(g)&Ia[w];return g.u+=w,pe(g),D}return g.h=1,g.u=0}function N(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(g){return g.Ra>>>(g.u&Ml-1)>>>0}function X(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Ml}function Ae(g,w){g.u=w,g.h=X(g)}function te(g){g.u>=VA&&(e(g.u>=VA),pe(g))}function se(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function de(g){return ne(g,1)}function ve(g,w){var D=g.Ca;0>g.b&&se(g);var O=g.b,z=D*w>>>8,Y=(g.I>>>O>z)+0;for(Y?(D-=z,g.I-=z+1<<O>>>0):D=z+1,O=D,z=0;256<=O;)z+=8,O>>=8;return O=7^z+Ol[O],g.b-=O,g.Ca=(D<<O)-1,Y}function xe(g,w,D){g[w+0]=D>>24&255,g[w+1]=D>>16&255,g[w+2]=D>>8&255,g[w+3]=255&D}function Oe(g,w){return g[w+0]|g[w+1]<<8}function Ve(g,w){return Oe(g,w)|g[w+2]<<16}function R(g,w){return Oe(g,w)|Oe(g,w+2)<<16}function $(g,w){var D=1<<w;return e(g!=null),e(0<w),g.X=s(D),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function ye(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),n(w.X,0,g.X,0,1<<w.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function W(g,w,D,O){e(D!=null),e(O!=null);var z=D[0],Y=O[0];return z==0&&(z=(g*Y+w/2)/w),Y==0&&(Y=(w*z+g/2)/g),0>=z||0>=Y?0:(D[0]=z,O[0]=Y,1)}function ae(g,w){return g+(1<<w)-1>>>w}function Ce(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function _e(g,w){v[w]=function(D,O,z,Y,ee,ie,ce){var fe;for(fe=0;fe<ee;++fe){var Be=v[g](ie[ce+fe-1],z,Y+fe);ie[ce+fe]=Ce(D[O+fe],Be)}}}function be(){this.ud=this.hd=this.jd=0}function Ie(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function Qe(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Pe(g,w){return Qe(g+(g-w+.5>>1))}function He(g,w,D){return Math.abs(w-D)-Math.abs(g-D)}function At(g,w,D,O,z,Y,ee){for(O=Y[ee-1],D=0;D<z;++D)Y[ee+D]=O=Ce(g[w+D],O)}function tt(g,w,D,O,z){var Y;for(Y=0;Y<D;++Y){var ee=g[w+Y],ie=ee>>8&255,ce=16711935&(ce=(ce=16711935&ee)+((ie<<16)+ie));O[z+Y]=(4278255360&ee)+ce>>>0}}function lt(g,w){w.jd=255&g,w.hd=g>>8&255,w.ud=g>>16&255}function xt(g,w,D,O,z,Y){var ee;for(ee=0;ee<O;++ee){var ie=w[D+ee],ce=ie>>>8,fe=ie,Be=255&(Be=(Be=ie>>>16)+((g.jd<<24>>24)*(ce<<24>>24)>>>5));fe=255&(fe=(fe+=(g.hd<<24>>24)*(ce<<24>>24)>>>5)+((g.ud<<24>>24)*(Be<<24>>24)>>>5)),z[Y+ee]=(4278255360&ie)+(Be<<16)+fe}}function at(g,w,D,O,z){v[w]=function(Y,ee,ie,ce,fe,Be,De,ge,Ee){for(ce=De;ce<ge;++ce)for(De=0;De<Ee;++De)fe[Be++]=z(ie[O(Y[ee++])])},v[g]=function(Y,ee,ie,ce,fe,Be,De){var ge=8>>Y.b,Ee=Y.Ea,Fe=Y.K[0],$e=Y.w;if(8>ge)for(Y=(1<<Y.b)-1,$e=(1<<ge)-1;ee<ie;++ee){var Ne,Ge=0;for(Ne=0;Ne<Ee;++Ne)Ne&Y||(Ge=O(ce[fe++])),Be[De++]=z(Fe[Ge&$e]),Ge>>=ge}else v["VP8LMapColor"+D](ce,fe,Fe,$e,Be,De,ee,ie,Ee)}}function ut(g,w,D,O,z){for(D=w+D;w<D;){var Y=g[w++];O[z++]=Y>>16&255,O[z++]=Y>>8&255,O[z++]=255&Y}}function rt(g,w,D,O,z){for(D=w+D;w<D;){var Y=g[w++];O[z++]=Y>>16&255,O[z++]=Y>>8&255,O[z++]=255&Y,O[z++]=Y>>24&255}}function it(g,w,D,O,z){for(D=w+D;w<D;){var Y=(ee=g[w++])>>16&240|ee>>12&15,ee=240&ee|ee>>28&15;O[z++]=Y,O[z++]=ee}}function pt(g,w,D,O,z){for(D=w+D;w<D;){var Y=(ee=g[w++])>>16&248|ee>>13&7,ee=ee>>5&224|ee>>3&31;O[z++]=Y,O[z++]=ee}}function Rt(g,w,D,O,z){for(D=w+D;w<D;){var Y=g[w++];O[z++]=255&Y,O[z++]=Y>>8&255,O[z++]=Y>>16&255}}function Bt(g,w,D,O,z,Y){if(Y==0)for(D=w+D;w<D;)xe(O,((Y=g[w++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),z+=32;else n(O,z,g,w,D)}function Qt(g,w){v[w][0]=v[g+"0"],v[w][1]=v[g+"1"],v[w][2]=v[g+"2"],v[w][3]=v[g+"3"],v[w][4]=v[g+"4"],v[w][5]=v[g+"5"],v[w][6]=v[g+"6"],v[w][7]=v[g+"7"],v[w][8]=v[g+"8"],v[w][9]=v[g+"9"],v[w][10]=v[g+"10"],v[w][11]=v[g+"11"],v[w][12]=v[g+"12"],v[w][13]=v[g+"13"],v[w][14]=v[g+"0"],v[w][15]=v[g+"0"]}function Ut(g){return g==Qv||g==Hv||g==g0||g==Vv}function lr(){this.eb=[],this.size=this.A=this.fb=0}function kr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new lr,this.f.kb=new kr,this.sd=null}function Ft(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function sr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pi(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Pn(g,w){var D=g.T,O=w.ba.f.RGBA,z=O.eb,Y=O.fb+g.ka*O.A,ee=to[w.ba.S],ie=g.y,ce=g.O,fe=g.f,Be=g.N,De=g.ea,ge=g.W,Ee=w.cc,Fe=w.dc,$e=w.Mc,Ne=w.Nc,Ge=g.ka,Ke=g.ka+g.T,Ze=g.U,Ye=Ze+1>>1;for(Ge==0?ee(ie,ce,null,null,fe,Be,De,ge,fe,Be,De,ge,z,Y,null,null,Ze):(ee(w.ec,w.fc,ie,ce,Ee,Fe,$e,Ne,fe,Be,De,ge,z,Y-O.A,z,Y,Ze),++D);Ge+2<Ke;Ge+=2)Ee=fe,Fe=Be,$e=De,Ne=ge,Be+=g.Rc,ge+=g.Rc,Y+=2*O.A,ee(ie,(ce+=2*g.fa)-g.fa,ie,ce,Ee,Fe,$e,Ne,fe,Be,De,ge,z,Y-O.A,z,Y,Ze);return ce+=g.fa,g.j+Ke<g.o?(n(w.ec,w.fc,ie,ce,Ze),n(w.cc,w.dc,fe,Be,Ye),n(w.Mc,w.Nc,De,ge,Ye),D--):1&Ke||ee(ie,ce,null,null,fe,Be,De,ge,fe,Be,De,ge,z,Y+O.A,null,null,Ze),D}function gs(g,w,D){var O=g.F,z=[g.J];if(O!=null){var Y=g.U,ee=w.ba.S,ie=ee==f0||ee==g0;w=w.ba.f.RGBA;var ce=[0],fe=g.ka;ce[0]=g.T,g.Kb&&(fe==0?--ce[0]:(--fe,z[0]-=g.width),g.j+g.ka+g.T==g.o&&(ce[0]=g.o-g.j-fe));var Be=w.eb;fe=w.fb+fe*w.A,g=$C(O,z[0],g.width,Y,ce,Be,fe+(ie?0:3),w.A),e(D==ce),g&&Ut(ee)&&eg(Be,fe,ie,Y,ce,w.A)}return 0}function xi(g){var w=g.ma,D=w.ba.S,O=11>D,z=D==d0||D==h0||D==f0||D==Ov||D==12||Ut(D);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Kf(w.Oa,g,z?11:12))return 0;if(z&&Ut(D)&&st(),g.da)alert("todo:use_scaling");else{if(O){if(w.Ib=pi,g.Kb){if(D=g.U+1>>1,w.memory=s(g.U+2*D),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+D,w.Ib=Pn,st()}}else alert("todo:EmitYUV");z&&(w.Jb=gs,O&&Te())}if(O&&!sE){for(g=0;256>g;++g)JO[g]=89858*(g-128)+m0>>p0,tQ[g]=-22014*(g-128)+m0,eQ[g]=-45773*(g-128),ZO[g]=113618*(g-128)+m0>>p0;for(g=rg;g<Gv;++g)w=76283*(g-16)+m0>>p0,rQ[g-rg]=Hn(w,255),nQ[g-rg]=Hn(w+8>>4,15);sE=1}return 1}function Ot(g){var w=g.ma,D=g.U,O=g.T;return e(!(1&g.ka)),0>=D||0>=O?0:(D=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,D),w.Dc+=D,1)}function xa(g){g.ma.memory=null}function Bi(g,w,D,O){return q(g,8)!=47?0:(w[0]=q(g,14)+1,D[0]=q(g,14)+1,O[0]=q(g,1),q(g,3)!=0?0:!g.h)}function Xi(g,w){if(4>g)return g+1;var D=g-2>>1;return(2+(1&g)<<D)+q(w,D)+1}function Ji(g,w){return 120<w?w-120:1<=(D=((D=MO[w-1])>>4)*g+(8-(15&D)))?D:1;var D}function Hr(g,w,D){var O=V(D),z=g[w+=255&O].g-8;return 0<z&&(Ae(D,D.u+8),O=V(D),w+=g[w].value,w+=O&(1<<z)-1),Ae(D,D.u+g[w].g),g[w].value}function Wr(g,w,D){return D.g+=g.g,D.value+=g.value<<w>>>0,e(8>=D.g),g.g}function Zn(g,w,D){var O=g.xc;return e((w=O==0?0:g.vc[g.md*(D>>O)+(w>>O)])<g.Wb),g.Ya[w]}function Ci(g,w,D,O){var z=g.ab,Y=g.c*w,ee=g.C;w=ee+w;var ie=D,ce=O;for(O=g.Ta,D=g.Ua;0<z--;){var fe=g.gc[z],Be=ee,De=w,ge=ie,Ee=ce,Fe=(ce=O,ie=D,fe.Ea);switch(e(Be<De),e(De<=fe.nc),fe.hc){case 2:ti(ge,Ee,(De-Be)*Fe,ce,ie);break;case 0:var $e=Be,Ne=De,Ge=ce,Ke=ie,Ze=(It=fe).Ea;$e==0&&(qf(ge,Ee,null,null,1,Ge,Ke),At(ge,Ee+1,0,0,Ze-1,Ge,Ke+1),Ee+=Ze,Ke+=Ze,++$e);for(var Ye=1<<It.b,Dt=Ye-1,vt=ae(Ze,It.b),ar=It.K,It=It.w+($e>>It.b)*vt;$e<Ne;){var wr=ar,Ii=It,or=1;for(qd(ge,Ee,Ge,Ke-Ze,1,Ge,Ke);or<Ze;){var kt=(or&~Dt)+Ye;kt>Ze&&(kt=Ze),(0,Yf[wr[Ii++]>>8&15])(ge,Ee+ +or,Ge,Ke+or-Ze,kt-or,Ge,Ke+or),or=kt}Ee+=Ze,Ke+=Ze,++$e&Dt||(It+=vt)}De!=fe.nc&&n(ce,ie-Fe,ce,ie+(De-Be-1)*Fe,Fe);break;case 1:for(Fe=ge,Ne=Ee,Ze=(ge=fe.Ea)-(Ke=ge&~(Ge=(Ee=1<<fe.b)-1)),$e=ae(ge,fe.b),Ye=fe.K,fe=fe.w+(Be>>fe.b)*$e;Be<De;){for(Dt=Ye,vt=fe,ar=new be,It=Ne+Ke,wr=Ne+ge;Ne<It;)lt(Dt[vt++],ar),Xf(ar,Fe,Ne,Ee,ce,ie),Ne+=Ee,ie+=Ee;Ne<wr&&(lt(Dt[vt++],ar),Xf(ar,Fe,Ne,Ze,ce,ie),Ne+=Ze,ie+=Ze),++Be&Ge||(fe+=$e)}break;case 3:if(ge==ce&&Ee==ie&&0<fe.b){for(Ne=ce,ge=Fe=ie+(De-Be)*Fe-(Ke=(De-Be)*ae(fe.Ea,fe.b)),Ee=ce,Ge=ie,$e=[],Ke=(Ze=Ke)-1;0<=Ke;--Ke)$e[Ke]=Ee[Ge+Ke];for(Ke=Ze-1;0<=Ke;--Ke)Ne[ge+Ke]=$e[Ke];A0(fe,Be,De,ce,Fe,ce,ie)}else A0(fe,Be,De,ge,Ee,ce,ie)}ie=O,ce=D}ce!=D&&n(O,D,ie,ce,Y)}function Ba(g,w){var D=g.V,O=g.Ba+g.c*g.C,z=w-g.C;if(e(w<=g.l.o),e(16>=z),0<z){var Y=g.l,ee=g.Ta,ie=g.Ua,ce=Y.width;if(Ci(g,z,D,O),z=ie=[ie],e((D=g.C)<(O=w)),e(Y.v<Y.va),O>Y.o&&(O=Y.o),D<Y.j){var fe=Y.j-D;D=Y.j,z[0]+=fe*ce}if(D>=O?D=0:(z[0]+=4*Y.v,Y.ka=D-Y.j,Y.U=Y.va-Y.v,Y.T=O-D,D=1),D){if(ie=ie[0],11>(D=g.ca).S){var Be=D.f.RGBA,De=(O=D.S,z=Y.U,Y=Y.T,fe=Be.eb,Be.A),ge=Y;for(Be=Be.fb+g.Ma*Be.A;0<ge--;){var Ee=ee,Fe=ie,$e=z,Ne=fe,Ge=Be;switch(O){case u0:Jf(Ee,Fe,$e,Ne,Ge);break;case d0:Ql(Ee,Fe,$e,Ne,Ge);break;case Qv:Ql(Ee,Fe,$e,Ne,Ge),eg(Ne,Ge,0,$e,1,0);break;case YC:wu(Ee,Fe,$e,Ne,Ge);break;case h0:Bt(Ee,Fe,$e,Ne,Ge,1);break;case Hv:Bt(Ee,Fe,$e,Ne,Ge,1),eg(Ne,Ge,0,$e,1,0);break;case f0:Bt(Ee,Fe,$e,Ne,Ge,0);break;case g0:Bt(Ee,Fe,$e,Ne,Ge,0),eg(Ne,Ge,1,$e,1,0);break;case Ov:Hl(Ee,Fe,$e,Ne,Ge);break;case Vv:Hl(Ee,Fe,$e,Ne,Ge),VC(Ne,Ge,$e,1,0);break;case XC:Vl(Ee,Fe,$e,Ne,Ge);break;default:e(0)}ie+=ce,Be+=De}g.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=D.height)}}g.C=w,e(g.C<=g.i)}function Zi(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var D=g.Ya[w].G,O=g.Ya[w].H;if(0<D[1][O[1]+0].g||0<D[2][O[2]+0].g||0<D[3][O[3]+0].g)return 0}return 1}function es(g,w,D,O,z,Y){if(g.Z!=0){var ee=g.qd,ie=g.rd;for(e(Gl[g.Z]!=null);w<D;++w)Gl[g.Z](ee,ie,O,z,O,z,Y),ee=O,ie=z,z+=Y;g.qd=ee,g.rd=ie}}function Ri(g,w){var D=g.l.ma,O=D.Z==0||D.Z==1?g.l.j:g.C;if(O=g.C<O?O:g.C,e(w<=g.l.o),w>O){var z=g.l.width,Y=D.ca,ee=D.tb+z*O,ie=g.V,ce=g.Ba+g.c*O,fe=g.gc;e(g.ab==1),e(fe[0].hc==3),qo(fe[0],O,w,ie,ce,Y,ee),es(D,O,w,Y,ee,z)}g.C=g.Ma=w}function ts(g,w,D,O,z,Y,ee){var ie=g.$/O,ce=g.$%O,fe=g.m,Be=g.s,De=D+g.$,ge=De;z=D+O*z;var Ee=D+O*Y,Fe=280+Be.ua,$e=g.Pb?ie:16777216,Ne=0<Be.ua?Be.Wa:null,Ge=Be.wc,Ke=De<Ee?Zn(Be,ce,ie):null;e(g.C<Y),e(Ee<=z);var Ze=!1;e:for(;;){for(;Ze||De<Ee;){var Ye=0;if(ie>=$e){var Dt=De-D;e(($e=g).Pb),$e.wd=$e.m,$e.xd=Dt,0<$e.s.ua&&ye($e.s.Wa,$e.s.vb),$e=ie+QO}if(ce&Ge||(Ke=Zn(Be,ce,ie)),e(Ke!=null),Ke.Qb&&(w[De]=Ke.qb,Ze=!0),!Ze)if(te(fe),Ke.jc){Ye=fe,Dt=w;var vt=De,ar=Ke.pd[V(Ye)&bu-1];e(Ke.jc),256>ar.g?(Ae(Ye,Ye.u+ar.g),Dt[vt]=ar.value,Ye=0):(Ae(Ye,Ye.u+ar.g-256),e(256<=ar.value),Ye=ar.value),Ye==0&&(Ze=!0)}else Ye=Hr(Ke.G[0],Ke.H[0],fe);if(fe.h)break;if(Ze||256>Ye){if(!Ze)if(Ke.nd)w[De]=(Ke.qb|Ye<<8)>>>0;else{if(te(fe),Ze=Hr(Ke.G[1],Ke.H[1],fe),te(fe),Dt=Hr(Ke.G[2],Ke.H[2],fe),vt=Hr(Ke.G[3],Ke.H[3],fe),fe.h)break;w[De]=(vt<<24|Ze<<16|Ye<<8|Dt)>>>0}if(Ze=!1,++De,++ce>=O&&(ce=0,++ie,ee!=null&&ie<=Y&&!(ie%16)&&ee(g,ie),Ne!=null))for(;ge<De;)Ye=w[ge++],Ne.X[(506832829*Ye&4294967295)>>>Ne.Mb]=Ye}else if(280>Ye){if(Ye=Xi(Ye-256,fe),Dt=Hr(Ke.G[4],Ke.H[4],fe),te(fe),Dt=Ji(O,Dt=Xi(Dt,fe)),fe.h)break;if(De-D<Dt||z-De<Ye)break e;for(vt=0;vt<Ye;++vt)w[De+vt]=w[De+vt-Dt];for(De+=Ye,ce+=Ye;ce>=O;)ce-=O,++ie,ee!=null&&ie<=Y&&!(ie%16)&&ee(g,ie);if(e(De<=z),ce&Ge&&(Ke=Zn(Be,ce,ie)),Ne!=null)for(;ge<De;)Ye=w[ge++],Ne.X[(506832829*Ye&4294967295)>>>Ne.Mb]=Ye}else{if(!(Ye<Fe))break e;for(Ze=Ye-280,e(Ne!=null);ge<De;)Ye=w[ge++],Ne.X[(506832829*Ye&4294967295)>>>Ne.Mb]=Ye;Ye=De,e(!(Ze>>>(Dt=Ne).Xa)),w[Ye]=Dt.X[Ze],Ze=!0}Ze||e(fe.h==X(fe))}if(g.Pb&&fe.h&&De<z)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&ye(g.s.vb,g.s.Wa);else{if(fe.h)break e;ee!=null&&ee(g,ie>Y?Y:ie),g.a=0,g.$=De-D}return 1}return g.a=3,0}function Ui(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function Mi(){var g=new St;return g==null?null:(g.a=0,g.xb=eE,Qt("Predictor","VP8LPredictors"),Qt("Predictor","VP8LPredictors_C"),Qt("PredictorAdd","VP8LPredictorsAdd"),Qt("PredictorAdd","VP8LPredictorsAdd_C"),ti=tt,Xf=xt,Jf=ut,Ql=rt,Hl=it,Vl=pt,wu=Rt,v.VP8LMapColor32b=zo,v.VP8LMapColor8b=Wf,g)}function Oi(g,w,D,O,z){var Y=1,ee=[g],ie=[w],ce=O.m,fe=O.s,Be=null,De=0;e:for(;;){if(D)for(;Y&&q(ce,1);){var ge=ee,Ee=ie,Fe=O,$e=1,Ne=Fe.m,Ge=Fe.gc[Fe.ab],Ke=q(Ne,2);if(Fe.Oc&1<<Ke)Y=0;else{switch(Fe.Oc|=1<<Ke,Ge.hc=Ke,Ge.Ea=ge[0],Ge.nc=Ee[0],Ge.K=[null],++Fe.ab,e(4>=Fe.ab),Ke){case 0:case 1:Ge.b=q(Ne,3)+2,$e=Oi(ae(Ge.Ea,Ge.b),ae(Ge.nc,Ge.b),0,Fe,Ge.K),Ge.K=Ge.K[0];break;case 3:var Ze,Ye=q(Ne,8)+1,Dt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(ge[0]=ae(Ge.Ea,Dt),Ge.b=Dt,Ze=$e=Oi(Ye,1,0,Fe,Ge.K)){var vt,ar=Ye,It=Ge,wr=1<<(8>>It.b),Ii=s(wr);if(Ii==null)Ze=0;else{var or=It.K[0],kt=It.w;for(Ii[0]=It.K[0][0],vt=1;vt<1*ar;++vt)Ii[vt]=Ce(or[kt+vt],Ii[vt-1]);for(;vt<4*wr;++vt)Ii[vt]=0;It.K[0]=null,It.K[0]=Ii,Ze=1}}$e=Ze;break;case 2:break;default:e(0)}Y=$e}}if(ee=ee[0],ie=ie[0],Y&&q(ce,1)&&!(Y=1<=(De=q(ce,4))&&11>=De)){O.a=3;break e}var ct;if(ct=Y)t:{var ni,tr,xr,mn=O,is=ee,Us=ie,Vn=De,ys=D,Ms=mn.m,ki=mn.s,Er=[null],$r=1,$n=0,jr=OO[Vn];r:for(;;){if(ys&&q(Ms,1)){var ss=q(Ms,3)+2,yo=ae(is,ss),ii=ae(Us,ss),aa=yo*ii;if(!Oi(yo,ii,0,mn,Er))break r;for(Er=Er[0],ki.xc=ss,ni=0;ni<aa;++ni){var rn=Er[ni]>>8&65535;Er[ni]=rn,rn>=$r&&($r=rn+1)}}if(Ms.h)break r;for(tr=0;5>tr;++tr){var Ti=JC[tr];!tr&&0<Vn&&(Ti+=1<<Vn),$n<Ti&&($n=Ti)}var Fa=a($r*jr,F),Os=$r,La=a(Os,Z);if(La==null)var Pa=null;else e(65536>=Os),Pa=La;var oa=s($n);if(Pa==null||oa==null||Fa==null){mn.a=1;break r}var Na=Fa;for(ni=xr=0;ni<$r;++ni){var cn=Pa[ni],Da=cn.G,bo=cn.H,_u=0,GA=1,as=0;for(tr=0;5>tr;++tr){Ti=JC[tr],Da[tr]=Na,bo[tr]=xr,!tr&&0<Vn&&(Ti+=1<<Vn);i:{var b0,Kv=Ti,w0=mn,ng=oa,aQ=Na,oQ=xr,zv=0,Kl=w0.m,AQ=q(Kl,1);if(i(ng,0,0,Kv),AQ){var lQ=q(Kl,1)+1,cQ=q(Kl,1),AE=q(Kl,cQ==0?1:8);ng[AE]=1,lQ==2&&(ng[AE=q(Kl,8)]=1);var v0=1}else{var lE=s(19),cE=q(Kl,4)+4;if(19<cE){w0.a=3;var _0=0;break i}for(b0=0;b0<cE;++b0)lE[UO[b0]]=q(Kl,3);var qv=void 0,ig=void 0,uE=w0,uQ=lE,x0=Kv,dE=ng,Wv=0,zl=uE.m,hE=8,fE=a(128,F);n:for(;x(fE,0,7,uQ,19);){if(q(zl,1)){var dQ=2+2*q(zl,3);if((qv=2+q(zl,dQ))>x0)break n}else qv=x0;for(ig=0;ig<x0&&qv--;){te(zl);var gE=fE[0+(127&V(zl))];Ae(zl,zl.u+gE.g);var Yd=gE.value;if(16>Yd)dE[ig++]=Yd,Yd!=0&&(hE=Yd);else{var hQ=Yd==16,pE=Yd-16,fQ=DO[pE],mE=q(zl,NO[pE])+fQ;if(ig+mE>x0)break n;for(var gQ=hQ?hE:0;0<mE--;)dE[ig++]=gQ}}Wv=1;break n}Wv||(uE.a=3),v0=Wv}(v0=v0&&!Kl.h)&&(zv=x(aQ,oQ,8,ng,Kv)),v0&&zv!=0?_0=zv:(w0.a=3,_0=0)}if(_0==0)break r;if(GA&&RO[tr]==1&&(GA=Na[xr].g==0),_u+=Na[xr].g,xr+=_0,3>=tr){var sg,Yv=oa[0];for(sg=1;sg<Ti;++sg)oa[sg]>Yv&&(Yv=oa[sg]);as+=Yv}}if(cn.nd=GA,cn.Qb=0,GA&&(cn.qb=(Da[3][bo[3]+0].value<<24|Da[1][bo[1]+0].value<<16|Da[2][bo[2]+0].value)>>>0,_u==0&&256>Da[0][bo[0]+0].value&&(cn.Qb=1,cn.qb+=Da[0][bo[0]+0].value<<8)),cn.jc=!cn.Qb&&6>as,cn.jc){var B0,KA=cn;for(B0=0;B0<bu;++B0){var ql=B0,Wl=KA.pd[ql],C0=KA.G[0][KA.H[0]+ql];256<=C0.value?(Wl.g=C0.g+256,Wl.value=C0.value):(Wl.g=0,Wl.value=0,ql>>=Wr(C0,8,Wl),ql>>=Wr(KA.G[1][KA.H[1]+ql],16,Wl),ql>>=Wr(KA.G[2][KA.H[2]+ql],0,Wl),Wr(KA.G[3][KA.H[3]+ql],24,Wl))}}}ki.vc=Er,ki.Wb=$r,ki.Ya=Pa,ki.yc=Fa,ct=1;break t}ct=0}if(!(Y=ct)){O.a=3;break e}if(0<De){if(fe.ua=1<<De,!$(fe.Wa,De)){O.a=1,Y=0;break e}}else fe.ua=0;var Xv=O,yE=ee,pQ=ie,Jv=Xv.s,Zv=Jv.xc;if(Xv.c=yE,Xv.i=pQ,Jv.md=ae(yE,Zv),Jv.wc=Zv==0?-1:(1<<Zv)-1,D){O.xb=zO;break e}if((Be=s(ee*ie))==null){O.a=1,Y=0;break e}Y=(Y=ts(O,Be,0,ee,ie,ie,null))&&!ce.h;break e}return Y?(z!=null?z[0]=Be:(e(Be==null),e(D)),O.$=0,D||Ui(fe)):Ui(fe),Y}function Qi(g,w){var D=g.c*g.i,O=D+w+16*w;return e(g.c<=w),g.V=s(O),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+D+w,1)}function Ws(g,w){var D=g.C,O=w-D,z=g.V,Y=g.Ba+g.c*D;for(e(w<=g.l.o);0<O;){var ee=16<O?16:O,ie=g.l.ma,ce=g.l.width,fe=ce*ee,Be=ie.ca,De=ie.tb+ce*D,ge=g.Ta,Ee=g.Ua;Ci(g,ee,z,Y),jC(ge,Ee,Be,De,fe),es(ie,D,D+ee,Be,De,ce),O-=ee,z+=ee*g.c,D+=ee}e(D==w),g.C=g.Ma=w}function Ys(){this.ub=this.yd=this.td=this.Rb=0}function Xs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ca(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Js(){this.Yb=(function(){var g=[];return(function w(D,O,z){for(var Y=z[O],ee=0;ee<Y&&(D.push(z.length>O+1?[]:0),!(z.length<O+1));ee++)w(D[ee],O+1,z)})(g,0,[3,11]),g})()}function Ei(){this.jb=s(3),this.Wc=o([4,8],Js),this.Xc=o([4,17],Js)}function Zs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Cn(){this.ld=this.La=this.dd=this.tc=0}function Hi(){this.Na=this.la=0}function ea(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function mi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rs(){this.uc=this.M=this.Nb=0,this.wa=Array(new Cn),this.Y=0,this.ya=Array(new mi),this.aa=0,this.l=new Ea}function Oo(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Qo(){this.cb=this.a=0,this.sc="",this.m=new N,this.Od=new Ys,this.Kc=new Xs,this.ed=new Zs,this.Qa=new Ca,this.Ic=this.$c=this.Aa=0,this.D=new rs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,N),this.ia=0,this.pb=a(4,ea),this.Pa=new Ei,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Oo),this.Hd=0,this.rb=Array(new Hi),this.sb=0,this.wa=Array(new Cn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new mi),this.L=this.aa=0,this.gd=o([4,2],Cn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ea(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function En(){var g=new Qo;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,tg||(tg=ns)),g}function gr(g,w,D){return g.a==0&&(g.a=w,g.sc=D,g.cb=0),0}function ta(g,w,D){return 3<=D&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function ra(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return gr(g,2,"null VP8Io passed to VP8GetHeaders()");var D=w.data,O=w.w,z=w.ha;if(4>z)return gr(g,7,"Truncated header.");var Y=D[O+0]|D[O+1]<<8|D[O+2]<<16,ee=g.Od;if(ee.Rb=!(1&Y),ee.td=Y>>1&7,ee.yd=Y>>4&1,ee.ub=Y>>5,3<ee.td)return gr(g,3,"Incorrect keyframe parameters.");if(!ee.yd)return gr(g,4,"Frame not displayable.");O+=3,z-=3;var ie=g.Kc;if(ee.Rb){if(7>z)return gr(g,7,"cannot parse picture header");if(!ta(D,O,z))return gr(g,3,"Bad code word");ie.c=16383&(D[O+4]<<8|D[O+3]),ie.Td=D[O+4]>>6,ie.i=16383&(D[O+6]<<8|D[O+5]),ie.Ud=D[O+6]>>6,O+=7,z-=7,g.za=ie.c+15>>4,g.Ub=ie.i+15>>4,w.width=ie.c,w.height=ie.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((Y=g.Pa).jb,0,255,Y.jb.length),e((Y=g.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,i(Y.Zb,0,0,Y.Zb.length),i(Y.Lb,0,0,Y.Lb)}if(ee.ub>z)return gr(g,7,"bad partition length");ue(Y=g.m,D,O,ee.ub),O+=ee.ub,z-=ee.ub,ee.Rb&&(ie.Ld=de(Y),ie.Kd=de(Y)),ie=g.Qa;var ce,fe=g.Pa;if(e(Y!=null),e(ie!=null),ie.Cb=de(Y),ie.Cb){if(ie.Bb=de(Y),de(Y)){for(ie.Fb=de(Y),ce=0;4>ce;++ce)ie.Zb[ce]=de(Y)?j(Y,7):0;for(ce=0;4>ce;++ce)ie.Lb[ce]=de(Y)?j(Y,6):0}if(ie.Bb)for(ce=0;3>ce;++ce)fe.jb[ce]=de(Y)?ne(Y,8):255}else ie.Bb=0;if(Y.Ka)return gr(g,3,"cannot parse segment header");if((ie=g.ed).zd=de(Y),ie.Tb=ne(Y,6),ie.wb=ne(Y,3),ie.Pc=de(Y),ie.Pc&&de(Y)){for(fe=0;4>fe;++fe)de(Y)&&(ie.vd[fe]=j(Y,6));for(fe=0;4>fe;++fe)de(Y)&&(ie.od[fe]=j(Y,6))}if(g.L=ie.Tb==0?0:ie.zd?1:2,Y.Ka)return gr(g,3,"cannot parse filter header");var Be=z;if(z=ce=O,O=ce+Be,ie=Be,g.Xb=(1<<ne(g.m,2))-1,Be<3*(fe=g.Xb))D=7;else{for(ce+=3*fe,ie-=3*fe,Be=0;Be<fe;++Be){var De=D[z+0]|D[z+1]<<8|D[z+2]<<16;De>ie&&(De=ie),ue(g.Jc[+Be],D,ce,De),ce+=De,ie-=De,z+=3}ue(g.Jc[+fe],D,ce,ie),D=ce<O?0:5}if(D!=0)return gr(g,D,"cannot parse partitions");for(D=ne(ce=g.m,7),z=de(ce)?j(ce,4):0,O=de(ce)?j(ce,4):0,ie=de(ce)?j(ce,4):0,fe=de(ce)?j(ce,4):0,ce=de(ce)?j(ce,4):0,Be=g.Qa,De=0;4>De;++De){if(Be.Cb){var ge=Be.Zb[De];Be.Fb||(ge+=D)}else{if(0<De){g.pb[De]=g.pb[0];continue}ge=D}var Ee=g.pb[De];Ee.Sc[0]=$v[Hn(ge+z,127)],Ee.Sc[1]=jv[Hn(ge+0,127)],Ee.Eb[0]=2*$v[Hn(ge+O,127)],Ee.Eb[1]=101581*jv[Hn(ge+ie,127)]>>16,8>Ee.Eb[1]&&(Ee.Eb[1]=8),Ee.Qc[0]=$v[Hn(ge+fe,117)],Ee.Qc[1]=jv[Hn(ge+ce,127)],Ee.lc=ge+ce}if(!ee.Rb)return gr(g,4,"Not a key frame.");for(de(Y),ee=g.Pa,D=0;4>D;++D){for(z=0;8>z;++z)for(O=0;3>O;++O)for(ie=0;11>ie;++ie)fe=ve(Y,GO[D][z][O][ie])?ne(Y,8):$O[D][z][O][ie],ee.Wc[D][z].Yb[O][ie]=fe;for(z=0;17>z;++z)ee.Xc[D][z]=ee.Wc[D][KO[z]]}return g.kc=de(Y),g.kc&&(g.Bd=ne(Y,8)),g.cb=1}function ns(g,w,D,O,z,Y,ee){var ie=w[z].Yb[D];for(D=0;16>z;++z){if(!ve(g,ie[D+0]))return z;for(;!ve(g,ie[D+1]);)if(ie=w[++z].Yb[0],D=0,z==16)return 16;var ce=w[z+1].Yb;if(ve(g,ie[D+2])){var fe=g,Be=0;if(ve(fe,(ge=ie)[(De=D)+3]))if(ve(fe,ge[De+6])){for(ie=0,De=2*(Be=ve(fe,ge[De+8]))+(ge=ve(fe,ge[De+9+Be])),Be=0,ge=HO[De];ge[ie];++ie)Be+=Be+ve(fe,ge[ie]);Be+=3+(8<<De)}else ve(fe,ge[De+7])?(Be=7+2*ve(fe,165),Be+=ve(fe,145)):Be=5+ve(fe,159);else Be=ve(fe,ge[De+4])?3+ve(fe,ge[De+5]):2;ie=ce[2]}else Be=1,ie=ce[1];ce=ee+VO[z],0>(fe=g).b&&se(fe);var De,ge=fe.b,Ee=(De=fe.Ca>>1)-(fe.I>>ge)>>31;--fe.b,fe.Ca+=Ee,fe.Ca|=1,fe.I-=(De+1&Ee)<<ge,Y[ce]=((Be^Ee)-Ee)*O[(0<z)+0]}return 16}function ur(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function ei(g,w,D,O,z){z=g[w+D+32*O]+(z>>3),g[w+D+32*O]=-256&z?0>z?0:255:z}function Qn(g,w,D,O,z,Y){ei(g,w,0,D,O+z),ei(g,w,1,D,O+Y),ei(g,w,2,D,O-Y),ei(g,w,3,D,O-z)}function Vr(g){return(20091*g>>16)+g}function Ho(g,w,D,O){var z,Y=0,ee=s(16);for(z=0;4>z;++z){var ie=g[w+0]+g[w+8],ce=g[w+0]-g[w+8],fe=(35468*g[w+4]>>16)-Vr(g[w+12]),Be=Vr(g[w+4])+(35468*g[w+12]>>16);ee[Y+0]=ie+Be,ee[Y+1]=ce+fe,ee[Y+2]=ce-fe,ee[Y+3]=ie-Be,Y+=4,w++}for(z=Y=0;4>z;++z)ie=(g=ee[Y+0]+4)+ee[Y+8],ce=g-ee[Y+8],fe=(35468*ee[Y+4]>>16)-Vr(ee[Y+12]),ei(D,O,0,0,ie+(Be=Vr(ee[Y+4])+(35468*ee[Y+12]>>16))),ei(D,O,1,0,ce+fe),ei(D,O,2,0,ce-fe),ei(D,O,3,0,ie-Be),Y++,O+=32}function Vo(g,w,D,O){var z=g[w+0]+4,Y=35468*g[w+4]>>16,ee=Vr(g[w+4]),ie=35468*g[w+1]>>16;Qn(D,O,0,z+ee,g=Vr(g[w+1]),ie),Qn(D,O,1,z+Y,g,ie),Qn(D,O,2,z-Y,g,ie),Qn(D,O,3,z-ee,g,ie)}function Tl(g,w,D,O,z){Ho(g,w,D,O),z&&Ho(g,w+16,D,O+4)}function du(g,w,D,O){vu(g,w+0,D,O,1),vu(g,w+32,D,O+128,1)}function na(g,w,D,O){var z;for(g=g[w+0]+4,z=0;4>z;++z)for(w=0;4>w;++w)ei(D,O,w,z,g)}function J(g,w,D,O){g[w+0]&&Ur(g,w+0,D,O),g[w+16]&&Ur(g,w+16,D,O+4),g[w+32]&&Ur(g,w+32,D,O+128),g[w+48]&&Ur(g,w+48,D,O+128+4)}function le(g,w,D,O){var z,Y=s(16);for(z=0;4>z;++z){var ee=g[w+0+z]+g[w+12+z],ie=g[w+4+z]+g[w+8+z],ce=g[w+4+z]-g[w+8+z],fe=g[w+0+z]-g[w+12+z];Y[0+z]=ee+ie,Y[8+z]=ee-ie,Y[4+z]=fe+ce,Y[12+z]=fe-ce}for(z=0;4>z;++z)ee=(g=Y[0+4*z]+3)+Y[3+4*z],ie=Y[1+4*z]+Y[2+4*z],ce=Y[1+4*z]-Y[2+4*z],fe=g-Y[3+4*z],D[O+0]=ee+ie>>3,D[O+16]=fe+ce>>3,D[O+32]=ee-ie>>3,D[O+48]=fe-ce>>3,O+=64}function me(g,w,D){var O,z=w-32,Y=Ta,ee=255-g[z-1];for(O=0;O<D;++O){var ie,ce=Y,fe=ee+g[w-1];for(ie=0;ie<D;++ie)g[w+ie]=ce[fe+g[z+ie]];w+=32}}function Ue(g,w){me(g,w,4)}function Xe(g,w){me(g,w,8)}function ht(g,w){me(g,w,16)}function Xt(g,w){var D;for(D=0;16>D;++D)n(g,w+32*D,g,w-32,16)}function Jr(g,w){var D;for(D=16;0<D;--D)i(g,w,g[w-1],16),w+=32}function Tr(g,w,D){var O;for(O=0;16>O;++O)i(w,D+32*O,g,16)}function an(g,w){var D,O=16;for(D=0;16>D;++D)O+=g[w-1+32*D]+g[w+D-32];Tr(O>>5,g,w)}function ps(g,w){var D,O=8;for(D=0;16>D;++D)O+=g[w-1+32*D];Tr(O>>4,g,w)}function NA(g,w){var D,O=8;for(D=0;16>D;++D)O+=g[w+D-32];Tr(O>>4,g,w)}function ia(g,w){Tr(128,g,w)}function Kt(g,w,D){return g+2*w+D+2>>2}function hu(g,w){var D,O=w-32;for(O=new Uint8Array([Kt(g[O-1],g[O+0],g[O+1]),Kt(g[O+0],g[O+1],g[O+2]),Kt(g[O+1],g[O+2],g[O+3]),Kt(g[O+2],g[O+3],g[O+4])]),D=0;4>D;++D)n(g,w+32*D,O,0,O.length)}function Fl(g,w){var D=g[w-1],O=g[w-1+32],z=g[w-1+64],Y=g[w-1+96];xe(g,w+0,16843009*Kt(g[w-1-32],D,O)),xe(g,w+32,16843009*Kt(D,O,z)),xe(g,w+64,16843009*Kt(O,z,Y)),xe(g,w+96,16843009*Kt(z,Y,Y))}function Gd(g,w){var D,O=4;for(D=0;4>D;++D)O+=g[w+D-32]+g[w-1+32*D];for(O>>=3,D=0;4>D;++D)i(g,w+32*D,O,4)}function DA(g,w){var D=g[w-1+0],O=g[w-1+32],z=g[w-1+64],Y=g[w-1-32],ee=g[w+0-32],ie=g[w+1-32],ce=g[w+2-32],fe=g[w+3-32];g[w+0+96]=Kt(O,z,g[w-1+96]),g[w+1+96]=g[w+0+64]=Kt(D,O,z),g[w+2+96]=g[w+1+64]=g[w+0+32]=Kt(Y,D,O),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=Kt(ee,Y,D),g[w+3+64]=g[w+2+32]=g[w+1+0]=Kt(ie,ee,Y),g[w+3+32]=g[w+2+0]=Kt(ce,ie,ee),g[w+3+0]=Kt(fe,ce,ie)}function Ns(g,w){var D=g[w+1-32],O=g[w+2-32],z=g[w+3-32],Y=g[w+4-32],ee=g[w+5-32],ie=g[w+6-32],ce=g[w+7-32];g[w+0+0]=Kt(g[w+0-32],D,O),g[w+1+0]=g[w+0+32]=Kt(D,O,z),g[w+2+0]=g[w+1+32]=g[w+0+64]=Kt(O,z,Y),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=Kt(z,Y,ee),g[w+3+32]=g[w+2+64]=g[w+1+96]=Kt(Y,ee,ie),g[w+3+64]=g[w+2+96]=Kt(ee,ie,ce),g[w+3+96]=Kt(ie,ce,ce)}function Wa(g,w){var D=g[w-1+0],O=g[w-1+32],z=g[w-1+64],Y=g[w-1-32],ee=g[w+0-32],ie=g[w+1-32],ce=g[w+2-32],fe=g[w+3-32];g[w+0+0]=g[w+1+64]=Y+ee+1>>1,g[w+1+0]=g[w+2+64]=ee+ie+1>>1,g[w+2+0]=g[w+3+64]=ie+ce+1>>1,g[w+3+0]=ce+fe+1>>1,g[w+0+96]=Kt(z,O,D),g[w+0+64]=Kt(O,D,Y),g[w+0+32]=g[w+1+96]=Kt(D,Y,ee),g[w+1+32]=g[w+2+96]=Kt(Y,ee,ie),g[w+2+32]=g[w+3+96]=Kt(ee,ie,ce),g[w+3+32]=Kt(ie,ce,fe)}function fu(g,w){var D=g[w+0-32],O=g[w+1-32],z=g[w+2-32],Y=g[w+3-32],ee=g[w+4-32],ie=g[w+5-32],ce=g[w+6-32],fe=g[w+7-32];g[w+0+0]=D+O+1>>1,g[w+1+0]=g[w+0+64]=O+z+1>>1,g[w+2+0]=g[w+1+64]=z+Y+1>>1,g[w+3+0]=g[w+2+64]=Y+ee+1>>1,g[w+0+32]=Kt(D,O,z),g[w+1+32]=g[w+0+96]=Kt(O,z,Y),g[w+2+32]=g[w+1+96]=Kt(z,Y,ee),g[w+3+32]=g[w+2+96]=Kt(Y,ee,ie),g[w+3+64]=Kt(ee,ie,ce),g[w+3+96]=Kt(ie,ce,fe)}function on(g,w){var D=g[w-1+0],O=g[w-1+32],z=g[w-1+64],Y=g[w-1+96];g[w+0+0]=D+O+1>>1,g[w+2+0]=g[w+0+32]=O+z+1>>1,g[w+2+32]=g[w+0+64]=z+Y+1>>1,g[w+1+0]=Kt(D,O,z),g[w+3+0]=g[w+1+32]=Kt(O,z,Y),g[w+3+32]=g[w+1+64]=Kt(z,Y,Y),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=Y}function Ll(g,w){var D=g[w-1+0],O=g[w-1+32],z=g[w-1+64],Y=g[w-1+96],ee=g[w-1-32],ie=g[w+0-32],ce=g[w+1-32],fe=g[w+2-32];g[w+0+0]=g[w+2+32]=D+ee+1>>1,g[w+0+32]=g[w+2+64]=O+D+1>>1,g[w+0+64]=g[w+2+96]=z+O+1>>1,g[w+0+96]=Y+z+1>>1,g[w+3+0]=Kt(ie,ce,fe),g[w+2+0]=Kt(ee,ie,ce),g[w+1+0]=g[w+3+32]=Kt(D,ee,ie),g[w+1+32]=g[w+3+64]=Kt(O,D,ee),g[w+1+64]=g[w+3+96]=Kt(z,O,D),g[w+1+96]=Kt(Y,z,O)}function gu(g,w){var D;for(D=0;8>D;++D)n(g,w+32*D,g,w-32,8)}function $o(g,w){var D;for(D=0;8>D;++D)i(g,w,g[w-1],8),w+=32}function RA(g,w,D){var O;for(O=0;8>O;++O)i(w,D+32*O,g,8)}function UA(g,w){var D,O=8;for(D=0;8>D;++D)O+=g[w+D-32]+g[w-1+32*D];RA(O>>4,g,w)}function Pl(g,w){var D,O=4;for(D=0;8>D;++D)O+=g[w+D-32];RA(O>>3,g,w)}function sa(g,w){var D,O=4;for(D=0;8>D;++D)O+=g[w-1+32*D];RA(O>>3,g,w)}function Nl(g,w){RA(128,g,w)}function MA(g,w,D){var O=g[w-D],z=g[w+0],Y=3*(z-O)+Mv[1020+g[w-2*D]-g[w+D]],ee=c0[112+(Y+4>>3)];g[w-D]=Ta[255+O+c0[112+(Y+3>>3)]],g[w+0]=Ta[255+z-ee]}function Sa(g,w,D,O){var z=g[w+0],Y=g[w+D];return eo[255+g[w-2*D]-g[w-D]]>O||eo[255+Y-z]>O}function Dl(g,w,D,O){return 4*eo[255+g[w-D]-g[w+0]]+eo[255+g[w-2*D]-g[w+D]]<=O}function jo(g,w,D,O,z){var Y=g[w-3*D],ee=g[w-2*D],ie=g[w-D],ce=g[w+0],fe=g[w+D],Be=g[w+2*D],De=g[w+3*D];return 4*eo[255+ie-ce]+eo[255+ee-fe]>O?0:eo[255+g[w-4*D]-Y]<=z&&eo[255+Y-ee]<=z&&eo[255+ee-ie]<=z&&eo[255+De-Be]<=z&&eo[255+Be-fe]<=z&&eo[255+fe-ce]<=z}function Go(g,w,D,O){var z=2*O+1;for(O=0;16>O;++O)Dl(g,w+O,D,z)&&MA(g,w+O,D)}function Ko(g,w,D,O){var z=2*O+1;for(O=0;16>O;++O)Dl(g,w+O*D,1,z)&&MA(g,w+O*D,1)}function OA(g,w,D,O){var z;for(z=3;0<z;--z)Go(g,w+=4*D,D,O)}function Kd(g,w,D,O){var z;for(z=3;0<z;--z)Ko(g,w+=4,D,O)}function Ya(g,w,D,O,z,Y,ee,ie){for(Y=2*Y+1;0<z--;){if(jo(g,w,D,Y,ee))if(Sa(g,w,D,ie))MA(g,w,D);else{var ce=g,fe=w,Be=D,De=ce[fe-2*Be],ge=ce[fe-Be],Ee=ce[fe+0],Fe=ce[fe+Be],$e=ce[fe+2*Be],Ne=27*(Ke=Mv[1020+3*(Ee-ge)+Mv[1020+De-Fe]])+63>>7,Ge=18*Ke+63>>7,Ke=9*Ke+63>>7;ce[fe-3*Be]=Ta[255+ce[fe-3*Be]+Ke],ce[fe-2*Be]=Ta[255+De+Ge],ce[fe-Be]=Ta[255+ge+Ne],ce[fe+0]=Ta[255+Ee-Ne],ce[fe+Be]=Ta[255+Fe-Ge],ce[fe+2*Be]=Ta[255+$e-Ke]}w+=O}}function Ds(g,w,D,O,z,Y,ee,ie){for(Y=2*Y+1;0<z--;){if(jo(g,w,D,Y,ee))if(Sa(g,w,D,ie))MA(g,w,D);else{var ce=g,fe=w,Be=D,De=ce[fe-Be],ge=ce[fe+0],Ee=ce[fe+Be],Fe=c0[112+(4+($e=3*(ge-De))>>3)],$e=c0[112+($e+3>>3)],Ne=Fe+1>>1;ce[fe-2*Be]=Ta[255+ce[fe-2*Be]+Ne],ce[fe-Be]=Ta[255+De+$e],ce[fe+0]=Ta[255+ge-Fe],ce[fe+Be]=Ta[255+Ee-Ne]}w+=O}}function pu(g,w,D,O,z,Y){Ya(g,w,D,1,16,O,z,Y)}function mu(g,w,D,O,z,Y){Ya(g,w,1,D,16,O,z,Y)}function po(g,w,D,O,z,Y){var ee;for(ee=3;0<ee;--ee)Ds(g,w+=4*D,D,1,16,O,z,Y)}function Rl(g,w,D,O,z,Y){var ee;for(ee=3;0<ee;--ee)Ds(g,w+=4,1,D,16,O,z,Y)}function I(g,w,D,O,z,Y,ee,ie){Ya(g,w,z,1,8,Y,ee,ie),Ya(D,O,z,1,8,Y,ee,ie)}function K(g,w,D,O,z,Y,ee,ie){Ya(g,w,1,z,8,Y,ee,ie),Ya(D,O,1,z,8,Y,ee,ie)}function he(g,w,D,O,z,Y,ee,ie){Ds(g,w+4*z,z,1,8,Y,ee,ie),Ds(D,O+4*z,z,1,8,Y,ee,ie)}function we(g,w,D,O,z,Y,ee,ie){Ds(g,w+4,1,z,8,Y,ee,ie),Ds(D,O+4,1,z,8,Y,ee,ie)}function Se(){this.ba=new Tt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new sr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function We(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bt(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new F}function St(){this.xb=this.a=0,this.l=new Ea,this.ca=new Tt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bt,this.ab=0,this.gc=a(4,We),this.Oc=0}function Vt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ea,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Nt(g,w,D,O,z,Y,ee){for(g=g==null?0:g[w+0],w=0;w<ee;++w)z[Y+w]=g+D[O+w]&255,g=z[Y+w]}function _r(g,w,D,O,z,Y,ee){var ie;if(g==null)Nt(null,null,D,O,z,Y,ee);else for(ie=0;ie<ee;++ie)z[Y+ie]=g[w+ie]+D[O+ie]&255}function An(g,w,D,O,z,Y,ee){if(g==null)Nt(null,null,D,O,z,Y,ee);else{var ie,ce=g[w+0],fe=ce,Be=ce;for(ie=0;ie<ee;++ie)fe=Be+(ce=g[w+ie])-fe,Be=D[O+ie]+(-256&fe?0>fe?0:255:fe)&255,fe=ce,z[Y+ie]=Be}}function Zr(g,w,D,O){var z=w.width,Y=w.o;if(e(g!=null&&w!=null),0>D||0>=O||D+O>Y)return null;if(!g.Cc){if(g.ga==null){var ee;if(g.ga=new Vt,(ee=g.ga==null)||(ee=w.width*w.o,e(g.Gb.length==0),g.Gb=s(ee),g.Uc=0,g.Gb==null?ee=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,ee=1),ee=!ee),!ee){ee=g.ga;var ie=g.Fa,ce=g.P,fe=g.qc,Be=g.mb,De=g.nb,ge=ce+1,Ee=fe-1,Fe=ee.l;if(e(ie!=null&&Be!=null&&w!=null),Gl[0]=null,Gl[1]=Nt,Gl[2]=_r,Gl[3]=An,ee.ca=Be,ee.tb=De,ee.c=w.width,ee.i=w.height,e(0<ee.c&&0<ee.i),1>=fe)w=0;else if(ee.$a=3&ie[ce+0],ee.Z=ie[ce+0]>>2&3,ee.Lc=ie[ce+0]>>4&3,ce=ie[ce+0]>>6&3,0>ee.$a||1<ee.$a||4<=ee.Z||1<ee.Lc||ce)w=0;else if(Fe.put=Ot,Fe.ac=xi,Fe.bc=xa,Fe.ma=ee,Fe.width=w.width,Fe.height=w.height,Fe.Da=w.Da,Fe.v=w.v,Fe.va=w.va,Fe.j=w.j,Fe.o=w.o,ee.$a)e:{e(ee.$a==1),w=Mi();t:for(;;){if(w==null){w=0;break e}if(e(ee!=null),ee.mc=w,w.c=ee.c,w.i=ee.i,w.l=ee.l,w.l.ma=ee,w.l.width=ee.c,w.l.height=ee.i,w.a=0,G(w.m,ie,ge,Ee),!Oi(ee.c,ee.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Zi(w.s)?(ee.ic=1,ie=w.c*w.i,w.Ta=null,w.Ua=0,w.V=s(ie),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(ee.ic=0,w=Qi(w,ee.c)),!w))break t;w=1;break e}ee.mc=null,w=0}else w=Ee>=ee.c*ee.i;ee=!w}if(ee)return null;g.ga.Lc!=1?g.Ga=0:O=Y-D}e(g.ga!=null),e(D+O<=Y);e:{if(w=(ie=g.ga).c,Y=ie.l.o,ie.$a==0){if(ge=g.rc,Ee=g.Vc,Fe=g.Fa,ce=g.P+1+D*w,fe=g.mb,Be=g.nb+D*w,e(ce<=g.P+g.qc),ie.Z!=0)for(e(Gl[ie.Z]!=null),ee=0;ee<O;++ee)Gl[ie.Z](ge,Ee,Fe,ce,fe,Be,w),ge=fe,Ee=Be,Be+=w,ce+=w;else for(ee=0;ee<O;++ee)n(fe,Be,Fe,ce,w),ge=fe,Ee=Be,Be+=w,ce+=w;g.rc=ge,g.Vc=Ee}else{if(e(ie.mc!=null),w=D+O,e((ee=ie.mc)!=null),e(w<=ee.i),ee.C>=w)w=1;else if(ie.ic||Te(),ie.ic){ie=ee.V,ge=ee.Ba,Ee=ee.c;var $e=ee.i,Ne=(Fe=1,ce=ee.$/Ee,fe=ee.$%Ee,Be=ee.m,De=ee.s,ee.$),Ge=Ee*$e,Ke=Ee*w,Ze=De.wc,Ye=Ne<Ke?Zn(De,fe,ce):null;e(Ne<=Ge),e(w<=$e),e(Zi(De));t:for(;;){for(;!Be.h&&Ne<Ke;){if(fe&Ze||(Ye=Zn(De,fe,ce)),e(Ye!=null),te(Be),256>($e=Hr(Ye.G[0],Ye.H[0],Be)))ie[ge+Ne]=$e,++Ne,++fe>=Ee&&(fe=0,++ce<=w&&!(ce%16)&&Ri(ee,ce));else{if(!(280>$e)){Fe=0;break t}$e=Xi($e-256,Be);var Dt,vt=Hr(Ye.G[4],Ye.H[4],Be);if(te(Be),!(Ne>=(vt=Ji(Ee,vt=Xi(vt,Be)))&&Ge-Ne>=$e)){Fe=0;break t}for(Dt=0;Dt<$e;++Dt)ie[ge+Ne+Dt]=ie[ge+Ne+Dt-vt];for(Ne+=$e,fe+=$e;fe>=Ee;)fe-=Ee,++ce<=w&&!(ce%16)&&Ri(ee,ce);Ne<Ke&&fe&Ze&&(Ye=Zn(De,fe,ce))}e(Be.h==X(Be))}Ri(ee,ce>w?w:ce);break t}!Fe||Be.h&&Ne<Ge?(Fe=0,ee.a=Be.h?5:3):ee.$=Ne,w=Fe}else w=ts(ee,ee.V,ee.Ba,ee.c,ee.i,w,Ws);if(!w){O=0;break e}}D+O>=Y&&(g.Cc=1),O=1}if(!O)return null;if(g.Cc&&((O=g.ga)!=null&&(O.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+D*z}function m(g,w,D,O,z,Y){for(;0<z--;){var ee,ie=g,ce=w+(D?1:0),fe=g,Be=w+(D?0:3);for(ee=0;ee<O;++ee){var De=fe[Be+4*ee];De!=255&&(De*=32897,ie[ce+4*ee+0]=ie[ce+4*ee+0]*De>>23,ie[ce+4*ee+1]=ie[ce+4*ee+1]*De>>23,ie[ce+4*ee+2]=ie[ce+4*ee+2]*De>>23)}w+=Y}}function U(g,w,D,O,z){for(;0<O--;){var Y;for(Y=0;Y<D;++Y){var ee=g[w+2*Y+0],ie=15&(fe=g[w+2*Y+1]),ce=4369*ie,fe=(240&fe|fe>>4)*ce>>16;g[w+2*Y+0]=(240&ee|ee>>4)*ce>>16&240|(15&ee|ee<<4)*ce>>16>>4&15,g[w+2*Y+1]=240&fe|ie}w+=z}}function H(g,w,D,O,z,Y,ee,ie){var ce,fe,Be=255;for(fe=0;fe<z;++fe){for(ce=0;ce<O;++ce){var De=g[w+ce];Y[ee+4*ce]=De,Be&=De}w+=D,ee+=ie}return Be!=255}function oe(g,w,D,O,z){var Y;for(Y=0;Y<z;++Y)D[O+Y]=g[w+Y]>>8}function Te(){eg=m,VC=U,$C=H,jC=oe}function Re(g,w,D){v[g]=function(O,z,Y,ee,ie,ce,fe,Be,De,ge,Ee,Fe,$e,Ne,Ge,Ke,Ze){var Ye,Dt=Ze-1>>1,vt=ie[ce+0]|fe[Be+0]<<16,ar=De[ge+0]|Ee[Fe+0]<<16;e(O!=null);var It=3*vt+ar+131074>>2;for(w(O[z+0],255&It,It>>16,$e,Ne),Y!=null&&(It=3*ar+vt+131074>>2,w(Y[ee+0],255&It,It>>16,Ge,Ke)),Ye=1;Ye<=Dt;++Ye){var wr=ie[ce+Ye]|fe[Be+Ye]<<16,Ii=De[ge+Ye]|Ee[Fe+Ye]<<16,or=vt+wr+ar+Ii+524296,kt=or+2*(wr+ar)>>3;It=kt+vt>>1,vt=(or=or+2*(vt+Ii)>>3)+wr>>1,w(O[z+2*Ye-1],255&It,It>>16,$e,Ne+(2*Ye-1)*D),w(O[z+2*Ye-0],255&vt,vt>>16,$e,Ne+(2*Ye-0)*D),Y!=null&&(It=or+ar>>1,vt=kt+Ii>>1,w(Y[ee+2*Ye-1],255&It,It>>16,Ge,Ke+(2*Ye-1)*D),w(Y[ee+2*Ye+0],255&vt,vt>>16,Ge,Ke+(2*Ye+0)*D)),vt=wr,ar=Ii}1&Ze||(It=3*vt+ar+131074>>2,w(O[z+Ze-1],255&It,It>>16,$e,Ne+(Ze-1)*D),Y!=null&&(It=3*ar+vt+131074>>2,w(Y[ee+Ze-1],255&It,It>>16,Ge,Ke+(Ze-1)*D)))}}function st(){to[u0]=qO,to[d0]=tE,to[YC]=WO,to[h0]=rE,to[f0]=nE,to[Ov]=iE,to[XC]=YO,to[Qv]=tE,to[Hv]=rE,to[g0]=nE,to[Vv]=iE}function zt(g){return g&-16384?0>g?0:255:g>>XO}function en(g,w){return zt((19077*g>>8)+(26149*w>>8)-14234)}function pr(g,w,D){return zt((19077*g>>8)-(6419*w>>8)-(13320*D>>8)+8708)}function ln(g,w){return zt((19077*g>>8)+(33050*w>>8)-17685)}function Vi(g,w,D,O,z){O[z+0]=en(g,D),O[z+1]=pr(g,w,D),O[z+2]=ln(g,w)}function Rs(g,w,D,O,z){O[z+0]=ln(g,w),O[z+1]=pr(g,w,D),O[z+2]=en(g,D)}function pn(g,w,D,O,z){var Y=pr(g,w,D);w=Y<<3&224|ln(g,w)>>3,O[z+0]=248&en(g,D)|Y>>5,O[z+1]=w}function ms(g,w,D,O,z){var Y=240&ln(g,w)|15;O[z+0]=240&en(g,D)|pr(g,w,D)>>4,O[z+1]=Y}function Xa(g,w,D,O,z){O[z+0]=255,Vi(g,w,D,O,z+1)}function QA(g,w,D,O,z){Rs(g,w,D,O,z),O[z+3]=255}function Gf(g,w,D,O,z){Vi(g,w,D,O,z),O[z+3]=255}function Hn(g,w){return 0>g?0:g>w?w:g}function HA(g,w,D){v[g]=function(O,z,Y,ee,ie,ce,fe,Be,De){for(var ge=Be+(-2&De)*D;Be!=ge;)w(O[z+0],Y[ee+0],ie[ce+0],fe,Be),w(O[z+1],Y[ee+0],ie[ce+0],fe,Be+D),z+=2,++ee,++ce,Be+=2*D;1&De&&w(O[z+0],Y[ee+0],ie[ce+0],fe,Be)}}function zd(g,w,D){return D==0?g==0?w==0?6:5:w==0?4:0:D}function o0(g,w,D,O,z){switch(g>>>30){case 3:vu(w,D,O,z,0);break;case 2:Za(w,D,O,z);break;case 1:Ur(w,D,O,z)}}function Ja(g,w){var D,O,z=w.M,Y=w.Nb,ee=g.oc,ie=g.pc+40,ce=g.oc,fe=g.pc+584,Be=g.oc,De=g.pc+600;for(D=0;16>D;++D)ee[ie+32*D-1]=129;for(D=0;8>D;++D)ce[fe+32*D-1]=129,Be[De+32*D-1]=129;for(0<z?ee[ie-1-32]=ce[fe-1-32]=Be[De-1-32]=129:(i(ee,ie-32-1,127,21),i(ce,fe-32-1,127,9),i(Be,De-32-1,127,9)),O=0;O<g.za;++O){var ge=w.ya[w.aa+O];if(0<O){for(D=-1;16>D;++D)n(ee,ie+32*D-4,ee,ie+32*D+12,4);for(D=-1;8>D;++D)n(ce,fe+32*D-4,ce,fe+32*D+4,4),n(Be,De+32*D-4,Be,De+32*D+4,4)}var Ee=g.Gd,Fe=g.Hd+O,$e=ge.ad,Ne=ge.Hc;if(0<z&&(n(ee,ie-32,Ee[Fe].y,0,16),n(ce,fe-32,Ee[Fe].f,0,8),n(Be,De-32,Ee[Fe].ea,0,8)),ge.Za){var Ge=ee,Ke=ie-32+16;for(0<z&&(O>=g.za-1?i(Ge,Ke,Ee[Fe].y[15],4):n(Ge,Ke,Ee[Fe+1].y,0,4)),D=0;4>D;D++)Ge[Ke+128+D]=Ge[Ke+256+D]=Ge[Ke+384+D]=Ge[Ke+0+D];for(D=0;16>D;++D,Ne<<=2)Ge=ee,Ke=ie+aE[D],mo[ge.Ob[D]](Ge,Ke),o0(Ne,$e,16*+D,Ge,Ke)}else if(Ge=zd(O,z,ge.Ob[0]),jl[Ge](ee,ie),Ne!=0)for(D=0;16>D;++D,Ne<<=2)o0(Ne,$e,16*+D,ee,ie+aE[D]);for(D=ge.Gc,Ge=zd(O,z,ge.Dd),jA[Ge](ce,fe),jA[Ge](Be,De),Ne=$e,Ge=ce,Ke=fe,255&(ge=0|D)&&(170&ge?Wo(Ne,256,Ge,Ke):tn(Ne,256,Ge,Ke)),ge=Be,Ne=De,255&(D>>=8)&&(170&D?Wo($e,320,ge,Ne):tn($e,320,ge,Ne)),z<g.Ub-1&&(n(Ee[Fe].y,0,ee,ie+480,16),n(Ee[Fe].f,0,ce,fe+224,8),n(Ee[Fe].ea,0,Be,De+224,8)),D=8*Y*g.B,Ee=g.sa,Fe=g.ta+16*O+16*Y*g.R,$e=g.qa,ge=g.ra+8*O+D,Ne=g.Ha,Ge=g.Ia+8*O+D,D=0;16>D;++D)n(Ee,Fe+D*g.R,ee,ie+32*D,16);for(D=0;8>D;++D)n($e,ge+D*g.B,ce,fe+32*D,8),n(Ne,Ge+D*g.B,Be,De+32*D,8)}}function yu(g,w,D,O,z,Y,ee,ie,ce){var fe=[0],Be=[0],De=0,ge=ce!=null?ce.kd:0,Ee=ce??new je;if(g==null||12>D)return 7;Ee.data=g,Ee.w=w,Ee.ha=D,w=[w],D=[D],Ee.gb=[Ee.gb];e:{var Fe=w,$e=D,Ne=Ee.gb;if(e(g!=null),e($e!=null),e(Ne!=null),Ne[0]=0,12<=$e[0]&&!t(g,Fe[0],"RIFF")){if(t(g,Fe[0]+8,"WEBP")){Ne=3;break e}var Ge=R(g,Fe[0]+4);if(12>Ge||4294967286<Ge){Ne=3;break e}if(ge&&Ge>$e[0]-8){Ne=7;break e}Ne[0]=Ge,Fe[0]+=12,$e[0]-=12}Ne=0}if(Ne!=0)return Ne;for(Ge=0<Ee.gb[0],D=D[0];;){e:{var Ke=g;$e=w,Ne=D;var Ze=fe,Ye=Be,Dt=Fe=[0];if((It=De=[De])[0]=0,8>Ne[0])Ne=7;else{if(!t(Ke,$e[0],"VP8X")){if(R(Ke,$e[0]+4)!=10){Ne=3;break e}if(18>Ne[0]){Ne=7;break e}var vt=R(Ke,$e[0]+8),ar=1+Ve(Ke,$e[0]+12);if(2147483648<=ar*(Ke=1+Ve(Ke,$e[0]+15))){Ne=3;break e}Dt!=null&&(Dt[0]=vt),Ze!=null&&(Ze[0]=ar),Ye!=null&&(Ye[0]=Ke),$e[0]+=18,Ne[0]-=18,It[0]=1}Ne=0}}if(De=De[0],Fe=Fe[0],Ne!=0)return Ne;if($e=!!(2&Fe),!Ge&&De)return 3;if(Y!=null&&(Y[0]=!!(16&Fe)),ee!=null&&(ee[0]=$e),ie!=null&&(ie[0]=0),ee=fe[0],Fe=Be[0],De&&$e&&ce==null){Ne=0;break}if(4>D){Ne=7;break}if(Ge&&De||!Ge&&!De&&!t(g,w[0],"ALPH")){D=[D],Ee.na=[Ee.na],Ee.P=[Ee.P],Ee.Sa=[Ee.Sa];e:{vt=g,Ne=w,Ge=D;var It=Ee.gb;Ze=Ee.na,Ye=Ee.P,Dt=Ee.Sa,ar=22,e(vt!=null),e(Ge!=null),Ke=Ne[0];var wr=Ge[0];for(e(Ze!=null),e(Dt!=null),Ze[0]=null,Ye[0]=null,Dt[0]=0;;){if(Ne[0]=Ke,Ge[0]=wr,8>wr){Ne=7;break e}var Ii=R(vt,Ke+4);if(4294967286<Ii){Ne=3;break e}var or=8+Ii+1&-2;if(ar+=or,0<It&&ar>It){Ne=3;break e}if(!t(vt,Ke,"VP8 ")||!t(vt,Ke,"VP8L")){Ne=0;break e}if(wr[0]<or){Ne=7;break e}t(vt,Ke,"ALPH")||(Ze[0]=vt,Ye[0]=Ke+8,Dt[0]=Ii),Ke+=or,wr-=or}}if(D=D[0],Ee.na=Ee.na[0],Ee.P=Ee.P[0],Ee.Sa=Ee.Sa[0],Ne!=0)break}D=[D],Ee.Ja=[Ee.Ja],Ee.xa=[Ee.xa];e:if(It=g,Ne=w,Ge=D,Ze=Ee.gb[0],Ye=Ee.Ja,Dt=Ee.xa,vt=Ne[0],Ke=!t(It,vt,"VP8 "),ar=!t(It,vt,"VP8L"),e(It!=null),e(Ge!=null),e(Ye!=null),e(Dt!=null),8>Ge[0])Ne=7;else{if(Ke||ar){if(It=R(It,vt+4),12<=Ze&&It>Ze-12){Ne=3;break e}if(ge&&It>Ge[0]-8){Ne=7;break e}Ye[0]=It,Ne[0]+=8,Ge[0]-=8,Dt[0]=ar}else Dt[0]=5<=Ge[0]&&It[vt+0]==47&&!(It[vt+4]>>5),Ye[0]=Ge[0];Ne=0}if(D=D[0],Ee.Ja=Ee.Ja[0],Ee.xa=Ee.xa[0],w=w[0],Ne!=0)break;if(4294967286<Ee.Ja)return 3;if(ie==null||$e||(ie[0]=Ee.xa?2:1),ee=[ee],Fe=[Fe],Ee.xa){if(5>D){Ne=7;break}ie=ee,ge=Fe,$e=Y,g==null||5>D?g=0:5<=D&&g[w+0]==47&&!(g[w+4]>>5)?(Ge=[0],It=[0],Ze=[0],G(Ye=new Q,g,w,D),Bi(Ye,Ge,It,Ze)?(ie!=null&&(ie[0]=Ge[0]),ge!=null&&(ge[0]=It[0]),$e!=null&&($e[0]=Ze[0]),g=1):g=0):g=0}else{if(10>D){Ne=7;break}ie=Fe,g==null||10>D||!ta(g,w+3,D-3)?g=0:(ge=g[w+0]|g[w+1]<<8|g[w+2]<<16,$e=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=Ee.Ja||!$e||!g?g=0:(ee&&(ee[0]=$e),ie&&(ie[0]=g),g=1))}if(!g||(ee=ee[0],Fe=Fe[0],De&&(fe[0]!=ee||Be[0]!=Fe)))return 3;ce!=null&&(ce[0]=Ee,ce.offset=w-ce.w,e(4294967286>w-ce.w),e(ce.offset==ce.ha-D));break}return Ne==0||Ne==7&&De&&ce==null?(Y!=null&&(Y[0]|=Ee.na!=null&&0<Ee.na.length),O!=null&&(O[0]=ee),z!=null&&(z[0]=Fe),0):Ne}function Kf(g,w,D){var O=w.width,z=w.height,Y=0,ee=0,ie=O,ce=z;if(w.Da=g!=null&&0<g.Da,w.Da&&(ie=g.cd,ce=g.bd,Y=g.v,ee=g.j,11>D||(Y&=-2,ee&=-2),0>Y||0>ee||0>=ie||0>=ce||Y+ie>O||ee+ce>z))return 0;if(w.v=Y,w.j=ee,w.va=Y+ie,w.o=ee+ce,w.U=ie,w.T=ce,w.da=g!=null&&0<g.da,w.da){if(!W(ie,ce,D=[g.ib],Y=[g.hb]))return 0;w.ib=D[0],w.hb=Y[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*O/4&&w.hb<3*z/4,w.Kb=0),1}function zf(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function Ul(g,w,D,O){if(O==null||0>=g||0>=w)return 2;if(D!=null){if(D.Da){var z=D.cd,Y=D.bd,ee=-2&D.v,ie=-2&D.j;if(0>ee||0>ie||0>=z||0>=Y||ee+z>g||ie+Y>w)return 2;g=z,w=Y}if(D.da){if(!W(g,w,z=[D.ib],Y=[D.hb]))return 2;g=z[0],w=Y[0]}}O.width=g,O.height=w;e:{var ce=O.width,fe=O.height;if(g=O.S,0>=ce||0>=fe||!(g>=u0&&13>g))g=2;else{if(0>=O.Rd&&O.sd==null){ee=Y=z=w=0;var Be=(ie=ce*oE[g])*fe;if(11>g||(Y=(fe+1)/2*(w=(ce+1)/2),g==12&&(ee=(z=ce)*fe)),(fe=s(Be+2*Y+ee))==null){g=1;break e}O.sd=fe,11>g?((ce=O.f.RGBA).eb=fe,ce.fb=0,ce.A=ie,ce.size=Be):((ce=O.f.kb).y=fe,ce.O=0,ce.fa=ie,ce.Fd=Be,ce.f=fe,ce.N=0+Be,ce.Ab=w,ce.Cd=Y,ce.ea=fe,ce.W=0+Be+Y,ce.Db=w,ce.Ed=Y,g==12&&(ce.F=fe,ce.J=0+Be+2*Y),ce.Tc=ee,ce.lb=z)}if(w=1,z=O.S,Y=O.width,ee=O.height,z>=u0&&13>z)if(11>z)g=O.f.RGBA,w&=(ie=Math.abs(g.A))*(ee-1)+Y<=g.size,w&=ie>=Y*oE[z],w&=g.eb!=null;else{g=O.f.kb,ie=(Y+1)/2,Be=(ee+1)/2,ce=Math.abs(g.fa),fe=Math.abs(g.Ab);var De=Math.abs(g.Db),ge=Math.abs(g.lb),Ee=ge*(ee-1)+Y;w&=ce*(ee-1)+Y<=g.Fd,w&=fe*(Be-1)+ie<=g.Cd,w=(w&=De*(Be-1)+ie<=g.Ed)&ce>=Y&fe>=ie&De>=ie,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,z==12&&(w&=ge>=Y,w&=Ee<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||D!=null&&D.fd&&(g=zf(O)),g}var bu=64,Ia=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ka=24,Ml=32,VA=8,Ol=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];_e("Predictor0","PredictorAdd0"),v.Predictor0=function(){return 4278190080},v.Predictor1=function(g){return g},v.Predictor2=function(g,w,D){return w[D+0]},v.Predictor3=function(g,w,D){return w[D+1]},v.Predictor4=function(g,w,D){return w[D-1]},v.Predictor5=function(g,w,D){return Ie(Ie(g,w[D+1]),w[D+0])},v.Predictor6=function(g,w,D){return Ie(g,w[D-1])},v.Predictor7=function(g,w,D){return Ie(g,w[D+0])},v.Predictor8=function(g,w,D){return Ie(w[D-1],w[D+0])},v.Predictor9=function(g,w,D){return Ie(w[D+0],w[D+1])},v.Predictor10=function(g,w,D){return Ie(Ie(g,w[D-1]),Ie(w[D+0],w[D+1]))},v.Predictor11=function(g,w,D){var O=w[D+0];return 0>=He(O>>24&255,g>>24&255,(w=w[D-1])>>24&255)+He(O>>16&255,g>>16&255,w>>16&255)+He(O>>8&255,g>>8&255,w>>8&255)+He(255&O,255&g,255&w)?O:g},v.Predictor12=function(g,w,D){var O=w[D+0];return(Qe((g>>24&255)+(O>>24&255)-((w=w[D-1])>>24&255))<<24|Qe((g>>16&255)+(O>>16&255)-(w>>16&255))<<16|Qe((g>>8&255)+(O>>8&255)-(w>>8&255))<<8|Qe((255&g)+(255&O)-(255&w)))>>>0},v.Predictor13=function(g,w,D){var O=w[D-1];return(Pe((g=Ie(g,w[D+0]))>>24&255,O>>24&255)<<24|Pe(g>>16&255,O>>16&255)<<16|Pe(g>>8&255,O>>8&255)<<8|Pe(255&g,255&O))>>>0};var qf=v.PredictorAdd0;v.PredictorAdd1=At,_e("Predictor2","PredictorAdd2"),_e("Predictor3","PredictorAdd3"),_e("Predictor4","PredictorAdd4"),_e("Predictor5","PredictorAdd5"),_e("Predictor6","PredictorAdd6"),_e("Predictor7","PredictorAdd7"),_e("Predictor8","PredictorAdd8"),_e("Predictor9","PredictorAdd9"),_e("Predictor10","PredictorAdd10"),_e("Predictor11","PredictorAdd11"),_e("Predictor12","PredictorAdd12"),_e("Predictor13","PredictorAdd13");var qd=v.PredictorAdd2;at("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),at("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var ti,A0=v.ColorIndexInverseTransform,zo=v.MapARGB,qo=v.VP8LColorIndexInverseTransformAlpha,Wf=v.MapAlpha,Yf=v.VP8LPredictorsAdd=[];Yf.length=16,(v.VP8LPredictors=[]).length=16,(v.VP8LPredictorsAdd_C=[]).length=16,(v.VP8LPredictors_C=[]).length=16;var Xf,Jf,Ql,Hl,Vl,wu,$l,vu,Za,Wo,Ur,tn,ri,Si,$A,Zf,Wd,l0,RC,UC,MC,OC,QC,HC,eg,VC,$C,jC,GC=s(511),KC=s(2041),zC=s(225),qC=s(767),WC=0,Mv=KC,c0=zC,Ta=qC,eo=GC,u0=0,d0=1,YC=2,h0=3,f0=4,Ov=5,XC=6,Qv=7,Hv=8,g0=9,Vv=10,NO=[2,3,7],DO=[3,3,11],JC=[280,256,256,256,40],RO=[0,1,1,1,0],UO=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],MO=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],OO=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],QO=8,$v=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],jv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tg=null,HO=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],VO=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ZC=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],$O=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],jO=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],GO=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],KO=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],jl=[],mo=[],jA=[],zO=1,eE=2,Gl=[],to=[];Re("UpsampleRgbLinePair",Vi,3),Re("UpsampleBgrLinePair",Rs,3),Re("UpsampleRgbaLinePair",Gf,4),Re("UpsampleBgraLinePair",QA,4),Re("UpsampleArgbLinePair",Xa,4),Re("UpsampleRgba4444LinePair",ms,2),Re("UpsampleRgb565LinePair",pn,2);var qO=v.UpsampleRgbLinePair,WO=v.UpsampleBgrLinePair,tE=v.UpsampleRgbaLinePair,rE=v.UpsampleBgraLinePair,nE=v.UpsampleArgbLinePair,iE=v.UpsampleRgba4444LinePair,YO=v.UpsampleRgb565LinePair,p0=16,m0=1<<p0-1,rg=-227,Gv=482,XO=6,sE=0,JO=s(256),ZO=s(256),eQ=s(256),tQ=s(256),rQ=s(Gv-rg),nQ=s(Gv-rg);HA("YuvToRgbRow",Vi,3),HA("YuvToBgrRow",Rs,3),HA("YuvToRgbaRow",Gf,4),HA("YuvToBgraRow",QA,4),HA("YuvToArgbRow",Xa,4),HA("YuvToRgba4444Row",ms,2),HA("YuvToRgb565Row",pn,2);var aE=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],y0=[0,2,8],iQ=[8,7,6,4,4,2,2,2,1,1,1,1],sQ=1;this.WebPDecodeRGBA=function(g,w,D,O,z){var Y=d0,ee=new Se,ie=new Tt;ee.ba=ie,ie.S=Y,ie.width=[ie.width],ie.height=[ie.height];var ce=ie.width,fe=ie.height,Be=new Ft;if(Be==null||g==null)var De=2;else e(Be!=null),De=yu(g,w,D,Be.width,Be.height,Be.Pd,Be.Qd,Be.format,null);if(De!=0?ce=0:(ce!=null&&(ce[0]=Be.width[0]),fe!=null&&(fe[0]=Be.height[0]),ce=1),ce){ie.width=ie.width[0],ie.height=ie.height[0],O!=null&&(O[0]=ie.width),z!=null&&(z[0]=ie.height);e:{if(O=new Ea,(z=new je).data=g,z.w=w,z.ha=D,z.kd=1,w=[0],e(z!=null),((g=yu(z.data,z.w,z.ha,null,null,null,w,null,z))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(ee!=null),O.data=z.data,O.w=z.w+z.offset,O.ha=z.ha-z.offset,O.put=Ot,O.ac=xi,O.bc=xa,O.ma=ee,z.xa){if((g=Mi())==null){ee=1;break e}if((function(ge,Ee){var Fe=[0],$e=[0],Ne=[0];t:for(;;){if(ge==null)return 0;if(Ee==null)return ge.a=2,0;if(ge.l=Ee,ge.a=0,G(ge.m,Ee.data,Ee.w,Ee.ha),!Bi(ge.m,Fe,$e,Ne)){ge.a=3;break t}if(ge.xb=eE,Ee.width=Fe[0],Ee.height=$e[0],!Oi(Fe[0],$e[0],1,ge,null))break t;return 1}return e(ge.a!=0),0})(g,O)){if(O=(w=Ul(O.width,O.height,ee.Oa,ee.ba))==0){t:{O=g;r:for(;;){if(O==null){O=0;break t}if(e(O.s.yc!=null),e(O.s.Ya!=null),e(0<O.s.Wb),e((D=O.l)!=null),e((z=D.ma)!=null),O.xb!=0){if(O.ca=z.ba,O.tb=z.tb,e(O.ca!=null),!Kf(z.Oa,D,h0)){O.a=2;break r}if(!Qi(O,D.width)||D.da)break r;if((D.da||Ut(O.ca.S))&&Te(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),O.ca.f.kb.F!=null&&Te()),O.Pb&&0<O.s.ua&&O.s.vb.X==null&&!$(O.s.vb,O.s.Wa.Xa)){O.a=1;break r}O.xb=0}if(!ts(O,O.V,O.Ba,O.c,O.i,D.o,Ba))break r;z.Dc=O.Ma,O=1;break t}e(O.a!=0),O=0}O=!O}O&&(w=g.a)}else w=g.a}else{if((g=new En)==null){ee=1;break e}if(g.Fa=z.na,g.P=z.P,g.qc=z.Sa,ra(g,O)){if((w=Ul(O.width,O.height,ee.Oa,ee.ba))==0){if(g.Aa=0,D=ee.Oa,e((z=g)!=null),D!=null){if(0<(ce=0>(ce=D.Md)?0:100<ce?255:255*ce/100)){for(fe=Be=0;4>fe;++fe)12>(De=z.pb[fe]).lc&&(De.ia=ce*iQ[0>De.lc?0:De.lc]>>3),Be|=De.ia;Be&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=D.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}(function(ge,Ee){if(ge==null)return 0;if(Ee==null)return gr(ge,2,"NULL VP8Io parameter in VP8Decode().");if(!ge.cb&&!ra(ge,Ee))return 0;if(e(ge.cb),Ee.ac==null||Ee.ac(Ee)){Ee.ob&&(ge.L=0);var Fe=y0[ge.L];if(ge.L==2?(ge.yb=0,ge.zb=0):(ge.yb=Ee.v-Fe>>4,ge.zb=Ee.j-Fe>>4,0>ge.yb&&(ge.yb=0),0>ge.zb&&(ge.zb=0)),ge.Va=Ee.o+15+Fe>>4,ge.Hb=Ee.va+15+Fe>>4,ge.Hb>ge.za&&(ge.Hb=ge.za),ge.Va>ge.Ub&&(ge.Va=ge.Ub),0<ge.L){var $e=ge.ed;for(Fe=0;4>Fe;++Fe){var Ne;if(ge.Qa.Cb){var Ge=ge.Qa.Lb[Fe];ge.Qa.Fb||(Ge+=$e.Tb)}else Ge=$e.Tb;for(Ne=0;1>=Ne;++Ne){var Ke=ge.gd[Fe][Ne],Ze=Ge;if($e.Pc&&(Ze+=$e.vd[0],Ne&&(Ze+=$e.od[0])),0<(Ze=0>Ze?0:63<Ze?63:Ze)){var Ye=Ze;0<$e.wb&&(Ye=4<$e.wb?Ye>>2:Ye>>1)>9-$e.wb&&(Ye=9-$e.wb),1>Ye&&(Ye=1),Ke.dd=Ye,Ke.tc=2*Ze+Ye,Ke.ld=40<=Ze?2:15<=Ze?1:0}else Ke.tc=0;Ke.La=Ne}}}Fe=0}else gr(ge,6,"Frame setup failed"),Fe=ge.a;if(Fe=Fe==0){if(Fe){ge.$c=0,0<ge.Aa||(ge.Ic=sQ);t:{Fe=ge.Ic,$e=4*(Ye=ge.za);var Dt=32*Ye,vt=Ye+1,ar=0<ge.L?Ye*(0<ge.Aa?2:1):0,It=(ge.Aa==2?2:1)*Ye;if((Ke=$e+832+(Ne=3*(16*Fe+y0[ge.L])/2*Dt)+(Ge=ge.Fa!=null&&0<ge.Fa.length?ge.Kc.c*ge.Kc.i:0))!=Ke)Fe=0;else{if(Ke>ge.Vb){if(ge.Vb=0,ge.Ec=s(Ke),ge.Fc=0,ge.Ec==null){Fe=gr(ge,1,"no memory during frame initialization.");break t}ge.Vb=Ke}Ke=ge.Ec,Ze=ge.Fc,ge.Ac=Ke,ge.Bc=Ze,Ze+=$e,ge.Gd=a(Dt,Oo),ge.Hd=0,ge.rb=a(vt+1,Hi),ge.sb=1,ge.wa=ar?a(ar,Cn):null,ge.Y=0,ge.D.Nb=0,ge.D.wa=ge.wa,ge.D.Y=ge.Y,0<ge.Aa&&(ge.D.Y+=Ye),e(!0),ge.oc=Ke,ge.pc=Ze,Ze+=832,ge.ya=a(It,mi),ge.aa=0,ge.D.ya=ge.ya,ge.D.aa=ge.aa,ge.Aa==2&&(ge.D.aa+=Ye),ge.R=16*Ye,ge.B=8*Ye,Ye=(Dt=y0[ge.L])*ge.R,Dt=Dt/2*ge.B,ge.sa=Ke,ge.ta=Ze+Ye,ge.qa=ge.sa,ge.ra=ge.ta+16*Fe*ge.R+Dt,ge.Ha=ge.qa,ge.Ia=ge.ra+8*Fe*ge.B+Dt,ge.$c=0,Ze+=Ne,ge.mb=Ge?Ke:null,ge.nb=Ge?Ze:null,e(Ze+Ge<=ge.Fc+ge.Vb),ur(ge),i(ge.Ac,ge.Bc,0,$e),Fe=1}}if(Fe){if(Ee.ka=0,Ee.y=ge.sa,Ee.O=ge.ta,Ee.f=ge.qa,Ee.N=ge.ra,Ee.ea=ge.Ha,Ee.Vd=ge.Ia,Ee.fa=ge.R,Ee.Rc=ge.B,Ee.F=null,Ee.J=0,!WC){for(Fe=-255;255>=Fe;++Fe)GC[255+Fe]=0>Fe?-Fe:Fe;for(Fe=-1020;1020>=Fe;++Fe)KC[1020+Fe]=-128>Fe?-128:127<Fe?127:Fe;for(Fe=-112;112>=Fe;++Fe)zC[112+Fe]=-16>Fe?-16:15<Fe?15:Fe;for(Fe=-255;510>=Fe;++Fe)qC[255+Fe]=0>Fe?0:255<Fe?255:Fe;WC=1}$l=le,vu=Tl,Wo=du,Ur=na,tn=J,Za=Vo,ri=pu,Si=mu,$A=I,Zf=K,Wd=po,l0=Rl,RC=he,UC=we,MC=Go,OC=Ko,QC=OA,HC=Kd,mo[0]=Gd,mo[1]=Ue,mo[2]=hu,mo[3]=Fl,mo[4]=DA,mo[5]=Wa,mo[6]=Ns,mo[7]=fu,mo[8]=Ll,mo[9]=on,jl[0]=an,jl[1]=ht,jl[2]=Xt,jl[3]=Jr,jl[4]=ps,jl[5]=NA,jl[6]=ia,jA[0]=UA,jA[1]=Xe,jA[2]=gu,jA[3]=$o,jA[4]=sa,jA[5]=Pl,jA[6]=Nl,Fe=1}else Fe=0}Fe&&(Fe=(function(wr,Ii){for(wr.M=0;wr.M<wr.Va;++wr.M){var or,kt=wr.Jc[wr.M&wr.Xb],ct=wr.m,ni=wr;for(or=0;or<ni.za;++or){var tr=ct,xr=ni,mn=xr.Ac,is=xr.Bc+4*or,Us=xr.zc,Vn=xr.ya[xr.aa+or];if(xr.Qa.Bb?Vn.$b=ve(tr,xr.Pa.jb[0])?2+ve(tr,xr.Pa.jb[2]):ve(tr,xr.Pa.jb[1]):Vn.$b=0,xr.kc&&(Vn.Ad=ve(tr,xr.Bd)),Vn.Za=!ve(tr,145)+0,Vn.Za){var ys=Vn.Ob,Ms=0;for(xr=0;4>xr;++xr){var ki,Er=Us[0+xr];for(ki=0;4>ki;++ki){Er=jO[mn[is+ki]][Er];for(var $r=ZC[ve(tr,Er[0])];0<$r;)$r=ZC[2*$r+ve(tr,Er[$r])];Er=-$r,mn[is+ki]=Er}n(ys,Ms,mn,is,4),Ms+=4,Us[0+xr]=Er}}else Er=ve(tr,156)?ve(tr,128)?1:3:ve(tr,163)?2:0,Vn.Ob[0]=Er,i(mn,is,Er,4),i(Us,0,Er,4);Vn.Dd=ve(tr,142)?ve(tr,114)?ve(tr,183)?1:3:2:0}if(ni.m.Ka)return gr(wr,7,"Premature end-of-partition0 encountered.");for(;wr.ja<wr.za;++wr.ja){if(ni=kt,tr=(ct=wr).rb[ct.sb-1],mn=ct.rb[ct.sb+ct.ja],or=ct.ya[ct.aa+ct.ja],is=ct.kc?or.Ad:0)tr.la=mn.la=0,or.Za||(tr.Na=mn.Na=0),or.Hc=0,or.Gc=0,or.ia=0;else{var $n,jr;if(tr=mn,mn=ni,is=ct.Pa.Xc,Us=ct.ya[ct.aa+ct.ja],Vn=ct.pb[Us.$b],xr=Us.ad,ys=0,Ms=ct.rb[ct.sb-1],Er=ki=0,i(xr,ys,0,384),Us.Za)var ss=0,yo=is[3];else{$r=s(16);var ii=tr.Na+Ms.Na;if(ii=tg(mn,is[1],ii,Vn.Eb,0,$r,0),tr.Na=Ms.Na=(0<ii)+0,1<ii)$l($r,0,xr,ys);else{var aa=$r[0]+3>>3;for($r=0;256>$r;$r+=16)xr[ys+$r]=aa}ss=1,yo=is[0]}var rn=15&tr.la,Ti=15&Ms.la;for($r=0;4>$r;++$r){var Fa=1&Ti;for(aa=jr=0;4>aa;++aa)rn=rn>>1|(Fa=(ii=tg(mn,yo,ii=Fa+(1&rn),Vn.Sc,ss,xr,ys))>ss)<<7,jr=jr<<2|(3<ii?3:1<ii?2:xr[ys+0]!=0),ys+=16;rn>>=4,Ti=Ti>>1|Fa<<7,ki=(ki<<8|jr)>>>0}for(yo=rn,ss=Ti>>4,$n=0;4>$n;$n+=2){for(jr=0,rn=tr.la>>4+$n,Ti=Ms.la>>4+$n,$r=0;2>$r;++$r){for(Fa=1&Ti,aa=0;2>aa;++aa)ii=Fa+(1&rn),rn=rn>>1|(Fa=0<(ii=tg(mn,is[2],ii,Vn.Qc,0,xr,ys)))<<3,jr=jr<<2|(3<ii?3:1<ii?2:xr[ys+0]!=0),ys+=16;rn>>=2,Ti=Ti>>1|Fa<<5}Er|=jr<<4*$n,yo|=rn<<4<<$n,ss|=(240&Ti)<<$n}tr.la=yo,Ms.la=ss,Us.Hc=ki,Us.Gc=Er,Us.ia=43690&Er?0:Vn.ia,is=!(ki|Er)}if(0<ct.L&&(ct.wa[ct.Y+ct.ja]=ct.gd[or.$b][or.Za],ct.wa[ct.Y+ct.ja].La|=!is),ni.Ka)return gr(wr,7,"Premature end-of-file encountered.")}if(ur(wr),ct=Ii,ni=1,or=(kt=wr).D,tr=0<kt.L&&kt.M>=kt.zb&&kt.M<=kt.Va,kt.Aa==0)t:{if(or.M=kt.M,or.uc=tr,Ja(kt,or),ni=1,or=(jr=kt.D).Nb,tr=(Er=y0[kt.L])*kt.R,mn=Er/2*kt.B,$r=16*or*kt.R,aa=8*or*kt.B,is=kt.sa,Us=kt.ta-tr+$r,Vn=kt.qa,xr=kt.ra-mn+aa,ys=kt.Ha,Ms=kt.Ia-mn+aa,Ti=(rn=jr.M)==0,ki=rn>=kt.Va-1,kt.Aa==2&&Ja(kt,jr),jr.uc)for(Fa=(ii=kt).D.M,e(ii.D.uc),jr=ii.yb;jr<ii.Hb;++jr){ss=jr,yo=Fa;var Os=(La=(as=ii).D).Nb;$n=as.R;var La=La.wa[La.Y+ss],Pa=as.sa,oa=as.ta+16*Os*$n+16*ss,Na=La.dd,cn=La.tc;if(cn!=0)if(e(3<=cn),as.L==1)0<ss&&OC(Pa,oa,$n,cn+4),La.La&&HC(Pa,oa,$n,cn),0<yo&&MC(Pa,oa,$n,cn+4),La.La&&QC(Pa,oa,$n,cn);else{var Da=as.B,bo=as.qa,_u=as.ra+8*Os*Da+8*ss,GA=as.Ha,as=as.Ia+8*Os*Da+8*ss;Os=La.ld,0<ss&&(Si(Pa,oa,$n,cn+4,Na,Os),Zf(bo,_u,GA,as,Da,cn+4,Na,Os)),La.La&&(l0(Pa,oa,$n,cn,Na,Os),UC(bo,_u,GA,as,Da,cn,Na,Os)),0<yo&&(ri(Pa,oa,$n,cn+4,Na,Os),$A(bo,_u,GA,as,Da,cn+4,Na,Os)),La.La&&(Wd(Pa,oa,$n,cn,Na,Os),RC(bo,_u,GA,as,Da,cn,Na,Os))}}if(kt.ia&&alert("todo:DitherRow"),ct.put!=null){if(jr=16*rn,rn=16*(rn+1),Ti?(ct.y=kt.sa,ct.O=kt.ta+$r,ct.f=kt.qa,ct.N=kt.ra+aa,ct.ea=kt.Ha,ct.W=kt.Ia+aa):(jr-=Er,ct.y=is,ct.O=Us,ct.f=Vn,ct.N=xr,ct.ea=ys,ct.W=Ms),ki||(rn-=Er),rn>ct.o&&(rn=ct.o),ct.F=null,ct.J=null,kt.Fa!=null&&0<kt.Fa.length&&jr<rn&&(ct.J=Zr(kt,ct,jr,rn-jr),ct.F=kt.mb,ct.F==null&&ct.F.length==0)){ni=gr(kt,3,"Could not decode alpha data.");break t}jr<ct.j&&(Er=ct.j-jr,jr=ct.j,e(!(1&Er)),ct.O+=kt.R*Er,ct.N+=kt.B*(Er>>1),ct.W+=kt.B*(Er>>1),ct.F!=null&&(ct.J+=ct.width*Er)),jr<rn&&(ct.O+=ct.v,ct.N+=ct.v>>1,ct.W+=ct.v>>1,ct.F!=null&&(ct.J+=ct.v),ct.ka=jr-ct.j,ct.U=ct.va-ct.v,ct.T=rn-jr,ni=ct.put(ct))}or+1!=kt.Ic||ki||(n(kt.sa,kt.ta-tr,is,Us+16*kt.R,tr),n(kt.qa,kt.ra-mn,Vn,xr+8*kt.B,mn),n(kt.Ha,kt.Ia-mn,ys,Ms+8*kt.B,mn))}if(!ni)return gr(wr,6,"Output aborted.")}return 1})(ge,Ee)),Ee.bc!=null&&Ee.bc(Ee),Fe&=1}return Fe?(ge.cb=0,Fe):0})(g,O)||(w=g.a)}}else w=g.a}w==0&&ee.Oa!=null&&ee.Oa.fd&&(w=zf(ee.ba))}ee=w}Y=ee!=0?null:11>Y?ie.f.RGBA.eb:ie.f.kb.y}else Y=null;return Y};var oE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(v,T){for(var E="",x=0;x<4;x++)E+=String.fromCharCode(v[T++]);return E}function c(v,T){return v[T+0]|v[T+1]<<8}function u(v,T){return(v[T+0]|v[T+1]<<8|v[T+2]<<16)>>>0}function h(v,T){return(v[T+0]|v[T+1]<<8|v[T+2]<<16|v[T+3]<<24)>>>0}new A;var d=[0],p=[0],f=[],y=new A,b=r,B=(function(v,T){var E={},x=0,F=!1,k=0,Z=0;if(E.frames=[],!(function(N,Q){for(var V=0;V<4;V++)if(N[Q+V]!="RIFF".charCodeAt(V))return!0;return!1})(v,T)){for(h(v,T+=4),T+=8;T<v.length;){var ue=l(v,T),ne=h(v,T+=4);T+=4;var j=ne+(1&ne);switch(ue){case"VP8 ":case"VP8L":E.frames[x]===void 0&&(E.frames[x]={}),(q=E.frames[x]).src_off=F?Z:T-8,q.src_size=k+ne+8,x++,F&&(F=!1,k=0,Z=0);break;case"VP8X":(q=E.header={}).feature_flags=v[T];var G=T+4;q.canvas_width=1+u(v,G),G+=3,q.canvas_height=1+u(v,G),G+=3;break;case"ALPH":F=!0,k=j+8,Z=T-8;break;case"ANIM":(q=E.header).bgcolor=h(v,T),G=T+4,q.loop_count=c(v,G),G+=2;break;case"ANMF":var pe,q;(q=E.frames[x]={}).offset_x=2*u(v,T),T+=3,q.offset_y=2*u(v,T),T+=3,q.width=1+u(v,T),T+=3,q.height=1+u(v,T),T+=3,q.duration=u(v,T),T+=3,pe=v[T++],q.dispose=1&pe,q.blend=pe>>1&1}ue!="ANMF"&&(T+=j)}return E}})(b,0);B.response=b,B.rgbaoutput=!0,B.dataurl=!1;var S=B.header?B.header:null,C=B.frames?B.frames:null;if(S){S.loop_counter=S.loop_count,d=[S.canvas_height],p=[S.canvas_width];for(var P=0;P<C.length&&C[P].blend!=0;P++);}var M=C[0],L=y.WebPDecodeRGBA(b,M.src_off,M.src_size,p,d);M.rgba=L,M.imgwidth=p[0],M.imgheight=d[0];for(var _=0;_<p[0]*d[0]*4;_++)f[_]=L[_];return this.width=p,this.height=d,this.data=f,this}(function(r){var e,t,n,i,s,a,o,A,l,c=function(N){return N=N||{},this.isStrokeTransparent=N.isStrokeTransparent||!1,this.strokeOpacity=N.strokeOpacity||1,this.strokeStyle=N.strokeStyle||"#000000",this.fillStyle=N.fillStyle||"#000000",this.isFillTransparent=N.isFillTransparent||!1,this.fillOpacity=N.fillOpacity||1,this.font=N.font||"10px sans-serif",this.textBaseline=N.textBaseline||"alphabetic",this.textAlign=N.textAlign||"left",this.lineWidth=N.lineWidth||1,this.lineJoin=N.lineJoin||"miter",this.lineCap=N.lineCap||"butt",this.path=N.path||[],this.transform=N.transform!==void 0?N.transform.clone():new A,this.globalCompositeOperation=N.globalCompositeOperation||"normal",this.globalAlpha=N.globalAlpha||1,this.clip_path=N.clip_path||[],this.currentPoint=N.currentPoint||new a,this.miterLimit=N.miterLimit||10,this.lastPoint=N.lastPoint||new a,this.lineDashOffset=N.lineDashOffset||0,this.lineDash=N.lineDash||[],this.margin=N.margin||[0,0,0,0],this.prevPageLastElemOffset=N.prevPageLastElemOffset||0,this.ignoreClearRect=typeof N.ignoreClearRect!="boolean"||N.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new u(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,A=this.internal.Matrix,l=new c}]);var u=function(N){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=N;Object.defineProperty(this,"pdf",{get:function(){return Q}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(R){V=!!R}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(R){X=!!R}});var Ae=0;Object.defineProperty(this,"posX",{get:function(){return Ae},set:function(R){isNaN(R)||(Ae=R)}});var te=0;Object.defineProperty(this,"posY",{get:function(){return te},set:function(R){isNaN(R)||(te=R)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(R){var $;typeof R=="number"?$=[R,R,R,R]:(($=new Array(4))[0]=R[0],$[1]=R.length>=2?R[1]:$[0],$[2]=R.length>=3?R[2]:$[0],$[3]=R.length>=4?R[3]:$[1]),l.margin=$}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(R){se=R}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(R){de=R}});var ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ve},set:function(R){ve=R}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(R){R instanceof c&&(l=R)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(R){l.path=R}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(R){xe=R}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(R){var $;$=h(R),this.ctx.fillStyle=$.style,this.ctx.isFillTransparent=$.a===0,this.ctx.fillOpacity=$.a,this.pdf.setFillColor($.r,$.g,$.b,{a:$.a}),this.pdf.setTextColor($.r,$.g,$.b,{a:$.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(R){var $=h(R);this.ctx.strokeStyle=$.style,this.ctx.isStrokeTransparent=$.a===0,this.ctx.strokeOpacity=$.a,$.a===0?this.pdf.setDrawColor(255,255,255):($.a,this.pdf.setDrawColor($.r,$.g,$.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(R){["butt","round","square"].indexOf(R)!==-1&&(this.ctx.lineCap=R,this.pdf.setLineCap(R))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(R){isNaN(R)||(this.ctx.lineWidth=R,this.pdf.setLineWidth(R))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(R){["bevel","round","miter"].indexOf(R)!==-1&&(this.ctx.lineJoin=R,this.pdf.setLineJoin(R))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(R){isNaN(R)||(this.ctx.miterLimit=R,this.pdf.setMiterLimit(R))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(R){this.ctx.textBaseline=R}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(R){["right","end","center","left","start"].indexOf(R)!==-1&&(this.ctx.textAlign=R)}});var Oe=null,Ve=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ve},set:function(R){Oe=null,Ve=R}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(R){var $;if(this.ctx.font=R,($=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(R))!==null){var ye=$[1];$[2];var re=$[3],W=$[4];$[5];var ae=$[6],Ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(W)[2];W=Math.floor(Ce==="px"?parseFloat(W)*this.pdf.internal.scaleFactor:Ce==="em"?parseFloat(W)*this.pdf.getFontSize():parseFloat(W)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(W);var _e=(function(xt){var at,ut,rt=[],it=xt.trim();if(it==="")return s_;if(it in sT)return[sT[it]];for(;it!=="";){switch(ut=null,at=(it=oT(it)).charAt(0)){case'"':case"'":ut=fee(it.substring(1),at);break;default:ut=gee(it)}if(ut===null||(rt.push(ut[0]),(it=oT(ut[1]))!==""&&it.charAt(0)!==","))return s_;it=it.replace(/^,/,"")}return rt})(ae);if(this.fontFaces){var be=(function(xt,at){if(Oe===null){var ut=(function(rt){var it=[];return Object.keys(rt).forEach(function(pt){rt[pt].forEach(function(Rt){var Bt=null;switch(Rt){case"bold":Bt={family:pt,weight:"bold"};break;case"italic":Bt={family:pt,style:"italic"};break;case"bolditalic":Bt={family:pt,weight:"bold",style:"italic"};break;case"":case"normal":Bt={family:pt}}Bt!==null&&(Bt.ref={name:pt,style:Rt},it.push(Bt))})}),it})(xt.getFontList());Oe=(function(rt){for(var it={},pt=0;pt<rt.length;++pt){var Rt=i_(rt[pt]),Bt=Rt.family,Qt=Rt.stretch,Ut=Rt.style,lr=Rt.weight;it[Bt]=it[Bt]||{},it[Bt][Qt]=it[Bt][Qt]||{},it[Bt][Qt][Ut]=it[Bt][Qt][Ut]||{},it[Bt][Qt][Ut][lr]=Rt}return it})(ut.concat(at))}return Oe})(this.pdf,this.fontFaces),Ie=_e.map(function(xt){return{family:xt,stretch:"normal",weight:re,style:ye}}),Qe=(function(xt,at,ut){for(var rt=(ut=ut||{}).defaultFontFamily||"times",it=Object.assign({},hee,ut.genericFontFamilies||{}),pt=null,Rt=null,Bt=0;Bt<at.length;++Bt)if(it[(pt=i_(at[Bt])).family]&&(pt.family=it[pt.family]),xt.hasOwnProperty(pt.family)){Rt=xt[pt.family];break}if(!(Rt=Rt||xt[rt]))throw new Error("Could not find a font-family for the rule '"+aT(pt)+"' and default family '"+rt+"'.");if(Rt=(function(Qt,Ut){if(Ut[Qt])return Ut[Qt];var lr=H2[Qt],kr=lr<=H2.normal?-1:1,Tt=iT(Ut,DN,lr,kr);if(!Tt)throw new Error("Could not find a matching font-stretch value for "+Qt);return Tt})(pt.stretch,Rt),Rt=(function(Qt,Ut){if(Ut[Qt])return Ut[Qt];for(var lr=NN[Qt],kr=0;kr<lr.length;++kr)if(Ut[lr[kr]])return Ut[lr[kr]];throw new Error("Could not find a matching font-style for "+Qt)})(pt.style,Rt),!(Rt=(function(Qt,Ut){if(Ut[Qt])return Ut[Qt];if(Qt===400&&Ut[500])return Ut[500];if(Qt===500&&Ut[400])return Ut[400];var lr=dee[Qt],kr=iT(Ut,RN,lr,Qt<400?-1:1);if(!kr)throw new Error("Could not find a matching font-weight for value "+Qt);return kr})(pt.weight,Rt)))throw new Error("Failed to resolve a font for the rule '"+aT(pt)+"'.");return Rt})(be,Ie);this.pdf.setFont(Qe.ref.name,Qe.ref.style)}else{var Pe="";(re==="bold"||parseInt(re,10)>=700||ye==="bold")&&(Pe="bold"),ye==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var He="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tt=0;tt<_e.length;tt++){if(this.pdf.internal.getFont(_e[tt],Pe,{noFallback:!0,disableWarning:!0})!==void 0){He=_e[tt];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(_e[tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)He=_e[tt],Pe="bold";else if(this.pdf.internal.getFont(_e[tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){He=_e[tt],Pe="normal";break}}if(He===""){for(var lt=0;lt<_e.length;lt++)if(At[_e[lt]]){He=At[_e[lt]];break}}He=He===""?"Times":He,this.pdf.setFont(He,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(R){this.ctx.globalCompositeOperation=R}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(R){this.ctx.globalAlpha=R}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(R){this.ctx.lineDashOffset=R,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(R){this.ctx.lineDash=R,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(R){this.ctx.ignoreClearRect=!!R}})};u.prototype.setLineDash=function(N){this.lineDash=N},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){C.call(this,"fill",!1)},u.prototype.stroke=function(){C.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(N,Q){if(isNaN(N)||isNaN(Q))throw nn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new a(N,Q));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new a(N,Q)},u.prototype.closePath=function(){var N=new a(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&Kr(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){N=new a(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(N.x,N.y)},u.prototype.lineTo=function(N,Q){if(isNaN(N)||isNaN(Q))throw nn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new a(N,Q));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new a(V.x,V.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},u.prototype.quadraticCurveTo=function(N,Q,V,X){if(isNaN(V)||isNaN(X)||isNaN(N)||isNaN(Q))throw nn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ae=this.ctx.transform.applyToPoint(new a(V,X)),te=this.ctx.transform.applyToPoint(new a(N,Q));this.path.push({type:"qct",x1:te.x,y1:te.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new a(Ae.x,Ae.y)},u.prototype.bezierCurveTo=function(N,Q,V,X,Ae,te){if(isNaN(Ae)||isNaN(te)||isNaN(N)||isNaN(Q)||isNaN(V)||isNaN(X))throw nn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new a(Ae,te)),de=this.ctx.transform.applyToPoint(new a(N,Q)),ve=this.ctx.transform.applyToPoint(new a(V,X));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:ve.x,y2:ve.y,x:se.x,y:se.y}),this.ctx.lastPoint=new a(se.x,se.y)},u.prototype.arc=function(N,Q,V,X,Ae,te){if(isNaN(N)||isNaN(Q)||isNaN(V)||isNaN(X)||isNaN(Ae))throw nn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(te=!!te,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new a(N,Q));N=se.x,Q=se.y;var de=this.ctx.transform.applyToPoint(new a(0,V)),ve=this.ctx.transform.applyToPoint(new a(0,0));V=Math.sqrt(Math.pow(de.x-ve.x,2)+Math.pow(de.y-ve.y,2))}Math.abs(Ae-X)>=2*Math.PI&&(X=0,Ae=2*Math.PI),this.path.push({type:"arc",x:N,y:Q,radius:V,startAngle:X,endAngle:Ae,counterclockwise:te})},u.prototype.arcTo=function(N,Q,V,X,Ae){throw new Error("arcTo not implemented.")},u.prototype.rect=function(N,Q,V,X){if(isNaN(N)||isNaN(Q)||isNaN(V)||isNaN(X))throw nn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(N,Q),this.lineTo(N+V,Q),this.lineTo(N+V,Q+X),this.lineTo(N,Q+X),this.lineTo(N,Q),this.lineTo(N+V,Q),this.lineTo(N,Q)},u.prototype.fillRect=function(N,Q,V,X){if(isNaN(N)||isNaN(Q)||isNaN(V)||isNaN(X))throw nn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var Ae={};this.lineCap!=="butt"&&(Ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(N,Q,V,X),this.fill(),Ae.hasOwnProperty("lineCap")&&(this.lineCap=Ae.lineCap),Ae.hasOwnProperty("lineJoin")&&(this.lineJoin=Ae.lineJoin)}},u.prototype.strokeRect=function(N,Q,V,X){if(isNaN(N)||isNaN(Q)||isNaN(V)||isNaN(X))throw nn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(N,Q,V,X),this.stroke())},u.prototype.clearRect=function(N,Q,V,X){if(isNaN(N)||isNaN(Q)||isNaN(V)||isNaN(X))throw nn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(N,Q,V,X))},u.prototype.save=function(N){N=typeof N!="boolean"||N;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),N){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},u.prototype.restore=function(N){N=typeof N!="boolean"||N;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),N&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(N){var Q,V,X,Ae;if(N.isCanvasGradient===!0&&(N=N.getColor()),!N)return{r:0,g:0,b:0,a:0,style:N};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(N))Q=0,V=0,X=0,Ae=0;else{var te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(N);if(te!==null)Q=parseInt(te[1]),V=parseInt(te[2]),X=parseInt(te[3]),Ae=1;else if((te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(N))!==null)Q=parseInt(te[1]),V=parseInt(te[2]),X=parseInt(te[3]),Ae=parseFloat(te[4]);else{if(Ae=1,typeof N=="string"&&N.charAt(0)!=="#"){var se=new SN(N);N=se.ok?se.toHex():"#000000"}N.length===4?(Q=N.substring(1,2),Q+=Q,V=N.substring(2,3),V+=V,X=N.substring(3,4),X+=X):(Q=N.substring(1,3),V=N.substring(3,5),X=N.substring(5,7)),Q=parseInt(Q,16),V=parseInt(V,16),X=parseInt(X,16)}}return{r:Q,g:V,b:X,a:Ae,style:N}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(N,Q,V,X){if(isNaN(Q)||isNaN(V)||typeof N!="string")throw nn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!d.call(this)){var Ae=j(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;x.call(this,{text:N,x:Q,y:V,scale:te,angle:Ae,align:this.textAlign,maxWidth:X})}},u.prototype.strokeText=function(N,Q,V,X){if(isNaN(Q)||isNaN(V)||typeof N!="string")throw nn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){X=isNaN(X)?void 0:X;var Ae=j(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;x.call(this,{text:N,x:Q,y:V,scale:te,renderingMode:"stroke",angle:Ae,align:this.textAlign,maxWidth:X})}},u.prototype.measureText=function(N){if(typeof N!="string")throw nn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,V=this.pdf.internal.scaleFactor,X=Q.internal.getFontSize(),Ae=Q.getStringUnitWidth(N)*X/Q.internal.scaleFactor;return new function(te){var se=(te=te||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return se}}),this}({width:Ae*=Math.round(96*V/72*1e4)/1e4})},u.prototype.scale=function(N,Q){if(isNaN(N)||isNaN(Q))throw nn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new A(N,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},u.prototype.rotate=function(N){if(isNaN(N))throw nn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new A(Math.cos(N),Math.sin(N),-Math.sin(N),Math.cos(N),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},u.prototype.translate=function(N,Q){if(isNaN(N)||isNaN(Q))throw nn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new A(1,0,0,1,N,Q);this.ctx.transform=this.ctx.transform.multiply(V)},u.prototype.transform=function(N,Q,V,X,Ae,te){if(isNaN(N)||isNaN(Q)||isNaN(V)||isNaN(X)||isNaN(Ae)||isNaN(te))throw nn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new A(N,Q,V,X,Ae,te);this.ctx.transform=this.ctx.transform.multiply(se)},u.prototype.setTransform=function(N,Q,V,X,Ae,te){N=isNaN(N)?1:N,Q=isNaN(Q)?0:Q,V=isNaN(V)?0:V,X=isNaN(X)?1:X,Ae=isNaN(Ae)?0:Ae,te=isNaN(te)?0:te,this.ctx.transform=new A(N,Q,V,X,Ae,te)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(N,Q,V,X,Ae,te,se,de,ve){var xe=this.pdf.getImageProperties(N),Oe=1,Ve=1,R=1,$=1;X!==void 0&&de!==void 0&&(R=de/X,$=ve/Ae,Oe=xe.width/X*de/X,Ve=xe.height/Ae*ve/Ae),te===void 0&&(te=Q,se=V,Q=0,V=0),X!==void 0&&de===void 0&&(de=X,ve=Ae),X===void 0&&de===void 0&&(de=xe.width,ve=xe.height);for(var ye,re=this.ctx.transform.decompose(),W=j(re.rotate.shx),ae=new A,Ce=(ae=(ae=(ae=ae.multiply(re.translate)).multiply(re.skew)).multiply(re.scale)).applyToRectangle(new o(te-Q*R,se-V*$,X*Oe,Ae*Ve)),_e=y.call(this,Ce),be=[],Ie=0;Ie<_e.length;Ie+=1)be.indexOf(_e[Ie])===-1&&be.push(_e[Ie]);if(S(be),this.autoPaging)for(var Qe=be[0],Pe=be[be.length-1],He=Qe;He<Pe+1;He++){this.pdf.setPage(He);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=He===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=He===1?0:lt+(He-2)*xt;if(this.ctx.clip_path.length!==0){var ut=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(ye,this.posX+this.margin[3],-at+tt+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=ut}var rt=JSON.parse(JSON.stringify(Ce));rt=B([rt],this.posX+this.margin[3],-at+tt+this.ctx.prevPageLastElemOffset)[0];var it=(He>Qe||He<Pe)&&f.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,xt,null).clip().discardPath()),this.pdf.addImage(N,"JPEG",rt.x,rt.y,rt.w,rt.h,null,null,W),it&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(N,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,W)};var y=function(N,Q,V){var X=[];Q=Q||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ae=this.posY+this.ctx.prevPageLastElemOffset;switch(N.type){default:case"mt":case"lt":X.push(Math.floor((N.y+Ae)/V)+1);break;case"arc":X.push(Math.floor((N.y+Ae-N.radius)/V)+1),X.push(Math.floor((N.y+Ae+N.radius)/V)+1);break;case"qct":var te=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x,N.y);X.push(Math.floor((te.y+Ae)/V)+1),X.push(Math.floor((te.y+te.h+Ae)/V)+1);break;case"bct":var se=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);X.push(Math.floor((se.y+Ae)/V)+1),X.push(Math.floor((se.y+se.h+Ae)/V)+1);break;case"rect":X.push(Math.floor((N.y+Ae)/V)+1),X.push(Math.floor((N.y+N.h+Ae)/V)+1)}for(var de=0;de<X.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<X[de];)b.call(this);return X},b=function(){var N=this.fillStyle,Q=this.strokeStyle,V=this.font,X=this.lineCap,Ae=this.lineWidth,te=this.lineJoin;this.pdf.addPage(),this.fillStyle=N,this.strokeStyle=Q,this.font=V,this.lineCap=X,this.lineWidth=Ae,this.lineJoin=te},B=function(N,Q,V){for(var X=0;X<N.length;X++)switch(N[X].type){case"bct":N[X].x2+=Q,N[X].y2+=V;case"qct":N[X].x1+=Q,N[X].y1+=V;default:N[X].x+=Q,N[X].y+=V}return N},S=function(N){return N.sort(function(Q,V){return Q-V})},C=function(N,Q){for(var V,X,Ae=this.fillStyle,te=this.strokeStyle,se=this.lineCap,de=this.lineWidth,ve=Math.abs(de*this.ctx.transform.scaleX),xe=this.lineJoin,Oe=JSON.parse(JSON.stringify(this.path)),Ve=JSON.parse(JSON.stringify(this.path)),R=[],$=0;$<Ve.length;$++)if(Ve[$].x!==void 0)for(var ye=y.call(this,Ve[$]),re=0;re<ye.length;re+=1)R.indexOf(ye[re])===-1&&R.push(ye[re]);for(var W=0;W<R.length;W++)for(;this.pdf.internal.getNumberOfPages()<R[W];)b.call(this);if(S(R),this.autoPaging)for(var ae=R[0],Ce=R[R.length-1],_e=ae;_e<Ce+1;_e++){this.pdf.setPage(_e),this.fillStyle=Ae,this.strokeStyle=te,this.lineCap=se,this.lineWidth=ve,this.lineJoin=xe;var be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ie=_e===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],He=_e===1?0:Qe+(_e-2)*Pe;if(this.ctx.clip_path.length!==0){var At=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(V,this.posX+this.margin[3],-He+Ie+this.ctx.prevPageLastElemOffset),P.call(this,N,!0),this.path=At}if(X=JSON.parse(JSON.stringify(Oe)),this.path=B(X,this.posX+this.margin[3],-He+Ie+this.ctx.prevPageLastElemOffset),Q===!1||_e===0){var tt=(_e>ae||_e<Ce)&&f.call(this);tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],be,Pe,null).clip().discardPath()),P.call(this,N,Q),tt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=ve,P.call(this,N,Q),this.lineWidth=de;this.path=Oe},P=function(N,Q){if((N!=="stroke"||Q||!p.call(this))&&(N==="stroke"||Q||!d.call(this))){for(var V,X,Ae=[],te=this.path,se=0;se<te.length;se++){var de=te[se];switch(de.type){case"begin":Ae.push({begin:!0});break;case"close":Ae.push({close:!0});break;case"mt":Ae.push({start:de,deltas:[],abs:[]});break;case"lt":var ve=Ae.length;if(te[se-1]&&!isNaN(te[se-1].x)&&(V=[de.x-te[se-1].x,de.y-te[se-1].y],ve>0)){for(;ve>=0;ve--)if(Ae[ve-1].close!==!0&&Ae[ve-1].begin!==!0){Ae[ve-1].deltas.push(V),Ae[ve-1].abs.push(de);break}}break;case"bct":V=[de.x1-te[se-1].x,de.y1-te[se-1].y,de.x2-te[se-1].x,de.y2-te[se-1].y,de.x-te[se-1].x,de.y-te[se-1].y],Ae[Ae.length-1].deltas.push(V);break;case"qct":var xe=te[se-1].x+2/3*(de.x1-te[se-1].x),Oe=te[se-1].y+2/3*(de.y1-te[se-1].y),Ve=de.x+2/3*(de.x1-de.x),R=de.y+2/3*(de.y1-de.y),$=de.x,ye=de.y;V=[xe-te[se-1].x,Oe-te[se-1].y,Ve-te[se-1].x,R-te[se-1].y,$-te[se-1].x,ye-te[se-1].y],Ae[Ae.length-1].deltas.push(V);break;case"arc":Ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ae[Ae.length-1].abs)&&Ae[Ae.length-1].abs.push(de)}}X=Q?null:N==="stroke"?"stroke":"fill";for(var re=!1,W=0;W<Ae.length;W++)if(Ae[W].arc)for(var ae=Ae[W].abs,Ce=0;Ce<ae.length;Ce++){var _e=ae[Ce];_e.type==="arc"?_.call(this,_e.x,_e.y,_e.radius,_e.startAngle,_e.endAngle,_e.counterclockwise,void 0,Q,!re):F.call(this,_e.x,_e.y),re=!0}else if(Ae[W].close===!0)this.pdf.internal.out("h"),re=!1;else if(Ae[W].begin!==!0){var be=Ae[W].start.x,Ie=Ae[W].start.y;k.call(this,Ae[W].deltas,be,Ie),re=!0}X&&v.call(this,X),Q&&T.call(this)}},M=function(N){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return N-V;case"top":return N+Q-V;case"hanging":return N+Q-2*V;case"middle":return N+Q/2-V;default:return N}},L=function(N){return N+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var N=function(){};return N.colorStops=[],N.addColorStop=function(Q,V){this.colorStops.push([Q,V])},N.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},N.isCanvasGradient=!0,N},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(N,Q,V,X,Ae,te,se,de,ve){for(var xe=ue.call(this,V,X,Ae,te),Oe=0;Oe<xe.length;Oe++){var Ve=xe[Oe];Oe===0&&(ve?E.call(this,Ve.x1+N,Ve.y1+Q):F.call(this,Ve.x1+N,Ve.y1+Q)),Z.call(this,N,Q,Ve.x2,Ve.y2,Ve.x3,Ve.y3,Ve.x4,Ve.y4)}de?T.call(this):v.call(this,se)},v=function(N){switch(N){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(N,Q){this.pdf.internal.out(t(N)+" "+n(Q)+" m")},x=function(N){var Q;switch(N.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var V=this.pdf.getTextDimensions(N.text),X=M.call(this,N.y),Ae=L.call(this,X)-V.h,te=this.ctx.transform.applyToPoint(new a(N.x,X)),se=this.ctx.transform.decompose(),de=new A;de=(de=(de=de.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var ve,xe,Oe,Ve=this.ctx.transform.applyToRectangle(new o(N.x,X,V.w,V.h)),R=de.applyToRectangle(new o(N.x,Ae,V.w,V.h)),$=y.call(this,R),ye=[],re=0;re<$.length;re+=1)ye.indexOf($[re])===-1&&ye.push($[re]);if(S(ye),this.autoPaging)for(var W=ye[0],ae=ye[ye.length-1],Ce=W;Ce<ae+1;Ce++){this.pdf.setPage(Ce);var _e=Ce===1?this.posY+this.margin[0]:this.margin[0],be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ie=this.pdf.internal.pageSize.height-this.margin[2],Qe=Ie-this.margin[0],Pe=this.pdf.internal.pageSize.width-this.margin[1],He=Pe-this.margin[3],At=Ce===1?0:be+(Ce-2)*Qe;if(this.ctx.clip_path.length!==0){var tt=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(ve,this.posX+this.margin[3],-1*At+_e),P.call(this,"fill",!0),this.path=tt}var lt=B([JSON.parse(JSON.stringify(R))],this.posX+this.margin[3],-At+_e+this.ctx.prevPageLastElemOffset)[0];N.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*N.scale),Oe=this.lineWidth,this.lineWidth=Oe*N.scale);var xt=this.autoPaging!=="text";if(xt||lt.y+lt.h<=Ie){if(xt||lt.y>=_e&&lt.x<=Pe){var at=xt?N.text:this.pdf.splitTextToSize(N.text,N.maxWidth||Pe-lt.x)[0],ut=B([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-At+_e+this.ctx.prevPageLastElemOffset)[0],rt=xt&&(Ce>W||Ce<ae)&&f.call(this);rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,Qe,null).clip().discardPath()),this.pdf.text(at,ut.x,ut.y,{angle:N.angle,align:Q,renderingMode:N.renderingMode}),rt&&this.pdf.restoreGraphicsState()}}else lt.y<Ie&&(this.ctx.prevPageLastElemOffset+=Ie-lt.y);N.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Oe)}else N.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*N.scale),Oe=this.lineWidth,this.lineWidth=Oe*N.scale),this.pdf.text(N.text,te.x+this.posX,te.y+this.posY,{angle:N.angle,align:Q,renderingMode:N.renderingMode,maxWidth:N.maxWidth}),N.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Oe)},F=function(N,Q,V,X){V=V||0,X=X||0,this.pdf.internal.out(t(N+V)+" "+n(Q+X)+" l")},k=function(N,Q,V){return this.pdf.lines(N,Q,V,null,null)},Z=function(N,Q,V,X,Ae,te,se,de){this.pdf.internal.out([e(i(V+N)),e(s(X+Q)),e(i(Ae+N)),e(s(te+Q)),e(i(se+N)),e(s(de+Q)),"c"].join(" "))},ue=function(N,Q,V,X){for(var Ae=2*Math.PI,te=Math.PI/2;Q>V;)Q-=Ae;var se=Math.abs(V-Q);se<Ae&&X&&(se=Ae-se);for(var de=[],ve=X?-1:1,xe=Q;se>1e-5;){var Oe=xe+ve*Math.min(se,te);de.push(ne.call(this,N,xe,Oe)),se-=Math.abs(Oe-xe),xe=Oe}return de},ne=function(N,Q,V){var X=(V-Q)/2,Ae=N*Math.cos(X),te=N*Math.sin(X),se=Ae,de=-te,ve=se*se+de*de,xe=ve+se*Ae+de*te,Oe=4/3*(Math.sqrt(2*ve*xe)-xe)/(se*te-de*Ae),Ve=se-Oe*de,R=de+Oe*se,$=Ve,ye=-R,re=X+Q,W=Math.cos(re),ae=Math.sin(re);return{x1:N*Math.cos(Q),y1:N*Math.sin(Q),x2:Ve*W-R*ae,y2:Ve*ae+R*W,x3:$*W-ye*ae,y3:$*ae+ye*W,x4:N*Math.cos(V),y4:N*Math.sin(V)}},j=function(N){return 180*N/Math.PI},G=function(N,Q,V,X,Ae,te){var se=N+.5*(V-N),de=Q+.5*(X-Q),ve=Ae+.5*(V-Ae),xe=te+.5*(X-te),Oe=Math.min(N,Ae,se,ve),Ve=Math.max(N,Ae,se,ve),R=Math.min(Q,te,de,xe),$=Math.max(Q,te,de,xe);return new o(Oe,R,Ve-Oe,$-R)},pe=function(N,Q,V,X,Ae,te,se,de){var ve,xe,Oe,Ve,R,$,ye,re,W,ae,Ce,_e,be,Ie,Qe=V-N,Pe=X-Q,He=Ae-V,At=te-X,tt=se-Ae,lt=de-te;for(xe=0;xe<41;xe++)W=(ye=(Oe=N+(ve=xe/40)*Qe)+ve*((R=V+ve*He)-Oe))+ve*(R+ve*(Ae+ve*tt-R)-ye),ae=(re=(Ve=Q+ve*Pe)+ve*(($=X+ve*At)-Ve))+ve*($+ve*(te+ve*lt-$)-re),xe==0?(Ce=W,_e=ae,be=W,Ie=ae):(Ce=Math.min(Ce,W),_e=Math.min(_e,ae),be=Math.max(be,W),Ie=Math.max(Ie,ae));return new o(Math.round(Ce),Math.round(_e),Math.round(be-Ce),Math.round(Ie-_e))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var N,Q,V=(N=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:N,lineDashOffset:Q}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(Ct.API),(function(r){var e=function(a){var o,A,l,c,u,h,d,p,f,y;for(A=[],l=0,c=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;c>l;l+=4)(u=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(y=u%85))/85)-(f=u%85))/85)-(p=u%85))/85)-(d=u%85))/85)%85,A.push(h+33,d+33,p+33,f+33,y+33)):A.push(122);return(function(b,B){for(var S=B;S>0;S--)b.pop()})(A,o.length),String.fromCharCode.apply(String,A)+"~>"},t=function(a){var o,A,l,c,u,h=String,d="length",p=255,f="charCodeAt",y="slice",b="replace";for(a[y](-2),a=a[y](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],c=0,u=(a+=o="uuuuu"[y](a[d]%5||5))[d];u>c;c+=5)A=52200625*(a[f](c)-33)+614125*(a[f](c+1)-33)+7225*(a[f](c+2)-33)+85*(a[f](c+3)-33)+(a[f](c+4)-33),l.push(p&A>>24,p&A>>16,p&A>>8,p&A);return(function(B,S){for(var C=S;C>0;C--)B.pop()})(l,o[d]),h.fromCharCode.apply(h,l)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var A="",l=0;l<a.length;l+=2)A+=String.fromCharCode("0x"+(a[l]+a[l+1]));return A},s=function(a){for(var o=new Uint8Array(a.length),A=a.length;A--;)o[A]=a.charCodeAt(A);return(o=N2(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};r.processDataByFilters=function(a,o){var A=0,l=a||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),A=0;A<o.length;A+=1)switch(o[A]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=n(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[A]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}})(Ct.API),(function(r){r.loadFile=function(e,t,n){return(function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(A,l,c){var u=new XMLHttpRequest,h=0,d=function(p){var f=p.length,y=[],b=String.fromCharCode;for(h=0;h<f;h+=1)y.push(b(255&p.charCodeAt(h)));return y.join("")};if(u.open("GET",A,!l),u.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(u.onload=function(){u.status===200?c(d(this.responseText)):c(void 0)}),u.send(null),l&&u.status===200)return d(u.responseText)})(i,s,a)}catch{}return o})(e,t,n)},r.loadImageFile=r.loadFile})(Ct.API),(function(r){function e(){return(qt.html2canvas?Promise.resolve(qt.html2canvas):Q1(()=>Promise.resolve().then(()=>jX),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(qt.DOMPurify?Promise.resolve(qt.DOMPurify):Q1(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var A=Kr(o);return A==="undefined"?"undefined":A==="string"||o instanceof String?"string":A==="number"||o instanceof Number?"number":A==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":A==="object"?"object":"unknown"},i=function(o,A){var l=document.createElement(o);for(var c in A.className&&(l.className=A.className),A.innerHTML&&A.dompurify&&(l.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)l.style[c]=A.style[c];return l},s=function o(A,l){for(var c=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),u=A.firstChild;u;u=u.nextSibling)l!==!0&&u.nodeType===1&&u.nodeName==="SCRIPT"||c.appendChild(o(u,l));return A.nodeType===1&&(A.nodeName==="CANVAS"?(c.width=A.width,c.height=A.height,c.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(c.value=A.value),c.addEventListener("load",function(){c.scrollTop=A.scrollTop,c.scrollLeft=A.scrollLeft},!0)),c},a=function o(A){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return(c=c.setProgress(1,o,1,[o])).set(A)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,A){return o.__proto__=A||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,A){return this.then(function(){switch(A=A||(function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),A){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(A){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,A(this.prop.container,l)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(A){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var d=0;d<c.length;++d){var p=c[d],f=p.src.find(function(y){return y.format==="truetype"});f&&l.addFont(f.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),A(this.prop.container,h)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,A,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,A):this.outputPdf(o,A)},a.prototype.outputPdf=function(o,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,A)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var A=Object.keys(o||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(A)})},a.prototype.get=function(o,A){return this.then(function(){var l=o in a.template.prop?this.prop[o]:this.opt[o];return A?A(l):l})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function A(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:A(o.inner.width,o.k),height:A(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,A,l,c){return o!=null&&(this.progress.val=o),A!=null&&(this.progress.state=A),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,A,l,c){return this.setProgress(o?this.progress.val+o:null,A||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},a.prototype.then=function(o,A){var l=this;return this.thenCore(o,A,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(o,A,l){l=l||Promise.prototype.then;var c=this;o&&(o=o.bind(c)),A&&(A=A.bind(c));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?c:a.convert(Object.assign({},c),Promise.prototype),h=l.call(u,o,A);return a.convert(h,c.__proto__)},a.prototype.thenExternal=function(o,A){return Promise.prototype.then.call(this,o,A)},a.prototype.thenList=function(o){var A=this;return o.forEach(function(l){A=A.thenCore(l)}),A},a.prototype.catch=function(o){o&&(o=o.bind(this));var A=Promise.prototype.catch.call(this,o);return a.convert(A,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Ct.getPageSize=function(o,A,l){if(Kr(o)==="object"){var c=o;o=c.orientation,A=c.unit||A,l=c.format||l}A=A||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+A}var p,f=0,y=0;if(d.hasOwnProperty(h))f=d[h][1]/u,y=d[h][0]/u;else try{f=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",y>f&&(p=y,y=f,f=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",f>y&&(p=y,y=f,f=p)}return{width:y,height:f,unit:A,k:u,orientation:o}},r.html=function(o,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(i_):null;var l=new a(A);return A.worker?l:l.from(o).doCallback()}})(Ct.API),Ct.API.addJS=function(r){return lT=r,this.internal.events.subscribe("postPutResources",function(){_y=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_y+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),AT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+lT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_y!==void 0&&AT!==void 0&&this.internal.out("/Names <</JavaScript "+_y+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var A=o[1];t.internal.newObjectDeferredBegin(A,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(s=0;s<l;s++){var u=t.internal.newObject();c.push(u);var h=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<c.length;s++)t.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var A=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<n.children.length;l++)this.renderItems(n.children[l])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])})(Ct.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,s,a,o){var A,l=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,A=(function(u){for(var h,d=256*u.charCodeAt(4)+u.charCodeAt(5),p=u.length,f={width:0,height:0,numcomponents:1},y=4;y<p;y+=2){if(y+=d,e.indexOf(u.charCodeAt(y+1))!==-1){h=256*u.charCodeAt(y+5)+u.charCodeAt(y+6),f={width:256*u.charCodeAt(y+7)+u.charCodeAt(y+8),height:h,numcomponents:u.charCodeAt(y+9)};break}d=256*u.charCodeAt(y+2)+u.charCodeAt(y+3)}return f})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),A.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}c={data:t,width:A.width,height:A.height,colorSpace:o,bitsPerComponent:8,filter:l,index:n,alias:i}}return c}})(Ct.API),Ct.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,s=JZ(r,{checkCrc:!0}),a=s.width,o=s.height,A=s.channels,l=s.palette,c=s.depth;i=l&&A===1?(function(_){for(var v=_.width,T=_.height,E=_.data,x=_.palette,F=_.depth,k=!1,Z=[],ue=[],ne=void 0,j=!1,G=0,pe=0;pe<x.length;pe++){var q=hk(x[pe],4),N=q[0],Q=q[1],V=q[2],X=q[3];Z.push(N,Q,V),X!=null&&(X===0?(G++,ue.length<1&&ue.push(pe)):X<255&&(j=!0))}if(j||G>1){k=!0,ue=void 0;var Ae=v*T;ne=new Uint8Array(Ae);for(var te=new DataView(E.buffer),se=0;se<Ae;se++){var de=a_(te,se,F),ve=hk(x[de],4)[3];ne[se]=ve}}else G===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:k?8:void 0,colorBytes:E,alphaBytes:ne,needSMask:k,palette:Z,mask:ue}})(s):A===2||A===4?(function(_){for(var v=_.data,T=_.width,E=_.height,x=_.channels,F=_.depth,k=x===2?"DeviceGray":"DeviceRGB",Z=x-1,ue=T*E,ne=Z,j=ue*ne,G=1*ue,pe=Math.ceil(j*F/8),q=Math.ceil(G*F/8),N=new Uint8Array(pe),Q=new Uint8Array(q),V=new DataView(v.buffer),X=new DataView(N.buffer),Ae=new DataView(Q.buffer),te=!1,se=0;se<ue;se++){for(var de=se*x,ve=0;ve<ne;ve++)yT(X,a_(V,de+ve,F),se*ne+ve,F);var xe=a_(V,de+ne,F);xe<(1<<F)-1&&(te=!0),yT(Ae,xe,1*se,F)}return{colorSpace:k,colorsPerPixel:Z,sMaskBitsPerComponent:te?F:void 0,colorBytes:N,alphaBytes:Q,needSMask:te}})(s):(function(_){var v=_.data,T=_.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:T,colorsPerPixel:T==="DeviceGray"?1:3,colorBytes:v instanceof Uint16Array?(function(E){for(var x=E.length,F=new Uint8Array(2*x),k=new DataView(F.buffer,F.byteOffset,F.byteLength),Z=0;Z<x;Z++)k.setUint16(2*Z,E[Z],!1);return F})(v):v,needSMask:!1}})(s);var u,h,d,p=i,f=p.colorSpace,y=p.colorsPerPixel,b=p.sMaskBitsPerComponent,B=p.colorBytes,S=p.alphaBytes,C=p.needSMask,P=p.palette,M=p.mask,L=null;return n!==Ct.API.image_compression.NONE&&typeof N2=="function"?(L=(function(_){var v;switch(_){case Ct.API.image_compression.FAST:v=11;break;case Ct.API.image_compression.MEDIUM:v=13;break;case Ct.API.image_compression.SLOW:v=14;break;default:v=12}return v})(n),u=this.decode.FLATE_DECODE,h="/Predictor ".concat(L," /Colors ").concat(y," /BitsPerComponent ").concat(c," /Columns ").concat(a),r=hT(B,Math.ceil(a*y*c/8),y,c,n),C&&(d=hT(S,Math.ceil(a*b/8),1,b,n))):(u=void 0,h=void 0,r=B,C&&(d=S)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:t,data:r,index:e,filter:u,decodeParameters:h,transparency:M,palette:P,sMask:d,predictor:L,width:a,height:o,bitsPerComponent:c,sMaskBitsPerComponent:b,colorSpace:f}}},(function(r){r.processGIF89A=function(e,t,n,i){var s=new bee(e),a=s.width,o=s.height,A=[];s.decodeAndBlitFrameRGBA(0,A);var l={data:A,width:a,height:o},c=new o_(100).encode(l,100);return r.processJPEG.call(this,c,t,n,i)},r.processGIF87A=r.processGIF89A})(Ct.API),wo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wo.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){nn.log("bit decode error:"+t)}},wo.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var A=this.palette[s>>7-o&1];this.data[a+4*o]=A.blue,this.data[a+4*o+1]=A.green,this.data[a+4*o+2]=A.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},wo.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,A=15&s,l=this.palette[o];if(this.data[a]=l.blue,this.data[a+1]=l.green,this.data[a+2]=l.red,this.data[a+3]=255,2*i+1>=this.width)break;l=this.palette[A],this.data[a+4]=l.blue,this.data[a+4+1]=l.green,this.data[a+4+2]=l.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},wo.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},wo.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,A=(s>>10&e)/e*255|0,l=s>>15?255:0,c=n*this.width*4+4*i;this.data[c]=A,this.data[c+1]=o,this.data[c+2]=a,this.data[c+3]=l}this.pos+=r}},wo.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,A=(a>>5&t)/t*255|0,l=(a>>11)/e*255|0,c=i*this.width*4+4*s;this.data[c]=l,this.data[c+1]=A,this.data[c+2]=o,this.data[c+3]=255}this.pos+=r}},wo.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},wo.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},wo.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,i){var s=new wo(e,!1),a=s.width,o=s.height,A={data:s.getData(),width:a,height:o},l=new o_(100).encode(A,100);return r.processJPEG.call(this,l,t,n,i)}})(Ct.API),wT.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,i){var s=new wT(e),a=s.width,o=s.height,A={data:s.getData(),width:a,height:o},l=new o_(100).encode(A,100);return r.processJPEG.call(this,l,t,n,i)}})(Ct.API),Ct.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,A=0,l=0;l<i;l+=4){var c=n[l],u=n[l+1],h=n[l+2],d=n[l+3];s[o++]=c,s[o++]=u,s[o++]=h,a[A++]=d}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:p,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Ct.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ah=Ct.API,xy=Ah.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,A=o.fof?o.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=l.fof?l.fof:1,u=e.doKerning!==!1,h=0,d=r.length,p=0,f=o[0]||A,y=[];for(t=0;t<d;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(h=u&&Kr(l[n])==="object"&&!isNaN(parseInt(l[n][p],10))?l[n][p]/c:0,y.push((o[n]||f)/A+h)),p=n;return y},cT=Ah.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ah.processArabic&&(r=Ah.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:xy.apply(this,arguments).reduce(function(s,a){return s+a},0)},uT=function(r,e,t,n){for(var i=[],s=0,a=r.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;i.push(r.slice(0,s));var A=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(r.slice(A,s)),o=0,A=s),o+=e[s],s++;return A!==s&&i.push(r.slice(A,s)),i},dT=function(r,e,t){t||(t={});var n,i,s,a,o,A,l,c=[],u=[c],h=t.textIndent||0,d=0,p=0,f=r.split(" "),y=xy.apply(this,[" ",t])[0];if(A=t.lineIndent===-1?f[0].length+2:t.lineIndent||0){var b=Array(A).join(" "),B=[];f.map(function(C){(C=C.split(/\s*\n/)).length>1?B=B.concat(C.map(function(P,M){return(M&&P.length?`
`:"")+P})):B.push(C[0])}),f=B,A=cT.apply(this,[b,t])}for(s=0,a=f.length;s<a;s++){var S=0;if(n=f[s],A&&n[0]==`
`&&(n=n.substr(1),S=1),h+d+(p=(i=xy.apply(this,[n,t])).reduce(function(C,P){return C+P},0))>e||S){if(p>e){for(o=uT.apply(this,[n,i,e-(h+d),e]),c.push(o.shift()),c=[o.pop()];o.length;)u.push([o.shift()]);p=i.slice(n.length-(c[0]?c[0].length:0)).reduce(function(C,P){return C+P},0)}else c=[n];u.push(c),h=p+A,d=y}else c.push(n),h+=d+p,d=y}return l=A?function(C,P){return(P?b:"")+C.join(" ")}:function(C){return C.join(" ")},u.map(l)},Ah.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var u=this.internal.getFont(c.fontName,c.fontStyle),h="Unicode";return u.metadata[h]?{widths:u.metadata[h].widths||{0:1},kerning:u.metadata[h].kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var o,A,l=[];for(o=0,A=n.length;o<A;o++)l=l.concat(dT.apply(this,[n[o],a,s]));return l},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[t[s]]=e[s],i[e[s]]=t[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},o=r.__fontmetrics__.compress=function(h){var d,p,f,y,b=["{"];for(var B in h){if(d=h[B],isNaN(parseInt(B,10))?p="'"+B+"'":(B=parseInt(B,10),p=(p=a(B).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof d=="number")d<0?(f=a(d).slice(3),y="-"):(f=a(d).slice(2),y=""),f=y+f.slice(0,-1)+i[f.slice(-1)];else{if(Kr(d)!=="object")throw new Error("Don't know what to do with value type "+Kr(d)+".");f=o(d)}b.push(p+f)}return b.push("}"),b.join("")},A=r.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,p,f,y,b={},B=1,S=b,C=[],P="",M="",L=h.length-1,_=1;_<L;_+=1)(y=h[_])=="'"?d?(f=d.join(""),d=void 0):d=[]:d?d.push(y):y=="{"?(C.push([S,f]),S={},f=void 0):y=="}"?((p=C.pop())[0][p[1]]=S,f=void 0,S=p[0]):y=="-"?B=-1:f===void 0?n.hasOwnProperty(y)?(P+=n[y],f=parseInt(P,16)*B,B=1,P=""):P+=y:n.hasOwnProperty(y)?(M+=n[y],S[f]=parseInt(M,16)*B,B=1,f=void 0,M=""):M+=y;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(h){var d=h.font,p=u.Unicode[d.postScriptName];p&&(d.metadata.Unicode={},d.metadata.Unicode.widths=p.widths,d.metadata.Unicode.kerning=p.kerning);var f=c.Unicode[d.postScriptName];f&&(d.metadata.Unicode.encoding=f,d.encoding=f.codePages[0])}])})(Ct.API),(function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=t.charCodeAt(s);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Jy(o)),a.metadata=r.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])})(Ct),Ct.API.addSvgAsImage=function(r,e,t,n,i,s,a,o){if(isNaN(e)||isNaN(t))throw nn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw nn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=n,A.height=i;var l=A.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,A.width,A.height);var c={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return(qt.canvg?Promise.resolve(qt.canvg):Q1(()=>import("./index.es-CPP5xuWQ.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(l,r,c)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(c)}).then(function(){u.addImage(A.toDataURL("image/jpeg",1),e,t,n,i,a,o)})},Ct.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},Ct.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),A=[],l=0,c=0,u=0;function h(p,f){var y,b=!1;for(y=0;y<p.length;y+=1)p[y]===f&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var d=o.length;for(u=0;u<d;u+=1)t[o[u]].value=t[o[u]].defaultValue,t[o[u]].explicitSet=!1}if(Kr(r)==="object"){for(i in r)if(s=r[i],h(o,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&h(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(l=0;l<s.length;l+=1)if(n=!0,s[l].length===1&&typeof s[l][0]=="number")A.push(String(s[l]-1));else if(s[l].length>1){for(c=0;c<s[l].length;c+=1)typeof s[l][c]!="number"&&(n=!1);n===!0&&A.push([s[l][0]-1,s[l][1]-1].join(" "))}t[i].value="["+A.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,f=[];for(p in t)t[p].explicitSet===!0&&(t[p].type==="name"?f.push("/"+p+" /"+t[p].value):f.push("/"+p+" "+t[p].value));f.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+f.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),l=s.length+a.length+o.length+i.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+A),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ct.API),(function(r){var e=r.API,t=e.pdfEscape16=function(s,a){for(var o,A=a.metadata.Unicode.widths,l=["","0","00","000","0000"],c=[""],u=0,h=s.length;u<h;++u){if(o=a.metadata.characterToGlyph(s.charCodeAt(u)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(u),A.indexOf(o)==-1&&(A.push(o),A.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return c.join("");o=o.toString(16),c.push(l[4-o.length],o)}return c.join("")},n=function(s){var a,o,A,l,c,u,h;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],u=0,h=(o=Object.keys(s).sort(function(d,p){return d-p})).length;u<h;u++)a=o[u],A.length>=100&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(l=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),A.push("<"+a+"><"+l+">"));return A.length&&(c+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),c+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,A=a.out,l=a.newObject,c=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var u=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),d="",p=0;p<h.length;p++)d+=String.fromCharCode(h[p]);var f=l();c({data:d,addLength1:!0,objectId:f}),A("endobj");var y=l();c({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),A("endobj");var b=l();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+wh(o.fontName)),A("/FontFile2 "+f+" 0 R"),A("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),A("/Flags "+o.metadata.flags),A("/StemV "+o.metadata.stemV),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A(">>"),A("endobj");var B=l();A("<<"),A("/Type /Font"),A("/BaseFont /"+wh(o.fontName)),A("/FontDescriptor "+b+" 0 R"),A("/W "+r.API.PDFObject.convert(u)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+o.encoding+")"),A(">>"),A(">>"),A("endobj"),o.objectNumber=l(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+y+" 0 R"),A("/BaseFont /"+wh(o.fontName)),A("/Encoding /"+o.encoding),A("/DescendantFonts ["+B+" 0 R]"),A(">>"),A("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,A=a.out,l=a.newObject,c=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var u=o.metadata.rawData,h="",d=0;d<u.length;d++)h+=String.fromCharCode(u[d]);var p=l();c({data:h,addLength1:!0,objectId:p}),A("endobj");var f=l();c({data:n(o.metadata.toUnicode),addLength1:!0,objectId:f}),A("endobj");var y=l();A("<<"),A("/Descent "+o.metadata.decender),A("/CapHeight "+o.metadata.capHeight),A("/StemV "+o.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+p+" 0 R"),A("/Flags 96"),A("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),A("/FontName /"+wh(o.fontName)),A("/ItalicAngle "+o.metadata.italicAngle),A("/Ascent "+o.metadata.ascender),A(">>"),A("endobj"),o.objectNumber=l();for(var b=0;b<o.metadata.hmtx.widths.length;b++)o.metadata.hmtx.widths[b]=parseInt(o.metadata.hmtx.widths[b]*(1e3/o.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+f+" 0 R/BaseFont/"+wh(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),A("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",A=s.x,l=s.y,c=s.options||{},u=s.mutex||{},h=u.pdfEscape,d=u.activeFontKey,p=u.fonts,f=d,y="",b=0,B="",S=p[f].encoding;if(p[f].encoding!=="Identity-H")return{text:o,x:A,y:l,options:c,mutex:u};for(B=o,f=d,Array.isArray(o)&&(B=o[0]),b=0;b<B.length;b+=1)p[f].metadata.hasOwnProperty("cmap")&&(a=p[f].metadata.cmap.unicode.codeMap[B[b].charCodeAt(0)]),a||B[b].charCodeAt(0)<256&&p[f].metadata.hasOwnProperty("Unicode")?y+=B[b]:y+="";var C="";return parseInt(f.slice(1))<14||S==="WinAnsiEncoding"?C=h(y,f).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(C=t(y,p[f])),u.isHex=!0,{text:C,x:A,y:l,options:c,mutex:u}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],A={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var l=0;for(l=0;l<a.length;l+=1)Array.isArray(a[l])&&a[l].length===3?o.push([i(Object.assign({},A,{text:a[l][0]})).text,a[l][1],a[l][2]]):o.push(i(Object.assign({},A,{text:a[l]})).text);s.text=o}else s.text=i(Object.assign({},A,{text:a})).text}])})(Ct),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ct.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,s,a,o,A,l,c,u=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,S=0;this.__bidiEngine__={};var C=function(E){var x=E.charCodeAt(),F=x>>8,k=f[F];return k!==void 0?u[256*k+(255&x)]:F===252||F===253?"AL":b.test(F)?"L":F===8?"R":"N"},P=function(E){for(var x,F=0;F<E.length;F++){if((x=C(E.charAt(F)))==="L")return!1;if(x==="R")return!0}return!1},M=function(E,x,F,k){var Z,ue,ne,j,G=x[k];switch(G){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"N":case"AN":break;case"EN":B&&(G="AN");break;case"AL":B=!0,G="R";break;case"WS":case"BN":G="N";break;case"CS":k<1||k+1>=x.length||(Z=F[k-1])!=="EN"&&Z!=="AN"||(ue=x[k+1])!=="EN"&&ue!=="AN"?G="N":B&&(ue="AN"),G=ue===Z?ue:"N";break;case"ES":G=(Z=k>0?F[k-1]:"B")==="EN"&&k+1<x.length&&x[k+1]==="EN"?"EN":"N";break;case"ET":if(k>0&&F[k-1]==="EN"){G="EN";break}if(B){G="N";break}for(ne=k+1,j=x.length;ne<j&&x[ne]==="ET";)ne++;G=ne<j&&x[ne]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(j=x.length,ne=k+1;ne<j&&x[ne]==="NSM";)ne++;if(ne<j){var pe=E[k],q=pe>=1425&&pe<=2303||pe===64286;if(Z=x[ne],q&&(Z==="R"||Z==="AL")){G="R";break}}}G=k<1||(Z=x[k-1])==="B"?"N":F[k-1];break;case"B":B=!1,i=!0,G=S;break;case"S":s=!0,G="N"}return G},L=function(E,x,F){var k=E.split("");return F&&_(k,F,{hiLevel:S}),k.reverse(),x&&x.reverse(),k.join("")},_=function(E,x,F){var k,Z,ue,ne,j,G=-1,pe=E.length,q=0,N=[],Q=S?d:h,V=[];for(B=!1,i=!1,s=!1,Z=0;Z<pe;Z++)V[Z]=C(E[Z]);for(ue=0;ue<pe;ue++){if(j=q,N[ue]=M(E,V,N,ue),k=240&(q=Q[j][p[N[ue]]]),q&=15,x[ue]=ne=Q[q][5],k>0)if(k===16){for(Z=G;Z<ue;Z++)x[Z]=1;G=-1}else G=-1;if(Q[q][6])G===-1&&(G=ue);else if(G>-1){for(Z=G;Z<ue;Z++)x[Z]=ne;G=-1}V[ue]==="B"&&(x[ue]=0),F.hiLevel|=ne}s&&(function(X,Ae,te){for(var se=0;se<te;se++)if(X[se]==="S"){Ae[se]=S;for(var de=se-1;de>=0&&X[de]==="WS";de--)Ae[de]=S}})(V,x,pe)},v=function(E,x,F,k,Z){if(!(Z.hiLevel<E)){if(E===1&&S===1&&!i)return x.reverse(),void(F&&F.reverse());for(var ue,ne,j,G,pe=x.length,q=0;q<pe;){if(k[q]>=E){for(j=q+1;j<pe&&k[j]>=E;)j++;for(G=q,ne=j-1;G<ne;G++,ne--)ue=x[G],x[G]=x[ne],x[ne]=ue,F&&(ue=F[G],F[G]=F[ne],F[ne]=ue);q=j}q++}}},T=function(E,x,F){var k=E.split(""),Z={hiLevel:S};return F||(F=[]),_(k,F,Z),(function(ue,ne,j){if(j.hiLevel!==0&&c)for(var G,pe=0;pe<ue.length;pe++)ne[pe]===1&&(G=y.indexOf(ue[pe]))>=0&&(ue[pe]=y[G+1])})(k,F,Z),v(2,k,x,F,Z),v(1,k,x,F,Z),k.join("")};return this.__bidiEngine__.doBidiReorder=function(E,x,F){if((function(Z,ue){if(ue)for(var ne=0;ne<Z.length;ne++)ue[ne]=ne;o===void 0&&(o=P(Z)),l===void 0&&(l=P(Z))})(E,x),a||!A||l)if(a&&A&&o^l)S=o?1:0,E=L(E,x,F);else if(!a&&A&&l)S=o?1:0,E=T(E,x,F),E=L(E,x);else if(!a||o||A||l){if(a&&!A&&o^l)E=L(E,x),o?(S=0,E=T(E,x,F)):(S=1,E=T(E,x,F),E=L(E,x));else if(a&&o&&!A&&l)S=1,E=T(E,x,F),E=L(E,x);else if(!a&&!A&&o^l){var k=c;o?(S=1,E=T(E,x,F),S=0,c=!1,E=T(E,x,F),c=k):(S=0,E=T(E,x,F),E=L(E,x),S=1,c=!1,E=T(E,x,F),c=k,E=L(E,x))}}else S=0,E=T(E,x,F);else S=o?1:0,E=T(E,x,F);return E},this.__bidiEngine__.setOptions=function(E){E&&(a=E.isInputVisual,A=E.isOutputVisual,o=E.isInputRtl,l=E.isOutputRtl,c=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);n.text=a}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Ct),Ct.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Qc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Nee(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new wee(this.contents),this.head=new _ee(this),this.name=new See(this),this.cmap=new MN(this),this.toUnicode={},this.hhea=new xee(this),this.maxp=new Iee(this),this.hmtx=new kee(this),this.post=new Cee(this),this.os2=new Bee(this),this.loca=new Pee(this),this.glyf=new Tee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,A,l;for(l=[],a=0,o=(A=this.bbox).length;a<o;a++)e=A[a],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return a*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var Mo,Qc=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,s,a,o,A;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^A)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+A},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)t=e[n],s.push(this.writeByte(t));return s},r})(),wee=(function(){var r;function e(t){var n,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,s,a,o,A,l,c,u,h,d,p,f;for(f in d=Object.keys(t).length,A=Math.log(2),u=16*Math.floor(Math.log(d)/A),a=Math.floor(u/A),c=16*d-u,(i=new Qc).writeInt(this.scalarType),i.writeShort(d),i.writeShort(u),i.writeShort(a),i.writeShort(c),s=16*d,l=i.pos+s,o=null,p=[],t)for(h=t[f],i.writeString(f),i.writeInt(r(h)),i.writeInt(l),i.writeInt(h.length),p=p.concat(h),f==="head"&&(o=l),l+=h.length;l%4;)p.push(0),l++;return i.write(p),n=2981146554-r(i.data),i.pos=o+8,i.writeUInt32(n),i.data},r=function(t){var n,i,s,a;for(t=ON.call(t);t.length%4;)t.push(0);for(s=new Qc(t),i=0,n=0,a=t.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e})(),vee={}.hasOwnProperty,PA=function(r,e){for(var t in e)vee.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};Mo=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var _ee=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Qc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),vT=(function(){function r(e,t){var n,i,s,a,o,A,l,c,u,h,d,p,f,y,b,B,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(d=e.readUInt16(),h=d/2,e.pos+=6,s=(function(){var C,P;for(P=[],A=C=0;0<=h?C<h:C>h;A=0<=h?++C:--C)P.push(e.readUInt16());return P})(),e.pos+=2,f=(function(){var C,P;for(P=[],A=C=0;0<=h?C<h:C>h;A=0<=h?++C:--C)P.push(e.readUInt16());return P})(),l=(function(){var C,P;for(P=[],A=C=0;0<=h?C<h:C>h;A=0<=h?++C:--C)P.push(e.readUInt16());return P})(),c=(function(){var C,P;for(P=[],A=C=0;0<=h?C<h:C>h;A=0<=h?++C:--C)P.push(e.readUInt16());return P})(),i=(this.length-e.pos+this.offset)/2,o=(function(){var C,P;for(P=[],A=C=0;0<=i?C<i:C>i;A=0<=i?++C:--C)P.push(e.readUInt16());return P})(),A=b=0,S=s.length;b<S;A=++b)for(y=s[A],n=B=p=f[A];p<=y?B<=y:B>=y;n=p<=y?++B:--B)c[A]===0?a=n+l[A]:(a=o[c[A]/2+(n-p)-(h-A)]||0)!==0&&(a+=l[A]),this.codeMap[n]=65535&a}e.pos=u}return r.encode=function(e,t){var n,i,s,a,o,A,l,c,u,h,d,p,f,y,b,B,S,C,P,M,L,_,v,T,E,x,F,k,Z,ue,ne,j,G,pe,q,N,Q,V,X,Ae,te,se,de,ve,xe,Oe;switch(k=new Qc,a=Object.keys(e).sort(function(Ve,R){return Ve-R}),t){case"macroman":for(f=0,y=(function(){var Ve=[];for(p=0;p<256;++p)Ve.push(0);return Ve})(),B={0:0},s={},Z=0,G=a.length;Z<G;Z++)B[de=e[i=a[Z]]]==null&&(B[de]=++f),s[i]={old:e[i],new:B[e[i]]},y[i]=B[e[i]];return k.writeUInt16(1),k.writeUInt16(0),k.writeUInt32(12),k.writeUInt16(0),k.writeUInt16(262),k.writeUInt16(0),k.write(y),{charMap:s,subtable:k.data,maxGlyphID:f+1};case"unicode":for(x=[],u=[],S=0,B={},n={},b=l=null,ue=0,pe=a.length;ue<pe;ue++)B[P=e[i=a[ue]]]==null&&(B[P]=++S),n[i]={old:P,new:B[P]},o=B[P]-i,b!=null&&o===l||(b&&u.push(b),x.push(i),l=o),b=i;for(b&&u.push(b),u.push(65535),x.push(65535),T=2*(v=x.length),_=2*Math.pow(Math.log(v)/Math.LN2,2),h=Math.log(_/2)/Math.LN2,L=2*v-_,A=[],M=[],d=[],p=ne=0,q=x.length;ne<q;p=++ne){if(E=x[p],c=u[p],E===65535){A.push(0),M.push(0);break}if(E-(F=n[E].new)>=32768)for(A.push(0),M.push(2*(d.length+v-p)),i=j=E;E<=c?j<=c:j>=c;i=E<=c?++j:--j)d.push(n[i].new);else A.push(F-E),M.push(0)}for(k.writeUInt16(3),k.writeUInt16(1),k.writeUInt32(12),k.writeUInt16(4),k.writeUInt16(16+8*v+2*d.length),k.writeUInt16(0),k.writeUInt16(T),k.writeUInt16(_),k.writeUInt16(h),k.writeUInt16(L),te=0,N=u.length;te<N;te++)i=u[te],k.writeUInt16(i);for(k.writeUInt16(0),se=0,Q=x.length;se<Q;se++)i=x[se],k.writeUInt16(i);for(ve=0,V=A.length;ve<V;ve++)o=A[ve],k.writeUInt16(o);for(xe=0,X=M.length;xe<X;xe++)C=M[xe],k.writeUInt16(C);for(Oe=0,Ae=d.length;Oe<Ae;Oe++)f=d[Oe],k.writeUInt16(f);return{charMap:n,subtable:k.data,maxGlyphID:S+1}}},r})(),MN=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new vT(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,i;return t==null&&(t="macroman"),n=vT.encode(e,t),(i=new Qc).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r})(),xee=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),Bee=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),Cee=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,A;for(A=[],s=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;s=0<=o?++a:--a)A.push(e.readUInt32());return A}).call(this)}},r})(),Eee=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},See=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,i,s,a,o,A,l,c,u,h;for(e.pos=this.offset,e.readShort(),t=e.readShort(),o=e.readShort(),n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(A={},s=c=0,u=n.length;c<u;s=++c)i=n[s],e.pos=i.offset,l=e.readString(i.length),a=new Eee(l,i),A[h=i.nameID]==null&&(A[h]=[]),A[i.nameID].push(a);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},r})(),Iee=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),kee=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,i,s,a,o,A;for(e.pos=this.offset,this.metrics=[],t=0,o=this.file.hhea.numberOfMetrics;0<=o?t<o:t>o;t=0<=o?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var l,c;for(c=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)c.push(e.readInt16());return c})(),this.widths=(function(){var l,c,u,h;for(h=[],l=0,c=(u=this.metrics).length;l<c;l++)s=u[l],h.push(s.advance);return h}).call(this),n=this.widths[this.widths.length-1],A=[],t=a=0;0<=i?a<i:a>i;t=0<=i?++a:--a)A.push(this.widths.push(n));return A},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),ON=[].slice,Tee=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,i,s,a,o,A,l,c,u;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,a=(o=new Qc(t.read(i))).readShort(),l=o.readShort(),u=o.readShort(),A=o.readShort(),c=o.readShort(),this.cache[e]=a===-1?new Lee(o,l,u,A,c):new Fee(o,a,l,u,A,c),this.cache[e]))},r.prototype.encode=function(e,t,n){var i,s,a,o,A;for(a=[],s=[],o=0,A=t.length;o<A;o++)i=e[t[o]],s.push(a.length),i&&(a=a.concat(i.encode(n)));return s.push(a.length),{table:a,offsets:s}},r})(),Fee=(function(){function r(e,t,n,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),Lee=(function(){function r(e,t,n,i,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Qc(ON.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),Pee=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return PA(r,Mo),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,a=0;a<n.length;++a)if(n[a]=i,s<t.length&&t[s]==a){++s,n[a]=i;var o=this.offsets[a],A=this.offsets[a+1]-o;A>0&&(i+=A)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},r})(),Nee=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,s,a,o,A;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(n=i[s])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in A=this.glyphsFor(t))n=A[s],i[s]=n;return i},r.prototype.encode=function(e,t){var n,i,s,a,o,A,l,c,u,h,d,p,f,y,b;for(i in n=MN.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),d={0:0},b=n.charMap)d[(A=b[i]).old]=A.new;for(p in h=n.maxGlyphID,a)p in d||(d[p]=h++);return c=(function(B){var S,C;for(S in C={},B)C[B[S]]=S;return C})(d),u=Object.keys(c).sort(function(B,S){return B-S}),f=(function(){var B,S,C;for(C=[],B=0,S=u.length;B<S;B++)o=u[B],C.push(c[o]);return C})(),s=this.font.glyf.encode(a,f,d),l=this.font.loca.encode(s.offsets,f),y={cmap:this.font.cmap.raw(),glyf:s.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},r})();Ct.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,s,a;if(Array.isArray(t))return"["+(function(){var o,A,l;for(l=[],o=0,A=t.length;o<A;o++)n=t[o],l.push(e.convert(n));return l})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e})();function QN(r,e,t,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,A=i.getLineHeightFactor?i.getLineHeightFactor():s,l=o*A,c=/\r\n|\r|\n/g,u="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(u=typeof r=="string"?r.split(c):r,h=u.length||1),t+=o*(2-s),n.valign==="middle"?t-=h/2*l:n.valign==="bottom"&&(t-=h*l),n.halign==="center"||n.halign==="right"){var d=o;if(n.halign==="center"&&(d*=.5),u&&h>=1){for(var p=0;p<u.length;p++)i.text(u[p],e-i.getStringUnitWidth(u[p])*d,t),t+=l;return i}e-=i.getStringUnitWidth(r)*d}return n.halign==="justify"?i.text(r,e,t,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(r,e,t),i}var _T={},Qh=(function(){function r(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:_T=e},r.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},r.prototype.applyStyles=function(e,t){var n,i,s;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,A=a.fontName;if(e.font&&(A=e.font),e.fontStyle){o=e.fontStyle;var l=this.getFontList()[A];l&&l.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(l[0]),o=l[0])}if(this.jsPDFDocument.setFont(A,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var c=r.unifyColor(e.fillColor);c&&(n=this.jsPDFDocument).setFillColor.apply(n,c),c=r.unifyColor(e.textColor),c&&(i=this.jsPDFDocument).setTextColor.apply(i,c),c=r.unifyColor(e.lineColor),c&&(s=this.jsPDFDocument).setDrawColor.apply(s,c),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},r.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},r.prototype.rect=function(e,t,n,i,s){return this.jsPDFDocument.rect(e,t,n,i,s)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return _T||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r})(),V2=function(r,e){return V2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},V2(r,e)};function HN(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");V2(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var VN=(function(r){HN(e,r);function e(t){var n=r.call(this)||this;return n._element=t,n}return e})(Array);function Dee(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Ree(r){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[r]}function Wb(r,e,t){t.applyStyles(e,!0);var n=Array.isArray(r)?r:[r],i=n.map(function(s){return t.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function $N(r,e,t,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;r.applyStyles({lineWidth:i,lineColor:s});var a=jN(i,!1);a&&r.rect(t.x,t.y,e.getWidth(r.pageSize().width),n.y-t.y,a)}function jN(r,e){var t=r>0,n=e||e===0;return t&&n?"DF":t?"S":n?"F":null}function zw(r,e){var t,n,i,s;if(r=r||e,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=e}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(t=r.left)!==null&&t!==void 0?t:e,top:(n=r.top)!==null&&n!==void 0?n:e,right:(i=r.right)!==null&&i!==void 0?i:e,bottom:(s=r.bottom)!==null&&s!==void 0?s:e}):(typeof r!="number"&&(r=e),{top:r,right:r,bottom:r,left:r})}function GN(r,e){var t=zw(e.settings.margin,0);return r.pageSize().width-(t.left+t.right)}function Uee(r,e,t,n,i){var s={},a=1.3333333333333333,o=A_(e,function(S){return i.getComputedStyle(S).backgroundColor});o!=null&&(s.fillColor=o);var A=A_(e,function(S){return i.getComputedStyle(S).color});A!=null&&(s.textColor=A);var l=Oee(n,t);l&&(s.cellPadding=l);var c="borderTopColor",u=a*t,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var d=(parseFloat(h)||0)/u;d&&(s.lineWidth=d)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/u,right:(parseFloat(n.borderRightWidth)||0)/u,bottom:(parseFloat(n.borderBottomWidth)||0)/u,left:(parseFloat(n.borderLeftWidth)||0)/u},s.lineWidth.top||(s.lineWidth.right?c="borderRightColor":s.lineWidth.bottom?c="borderBottomColor":s.lineWidth.left&&(c="borderLeftColor"));var p=A_(e,function(S){return i.getComputedStyle(S)[c]});p!=null&&(s.lineColor=p);var f=["left","right","center","justify"];f.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),f=["middle","bottom","top"],f.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var y=parseInt(n.fontSize||"");isNaN(y)||(s.fontSize=y/a);var b=Mee(n);b&&(s.fontStyle=b);var B=(n.fontFamily||"").toLowerCase();return r.indexOf(B)!==-1&&(s.font=B),s}function Mee(r){var e="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(e="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(e+="italic"),e}function A_(r,e){var t=KN(r,e);if(!t)return null;var n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function KN(r,e){var t=e(r);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?r.parentElement==null?null:KN(r.parentElement,e):t}function Oee(r,e){var t=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/e),i=(parseInt(r.lineHeight)-parseInt(r.fontSize))/e/2,s=t.map(function(o){return parseInt(o||"0")/n}),a=zw(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function zN(r,e,t,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=t.document.querySelector(e):o=e;var A=Object.keys(r.getFontList()),l=r.scaleFactor(),c=[],u=[],h=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:c,body:u,foot:h};for(var d=0;d<o.rows.length;d++){var p=o.rows[d],f=(a=(s=p==null?void 0:p.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),y=Qee(A,l,t,p,n,i);y&&(f==="thead"?c.push(y):f==="tfoot"?h.push(y):u.push(y))}return{head:c,body:u,foot:h}}function Qee(r,e,t,n,i,s){for(var a=new VN(n),o=0;o<n.cells.length;o++){var A=n.cells[o],l=t.getComputedStyle(A);if(i||l.display!=="none"){var c=void 0;s&&(c=Uee(r,A,e,l,t)),a.push({rowSpan:A.rowSpan,colSpan:A.colSpan,styles:c,_element:A,content:Hee(A)})}}var u=t.getComputedStyle(n);if(a.length>0&&(i||u.display!=="none"))return a}function Hee(r){var e=r.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function Vee(r,e,t){for(var n=0,i=[r,e,t];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Al(r,e,t,n,i){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(r),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var A in o)Object.prototype.hasOwnProperty.call(o,A)&&(s[A]=o[A])}return s}function qN(r,e){var t=new Qh(r),n=t.getDocumentOptions(),i=t.getGlobalOptions();Vee(i,n,e);var s=Al({},i,n,e),a;typeof window<"u"&&(a=window);var o=$ee(i,n,e),A=jee(i,n,e),l=Gee(t,s),c=zee(t,s,a);return{id:e.tableId,content:c,hooks:A,styles:o,settings:l}}function $ee(r,e,t){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(A){if(A==="columnStyles"){var l=r[A],c=e[A],u=t[A];n.columnStyles=Al({},l,c,u)}else{var h=[r,e,t],d=h.map(function(p){return p[A]||{}});n[A]=Al({},d[0],d[1],d[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function jee(r,e,t){for(var n=[r,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function Gee(r,e){var t,n,i,s,a,o,A,l,c,u,h,d,p=zw(e.margin,40/r.scaleFactor()),f=(t=Kee(r,e.startY))!==null&&t!==void 0?t:p.top,y;e.showFoot===!0?y="everyPage":e.showFoot===!1?y="never":y=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var b;e.showHead===!0?b="everyPage":e.showHead===!1?b="never":b=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var B=(s=e.useCss)!==null&&s!==void 0?s:!1,S=e.theme||(B?"plain":"striped"),C=!!e.horizontalPageBreak,P=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:B,theme:S,startY:f,margin:p,pageBreak:(A=e.pageBreak)!==null&&A!==void 0?A:"auto",rowPageBreak:(l=e.rowPageBreak)!==null&&l!==void 0?l:"auto",tableWidth:(c=e.tableWidth)!==null&&c!==void 0?c:"auto",showHead:b,showFoot:y,tableLineWidth:(u=e.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(h=e.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:C,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(d=e.horizontalPageBreakBehaviour)!==null&&d!==void 0?d:"afterAllRows"}}function Kee(r,e){var t=r.getLastAutoTable(),n=r.scaleFactor(),i=r.pageNumber(),s=!1;if(t&&t.startPageNumber){var a=t.startPageNumber+t.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(t==null?void 0:t.finalY)!=null?t.finalY+20/n:null}function zee(r,e,t){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(t){var o=zN(r,e.html,t,a,e.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var A=e.columns||qee(n,i,s);return{columns:A,head:n,body:i,foot:s}}function qee(r,e,t){var n=r[0]||e[0]||t[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var A=0;A<a;A++){var l=void 0;Array.isArray(n)?l=i.length:l=s+(A>0?"_".concat(A):"");var c={dataKey:l};i.push(c)}}),i}var $2=(function(){function r(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()}return r})(),Wee=(function(r){HN(e,r);function e(t,n,i,s,a,o){var A=r.call(this,t,n,o)||this;return A.cell=i,A.row=s,A.column=a,A.section=s.section,A}return e})($2),Yee=(function(){function r(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return r.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(e,t,n,i,s,a){for(var o=0,A=t;o<A.length;o++){var l=A[o],c=new Wee(e,this,n,i,s,a),u=l(c)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],u)return!1}return!0},r.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new $2(e,this,t))}},r.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new $2(e,this,t))}},r.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return t}else{var n=this.settings.margin;return e-n.left-n.right}},r})(),WN=(function(){function r(e,t,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof VN&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=i,this.spansMultiplePages=s}return r.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=t.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},r.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(n){var i=t.cells[n.index];return i?i.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},r.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=t.getLineHeight(a.styles.fontSize),A=a.padding("vertical"),l=A+o;return l>i?l:i},0)},r})(),YN=(function(){function r(e,t,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return r.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},r.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},r.prototype.padding=function(e){var t=zw(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},r})(),Xee=(function(){function r(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return r.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(t=Math.max(t,a.styles.cellWidth))}return t},r})();function Jee(r,e){Zee(r,e);var t=[],n=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,t.push(s)),n+=s.width});var i=e.getWidth(r.pageSize().width)-n;i&&(i=j2(t,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=j2(t,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/r.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),tte(e),rte(e,r),ete(e)}function Zee(r,e){var t=r.scaleFactor(),n=e.settings.horizontalPageBreak,i=GN(r,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var A=o[a],l=s.cells[A.index];if(l){var c=e.hooks.didParseCell;e.callCellHooks(r,c,l,s,A,null);var u=l.padding("horizontal");l.contentWidth=Wb(l.text,l.styles,r)+u;var h=Wb(l.text.join(" ").split(/[^\S\u00A0]+/),l.styles,r);if(l.minReadableWidth=h+l.padding("horizontal"),typeof l.styles.cellWidth=="number")l.minWidth=l.styles.cellWidth,l.wrappedWidth=l.styles.cellWidth;else if(l.styles.cellWidth==="wrap"||n===!0)l.contentWidth>i?(l.minWidth=i,l.wrappedWidth=i):(l.minWidth=l.contentWidth,l.wrappedWidth=l.contentWidth);else{var d=10/t;l.minWidth=l.styles.minCellWidth||d,l.wrappedWidth=l.contentWidth,l.minWidth>l.wrappedWidth&&(l.wrappedWidth=l.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var A=o[a],l=s.cells[A.index];if(l&&l.colSpan===1)A.wrappedWidth=Math.max(A.wrappedWidth,l.wrappedWidth),A.minWidth=Math.max(A.minWidth,l.minWidth),A.minReadableWidth=Math.max(A.minReadableWidth,l.minReadableWidth);else{var c=e.styles.columnStyles[A.dataKey]||e.styles.columnStyles[A.index]||{},u=c.cellWidth||c.minCellWidth;u&&typeof u=="number"&&(A.minWidth=u,A.wrappedWidth=u)}l&&(l.colSpan>1&&!A.minWidth&&(A.minWidth=l.minWidth),l.colSpan>1&&!A.wrappedWidth&&(A.wrappedWidth=l.minWidth))}})}function j2(r,e,t){for(var n=e,i=r.reduce(function(d,p){return d+p.wrappedWidth},0),s=0;s<r.length;s++){var a=r[s],o=a.wrappedWidth/i,A=n*o,l=a.width+A,c=t(a),u=l<c?c:l;e-=u-a.width,a.width=u}if(e=Math.round(e*1e10)/1e10,e){var h=r.filter(function(d){return e<0?d.width>t(d):!0});h.length&&(e=j2(h,e,t))}return e}function ete(r){for(var e={},t=1,n=r.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=r.columns;a<o.length;a++){var A=o[a],l=e[A.index];if(t>1)t--,delete s.cells[A.index];else if(l)l.cell.height+=s.height,t=l.cell.colSpan,delete s.cells[A.index],l.left--,l.left<=1&&delete e[A.index];else{var c=s.cells[A.index];if(!c)continue;if(c.height=s.height,c.rowSpan>1){var u=n.length-i,h=c.rowSpan>u?u:c.rowSpan;e[A.index]={cell:c,left:h,row:s}}}}}function tte(r){for(var e=r.allRows(),t=0;t<e.length;t++)for(var n=e[t],i=null,s=0,a=0,o=0;o<r.columns.length;o++){var A=r.columns[o];if(a-=1,a>1&&r.columns[o+1])s+=A.width,delete n.cells[A.index];else if(i){var l=i;delete n.cells[A.index],i=null,l.width=A.width+s}else{var l=n.cells[A.index];if(!l)continue;if(a=l.colSpan,s=0,l.colSpan>1){i=l,s+=A.width;continue}l.width=A.width+s}}}function rte(r,e){for(var t={count:0,height:0},n=0,i=r.allRows();n<i.length;n++){for(var s=i[n],a=0,o=r.columns;a<o.length;a++){var A=o[a],l=s.cells[A.index];if(l){e.applyStyles(l.styles,!0);var c=l.width-l.padding("horizontal");if(l.styles.overflow==="linebreak")l.text=e.splitTextToSize(l.text,c+1/e.scaleFactor(),{fontSize:l.styles.fontSize});else if(l.styles.overflow==="ellipsize")l.text=xT(l.text,c,l.styles,e,"...");else if(l.styles.overflow==="hidden")l.text=xT(l.text,c,l.styles,e,"");else if(typeof l.styles.overflow=="function"){var u=l.styles.overflow(l.text,c);typeof u=="string"?l.text=[u]:l.text=u}l.contentHeight=l.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var h=l.contentHeight/l.rowSpan;l.rowSpan>1&&t.count*t.height<h*l.rowSpan?t={height:h,count:l.rowSpan}:t&&t.count>0&&t.height>h&&(h=t.height),h>s.height&&(s.height=h)}}t.count--}}function xT(r,e,t,n,i){return r.map(function(s){return nte(s,e,t,n,i)})}function nte(r,e,t,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Wb(r,t,n))return r;for(;e<Wb(r+i,t,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+i}function XN(r,e){var t=new Qh(r),n=ite(e,t.scaleFactor()),i=new Yee(e,n);return Jee(t,i),t.applyStyles(t.userStyles),i}function ite(r,e){var t=r.content,n=ate(t.columns);if(t.head.length===0){var i=BT(n,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=BT(n,"foot");i&&t.foot.push(i)}var s=r.settings.theme,a=r.styles;return{columns:n,head:l_("head",t.head,n,a,s,e),body:l_("body",t.body,n,a,s,e),foot:l_("foot",t.foot,n,a,s,e)}}function l_(r,e,t,n,i,s){var a={},o=e.map(function(A,l){for(var c=0,u={},h=0,d=0,p=0,f=t;p<f.length;p++){var y=f[p];if(a[y.index]==null||a[y.index].left===0)if(d===0){var b=void 0;Array.isArray(A)?b=A[y.index-h-c]:b=A[y.dataKey];var B={};typeof b=="object"&&!Array.isArray(b)&&(B=(b==null?void 0:b.styles)||{});var S=ote(r,y,l,i,n,s,B),C=new YN(b,S,r);u[y.dataKey]=C,u[y.index]=C,d=C.colSpan-1,a[y.index]={left:C.rowSpan-1,times:d}}else d--,h++;else a[y.index].left--,d=a[y.index].times,c++}return new WN(A,l,r,u)});return o}function BT(r,e){var t={};return r.forEach(function(n){if(n.raw!=null){var i=ste(e,n.raw);i!=null&&(t[n.dataKey]=i)}}),Object.keys(t).length>0?t:null}function ste(r,e){if(r==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(r==="foot"&&typeof e=="object")return e.footer;return null}function ate(r){return r.map(function(e,t){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:t:i=t,new Xee(i,e,t)})}function ote(r,e,t,n,i,s,a){var o=Ree(n),A;r==="head"?A=i.headStyles:r==="body"?A=i.bodyStyles:r==="foot"&&(A=i.footStyles);var l=Al({},o.table,o[r],i.styles,A),c=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},u=r==="body"?c:{},h=r==="body"&&t%2===0?Al({},o.alternateRow,i.alternateRowStyles):{},d=Dee(s),p=Al({},d,l,h,u);return Al(p,a)}function Ate(r,e,t){var n;t===void 0&&(t={});var i=GN(r,e),s=new Map,a=[],o=[],A=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?A=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(A=[e.settings.horizontalPageBreakRepeat]),A.forEach(function(h){var d=e.columns.find(function(p){return p.dataKey===h||p.index===h});d&&!s.has(d.index)&&(s.set(d.index,!0),a.push(d.index),o.push(e.columns[d.index]),i-=d.wrappedWidth)});for(var l=!0,c=(n=t==null?void 0:t.start)!==null&&n!==void 0?n:0;c<e.columns.length;){if(s.has(c)){c++;continue}var u=e.columns[c].wrappedWidth;if(l||i>=u)l=!1,a.push(c),o.push(e.columns[c]),i-=u;else break;c++}return{colIndexes:a,columns:o,lastIndex:c-1}}function lte(r,e){for(var t=[],n=0;n<e.columns.length;n++){var i=Ate(r,e,{start:n});i.columns.length&&(t.push(i),n=i.lastIndex)}return t}function JN(r,e){var t=e.settings,n=t.startY,i=t.margin,s={x:i.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+a;if(t.pageBreak==="avoid"){var A=e.body,l=A.reduce(function(h,d){return h+d.height},0);o+=l}var c=new Qh(r);(t.pageBreak==="always"||t.startY!=null&&o>c.pageSize().height)&&(eD(c),s.y=i.top),e.callWillDrawPageHooks(c,s);var u=Al({},s);e.startPageNumber=c.pageNumber(),t.horizontalPageBreak?cte(c,e,u,s):(c.applyStyles(c.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(h){return yl(c,e,h,s,e.columns)}),c.applyStyles(c.userStyles),e.body.forEach(function(h,d){var p=d===e.body.length-1;Yb(c,e,h,p,u,s,e.columns)}),c.applyStyles(c.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(h){return yl(c,e,h,s,e.columns)})),$N(c,e,u,s),e.callEndPageHooks(c,s),e.finalY=s.y,r.lastAutoTable=e,c.applyStyles(c.userStyles)}function cte(r,e,t,n){var i=lte(r,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(l,c){r.applyStyles(r.userStyles),c>0?mp(r,e,t,n,l.columns,!0):CT(r,e,n,l.columns),ute(r,e,t,n,l.columns),c_(r,e,n,l.columns)});else for(var a=-1,o=i[0],A=function(){var l=a;if(o){r.applyStyles(r.userStyles);var c=o.columns;a>=0?mp(r,e,t,n,c,!0):CT(r,e,n,c),l=ET(r,e,a+1,n,c),c_(r,e,n,c)}var u=l-a;i.slice(1).forEach(function(h){r.applyStyles(r.userStyles),mp(r,e,t,n,h.columns,!0),ET(r,e,a+1,n,h.columns,u),c_(r,e,n,h.columns)}),a=l};a<e.body.length-1;)A()}function CT(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return yl(r,e,s,t,n)})}function ute(r,e,t,n,i){r.applyStyles(r.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;Yb(r,e,s,o,t,n,i)})}function ET(r,e,t,n,i,s){r.applyStyles(r.userStyles),s=s??e.body.length;var a=Math.min(t+s,e.body.length),o=-1;return e.body.slice(t,a).forEach(function(A,l){var c=t+l===e.body.length-1,u=ZN(r,e,c,n);A.canEntireRowFit(u,i)&&(yl(r,e,A,n,i),o=t+l)}),o}function c_(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return yl(r,e,s,t,n)})}function dte(r,e,t){var n=t.getLineHeight(r.styles.fontSize),i=r.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function hte(r,e,t,n){var i={};r.spansMultiplePages=!0,r.height=0;for(var s=0,a=0,o=t.columns;a<o.length;a++){var A=o[a],l=r.cells[A.index];if(l){Array.isArray(l.text)||(l.text=[l.text]);var c=new YN(l.raw,l.styles,l.section);c=Al(c,l),c.text=[];var u=dte(l,e,n);l.text.length>u&&(c.text=l.text.splice(u,l.text.length));var h=n.scaleFactor(),d=n.getLineHeightFactor();l.contentHeight=l.getContentHeight(h,d),l.contentHeight>=e&&(l.contentHeight=e,c.styles.minCellHeight-=e),l.contentHeight>r.height&&(r.height=l.contentHeight),c.contentHeight=c.getContentHeight(h,d),c.contentHeight>s&&(s=c.contentHeight),i[A.index]=c}}var p=new WN(r.raw,-1,r.section,i,!0);p.height=s;for(var f=0,y=t.columns;f<y.length;f++){var A=y[f],c=p.cells[A.index];c&&(c.height=p.height);var l=r.cells[A.index];l&&(l.height=r.height)}return p}function fte(r,e,t,n){var i=r.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var A=e.getMinimumRowHeight(n.columns,r),l=A<t;if(A>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=e.hasRowSpan(n.columns),u=e.getMaxCellHeight(n.columns)>o;return u?(c&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(c||n.settings.rowPageBreak==="avoid")}function Yb(r,e,t,n,i,s,a){var o=ZN(r,e,n,s);if(t.canEntireRowFit(o,a))yl(r,e,t,s,a);else if(fte(r,t,o,e)){var A=hte(t,o,e,r);yl(r,e,t,s,a),mp(r,e,i,s,a),Yb(r,e,A,n,i,s,a)}else mp(r,e,i,s,a),Yb(r,e,t,n,i,s,a)}function yl(r,e,t,n,i){n.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],A=t.cells[o.index];if(!A){n.x+=o.width;continue}r.applyStyles(A.styles),A.x=n.x,A.y=n.y;var l=e.callCellHooks(r,e.hooks.willDrawCell,A,t,o,n);if(l===!1){n.x+=o.width;continue}gte(r,A,n);var c=A.getTextPos();QN(A.text,c.x,c.y,{halign:A.styles.halign,valign:A.styles.valign,maxWidth:Math.ceil(A.width-A.padding("left")-A.padding("right"))},r.getDocument()),e.callCellHooks(r,e.hooks.didDrawCell,A,t,o,n),n.x+=o.width}n.y+=t.height}function gte(r,e,t){var n=e.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=jN(n.lineWidth,n.fillColor);i&&r.rect(e.x,t.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(e.x,t.y,e.width,e.height,"F"),pte(r,e,t,n.lineWidth))}function pte(r,e,t,n){var i,s,a,o;n.top&&(i=t.x,s=t.y,a=t.x+e.width,o=t.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),A(n.top,i,s,a,o)),n.bottom&&(i=t.x,s=t.y+e.height,a=t.x+e.width,o=t.y+e.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),A(n.bottom,i,s,a,o)),n.left&&(i=t.x,s=t.y,a=t.x,o=t.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),A(n.left,i,s,a,o)),n.right&&(i=t.x+e.width,s=t.y,a=t.x+e.width,o=t.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),A(n.right,i,s,a,o));function A(l,c,u,h,d){r.getDocument().setLineWidth(l),r.getDocument().line(c,u,h,d,"S")}}function ZN(r,e,t,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),r.pageSize().height-n.y-i}function mp(r,e,t,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),r.applyStyles(r.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return yl(r,e,o,n,i)}),e.callEndPageHooks(r,n);var a=e.settings.margin;$N(r,e,t,n),eD(r),e.pageNumber++,n.x=a.left,n.y=a.top,t.y=a.top,e.callWillDrawPageHooks(r,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return yl(r,e,o,n,i)}),r.applyStyles(r.userStyles))}function eD(r){var e=r.pageNumber();r.setPage(e+1);var t=r.pageNumber();return t===e?(r.addPage(),!0):!1}function mte(r){r.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],i=qN(this,n),s=XN(this,i);return JN(this,s),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(e,t,n,i){QN(e,t,n,i,this)},r.API.autoTableSetDefaults=function(e){return Qh.setDefaults(e,this),this},r.autoTableSetDefaults=function(e,t){Qh.setDefaults(e,t)},r.API.autoTableHtmlToJson=function(e,t){var n;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Qh(this),s=zN(i,e,window,t,!1),a=s.head,o=s.body,A=((n=a[0])===null||n===void 0?void 0:n.map(function(l){return l.content}))||[];return{columns:A,rows:o,data:o}}}var u_;function TB(r,e){var t=qN(r,e),n=XN(r,t);JN(r,n)}try{if(typeof window<"u"&&window){var ST=window,IT=ST.jsPDF||((u_=ST.jspdf)===null||u_===void 0?void 0:u_.jsPDF);IT&&mte(IT)}}catch(r){console.error("Could not apply autoTable plugin",r)}function By(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var d_={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var kT;function yte(){return kT||(kT=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(n,i,s){function a(l,c){if(!i[l]){if(!n[l]){var u=typeof By=="function"&&By;if(!c&&u)return u(l,!0);if(o)return o(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[l]={exports:{}};n[l][0].call(d.exports,function(p){var f=n[l][1][p];return a(f||p)},d,d.exports,t,n,i,s)}return i[l].exports}for(var o=typeof By=="function"&&By,A=0;A<s.length;A++)a(s[A]);return a})({1:[function(t,n,i){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(A){for(var l,c,u,h,d,p,f,y=[],b=0,B=A.length,S=B,C=s.getTypeOf(A)!=="string";b<A.length;)S=B-b,u=C?(l=A[b++],c=b<B?A[b++]:0,b<B?A[b++]:0):(l=A.charCodeAt(b++),c=b<B?A.charCodeAt(b++):0,b<B?A.charCodeAt(b++):0),h=l>>2,d=(3&l)<<4|c>>4,p=1<S?(15&c)<<2|u>>6:64,f=2<S?63&u:64,y.push(o.charAt(h)+o.charAt(d)+o.charAt(p)+o.charAt(f));return y.join("")},i.decode=function(A){var l,c,u,h,d,p,f=0,y=0,b="data:";if(A.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var B,S=3*(A=A.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(A.charAt(A.length-1)===o.charAt(64)&&S--,A.charAt(A.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(B=a.uint8array?new Uint8Array(0|S):new Array(0|S);f<A.length;)l=o.indexOf(A.charAt(f++))<<2|(h=o.indexOf(A.charAt(f++)))>>4,c=(15&h)<<4|(d=o.indexOf(A.charAt(f++)))>>2,u=(3&d)<<6|(p=o.indexOf(A.charAt(f++))),B[y++]=l,d!==64&&(B[y++]=c),p!==64&&(B[y++]=u);return B}},{"./support":30,"./utils":32}],2:[function(t,n,i){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),A=t("./stream/DataLengthProbe");function l(c,u,h,d,p){this.compressedSize=c,this.uncompressedSize=u,this.crc32=h,this.compression=d,this.compressedContent=p}l.prototype={getContentWorker:function(){var c=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new A("data_length")),u=this;return c.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(c,u,h){return c.pipe(new o).pipe(new A("uncompressedSize")).pipe(u.compressWorker(h)).pipe(new A("compressedSize")).withStreamInfo("compression",u)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var s=t("./utils"),a=(function(){for(var o,A=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;A[l]=o}return A})();n.exports=function(o,A){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?(function(l,c,u,h){var d=a,p=h+u;l^=-1;for(var f=h;f<p;f++)l=l>>>8^d[255&(l^c[f])];return-1^l})(0|A,o,o.length,0):(function(l,c,u,h){var d=a,p=h+u;l^=-1;for(var f=h;f<p;f++)l=l>>>8^d[255&(l^c.charCodeAt(f))];return-1^l})(0|A,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),A=t("./stream/GenericWorker"),l=s?"uint8array":"array";function c(u,h){A.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=h,this.meta={}}i.magic="\b\0",o.inherits(c,A),c.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,u.data),!1)},c.prototype.flush=function(){A.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){A.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(h){u.push({data:h,meta:u.meta})}},i.compressWorker=function(u){return new c("Deflate",u)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function s(d,p){var f,y="";for(f=0;f<p;f++)y+=String.fromCharCode(255&d),d>>>=8;return y}function a(d,p,f,y,b,B){var S,C,P=d.file,M=d.compression,L=B!==l.utf8encode,_=o.transformTo("string",B(P.name)),v=o.transformTo("string",l.utf8encode(P.name)),T=P.comment,E=o.transformTo("string",B(T)),x=o.transformTo("string",l.utf8encode(T)),F=v.length!==P.name.length,k=x.length!==T.length,Z="",ue="",ne="",j=P.dir,G=P.date,pe={crc32:0,compressedSize:0,uncompressedSize:0};p&&!f||(pe.crc32=d.crc32,pe.compressedSize=d.compressedSize,pe.uncompressedSize=d.uncompressedSize);var q=0;p&&(q|=8),L||!F&&!k||(q|=2048);var N=0,Q=0;j&&(N|=16),b==="UNIX"?(Q=798,N|=(function(X,Ae){var te=X;return X||(te=Ae?16893:33204),(65535&te)<<16})(P.unixPermissions,j)):(Q=20,N|=(function(X){return 63&(X||0)})(P.dosPermissions)),S=G.getUTCHours(),S<<=6,S|=G.getUTCMinutes(),S<<=5,S|=G.getUTCSeconds()/2,C=G.getUTCFullYear()-1980,C<<=4,C|=G.getUTCMonth()+1,C<<=5,C|=G.getUTCDate(),F&&(ue=s(1,1)+s(c(_),4)+v,Z+="up"+s(ue.length,2)+ue),k&&(ne=s(1,1)+s(c(E),4)+x,Z+="uc"+s(ne.length,2)+ne);var V="";return V+=`
\0`,V+=s(q,2),V+=M.magic,V+=s(S,2),V+=s(C,2),V+=s(pe.crc32,4),V+=s(pe.compressedSize,4),V+=s(pe.uncompressedSize,4),V+=s(_.length,2),V+=s(Z.length,2),{fileRecord:u.LOCAL_FILE_HEADER+V+_+Z,dirRecord:u.CENTRAL_FILE_HEADER+s(Q,2)+V+s(E.length,2)+"\0\0\0\0"+s(N,4)+s(y,4)+_+Z+E}}var o=t("../utils"),A=t("../stream/GenericWorker"),l=t("../utf8"),c=t("../crc32"),u=t("../signature");function h(d,p,f,y){A.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=f,this.encodeFileName=y,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,A),h.prototype.push=function(d){var p=d.meta.percent||0,f=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,A.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:f?(p+100*(f-y-1))/f:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var f=a(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,f=a(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),p)this.push({data:(function(y){return u.DATA_DESCRIPTOR+s(y.crc32,4)+s(y.compressedSize,4)+s(y.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var f=this.bytesWritten-d,y=(function(b,B,S,C,P){var M=o.transformTo("string",P(C));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(b,2)+s(b,2)+s(B,4)+s(S,4)+s(M.length,2)+M})(this.dirRecords.length,f,d,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(f){p.processChunk(f)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(f){p.error(f)}),this},h.prototype.resume=function(){return!!A.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var p=this._sources;if(!A.prototype.error.call(this,d))return!1;for(var f=0;f<p.length;f++)try{p[f].error(d)}catch{}return!0},h.prototype.lock=function(){A.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var s=t("../compressions"),a=t("./ZipFileWorker");i.generateWorker=function(o,A,l){var c=new a(A.streamFiles,l,A.platform,A.encodeFileName),u=0;try{o.forEach(function(h,d){u++;var p=(function(B,S){var C=B||S,P=s[C];if(!P)throw new Error(C+" is not a valid compression method !");return P})(d.options.compression,A.compression),f=d.options.compressionOptions||A.compressionOptions||{},y=d.dir,b=d.date;d._compressWorker(p,f).withStreamInfo("file",{name:h,dir:y,date:b,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(c)}),c.entriesCount=u}catch(h){c.error(h)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var s=t("./utils"),a=t("./external"),o=t("./utf8"),A=t("./zipEntries"),l=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function u(h){return new a.Promise(function(d,p){var f=h.decompressed.getContentWorker().pipe(new l);f.on("error",function(y){p(y)}).on("end",function(){f.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(h,d){var p=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(f){var y=new A(d);return y.load(f),y}).then(function(f){var y=[a.Promise.resolve(f)],b=f.files;if(d.checkCRC32)for(var B=0;B<b.length;B++)y.push(u(b[B]));return a.Promise.all(y)}).then(function(f){for(var y=f.shift(),b=y.files,B=0;B<b.length;B++){var S=b[B],C=S.fileNameStr,P=s.resolve(S.fileNameStr);p.file(P,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:d.createFolders}),S.dir||(p.file(P).unsafeOriginalName=C)}return y.zipComment.length&&(p.comment=y.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var s=t("../utils"),a=t("../stream/GenericWorker");function o(A,l){a.call(this,"Nodejs stream input adapter for "+A),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(A){var l=this;(this._stream=A).pause(),A.on("data",function(c){l.push({data:c,meta:{percent:0}})}).on("error",function(c){l.isPaused?this.generatedError=c:l.error(c)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var s=t("readable-stream").Readable;function a(o,A,l){s.call(this,A),this._helper=o;var c=this;o.on("data",function(u,h){c.push(u)||c._helper.pause(),l&&l(h)}).on("error",function(u){c.emit("error",u)}).on("end",function(){c.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,i){function s(P,M,L){var _,v=o.getTypeOf(M),T=o.extend(L||{},c);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(P=b(P)),T.createFolders&&(_=y(P))&&B.call(this,_,!0);var E=v==="string"&&T.binary===!1&&T.base64===!1;L&&L.binary!==void 0||(T.binary=!E),(M instanceof u&&M.uncompressedSize===0||T.dir||!M||M.length===0)&&(T.base64=!1,T.binary=!0,M="",T.compression="STORE",v="string");var x=null;x=M instanceof u||M instanceof A?M:p.isNode&&p.isStream(M)?new f(P,M):o.prepareContent(P,M,T.binary,T.optimizedBinaryString,T.base64);var F=new h(P,x,T);this.files[P]=F}var a=t("./utf8"),o=t("./utils"),A=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),c=t("./defaults"),u=t("./compressedObject"),h=t("./zipObject"),d=t("./generate"),p=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),y=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var M=P.lastIndexOf("/");return 0<M?P.substring(0,M):""},b=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},B=function(P,M){return M=M!==void 0?M:c.createFolders,P=b(P),this.files[P]||s.call(this,P,null,{dir:!0,createFolders:M}),this.files[P]};function S(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var M,L,_;for(M in this.files)_=this.files[M],(L=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&P(L,_)},filter:function(P){var M=[];return this.forEach(function(L,_){P(L,_)&&M.push(_)}),M},file:function(P,M,L){if(arguments.length!==1)return P=this.root+P,s.call(this,P,M,L),this;if(S(P)){var _=P;return this.filter(function(T,E){return!E.dir&&_.test(T)})}var v=this.files[this.root+P];return v&&!v.dir?v:null},folder:function(P){if(!P)return this;if(S(P))return this.filter(function(v,T){return T.dir&&P.test(v)});var M=this.root+P,L=B.call(this,M),_=this.clone();return _.root=L.name,_},remove:function(P){P=this.root+P;var M=this.files[P];if(M||(P.slice(-1)!=="/"&&(P+="/"),M=this.files[P]),M&&!M.dir)delete this.files[P];else for(var L=this.filter(function(v,T){return T.name.slice(0,P.length)===P}),_=0;_<L.length;_++)delete this.files[L[_].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var M,L={};try{if((L=o.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");o.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var _=L.comment||this.comment||"";M=d.generateWorker(this,L,_)}catch(v){(M=new A("error")).error(v)}return new l(M,L.type||"string",L.mimeType)},generateAsync:function(P,M){return this.generateInternalStream(P).accumulate(M)},generateNodeStream:function(P,M){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(M)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var s=t("./DataReader");function a(o){s.call(this,o);for(var A=0;A<this.data.length;A++)o[A]=255&o[A]}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var A=o.charCodeAt(0),l=o.charCodeAt(1),c=o.charCodeAt(2),u=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===A&&this.data[h+1]===l&&this.data[h+2]===c&&this.data[h+3]===u)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var A=o.charCodeAt(0),l=o.charCodeAt(1),c=o.charCodeAt(2),u=o.charCodeAt(3),h=this.readData(4);return A===h[0]&&l===h[1]&&c===h[2]&&u===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var A=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,A},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var A,l=0;for(this.checkOffset(o),A=this.index+o-1;A>=this.index;A--)l=(l<<8)+this.byteAt(A);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,i){var s=t("./Uint8ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var A=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,A},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var s=t("./DataReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var A=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,A},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var s=t("./ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var A=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,A},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),A=t("./StringReader"),l=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");n.exports=function(u){var h=s.getTypeOf(u);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new l(u):a.uint8array?new c(s.transformTo("uint8array",u)):new o(s.transformTo("array",u)):new A(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var s=t("./GenericWorker"),a=t("../utils");function o(A){s.call(this,"ConvertWorker to "+A),this.destType=A}a.inherits(o,s),o.prototype.processChunk=function(A){this.push({data:a.transformTo(this.destType,A.data),meta:A.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var s=t("./GenericWorker"),a=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(A){this.streamInfo.crc32=a(A.data,this.streamInfo.crc32||0),this.push(A)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var s=t("../utils"),a=t("./GenericWorker");function o(A){a.call(this,"DataLengthProbe for "+A),this.propName=A,this.withStreamInfo(A,0)}s.inherits(o,a),o.prototype.processChunk=function(A){if(A){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+A.data.length}a.prototype.processChunk.call(this,A)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var s=t("../utils"),a=t("./GenericWorker");function o(A){a.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,A.then(function(c){l.dataIsReady=!0,l.data=c,l.max=c&&c.length||0,l.type=s.getTypeOf(c),l.isPaused||l._tickAndRepeat()},function(c){l.error(c)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var A=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":A=this.data.substring(this.index,l);break;case"uint8array":A=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":A=this.data.slice(this.index,l)}return this.index=l,this.push({data:A,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var A=0;A<this._listeners[a].length;A++)this._listeners[a][A].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(A){o.processChunk(A)}),a.on("end",function(){o.end()}),a.on("error",function(A){o.error(A)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(t,n,i){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),A=t("../base64"),l=t("../support"),c=t("../external"),u=null;if(l.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,f){return new c.Promise(function(y,b){var B=[],S=p._internalType,C=p._outputType,P=p._mimeType;p.on("data",function(M,L){B.push(M),f&&f(L)}).on("error",function(M){B=[],b(M)}).on("end",function(){try{var M=(function(L,_,v){switch(L){case"blob":return s.newBlob(s.transformTo("arraybuffer",_),v);case"base64":return A.encode(_);default:return s.transformTo(L,_)}})(C,(function(L,_){var v,T=0,E=null,x=0;for(v=0;v<_.length;v++)x+=_[v].length;switch(L){case"string":return _.join("");case"array":return Array.prototype.concat.apply([],_);case"uint8array":for(E=new Uint8Array(x),v=0;v<_.length;v++)E.set(_[v],T),T+=_[v].length;return E;case"nodebuffer":return Buffer.concat(_);default:throw new Error("concat : unsupported type '"+L+"'")}})(S,B),P);y(M)}catch(L){b(L)}B=[]}).resume()})}function d(p,f,y){var b=f;switch(f){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=f,this._mimeType=y,s.checkSupport(b),this._worker=p.pipe(new a(b)),p.lock()}catch(B){this._worker=new o("error"),this._worker.error(B)}}d.prototype={accumulate:function(p){return h(this,p)},on:function(p,f){var y=this;return p==="data"?this._worker.on(p,function(b){f.call(y,b.data,b.meta)}):this._worker.on(p,function(){s.delay(f,arguments,y)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),A=t("./stream/GenericWorker"),l=new Array(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;l[254]=l[254]=1;function u(){A.call(this,"utf-8 decode"),this.leftOver=null}function h(){A.call(this,"utf-8 encode")}i.utf8encode=function(d){return a.nodebuffer?o.newBufferFrom(d,"utf-8"):(function(p){var f,y,b,B,S,C=p.length,P=0;for(B=0;B<C;B++)(64512&(y=p.charCodeAt(B)))==55296&&B+1<C&&(64512&(b=p.charCodeAt(B+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),B++),P+=y<128?1:y<2048?2:y<65536?3:4;for(f=a.uint8array?new Uint8Array(P):new Array(P),B=S=0;S<P;B++)(64512&(y=p.charCodeAt(B)))==55296&&B+1<C&&(64512&(b=p.charCodeAt(B+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),B++),y<128?f[S++]=y:(y<2048?f[S++]=192|y>>>6:(y<65536?f[S++]=224|y>>>12:(f[S++]=240|y>>>18,f[S++]=128|y>>>12&63),f[S++]=128|y>>>6&63),f[S++]=128|63&y);return f})(d)},i.utf8decode=function(d){return a.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):(function(p){var f,y,b,B,S=p.length,C=new Array(2*S);for(f=y=0;f<S;)if((b=p[f++])<128)C[y++]=b;else if(4<(B=l[b]))C[y++]=65533,f+=B-1;else{for(b&=B===2?31:B===3?15:7;1<B&&f<S;)b=b<<6|63&p[f++],B--;1<B?C[y++]=65533:b<65536?C[y++]=b:(b-=65536,C[y++]=55296|b>>10&1023,C[y++]=56320|1023&b)}return C.length!==y&&(C.subarray?C=C.subarray(0,y):C.length=y),s.applyFromCharCode(C)})(d=s.transformTo(a.uint8array?"uint8array":"array",d))},s.inherits(u,A),u.prototype.processChunk=function(d){var p=s.transformTo(a.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var f=p;(p=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),p.set(f,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var y=(function(B,S){var C;for((S=S||B.length)>B.length&&(S=B.length),C=S-1;0<=C&&(192&B[C])==128;)C--;return C<0||C===0?S:C+l[B[C]]>S?C:S})(p),b=p;y!==p.length&&(a.uint8array?(b=p.subarray(0,y),this.leftOver=p.subarray(y,p.length)):(b=p.slice(0,y),this.leftOver=p.slice(y,p.length))),this.push({data:i.utf8decode(b),meta:d.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=u,s.inherits(h,A),h.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),A=t("./external");function l(f){return f}function c(f,y){for(var b=0;b<f.length;++b)y[b]=255&f.charCodeAt(b);return y}t("setimmediate"),i.newBlob=function(f,y){i.checkSupport("blob");try{return new Blob([f],{type:y})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(f),b.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(f,y,b){var B=[],S=0,C=f.length;if(C<=b)return String.fromCharCode.apply(null,f);for(;S<C;)y==="array"||y==="nodebuffer"?B.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+b,C)))):B.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+b,C)))),S+=b;return B.join("")},stringifyByChar:function(f){for(var y="",b=0;b<f.length;b++)y+=String.fromCharCode(f[b]);return y},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function h(f){var y=65536,b=i.getTypeOf(f),B=!0;if(b==="uint8array"?B=u.applyCanBeUsed.uint8array:b==="nodebuffer"&&(B=u.applyCanBeUsed.nodebuffer),B)for(;1<y;)try{return u.stringifyByChunk(f,b,y)}catch{y=Math.floor(y/2)}return u.stringifyByChar(f)}function d(f,y){for(var b=0;b<f.length;b++)y[b]=f[b];return y}i.applyFromCharCode=h;var p={};p.string={string:l,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return p.string.uint8array(f).buffer},uint8array:function(f){return c(f,new Uint8Array(f.length))},nodebuffer:function(f){return c(f,o.allocBuffer(f.length))}},p.array={string:h,array:l,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(f)}},p.arraybuffer={string:function(f){return h(new Uint8Array(f))},array:function(f){return d(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:l,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(new Uint8Array(f))}},p.uint8array={string:h,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:l,nodebuffer:function(f){return o.newBufferFrom(f)}},p.nodebuffer={string:h,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return p.nodebuffer.uint8array(f).buffer},uint8array:function(f){return d(f,new Uint8Array(f.length))},nodebuffer:l},i.transformTo=function(f,y){if(y=y||"",!f)return y;i.checkSupport(f);var b=i.getTypeOf(y);return p[b][f](y)},i.resolve=function(f){for(var y=f.split("/"),b=[],B=0;B<y.length;B++){var S=y[B];S==="."||S===""&&B!==0&&B!==y.length-1||(S===".."?b.pop():b.push(S))}return b.join("/")},i.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(f)?"nodebuffer":s.uint8array&&f instanceof Uint8Array?"uint8array":s.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(f){if(!s[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(f){var y,b,B="";for(b=0;b<(f||"").length;b++)B+="\\x"+((y=f.charCodeAt(b))<16?"0":"")+y.toString(16).toUpperCase();return B},i.delay=function(f,y,b){setImmediate(function(){f.apply(b||null,y||[])})},i.inherits=function(f,y){function b(){}b.prototype=y.prototype,f.prototype=new b},i.extend=function(){var f,y,b={};for(f=0;f<arguments.length;f++)for(y in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],y)&&b[y]===void 0&&(b[y]=arguments[f][y]);return b},i.prepareContent=function(f,y,b,B,S){return A.Promise.resolve(y).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new A.Promise(function(P,M){var L=new FileReader;L.onload=function(_){P(_.target.result)},L.onerror=function(_){M(_.target.error)},L.readAsArrayBuffer(C)}):C}).then(function(C){var P=i.getTypeOf(C);return P?(P==="arraybuffer"?C=i.transformTo("uint8array",C):P==="string"&&(S?C=a.decode(C):b&&B!==!0&&(C=(function(M){return c(M,s.uint8array?new Uint8Array(M.length):new Array(M.length))})(C))),C):A.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),A=t("./zipEntry"),l=t("./support");function c(u){this.files=[],this.loadOptions=u}c.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(u)+")")}},isSignature:function(u,h){var d=this.reader.index;this.reader.setIndex(u);var p=this.reader.readString(4)===h;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),h=l.uint8array?"uint8array":"array",d=a.transformTo(h,u);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,h,d,p=this.zip64EndOfCentralSize-44;0<p;)u=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[u]={id:u,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,h;for(u=0;u<this.files.length;u++)h=this.files[u],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new A({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var h=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=h-d;if(0<p)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(u){this.reader=s(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),A=t("./crc32"),l=t("./utf8"),c=t("./compressions"),u=t("./support");function h(d,p){this.options=d,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,f;if(d.skip(22),this.fileNameLength=d.readInt(2),f=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(y){for(var b in c)if(Object.prototype.hasOwnProperty.call(c,b)&&c[b].magic===y)return c[b];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,f,y,b=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<b;)p=d.readInt(2),f=d.readInt(2),y=d.readData(f),this.extraFields[p]={id:p,length:f,value:y};d.setIndex(b)},handleUTF8:function(){var d=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var f=a.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var b=a.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=s(d.value);return p.readInt(1)!==1||A(this.fileName)!==p.readInt(4)?null:l.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=s(d.value);return p.readInt(1)!==1||A(this.fileComment)!==p.readInt(4)?null:l.utf8decode(p.readData(d.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function s(p,f,y){this.name=p,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=f,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),A=t("./utf8"),l=t("./compressedObject"),c=t("./stream/GenericWorker");s.prototype={internalStream:function(p){var f=null,y="string";try{if(!p)throw new Error("No output type specified.");var b=(y=p.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),f=this._decompressWorker();var B=!this._dataBinary;B&&!b&&(f=f.pipe(new A.Utf8EncodeWorker)),!B&&b&&(f=f.pipe(new A.Utf8DecodeWorker))}catch(S){(f=new c("error")).error(S)}return new a(f,y,"")},async:function(p,f){return this.internalStream(p).accumulate(f)},nodeStream:function(p,f){return this.internalStream(p||"nodebuffer").toNodejsStream(f)},_compressWorker:function(p,f){if(this._data instanceof l&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new A.Utf8EncodeWorker)),l.createWorkerFrom(y,p,f)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)s.prototype[u[d]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(s){var a,o,A=s.MutationObserver||s.WebKitMutationObserver;if(A){var l=0,c=new A(p),u=s.document.createTextNode("");c.observe(u,{characterData:!0}),a=function(){u.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var f=s.document.createElement("script");f.onreadystatechange=function(){p(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},s.document.documentElement.appendChild(f)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,a=function(){h.port2.postMessage(0)}}var d=[];function p(){var f,y;o=!0;for(var b=d.length;b;){for(y=d,d=[],f=-1;++f<b;)y[f]();b=d.length}o=!1}n.exports=function(f){d.push(f)!==1||o||a()}}).call(this,typeof j0<"u"?j0:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var s=t("immediate");function a(){}var o={},A=["REJECTED"],l=["FULFILLED"],c=["PENDING"];function u(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,b!==a&&f(this,b)}function h(b,B,S){this.promise=b,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function d(b,B,S){s(function(){var C;try{C=B(S)}catch(P){return o.reject(b,P)}C===b?o.reject(b,new TypeError("Cannot resolve promise with itself")):o.resolve(b,C)})}function p(b){var B=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof B=="function")return function(){B.apply(b,arguments)}}function f(b,B){var S=!1;function C(L){S||(S=!0,o.reject(b,L))}function P(L){S||(S=!0,o.resolve(b,L))}var M=y(function(){B(P,C)});M.status==="error"&&C(M.value)}function y(b,B){var S={};try{S.value=b(B),S.status="success"}catch(C){S.status="error",S.value=C}return S}(n.exports=u).prototype.finally=function(b){if(typeof b!="function")return this;var B=this.constructor;return this.then(function(S){return B.resolve(b()).then(function(){return S})},function(S){return B.resolve(b()).then(function(){throw S})})},u.prototype.catch=function(b){return this.then(null,b)},u.prototype.then=function(b,B){if(typeof b!="function"&&this.state===l||typeof B!="function"&&this.state===A)return this;var S=new this.constructor(a);return this.state!==c?d(S,this.state===l?b:B,this.outcome):this.queue.push(new h(S,b,B)),S},h.prototype.callFulfilled=function(b){o.resolve(this.promise,b)},h.prototype.otherCallFulfilled=function(b){d(this.promise,this.onFulfilled,b)},h.prototype.callRejected=function(b){o.reject(this.promise,b)},h.prototype.otherCallRejected=function(b){d(this.promise,this.onRejected,b)},o.resolve=function(b,B){var S=y(p,B);if(S.status==="error")return o.reject(b,S.value);var C=S.value;if(C)f(b,C);else{b.state=l,b.outcome=B;for(var P=-1,M=b.queue.length;++P<M;)b.queue[P].callFulfilled(B)}return b},o.reject=function(b,B){b.state=A,b.outcome=B;for(var S=-1,C=b.queue.length;++S<C;)b.queue[S].callRejected(B);return b},u.resolve=function(b){return b instanceof this?b:o.resolve(new this(a),b)},u.reject=function(b){var B=new this(a);return o.reject(B,b)},u.all=function(b){var B=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=b.length,C=!1;if(!S)return this.resolve([]);for(var P=new Array(S),M=0,L=-1,_=new this(a);++L<S;)v(b[L],L);return _;function v(T,E){B.resolve(T).then(function(x){P[E]=x,++M!==S||C||(C=!0,o.resolve(_,P))},function(x){C||(C=!0,o.reject(_,x))})}},u.race=function(b){var B=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=b.length,C=!1;if(!S)return this.resolve([]);for(var P=-1,M=new this(a);++P<S;)L=b[P],B.resolve(L).then(function(_){C||(C=!0,o.resolve(M,_))},function(_){C||(C=!0,o.reject(M,_))});var L;return M}},{immediate:36}],38:[function(t,n,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),A=t("./zlib/messages"),l=t("./zlib/zstream"),c=Object.prototype.toString,u=0,h=-1,d=0,p=8;function f(b){if(!(this instanceof f))return new f(b);this.options=a.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},b||{});var B=this.options;B.raw&&0<B.windowBits?B.windowBits=-B.windowBits:B.gzip&&0<B.windowBits&&B.windowBits<16&&(B.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(S!==u)throw new Error(A[S]);if(B.header&&s.deflateSetHeader(this.strm,B.header),B.dictionary){var C;if(C=typeof B.dictionary=="string"?o.string2buf(B.dictionary):c.call(B.dictionary)==="[object ArrayBuffer]"?new Uint8Array(B.dictionary):B.dictionary,(S=s.deflateSetDictionary(this.strm,C))!==u)throw new Error(A[S]);this._dict_set=!0}}function y(b,B){var S=new f(B);if(S.push(b,!0),S.err)throw S.msg||A[S.err];return S.result}f.prototype.push=function(b,B){var S,C,P=this.strm,M=this.options.chunkSize;if(this.ended)return!1;C=B===~~B?B:B===!0?4:0,typeof b=="string"?P.input=o.string2buf(b):c.call(b)==="[object ArrayBuffer]"?P.input=new Uint8Array(b):P.input=b,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new a.Buf8(M),P.next_out=0,P.avail_out=M),(S=s.deflate(P,C))!==1&&S!==u)return this.onEnd(S),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(P.output,P.next_out))):this.onData(a.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&S!==1);return C===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===u):C!==2||(this.onEnd(u),!(P.avail_out=0))},f.prototype.onData=function(b){this.chunks.push(b)},f.prototype.onEnd=function(b){b===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Deflate=f,i.deflate=y,i.deflateRaw=function(b,B){return(B=B||{}).raw=!0,y(b,B)},i.gzip=function(b,B){return(B=B||{}).gzip=!0,y(b,B)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),A=t("./zlib/constants"),l=t("./zlib/messages"),c=t("./zlib/zstream"),u=t("./zlib/gzheader"),h=Object.prototype.toString;function d(f){if(!(this instanceof d))return new d(f);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},f||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||f&&f.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var b=s.inflateInit2(this.strm,y.windowBits);if(b!==A.Z_OK)throw new Error(l[b]);this.header=new u,s.inflateGetHeader(this.strm,this.header)}function p(f,y){var b=new d(y);if(b.push(f,!0),b.err)throw b.msg||l[b.err];return b.result}d.prototype.push=function(f,y){var b,B,S,C,P,M,L=this.strm,_=this.options.chunkSize,v=this.options.dictionary,T=!1;if(this.ended)return!1;B=y===~~y?y:y===!0?A.Z_FINISH:A.Z_NO_FLUSH,typeof f=="string"?L.input=o.binstring2buf(f):h.call(f)==="[object ArrayBuffer]"?L.input=new Uint8Array(f):L.input=f,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new a.Buf8(_),L.next_out=0,L.avail_out=_),(b=s.inflate(L,A.Z_NO_FLUSH))===A.Z_NEED_DICT&&v&&(M=typeof v=="string"?o.string2buf(v):h.call(v)==="[object ArrayBuffer]"?new Uint8Array(v):v,b=s.inflateSetDictionary(this.strm,M)),b===A.Z_BUF_ERROR&&T===!0&&(b=A.Z_OK,T=!1),b!==A.Z_STREAM_END&&b!==A.Z_OK)return this.onEnd(b),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&b!==A.Z_STREAM_END&&(L.avail_in!==0||B!==A.Z_FINISH&&B!==A.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(L.output,L.next_out),C=L.next_out-S,P=o.buf2string(L.output,S),L.next_out=C,L.avail_out=_-C,C&&a.arraySet(L.output,L.output,S,C,0),this.onData(P)):this.onData(a.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(T=!0)}while((0<L.avail_in||L.avail_out===0)&&b!==A.Z_STREAM_END);return b===A.Z_STREAM_END&&(B=A.Z_FINISH),B===A.Z_FINISH?(b=s.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===A.Z_OK):B!==A.Z_SYNC_FLUSH||(this.onEnd(A.Z_OK),!(L.avail_out=0))},d.prototype.onData=function(f){this.chunks.push(f)},d.prototype.onEnd=function(f){f===A.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},i.Inflate=d,i.inflate=p,i.inflateRaw=function(f,y){return(y=y||{}).raw=!0,p(f,y)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(A){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var c=l.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var u in c)c.hasOwnProperty(u)&&(A[u]=c[u])}}return A},i.shrinkBuf=function(A,l){return A.length===l?A:A.subarray?A.subarray(0,l):(A.length=l,A)};var a={arraySet:function(A,l,c,u,h){if(l.subarray&&A.subarray)A.set(l.subarray(c,c+u),h);else for(var d=0;d<u;d++)A[h+d]=l[c+d]},flattenChunks:function(A){var l,c,u,h,d,p;for(l=u=0,c=A.length;l<c;l++)u+=A[l].length;for(p=new Uint8Array(u),l=h=0,c=A.length;l<c;l++)d=A[l],p.set(d,h),h+=d.length;return p}},o={arraySet:function(A,l,c,u,h){for(var d=0;d<u;d++)A[h+d]=l[c+d]},flattenChunks:function(A){return[].concat.apply([],A)}};i.setTyped=function(A){A?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(t,n,i){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var A=new s.Buf8(256),l=0;l<256;l++)A[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(u,h){if(h<65537&&(u.subarray&&o||!u.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(u,h));for(var d="",p=0;p<h;p++)d+=String.fromCharCode(u[p]);return d}A[254]=A[254]=1,i.string2buf=function(u){var h,d,p,f,y,b=u.length,B=0;for(f=0;f<b;f++)(64512&(d=u.charCodeAt(f)))==55296&&f+1<b&&(64512&(p=u.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),f++),B+=d<128?1:d<2048?2:d<65536?3:4;for(h=new s.Buf8(B),f=y=0;y<B;f++)(64512&(d=u.charCodeAt(f)))==55296&&f+1<b&&(64512&(p=u.charCodeAt(f+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),f++),d<128?h[y++]=d:(d<2048?h[y++]=192|d>>>6:(d<65536?h[y++]=224|d>>>12:(h[y++]=240|d>>>18,h[y++]=128|d>>>12&63),h[y++]=128|d>>>6&63),h[y++]=128|63&d);return h},i.buf2binstring=function(u){return c(u,u.length)},i.binstring2buf=function(u){for(var h=new s.Buf8(u.length),d=0,p=h.length;d<p;d++)h[d]=u.charCodeAt(d);return h},i.buf2string=function(u,h){var d,p,f,y,b=h||u.length,B=new Array(2*b);for(d=p=0;d<b;)if((f=u[d++])<128)B[p++]=f;else if(4<(y=A[f]))B[p++]=65533,d+=y-1;else{for(f&=y===2?31:y===3?15:7;1<y&&d<b;)f=f<<6|63&u[d++],y--;1<y?B[p++]=65533:f<65536?B[p++]=f:(f-=65536,B[p++]=55296|f>>10&1023,B[p++]=56320|1023&f)}return c(B,p)},i.utf8border=function(u,h){var d;for((h=h||u.length)>u.length&&(h=u.length),d=h-1;0<=d&&(192&u[d])==128;)d--;return d<0||d===0?h:d+A[u[d]]>h?d:h}},{"./common":41}],43:[function(t,n,i){n.exports=function(s,a,o,A){for(var l=65535&s|0,c=s>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;c=c+(l=l+a[A++]|0)|0,--u;);l%=65521,c%=65521}return l|c<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var s=(function(){for(var a,o=[],A=0;A<256;A++){a=A;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;o[A]=a}return o})();n.exports=function(a,o,A,l){var c=s,u=l+A;a^=-1;for(var h=l;h<u;h++)a=a>>>8^c[255&(a^o[h])];return-1^a}},{}],46:[function(t,n,i){var s,a=t("../utils/common"),o=t("./trees"),A=t("./adler32"),l=t("./crc32"),c=t("./messages"),u=0,h=4,d=0,p=-2,f=-1,y=4,b=2,B=8,S=9,C=286,P=30,M=19,L=2*C+1,_=15,v=3,T=258,E=T+v+1,x=42,F=113,k=1,Z=2,ue=3,ne=4;function j(R,$){return R.msg=c[$],$}function G(R){return(R<<1)-(4<R?9:0)}function pe(R){for(var $=R.length;0<=--$;)R[$]=0}function q(R){var $=R.state,ye=$.pending;ye>R.avail_out&&(ye=R.avail_out),ye!==0&&(a.arraySet(R.output,$.pending_buf,$.pending_out,ye,R.next_out),R.next_out+=ye,$.pending_out+=ye,R.total_out+=ye,R.avail_out-=ye,$.pending-=ye,$.pending===0&&($.pending_out=0))}function N(R,$){o._tr_flush_block(R,0<=R.block_start?R.block_start:-1,R.strstart-R.block_start,$),R.block_start=R.strstart,q(R.strm)}function Q(R,$){R.pending_buf[R.pending++]=$}function V(R,$){R.pending_buf[R.pending++]=$>>>8&255,R.pending_buf[R.pending++]=255&$}function X(R,$){var ye,re,W=R.max_chain_length,ae=R.strstart,Ce=R.prev_length,_e=R.nice_match,be=R.strstart>R.w_size-E?R.strstart-(R.w_size-E):0,Ie=R.window,Qe=R.w_mask,Pe=R.prev,He=R.strstart+T,At=Ie[ae+Ce-1],tt=Ie[ae+Ce];R.prev_length>=R.good_match&&(W>>=2),_e>R.lookahead&&(_e=R.lookahead);do if(Ie[(ye=$)+Ce]===tt&&Ie[ye+Ce-1]===At&&Ie[ye]===Ie[ae]&&Ie[++ye]===Ie[ae+1]){ae+=2,ye++;do;while(Ie[++ae]===Ie[++ye]&&Ie[++ae]===Ie[++ye]&&Ie[++ae]===Ie[++ye]&&Ie[++ae]===Ie[++ye]&&Ie[++ae]===Ie[++ye]&&Ie[++ae]===Ie[++ye]&&Ie[++ae]===Ie[++ye]&&Ie[++ae]===Ie[++ye]&&ae<He);if(re=T-(He-ae),ae=He-T,Ce<re){if(R.match_start=$,_e<=(Ce=re))break;At=Ie[ae+Ce-1],tt=Ie[ae+Ce]}}while(($=Pe[$&Qe])>be&&--W!=0);return Ce<=R.lookahead?Ce:R.lookahead}function Ae(R){var $,ye,re,W,ae,Ce,_e,be,Ie,Qe,Pe=R.w_size;do{if(W=R.window_size-R.lookahead-R.strstart,R.strstart>=Pe+(Pe-E)){for(a.arraySet(R.window,R.window,Pe,Pe,0),R.match_start-=Pe,R.strstart-=Pe,R.block_start-=Pe,$=ye=R.hash_size;re=R.head[--$],R.head[$]=Pe<=re?re-Pe:0,--ye;);for($=ye=Pe;re=R.prev[--$],R.prev[$]=Pe<=re?re-Pe:0,--ye;);W+=Pe}if(R.strm.avail_in===0)break;if(Ce=R.strm,_e=R.window,be=R.strstart+R.lookahead,Ie=W,Qe=void 0,Qe=Ce.avail_in,Ie<Qe&&(Qe=Ie),ye=Qe===0?0:(Ce.avail_in-=Qe,a.arraySet(_e,Ce.input,Ce.next_in,Qe,be),Ce.state.wrap===1?Ce.adler=A(Ce.adler,_e,Qe,be):Ce.state.wrap===2&&(Ce.adler=l(Ce.adler,_e,Qe,be)),Ce.next_in+=Qe,Ce.total_in+=Qe,Qe),R.lookahead+=ye,R.lookahead+R.insert>=v)for(ae=R.strstart-R.insert,R.ins_h=R.window[ae],R.ins_h=(R.ins_h<<R.hash_shift^R.window[ae+1])&R.hash_mask;R.insert&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[ae+v-1])&R.hash_mask,R.prev[ae&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=ae,ae++,R.insert--,!(R.lookahead+R.insert<v)););}while(R.lookahead<E&&R.strm.avail_in!==0)}function te(R,$){for(var ye,re;;){if(R.lookahead<E){if(Ae(R),R.lookahead<E&&$===u)return k;if(R.lookahead===0)break}if(ye=0,R.lookahead>=v&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+v-1])&R.hash_mask,ye=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),ye!==0&&R.strstart-ye<=R.w_size-E&&(R.match_length=X(R,ye)),R.match_length>=v)if(re=o._tr_tally(R,R.strstart-R.match_start,R.match_length-v),R.lookahead-=R.match_length,R.match_length<=R.max_lazy_match&&R.lookahead>=v){for(R.match_length--;R.strstart++,R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+v-1])&R.hash_mask,ye=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart,--R.match_length!=0;);R.strstart++}else R.strstart+=R.match_length,R.match_length=0,R.ins_h=R.window[R.strstart],R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+1])&R.hash_mask;else re=o._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++;if(re&&(N(R,!1),R.strm.avail_out===0))return k}return R.insert=R.strstart<v-1?R.strstart:v-1,$===h?(N(R,!0),R.strm.avail_out===0?ue:ne):R.last_lit&&(N(R,!1),R.strm.avail_out===0)?k:Z}function se(R,$){for(var ye,re,W;;){if(R.lookahead<E){if(Ae(R),R.lookahead<E&&$===u)return k;if(R.lookahead===0)break}if(ye=0,R.lookahead>=v&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+v-1])&R.hash_mask,ye=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),R.prev_length=R.match_length,R.prev_match=R.match_start,R.match_length=v-1,ye!==0&&R.prev_length<R.max_lazy_match&&R.strstart-ye<=R.w_size-E&&(R.match_length=X(R,ye),R.match_length<=5&&(R.strategy===1||R.match_length===v&&4096<R.strstart-R.match_start)&&(R.match_length=v-1)),R.prev_length>=v&&R.match_length<=R.prev_length){for(W=R.strstart+R.lookahead-v,re=o._tr_tally(R,R.strstart-1-R.prev_match,R.prev_length-v),R.lookahead-=R.prev_length-1,R.prev_length-=2;++R.strstart<=W&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+v-1])&R.hash_mask,ye=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),--R.prev_length!=0;);if(R.match_available=0,R.match_length=v-1,R.strstart++,re&&(N(R,!1),R.strm.avail_out===0))return k}else if(R.match_available){if((re=o._tr_tally(R,0,R.window[R.strstart-1]))&&N(R,!1),R.strstart++,R.lookahead--,R.strm.avail_out===0)return k}else R.match_available=1,R.strstart++,R.lookahead--}return R.match_available&&(re=o._tr_tally(R,0,R.window[R.strstart-1]),R.match_available=0),R.insert=R.strstart<v-1?R.strstart:v-1,$===h?(N(R,!0),R.strm.avail_out===0?ue:ne):R.last_lit&&(N(R,!1),R.strm.avail_out===0)?k:Z}function de(R,$,ye,re,W){this.good_length=R,this.max_lazy=$,this.nice_length=ye,this.max_chain=re,this.func=W}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*L),this.dyn_dtree=new a.Buf16(2*(2*P+1)),this.bl_tree=new a.Buf16(2*(2*M+1)),pe(this.dyn_ltree),pe(this.dyn_dtree),pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(_+1),this.heap=new a.Buf16(2*C+1),pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xe(R){var $;return R&&R.state?(R.total_in=R.total_out=0,R.data_type=b,($=R.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?x:F,R.adler=$.wrap===2?0:1,$.last_flush=u,o._tr_init($),d):j(R,p)}function Oe(R){var $=xe(R);return $===d&&(function(ye){ye.window_size=2*ye.w_size,pe(ye.head),ye.max_lazy_match=s[ye.level].max_lazy,ye.good_match=s[ye.level].good_length,ye.nice_match=s[ye.level].nice_length,ye.max_chain_length=s[ye.level].max_chain,ye.strstart=0,ye.block_start=0,ye.lookahead=0,ye.insert=0,ye.match_length=ye.prev_length=v-1,ye.match_available=0,ye.ins_h=0})(R.state),$}function Ve(R,$,ye,re,W,ae){if(!R)return p;var Ce=1;if($===f&&($=6),re<0?(Ce=0,re=-re):15<re&&(Ce=2,re-=16),W<1||S<W||ye!==B||re<8||15<re||$<0||9<$||ae<0||y<ae)return j(R,p);re===8&&(re=9);var _e=new ve;return(R.state=_e).strm=R,_e.wrap=Ce,_e.gzhead=null,_e.w_bits=re,_e.w_size=1<<_e.w_bits,_e.w_mask=_e.w_size-1,_e.hash_bits=W+7,_e.hash_size=1<<_e.hash_bits,_e.hash_mask=_e.hash_size-1,_e.hash_shift=~~((_e.hash_bits+v-1)/v),_e.window=new a.Buf8(2*_e.w_size),_e.head=new a.Buf16(_e.hash_size),_e.prev=new a.Buf16(_e.w_size),_e.lit_bufsize=1<<W+6,_e.pending_buf_size=4*_e.lit_bufsize,_e.pending_buf=new a.Buf8(_e.pending_buf_size),_e.d_buf=1*_e.lit_bufsize,_e.l_buf=3*_e.lit_bufsize,_e.level=$,_e.strategy=ae,_e.method=ye,Oe(R)}s=[new de(0,0,0,0,function(R,$){var ye=65535;for(ye>R.pending_buf_size-5&&(ye=R.pending_buf_size-5);;){if(R.lookahead<=1){if(Ae(R),R.lookahead===0&&$===u)return k;if(R.lookahead===0)break}R.strstart+=R.lookahead,R.lookahead=0;var re=R.block_start+ye;if((R.strstart===0||R.strstart>=re)&&(R.lookahead=R.strstart-re,R.strstart=re,N(R,!1),R.strm.avail_out===0)||R.strstart-R.block_start>=R.w_size-E&&(N(R,!1),R.strm.avail_out===0))return k}return R.insert=0,$===h?(N(R,!0),R.strm.avail_out===0?ue:ne):(R.strstart>R.block_start&&(N(R,!1),R.strm.avail_out),k)}),new de(4,4,8,4,te),new de(4,5,16,8,te),new de(4,6,32,32,te),new de(4,4,16,16,se),new de(8,16,32,32,se),new de(8,16,128,128,se),new de(8,32,128,256,se),new de(32,128,258,1024,se),new de(32,258,258,4096,se)],i.deflateInit=function(R,$){return Ve(R,$,B,15,8,0)},i.deflateInit2=Ve,i.deflateReset=Oe,i.deflateResetKeep=xe,i.deflateSetHeader=function(R,$){return R&&R.state?R.state.wrap!==2?p:(R.state.gzhead=$,d):p},i.deflate=function(R,$){var ye,re,W,ae;if(!R||!R.state||5<$||$<0)return R?j(R,p):p;if(re=R.state,!R.output||!R.input&&R.avail_in!==0||re.status===666&&$!==h)return j(R,R.avail_out===0?-5:p);if(re.strm=R,ye=re.last_flush,re.last_flush=$,re.status===x)if(re.wrap===2)R.adler=0,Q(re,31),Q(re,139),Q(re,8),re.gzhead?(Q(re,(re.gzhead.text?1:0)+(re.gzhead.hcrc?2:0)+(re.gzhead.extra?4:0)+(re.gzhead.name?8:0)+(re.gzhead.comment?16:0)),Q(re,255&re.gzhead.time),Q(re,re.gzhead.time>>8&255),Q(re,re.gzhead.time>>16&255),Q(re,re.gzhead.time>>24&255),Q(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),Q(re,255&re.gzhead.os),re.gzhead.extra&&re.gzhead.extra.length&&(Q(re,255&re.gzhead.extra.length),Q(re,re.gzhead.extra.length>>8&255)),re.gzhead.hcrc&&(R.adler=l(R.adler,re.pending_buf,re.pending,0)),re.gzindex=0,re.status=69):(Q(re,0),Q(re,0),Q(re,0),Q(re,0),Q(re,0),Q(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),Q(re,3),re.status=F);else{var Ce=B+(re.w_bits-8<<4)<<8;Ce|=(2<=re.strategy||re.level<2?0:re.level<6?1:re.level===6?2:3)<<6,re.strstart!==0&&(Ce|=32),Ce+=31-Ce%31,re.status=F,V(re,Ce),re.strstart!==0&&(V(re,R.adler>>>16),V(re,65535&R.adler)),R.adler=1}if(re.status===69)if(re.gzhead.extra){for(W=re.pending;re.gzindex<(65535&re.gzhead.extra.length)&&(re.pending!==re.pending_buf_size||(re.gzhead.hcrc&&re.pending>W&&(R.adler=l(R.adler,re.pending_buf,re.pending-W,W)),q(R),W=re.pending,re.pending!==re.pending_buf_size));)Q(re,255&re.gzhead.extra[re.gzindex]),re.gzindex++;re.gzhead.hcrc&&re.pending>W&&(R.adler=l(R.adler,re.pending_buf,re.pending-W,W)),re.gzindex===re.gzhead.extra.length&&(re.gzindex=0,re.status=73)}else re.status=73;if(re.status===73)if(re.gzhead.name){W=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>W&&(R.adler=l(R.adler,re.pending_buf,re.pending-W,W)),q(R),W=re.pending,re.pending===re.pending_buf_size)){ae=1;break}ae=re.gzindex<re.gzhead.name.length?255&re.gzhead.name.charCodeAt(re.gzindex++):0,Q(re,ae)}while(ae!==0);re.gzhead.hcrc&&re.pending>W&&(R.adler=l(R.adler,re.pending_buf,re.pending-W,W)),ae===0&&(re.gzindex=0,re.status=91)}else re.status=91;if(re.status===91)if(re.gzhead.comment){W=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>W&&(R.adler=l(R.adler,re.pending_buf,re.pending-W,W)),q(R),W=re.pending,re.pending===re.pending_buf_size)){ae=1;break}ae=re.gzindex<re.gzhead.comment.length?255&re.gzhead.comment.charCodeAt(re.gzindex++):0,Q(re,ae)}while(ae!==0);re.gzhead.hcrc&&re.pending>W&&(R.adler=l(R.adler,re.pending_buf,re.pending-W,W)),ae===0&&(re.status=103)}else re.status=103;if(re.status===103&&(re.gzhead.hcrc?(re.pending+2>re.pending_buf_size&&q(R),re.pending+2<=re.pending_buf_size&&(Q(re,255&R.adler),Q(re,R.adler>>8&255),R.adler=0,re.status=F)):re.status=F),re.pending!==0){if(q(R),R.avail_out===0)return re.last_flush=-1,d}else if(R.avail_in===0&&G($)<=G(ye)&&$!==h)return j(R,-5);if(re.status===666&&R.avail_in!==0)return j(R,-5);if(R.avail_in!==0||re.lookahead!==0||$!==u&&re.status!==666){var _e=re.strategy===2?(function(be,Ie){for(var Qe;;){if(be.lookahead===0&&(Ae(be),be.lookahead===0)){if(Ie===u)return k;break}if(be.match_length=0,Qe=o._tr_tally(be,0,be.window[be.strstart]),be.lookahead--,be.strstart++,Qe&&(N(be,!1),be.strm.avail_out===0))return k}return be.insert=0,Ie===h?(N(be,!0),be.strm.avail_out===0?ue:ne):be.last_lit&&(N(be,!1),be.strm.avail_out===0)?k:Z})(re,$):re.strategy===3?(function(be,Ie){for(var Qe,Pe,He,At,tt=be.window;;){if(be.lookahead<=T){if(Ae(be),be.lookahead<=T&&Ie===u)return k;if(be.lookahead===0)break}if(be.match_length=0,be.lookahead>=v&&0<be.strstart&&(Pe=tt[He=be.strstart-1])===tt[++He]&&Pe===tt[++He]&&Pe===tt[++He]){At=be.strstart+T;do;while(Pe===tt[++He]&&Pe===tt[++He]&&Pe===tt[++He]&&Pe===tt[++He]&&Pe===tt[++He]&&Pe===tt[++He]&&Pe===tt[++He]&&Pe===tt[++He]&&He<At);be.match_length=T-(At-He),be.match_length>be.lookahead&&(be.match_length=be.lookahead)}if(be.match_length>=v?(Qe=o._tr_tally(be,1,be.match_length-v),be.lookahead-=be.match_length,be.strstart+=be.match_length,be.match_length=0):(Qe=o._tr_tally(be,0,be.window[be.strstart]),be.lookahead--,be.strstart++),Qe&&(N(be,!1),be.strm.avail_out===0))return k}return be.insert=0,Ie===h?(N(be,!0),be.strm.avail_out===0?ue:ne):be.last_lit&&(N(be,!1),be.strm.avail_out===0)?k:Z})(re,$):s[re.level].func(re,$);if(_e!==ue&&_e!==ne||(re.status=666),_e===k||_e===ue)return R.avail_out===0&&(re.last_flush=-1),d;if(_e===Z&&($===1?o._tr_align(re):$!==5&&(o._tr_stored_block(re,0,0,!1),$===3&&(pe(re.head),re.lookahead===0&&(re.strstart=0,re.block_start=0,re.insert=0))),q(R),R.avail_out===0))return re.last_flush=-1,d}return $!==h?d:re.wrap<=0?1:(re.wrap===2?(Q(re,255&R.adler),Q(re,R.adler>>8&255),Q(re,R.adler>>16&255),Q(re,R.adler>>24&255),Q(re,255&R.total_in),Q(re,R.total_in>>8&255),Q(re,R.total_in>>16&255),Q(re,R.total_in>>24&255)):(V(re,R.adler>>>16),V(re,65535&R.adler)),q(R),0<re.wrap&&(re.wrap=-re.wrap),re.pending!==0?d:1)},i.deflateEnd=function(R){var $;return R&&R.state?($=R.state.status)!==x&&$!==69&&$!==73&&$!==91&&$!==103&&$!==F&&$!==666?j(R,p):(R.state=null,$===F?j(R,-3):d):p},i.deflateSetDictionary=function(R,$){var ye,re,W,ae,Ce,_e,be,Ie,Qe=$.length;if(!R||!R.state||(ae=(ye=R.state).wrap)===2||ae===1&&ye.status!==x||ye.lookahead)return p;for(ae===1&&(R.adler=A(R.adler,$,Qe,0)),ye.wrap=0,Qe>=ye.w_size&&(ae===0&&(pe(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),Ie=new a.Buf8(ye.w_size),a.arraySet(Ie,$,Qe-ye.w_size,ye.w_size,0),$=Ie,Qe=ye.w_size),Ce=R.avail_in,_e=R.next_in,be=R.input,R.avail_in=Qe,R.next_in=0,R.input=$,Ae(ye);ye.lookahead>=v;){for(re=ye.strstart,W=ye.lookahead-(v-1);ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[re+v-1])&ye.hash_mask,ye.prev[re&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=re,re++,--W;);ye.strstart=re,ye.lookahead=v-1,Ae(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=v-1,ye.match_available=0,R.next_in=_e,R.input=be,R.avail_in=Ce,ye.wrap=ae,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(s,a){var o,A,l,c,u,h,d,p,f,y,b,B,S,C,P,M,L,_,v,T,E,x,F,k,Z;o=s.state,A=s.next_in,k=s.input,l=A+(s.avail_in-5),c=s.next_out,Z=s.output,u=c-(a-s.avail_out),h=c+(s.avail_out-257),d=o.dmax,p=o.wsize,f=o.whave,y=o.wnext,b=o.window,B=o.hold,S=o.bits,C=o.lencode,P=o.distcode,M=(1<<o.lenbits)-1,L=(1<<o.distbits)-1;e:do{S<15&&(B+=k[A++]<<S,S+=8,B+=k[A++]<<S,S+=8),_=C[B&M];t:for(;;){if(B>>>=v=_>>>24,S-=v,(v=_>>>16&255)===0)Z[c++]=65535&_;else{if(!(16&v)){if((64&v)==0){_=C[(65535&_)+(B&(1<<v)-1)];continue t}if(32&v){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}T=65535&_,(v&=15)&&(S<v&&(B+=k[A++]<<S,S+=8),T+=B&(1<<v)-1,B>>>=v,S-=v),S<15&&(B+=k[A++]<<S,S+=8,B+=k[A++]<<S,S+=8),_=P[B&L];r:for(;;){if(B>>>=v=_>>>24,S-=v,!(16&(v=_>>>16&255))){if((64&v)==0){_=P[(65535&_)+(B&(1<<v)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(E=65535&_,S<(v&=15)&&(B+=k[A++]<<S,(S+=8)<v&&(B+=k[A++]<<S,S+=8)),d<(E+=B&(1<<v)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(B>>>=v,S-=v,(v=c-u)<E){if(f<(v=E-v)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(F=b,(x=0)===y){if(x+=p-v,v<T){for(T-=v;Z[c++]=b[x++],--v;);x=c-E,F=Z}}else if(y<v){if(x+=p+y-v,(v-=y)<T){for(T-=v;Z[c++]=b[x++],--v;);if(x=0,y<T){for(T-=v=y;Z[c++]=b[x++],--v;);x=c-E,F=Z}}}else if(x+=y-v,v<T){for(T-=v;Z[c++]=b[x++],--v;);x=c-E,F=Z}for(;2<T;)Z[c++]=F[x++],Z[c++]=F[x++],Z[c++]=F[x++],T-=3;T&&(Z[c++]=F[x++],1<T&&(Z[c++]=F[x++]))}else{for(x=c-E;Z[c++]=Z[x++],Z[c++]=Z[x++],Z[c++]=Z[x++],2<(T-=3););T&&(Z[c++]=Z[x++],1<T&&(Z[c++]=Z[x++]))}break}}break}}while(A<l&&c<h);A-=T=S>>3,B&=(1<<(S-=T<<3))-1,s.next_in=A,s.next_out=c,s.avail_in=A<l?l-A+5:5-(A-l),s.avail_out=c<h?h-c+257:257-(c-h),o.hold=B,o.bits=S}},{}],49:[function(t,n,i){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),A=t("./inffast"),l=t("./inftrees"),c=1,u=2,h=0,d=-2,p=1,f=852,y=592;function b(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function B(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(x){var F;return x&&x.state?(F=x.state,x.total_in=x.total_out=F.total=0,x.msg="",F.wrap&&(x.adler=1&F.wrap),F.mode=p,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new s.Buf32(f),F.distcode=F.distdyn=new s.Buf32(y),F.sane=1,F.back=-1,h):d}function C(x){var F;return x&&x.state?((F=x.state).wsize=0,F.whave=0,F.wnext=0,S(x)):d}function P(x,F){var k,Z;return x&&x.state?(Z=x.state,F<0?(k=0,F=-F):(k=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?d:(Z.window!==null&&Z.wbits!==F&&(Z.window=null),Z.wrap=k,Z.wbits=F,C(x))):d}function M(x,F){var k,Z;return x?(Z=new B,(x.state=Z).window=null,(k=P(x,F))!==h&&(x.state=null),k):d}var L,_,v=!0;function T(x){if(v){var F;for(L=new s.Buf32(512),_=new s.Buf32(32),F=0;F<144;)x.lens[F++]=8;for(;F<256;)x.lens[F++]=9;for(;F<280;)x.lens[F++]=7;for(;F<288;)x.lens[F++]=8;for(l(c,x.lens,0,288,L,0,x.work,{bits:9}),F=0;F<32;)x.lens[F++]=5;l(u,x.lens,0,32,_,0,x.work,{bits:5}),v=!1}x.lencode=L,x.lenbits=9,x.distcode=_,x.distbits=5}function E(x,F,k,Z){var ue,ne=x.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new s.Buf8(ne.wsize)),Z>=ne.wsize?(s.arraySet(ne.window,F,k-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(Z<(ue=ne.wsize-ne.wnext)&&(ue=Z),s.arraySet(ne.window,F,k-Z,ue,ne.wnext),(Z-=ue)?(s.arraySet(ne.window,F,k-Z,Z,0),ne.wnext=Z,ne.whave=ne.wsize):(ne.wnext+=ue,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=ue))),0}i.inflateReset=C,i.inflateReset2=P,i.inflateResetKeep=S,i.inflateInit=function(x){return M(x,15)},i.inflateInit2=M,i.inflate=function(x,F){var k,Z,ue,ne,j,G,pe,q,N,Q,V,X,Ae,te,se,de,ve,xe,Oe,Ve,R,$,ye,re,W=0,ae=new s.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return d;(k=x.state).mode===12&&(k.mode=13),j=x.next_out,ue=x.output,pe=x.avail_out,ne=x.next_in,Z=x.input,G=x.avail_in,q=k.hold,N=k.bits,Q=G,V=pe,$=h;e:for(;;)switch(k.mode){case p:if(k.wrap===0){k.mode=13;break}for(;N<16;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if(2&k.wrap&&q===35615){ae[k.check=0]=255&q,ae[1]=q>>>8&255,k.check=o(k.check,ae,2,0),N=q=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&q)<<8)+(q>>8))%31){x.msg="incorrect header check",k.mode=30;break}if((15&q)!=8){x.msg="unknown compression method",k.mode=30;break}if(N-=4,R=8+(15&(q>>>=4)),k.wbits===0)k.wbits=R;else if(R>k.wbits){x.msg="invalid window size",k.mode=30;break}k.dmax=1<<R,x.adler=k.check=1,k.mode=512&q?10:12,N=q=0;break;case 2:for(;N<16;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if(k.flags=q,(255&k.flags)!=8){x.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){x.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=q>>8&1),512&k.flags&&(ae[0]=255&q,ae[1]=q>>>8&255,k.check=o(k.check,ae,2,0)),N=q=0,k.mode=3;case 3:for(;N<32;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}k.head&&(k.head.time=q),512&k.flags&&(ae[0]=255&q,ae[1]=q>>>8&255,ae[2]=q>>>16&255,ae[3]=q>>>24&255,k.check=o(k.check,ae,4,0)),N=q=0,k.mode=4;case 4:for(;N<16;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}k.head&&(k.head.xflags=255&q,k.head.os=q>>8),512&k.flags&&(ae[0]=255&q,ae[1]=q>>>8&255,k.check=o(k.check,ae,2,0)),N=q=0,k.mode=5;case 5:if(1024&k.flags){for(;N<16;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}k.length=q,k.head&&(k.head.extra_len=q),512&k.flags&&(ae[0]=255&q,ae[1]=q>>>8&255,k.check=o(k.check,ae,2,0)),N=q=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(G<(X=k.length)&&(X=G),X&&(k.head&&(R=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),s.arraySet(k.head.extra,Z,ne,X,R)),512&k.flags&&(k.check=o(k.check,Z,X,ne)),G-=X,ne+=X,k.length-=X),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(G===0)break e;for(X=0;R=Z[ne+X++],k.head&&R&&k.length<65536&&(k.head.name+=String.fromCharCode(R)),R&&X<G;);if(512&k.flags&&(k.check=o(k.check,Z,X,ne)),G-=X,ne+=X,R)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(G===0)break e;for(X=0;R=Z[ne+X++],k.head&&R&&k.length<65536&&(k.head.comment+=String.fromCharCode(R)),R&&X<G;);if(512&k.flags&&(k.check=o(k.check,Z,X,ne)),G-=X,ne+=X,R)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;N<16;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if(q!==(65535&k.check)){x.msg="header crc mismatch",k.mode=30;break}N=q=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),x.adler=k.check=0,k.mode=12;break;case 10:for(;N<32;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}x.adler=k.check=b(q),N=q=0,k.mode=11;case 11:if(k.havedict===0)return x.next_out=j,x.avail_out=pe,x.next_in=ne,x.avail_in=G,k.hold=q,k.bits=N,2;x.adler=k.check=1,k.mode=12;case 12:if(F===5||F===6)break e;case 13:if(k.last){q>>>=7&N,N-=7&N,k.mode=27;break}for(;N<3;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}switch(k.last=1&q,N-=1,3&(q>>>=1)){case 0:k.mode=14;break;case 1:if(T(k),k.mode=20,F!==6)break;q>>>=2,N-=2;break e;case 2:k.mode=17;break;case 3:x.msg="invalid block type",k.mode=30}q>>>=2,N-=2;break;case 14:for(q>>>=7&N,N-=7&N;N<32;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if((65535&q)!=(q>>>16^65535)){x.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&q,N=q=0,k.mode=15,F===6)break e;case 15:k.mode=16;case 16:if(X=k.length){if(G<X&&(X=G),pe<X&&(X=pe),X===0)break e;s.arraySet(ue,Z,ne,X,j),G-=X,ne+=X,pe-=X,j+=X,k.length-=X;break}k.mode=12;break;case 17:for(;N<14;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if(k.nlen=257+(31&q),q>>>=5,N-=5,k.ndist=1+(31&q),q>>>=5,N-=5,k.ncode=4+(15&q),q>>>=4,N-=4,286<k.nlen||30<k.ndist){x.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;N<3;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}k.lens[Ce[k.have++]]=7&q,q>>>=3,N-=3}for(;k.have<19;)k.lens[Ce[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,ye={bits:k.lenbits},$=l(0,k.lens,0,19,k.lencode,0,k.work,ye),k.lenbits=ye.bits,$){x.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;de=(W=k.lencode[q&(1<<k.lenbits)-1])>>>16&255,ve=65535&W,!((se=W>>>24)<=N);){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if(ve<16)q>>>=se,N-=se,k.lens[k.have++]=ve;else{if(ve===16){for(re=se+2;N<re;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if(q>>>=se,N-=se,k.have===0){x.msg="invalid bit length repeat",k.mode=30;break}R=k.lens[k.have-1],X=3+(3&q),q>>>=2,N-=2}else if(ve===17){for(re=se+3;N<re;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}N-=se,R=0,X=3+(7&(q>>>=se)),q>>>=3,N-=3}else{for(re=se+7;N<re;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}N-=se,R=0,X=11+(127&(q>>>=se)),q>>>=7,N-=7}if(k.have+X>k.nlen+k.ndist){x.msg="invalid bit length repeat",k.mode=30;break}for(;X--;)k.lens[k.have++]=R}}if(k.mode===30)break;if(k.lens[256]===0){x.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,ye={bits:k.lenbits},$=l(c,k.lens,0,k.nlen,k.lencode,0,k.work,ye),k.lenbits=ye.bits,$){x.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,ye={bits:k.distbits},$=l(u,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,ye),k.distbits=ye.bits,$){x.msg="invalid distances set",k.mode=30;break}if(k.mode=20,F===6)break e;case 20:k.mode=21;case 21:if(6<=G&&258<=pe){x.next_out=j,x.avail_out=pe,x.next_in=ne,x.avail_in=G,k.hold=q,k.bits=N,A(x,V),j=x.next_out,ue=x.output,pe=x.avail_out,ne=x.next_in,Z=x.input,G=x.avail_in,q=k.hold,N=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;de=(W=k.lencode[q&(1<<k.lenbits)-1])>>>16&255,ve=65535&W,!((se=W>>>24)<=N);){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if(de&&(240&de)==0){for(xe=se,Oe=de,Ve=ve;de=(W=k.lencode[Ve+((q&(1<<xe+Oe)-1)>>xe)])>>>16&255,ve=65535&W,!(xe+(se=W>>>24)<=N);){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}q>>>=xe,N-=xe,k.back+=xe}if(q>>>=se,N-=se,k.back+=se,k.length=ve,de===0){k.mode=26;break}if(32&de){k.back=-1,k.mode=12;break}if(64&de){x.msg="invalid literal/length code",k.mode=30;break}k.extra=15&de,k.mode=22;case 22:if(k.extra){for(re=k.extra;N<re;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}k.length+=q&(1<<k.extra)-1,q>>>=k.extra,N-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;de=(W=k.distcode[q&(1<<k.distbits)-1])>>>16&255,ve=65535&W,!((se=W>>>24)<=N);){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if((240&de)==0){for(xe=se,Oe=de,Ve=ve;de=(W=k.distcode[Ve+((q&(1<<xe+Oe)-1)>>xe)])>>>16&255,ve=65535&W,!(xe+(se=W>>>24)<=N);){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}q>>>=xe,N-=xe,k.back+=xe}if(q>>>=se,N-=se,k.back+=se,64&de){x.msg="invalid distance code",k.mode=30;break}k.offset=ve,k.extra=15&de,k.mode=24;case 24:if(k.extra){for(re=k.extra;N<re;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}k.offset+=q&(1<<k.extra)-1,q>>>=k.extra,N-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){x.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(pe===0)break e;if(X=V-pe,k.offset>X){if((X=k.offset-X)>k.whave&&k.sane){x.msg="invalid distance too far back",k.mode=30;break}Ae=X>k.wnext?(X-=k.wnext,k.wsize-X):k.wnext-X,X>k.length&&(X=k.length),te=k.window}else te=ue,Ae=j-k.offset,X=k.length;for(pe<X&&(X=pe),pe-=X,k.length-=X;ue[j++]=te[Ae++],--X;);k.length===0&&(k.mode=21);break;case 26:if(pe===0)break e;ue[j++]=k.length,pe--,k.mode=21;break;case 27:if(k.wrap){for(;N<32;){if(G===0)break e;G--,q|=Z[ne++]<<N,N+=8}if(V-=pe,x.total_out+=V,k.total+=V,V&&(x.adler=k.check=k.flags?o(k.check,ue,V,j-V):a(k.check,ue,V,j-V)),V=pe,(k.flags?q:b(q))!==k.check){x.msg="incorrect data check",k.mode=30;break}N=q=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;N<32;){if(G===0)break e;G--,q+=Z[ne++]<<N,N+=8}if(q!==(4294967295&k.total)){x.msg="incorrect length check",k.mode=30;break}N=q=0}k.mode=29;case 29:$=1;break e;case 30:$=-3;break e;case 31:return-4;case 32:default:return d}return x.next_out=j,x.avail_out=pe,x.next_in=ne,x.avail_in=G,k.hold=q,k.bits=N,(k.wsize||V!==x.avail_out&&k.mode<30&&(k.mode<27||F!==4))&&E(x,x.output,x.next_out,V-x.avail_out)?(k.mode=31,-4):(Q-=x.avail_in,V-=x.avail_out,x.total_in+=Q,x.total_out+=V,k.total+=V,k.wrap&&V&&(x.adler=k.check=k.flags?o(k.check,ue,V,x.next_out-V):a(k.check,ue,V,x.next_out-V)),x.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(Q==0&&V===0||F===4)&&$===h&&($=-5),$)},i.inflateEnd=function(x){if(!x||!x.state)return d;var F=x.state;return F.window&&(F.window=null),x.state=null,h},i.inflateGetHeader=function(x,F){var k;return x&&x.state?(2&(k=x.state).wrap)==0?d:((k.head=F).done=!1,h):d},i.inflateSetDictionary=function(x,F){var k,Z=F.length;return x&&x.state?(k=x.state).wrap!==0&&k.mode!==11?d:k.mode===11&&a(1,F,Z,0)!==k.check?-3:E(x,F,Z,Z)?(k.mode=31,-4):(k.havedict=1,h):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,u,h,d,p,f,y,b){var B,S,C,P,M,L,_,v,T,E=b.bits,x=0,F=0,k=0,Z=0,ue=0,ne=0,j=0,G=0,pe=0,q=0,N=null,Q=0,V=new s.Buf16(16),X=new s.Buf16(16),Ae=null,te=0;for(x=0;x<=15;x++)V[x]=0;for(F=0;F<d;F++)V[u[h+F]]++;for(ue=E,Z=15;1<=Z&&V[Z]===0;Z--);if(Z<ue&&(ue=Z),Z===0)return p[f++]=20971520,p[f++]=20971520,b.bits=1,0;for(k=1;k<Z&&V[k]===0;k++);for(ue<k&&(ue=k),x=G=1;x<=15;x++)if(G<<=1,(G-=V[x])<0)return-1;if(0<G&&(c===0||Z!==1))return-1;for(X[1]=0,x=1;x<15;x++)X[x+1]=X[x]+V[x];for(F=0;F<d;F++)u[h+F]!==0&&(y[X[u[h+F]]++]=F);if(L=c===0?(N=Ae=y,19):c===1?(N=a,Q-=257,Ae=o,te-=257,256):(N=A,Ae=l,-1),x=k,M=f,j=F=q=0,C=-1,P=(pe=1<<(ne=ue))-1,c===1&&852<pe||c===2&&592<pe)return 1;for(;;){for(_=x-j,T=y[F]<L?(v=0,y[F]):y[F]>L?(v=Ae[te+y[F]],N[Q+y[F]]):(v=96,0),B=1<<x-j,k=S=1<<ne;p[M+(q>>j)+(S-=B)]=_<<24|v<<16|T|0,S!==0;);for(B=1<<x-1;q&B;)B>>=1;if(B!==0?(q&=B-1,q+=B):q=0,F++,--V[x]==0){if(x===Z)break;x=u[h+y[F]]}if(ue<x&&(q&P)!==C){for(j===0&&(j=ue),M+=k,G=1<<(ne=x-j);ne+j<Z&&!((G-=V[ne+j])<=0);)ne++,G<<=1;if(pe+=1<<ne,c===1&&852<pe||c===2&&592<pe)return 1;p[C=q&P]=ue<<24|ne<<16|M-f|0}}return q!==0&&(p[M+q]=x-j<<24|64<<16|0),b.bits=ue,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var s=t("../utils/common"),a=0,o=1;function A(W){for(var ae=W.length;0<=--ae;)W[ae]=0}var l=0,c=29,u=256,h=u+1+c,d=30,p=19,f=2*h+1,y=15,b=16,B=7,S=256,C=16,P=17,M=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(h+2));A(E);var x=new Array(2*d);A(x);var F=new Array(512);A(F);var k=new Array(256);A(k);var Z=new Array(c);A(Z);var ue,ne,j,G=new Array(d);function pe(W,ae,Ce,_e,be){this.static_tree=W,this.extra_bits=ae,this.extra_base=Ce,this.elems=_e,this.max_length=be,this.has_stree=W&&W.length}function q(W,ae){this.dyn_tree=W,this.max_code=0,this.stat_desc=ae}function N(W){return W<256?F[W]:F[256+(W>>>7)]}function Q(W,ae){W.pending_buf[W.pending++]=255&ae,W.pending_buf[W.pending++]=ae>>>8&255}function V(W,ae,Ce){W.bi_valid>b-Ce?(W.bi_buf|=ae<<W.bi_valid&65535,Q(W,W.bi_buf),W.bi_buf=ae>>b-W.bi_valid,W.bi_valid+=Ce-b):(W.bi_buf|=ae<<W.bi_valid&65535,W.bi_valid+=Ce)}function X(W,ae,Ce){V(W,Ce[2*ae],Ce[2*ae+1])}function Ae(W,ae){for(var Ce=0;Ce|=1&W,W>>>=1,Ce<<=1,0<--ae;);return Ce>>>1}function te(W,ae,Ce){var _e,be,Ie=new Array(y+1),Qe=0;for(_e=1;_e<=y;_e++)Ie[_e]=Qe=Qe+Ce[_e-1]<<1;for(be=0;be<=ae;be++){var Pe=W[2*be+1];Pe!==0&&(W[2*be]=Ae(Ie[Pe]++,Pe))}}function se(W){var ae;for(ae=0;ae<h;ae++)W.dyn_ltree[2*ae]=0;for(ae=0;ae<d;ae++)W.dyn_dtree[2*ae]=0;for(ae=0;ae<p;ae++)W.bl_tree[2*ae]=0;W.dyn_ltree[2*S]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function de(W){8<W.bi_valid?Q(W,W.bi_buf):0<W.bi_valid&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function ve(W,ae,Ce,_e){var be=2*ae,Ie=2*Ce;return W[be]<W[Ie]||W[be]===W[Ie]&&_e[ae]<=_e[Ce]}function xe(W,ae,Ce){for(var _e=W.heap[Ce],be=Ce<<1;be<=W.heap_len&&(be<W.heap_len&&ve(ae,W.heap[be+1],W.heap[be],W.depth)&&be++,!ve(ae,_e,W.heap[be],W.depth));)W.heap[Ce]=W.heap[be],Ce=be,be<<=1;W.heap[Ce]=_e}function Oe(W,ae,Ce){var _e,be,Ie,Qe,Pe=0;if(W.last_lit!==0)for(;_e=W.pending_buf[W.d_buf+2*Pe]<<8|W.pending_buf[W.d_buf+2*Pe+1],be=W.pending_buf[W.l_buf+Pe],Pe++,_e===0?X(W,be,ae):(X(W,(Ie=k[be])+u+1,ae),(Qe=L[Ie])!==0&&V(W,be-=Z[Ie],Qe),X(W,Ie=N(--_e),Ce),(Qe=_[Ie])!==0&&V(W,_e-=G[Ie],Qe)),Pe<W.last_lit;);X(W,S,ae)}function Ve(W,ae){var Ce,_e,be,Ie=ae.dyn_tree,Qe=ae.stat_desc.static_tree,Pe=ae.stat_desc.has_stree,He=ae.stat_desc.elems,At=-1;for(W.heap_len=0,W.heap_max=f,Ce=0;Ce<He;Ce++)Ie[2*Ce]!==0?(W.heap[++W.heap_len]=At=Ce,W.depth[Ce]=0):Ie[2*Ce+1]=0;for(;W.heap_len<2;)Ie[2*(be=W.heap[++W.heap_len]=At<2?++At:0)]=1,W.depth[be]=0,W.opt_len--,Pe&&(W.static_len-=Qe[2*be+1]);for(ae.max_code=At,Ce=W.heap_len>>1;1<=Ce;Ce--)xe(W,Ie,Ce);for(be=He;Ce=W.heap[1],W.heap[1]=W.heap[W.heap_len--],xe(W,Ie,1),_e=W.heap[1],W.heap[--W.heap_max]=Ce,W.heap[--W.heap_max]=_e,Ie[2*be]=Ie[2*Ce]+Ie[2*_e],W.depth[be]=(W.depth[Ce]>=W.depth[_e]?W.depth[Ce]:W.depth[_e])+1,Ie[2*Ce+1]=Ie[2*_e+1]=be,W.heap[1]=be++,xe(W,Ie,1),2<=W.heap_len;);W.heap[--W.heap_max]=W.heap[1],(function(tt,lt){var xt,at,ut,rt,it,pt,Rt=lt.dyn_tree,Bt=lt.max_code,Qt=lt.stat_desc.static_tree,Ut=lt.stat_desc.has_stree,lr=lt.stat_desc.extra_bits,kr=lt.stat_desc.extra_base,Tt=lt.stat_desc.max_length,Ft=0;for(rt=0;rt<=y;rt++)tt.bl_count[rt]=0;for(Rt[2*tt.heap[tt.heap_max]+1]=0,xt=tt.heap_max+1;xt<f;xt++)Tt<(rt=Rt[2*Rt[2*(at=tt.heap[xt])+1]+1]+1)&&(rt=Tt,Ft++),Rt[2*at+1]=rt,Bt<at||(tt.bl_count[rt]++,it=0,kr<=at&&(it=lr[at-kr]),pt=Rt[2*at],tt.opt_len+=pt*(rt+it),Ut&&(tt.static_len+=pt*(Qt[2*at+1]+it)));if(Ft!==0){do{for(rt=Tt-1;tt.bl_count[rt]===0;)rt--;tt.bl_count[rt]--,tt.bl_count[rt+1]+=2,tt.bl_count[Tt]--,Ft-=2}while(0<Ft);for(rt=Tt;rt!==0;rt--)for(at=tt.bl_count[rt];at!==0;)Bt<(ut=tt.heap[--xt])||(Rt[2*ut+1]!==rt&&(tt.opt_len+=(rt-Rt[2*ut+1])*Rt[2*ut],Rt[2*ut+1]=rt),at--)}})(W,ae),te(Ie,At,W.bl_count)}function R(W,ae,Ce){var _e,be,Ie=-1,Qe=ae[1],Pe=0,He=7,At=4;for(Qe===0&&(He=138,At=3),ae[2*(Ce+1)+1]=65535,_e=0;_e<=Ce;_e++)be=Qe,Qe=ae[2*(_e+1)+1],++Pe<He&&be===Qe||(Pe<At?W.bl_tree[2*be]+=Pe:be!==0?(be!==Ie&&W.bl_tree[2*be]++,W.bl_tree[2*C]++):Pe<=10?W.bl_tree[2*P]++:W.bl_tree[2*M]++,Ie=be,At=(Pe=0)===Qe?(He=138,3):be===Qe?(He=6,3):(He=7,4))}function $(W,ae,Ce){var _e,be,Ie=-1,Qe=ae[1],Pe=0,He=7,At=4;for(Qe===0&&(He=138,At=3),_e=0;_e<=Ce;_e++)if(be=Qe,Qe=ae[2*(_e+1)+1],!(++Pe<He&&be===Qe)){if(Pe<At)for(;X(W,be,W.bl_tree),--Pe!=0;);else be!==0?(be!==Ie&&(X(W,be,W.bl_tree),Pe--),X(W,C,W.bl_tree),V(W,Pe-3,2)):Pe<=10?(X(W,P,W.bl_tree),V(W,Pe-3,3)):(X(W,M,W.bl_tree),V(W,Pe-11,7));Ie=be,At=(Pe=0)===Qe?(He=138,3):be===Qe?(He=6,3):(He=7,4)}}A(G);var ye=!1;function re(W,ae,Ce,_e){V(W,(l<<1)+(_e?1:0),3),(function(be,Ie,Qe,Pe){de(be),Q(be,Qe),Q(be,~Qe),s.arraySet(be.pending_buf,be.window,Ie,Qe,be.pending),be.pending+=Qe})(W,ae,Ce)}i._tr_init=function(W){ye||((function(){var ae,Ce,_e,be,Ie,Qe=new Array(y+1);for(be=_e=0;be<c-1;be++)for(Z[be]=_e,ae=0;ae<1<<L[be];ae++)k[_e++]=be;for(k[_e-1]=be,be=Ie=0;be<16;be++)for(G[be]=Ie,ae=0;ae<1<<_[be];ae++)F[Ie++]=be;for(Ie>>=7;be<d;be++)for(G[be]=Ie<<7,ae=0;ae<1<<_[be]-7;ae++)F[256+Ie++]=be;for(Ce=0;Ce<=y;Ce++)Qe[Ce]=0;for(ae=0;ae<=143;)E[2*ae+1]=8,ae++,Qe[8]++;for(;ae<=255;)E[2*ae+1]=9,ae++,Qe[9]++;for(;ae<=279;)E[2*ae+1]=7,ae++,Qe[7]++;for(;ae<=287;)E[2*ae+1]=8,ae++,Qe[8]++;for(te(E,h+1,Qe),ae=0;ae<d;ae++)x[2*ae+1]=5,x[2*ae]=Ae(ae,5);ue=new pe(E,L,u+1,h,y),ne=new pe(x,_,0,d,y),j=new pe(new Array(0),v,0,p,B)})(),ye=!0),W.l_desc=new q(W.dyn_ltree,ue),W.d_desc=new q(W.dyn_dtree,ne),W.bl_desc=new q(W.bl_tree,j),W.bi_buf=0,W.bi_valid=0,se(W)},i._tr_stored_block=re,i._tr_flush_block=function(W,ae,Ce,_e){var be,Ie,Qe=0;0<W.level?(W.strm.data_type===2&&(W.strm.data_type=(function(Pe){var He,At=4093624447;for(He=0;He<=31;He++,At>>>=1)if(1&At&&Pe.dyn_ltree[2*He]!==0)return a;if(Pe.dyn_ltree[18]!==0||Pe.dyn_ltree[20]!==0||Pe.dyn_ltree[26]!==0)return o;for(He=32;He<u;He++)if(Pe.dyn_ltree[2*He]!==0)return o;return a})(W)),Ve(W,W.l_desc),Ve(W,W.d_desc),Qe=(function(Pe){var He;for(R(Pe,Pe.dyn_ltree,Pe.l_desc.max_code),R(Pe,Pe.dyn_dtree,Pe.d_desc.max_code),Ve(Pe,Pe.bl_desc),He=p-1;3<=He&&Pe.bl_tree[2*T[He]+1]===0;He--);return Pe.opt_len+=3*(He+1)+5+5+4,He})(W),be=W.opt_len+3+7>>>3,(Ie=W.static_len+3+7>>>3)<=be&&(be=Ie)):be=Ie=Ce+5,Ce+4<=be&&ae!==-1?re(W,ae,Ce,_e):W.strategy===4||Ie===be?(V(W,2+(_e?1:0),3),Oe(W,E,x)):(V(W,4+(_e?1:0),3),(function(Pe,He,At,tt){var lt;for(V(Pe,He-257,5),V(Pe,At-1,5),V(Pe,tt-4,4),lt=0;lt<tt;lt++)V(Pe,Pe.bl_tree[2*T[lt]+1],3);$(Pe,Pe.dyn_ltree,He-1),$(Pe,Pe.dyn_dtree,At-1)})(W,W.l_desc.max_code+1,W.d_desc.max_code+1,Qe+1),Oe(W,W.dyn_ltree,W.dyn_dtree)),se(W),_e&&de(W)},i._tr_tally=function(W,ae,Ce){return W.pending_buf[W.d_buf+2*W.last_lit]=ae>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&ae,W.pending_buf[W.l_buf+W.last_lit]=255&Ce,W.last_lit++,ae===0?W.dyn_ltree[2*Ce]++:(W.matches++,ae--,W.dyn_ltree[2*(k[Ce]+u+1)]++,W.dyn_dtree[2*N(ae)]++),W.last_lit===W.lit_bufsize-1},i._tr_align=function(W){V(W,2,3),X(W,S,E),(function(ae){ae.bi_valid===16?(Q(ae,ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0):8<=ae.bi_valid&&(ae.pending_buf[ae.pending++]=255&ae.bi_buf,ae.bi_buf>>=8,ae.bi_valid-=8)})(W)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(s){(function(a,o){if(!a.setImmediate){var A,l,c,u,h=1,d={},p=!1,f=a.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(a);y=y&&y.setTimeout?y:a,A={}.toString.call(a.process)==="[object process]"?function(C){process.nextTick(function(){B(C)})}:(function(){if(a.postMessage&&!a.importScripts){var C=!0,P=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=P,C}})()?(u="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",S,!1):a.attachEvent("onmessage",S),function(C){a.postMessage(u+C,"*")}):a.MessageChannel?((c=new MessageChannel).port1.onmessage=function(C){B(C.data)},function(C){c.port2.postMessage(C)}):f&&"onreadystatechange"in f.createElement("script")?(l=f.documentElement,function(C){var P=f.createElement("script");P.onreadystatechange=function(){B(C),P.onreadystatechange=null,l.removeChild(P),P=null},l.appendChild(P)}):function(C){setTimeout(B,0,C)},y.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var P=new Array(arguments.length-1),M=0;M<P.length;M++)P[M]=arguments[M+1];var L={callback:C,args:P};return d[h]=L,A(h),h++},y.clearImmediate=b}function b(C){delete d[C]}function B(C){if(p)setTimeout(B,0,C);else{var P=d[C];if(P){p=!0;try{(function(M){var L=M.callback,_=M.args;switch(_.length){case 0:L();break;case 1:L(_[0]);break;case 2:L(_[0],_[1]);break;case 3:L(_[0],_[1],_[2]);break;default:L.apply(o,_)}})(P)}finally{b(C),p=!1}}}}function S(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(u)===0&&B(+C.data.slice(u.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof j0<"u"?j0:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(d_)),d_.exports}var bte=yte();const wte=gB(bte);var nb={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var vte=nb.exports,TT;function _te(){return TT||(TT=1,(function(r,e){((t,n)=>{r.exports=n()})(vte,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},A=0,l={};function c(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(v){var T=P(v);T.chunkSize=parseInt(T.chunkSize),v.step||v.chunk||(T.chunkSize=null),this._handle=new f(T),(this._handle.streamer=this)._config=T}).call(this,_),this.parseChunk=function(v,T){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let F=this._config.newline;F||(x=this._config.quoteChar||'"',F=this._handle.guessLineEndings(v,x)),v=[...v.split(F).slice(E)].join(F)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&(x=this._config.beforeFirstChunk(v))!==void 0&&(v=x),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+v,x=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(v=x.meta.cursor,E=(this._finished||(this._partialLine=E.substring(v-this._baseIndex),this._baseIndex=v),x&&x.data&&(this._rowCount+=x.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:x,workerId:l.WORKER_ID,finished:E});else if(L(this._config.chunk)&&!T){if(this._config.chunk(x,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=x=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(x.data),this._completeResults.errors=this._completeResults.errors.concat(x.errors),this._completeResults.meta=x.meta),this._completed||!E||!L(this._config.complete)||x&&x.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||x&&x.meta.paused||this._nextChunk(),x}this._halted=!0},this._sendError=function(v){L(this._config.error)?this._config.error(v):a&&this._config.error&&n.postMessage({workerId:l.WORKER_ID,error:v,finished:!1})}}function u(_){var v;(_=_||{}).chunkSize||(_.chunkSize=l.RemoteChunkSize),c.call(this,_),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(T){this._input=T,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(v=new XMLHttpRequest,this._config.withCredentials&&(v.withCredentials=this._config.withCredentials),s||(v.onload=M(this._chunkLoaded,this),v.onerror=M(this._chunkError,this)),v.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var T,E=this._config.downloadRequestHeaders;for(T in E)v.setRequestHeader(T,E[T])}var x;this._config.chunkSize&&(x=this._start+this._config.chunkSize-1,v.setRequestHeader("Range","bytes="+this._start+"-"+x));try{v.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}s&&v.status===0&&this._chunkError()}},this._chunkLoaded=function(){v.readyState===4&&(v.status<200||400<=v.status?this._chunkError():(this._start+=this._config.chunkSize||v.responseText.length,this._finished=!this._config.chunkSize||this._start>=(T=>(T=T.getResponseHeader("Content-Range"))!==null?parseInt(T.substring(T.lastIndexOf("/")+1)):-1)(v),this.parseChunk(v.responseText)))},this._chunkError=function(T){T=v.statusText||T,this._sendError(new Error(T))}}function h(_){(_=_||{}).chunkSize||(_.chunkSize=l.LocalChunkSize),c.call(this,_);var v,T,E=typeof FileReader<"u";this.stream=function(x){this._input=x,T=x.slice||x.webkitSlice||x.mozSlice,E?((v=new FileReader).onload=M(this._chunkLoaded,this),v.onerror=M(this._chunkError,this)):v=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var x=this._input,F=(this._config.chunkSize&&(F=Math.min(this._start+this._config.chunkSize,this._input.size),x=T.call(x,this._start,F)),v.readAsText(x,this._config.encoding));E||this._chunkLoaded({target:{result:F}})},this._chunkLoaded=function(x){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(x.target.result)},this._chunkError=function(){this._sendError(v.error)}}function d(_){var v;c.call(this,_=_||{}),this.stream=function(T){return v=T,this._nextChunk()},this._nextChunk=function(){var T,E;if(!this._finished)return T=this._config.chunkSize,v=T?(E=v.substring(0,T),v.substring(T)):(E=v,""),this._finished=!v,this.parseChunk(E)}}function p(_){c.call(this,_=_||{});var v=[],T=!0,E=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(x){this._input=x,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&v.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),v.length?this.parseChunk(v.shift()):T=!0},this._streamData=M(function(x){try{v.push(typeof x=="string"?x:x.toString(this._config.encoding)),T&&(T=!1,this._checkIsFinished(),this.parseChunk(v.shift()))}catch(F){this._streamError(F)}},this),this._streamError=M(function(x){this._streamCleanUp(),this._sendError(x)},this),this._streamEnd=M(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=M(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(_){var v,T,E,x,F=Math.pow(2,53),k=-F,Z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ue=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ne=this,j=0,G=0,pe=!1,q=!1,N=[],Q={data:[],errors:[],meta:{}};function V(se){return _.skipEmptyLines==="greedy"?se.join("").trim()==="":se.length===1&&se[0].length===0}function X(){if(Q&&E&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),E=!1),_.skipEmptyLines&&(Q.data=Q.data.filter(function(xe){return!V(xe)})),Ae()){let xe=function(Oe,Ve){L(_.transformHeader)&&(Oe=_.transformHeader(Oe,Ve)),N.push(Oe)};if(Q)if(Array.isArray(Q.data[0])){for(var se=0;Ae()&&se<Q.data.length;se++)Q.data[se].forEach(xe);Q.data.splice(0,1)}else Q.data.forEach(xe)}function de(xe,Oe){for(var Ve=_.header?{}:[],R=0;R<xe.length;R++){var $=R,ye=xe[R],ye=((re,W)=>(ae=>(_.dynamicTypingFunction&&_.dynamicTyping[ae]===void 0&&(_.dynamicTyping[ae]=_.dynamicTypingFunction(ae)),(_.dynamicTyping[ae]||_.dynamicTyping)===!0))(re)?W==="true"||W==="TRUE"||W!=="false"&&W!=="FALSE"&&((ae=>{if(Z.test(ae)&&(ae=parseFloat(ae),k<ae&&ae<F))return 1})(W)?parseFloat(W):ue.test(W)?new Date(W):W===""?null:W):W)($=_.header?R>=N.length?"__parsed_extra":N[R]:$,ye=_.transform?_.transform(ye,$):ye);$==="__parsed_extra"?(Ve[$]=Ve[$]||[],Ve[$].push(ye)):Ve[$]=ye}return _.header&&(R>N.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+N.length+" fields but parsed "+R,G+Oe):R<N.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+N.length+" fields but parsed "+R,G+Oe)),Ve}var ve;Q&&(_.header||_.dynamicTyping||_.transform)&&(ve=1,!Q.data.length||Array.isArray(Q.data[0])?(Q.data=Q.data.map(de),ve=Q.data.length):Q.data=de(Q.data,0),_.header&&Q.meta&&(Q.meta.fields=N),G+=ve)}function Ae(){return _.header&&N.length===0}function te(se,de,ve,xe){se={type:se,code:de,message:ve},xe!==void 0&&(se.row=xe),Q.errors.push(se)}L(_.step)&&(x=_.step,_.step=function(se){Q=se,Ae()?X():(X(),Q.data.length!==0&&(j+=se.data.length,_.preview&&j>_.preview?T.abort():(Q.data=Q.data[0],x(Q,ne))))}),this.parse=function(se,de,ve){var xe=_.quoteChar||'"',xe=(_.newline||(_.newline=this.guessLineEndings(se,xe)),E=!1,_.delimiter?L(_.delimiter)&&(_.delimiter=_.delimiter(se),Q.meta.delimiter=_.delimiter):((xe=((Oe,Ve,R,$,ye)=>{var re,W,ae,Ce;ye=ye||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var _e=0;_e<ye.length;_e++){for(var be,Ie=ye[_e],Qe=0,Pe=0,He=0,At=(ae=void 0,new b({comments:$,delimiter:Ie,newline:Ve,preview:10}).parse(Oe)),tt=0;tt<At.data.length;tt++)R&&V(At.data[tt])?He++:(be=At.data[tt].length,Pe+=be,ae===void 0?ae=be:0<be&&(Qe+=Math.abs(be-ae),ae=be));0<At.data.length&&(Pe/=At.data.length-He),(W===void 0||Qe<=W)&&(Ce===void 0||Ce<Pe)&&1.99<Pe&&(W=Qe,re=Ie,Ce=Pe)}return{successful:!!(_.delimiter=re),bestDelimiter:re}})(se,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=xe.bestDelimiter:(E=!0,_.delimiter=l.DefaultDelimiter),Q.meta.delimiter=_.delimiter),P(_));return _.preview&&_.header&&xe.preview++,v=se,T=new b(xe),Q=T.parse(v,de,ve),X(),pe?{meta:{paused:!0}}:Q||{meta:{paused:!1}}},this.paused=function(){return pe},this.pause=function(){pe=!0,T.abort(),v=L(_.chunk)?"":v.substring(T.getCharIndex())},this.resume=function(){ne.streamer._halted?(pe=!1,ne.streamer.parseChunk(v,!0)):setTimeout(ne.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,T.abort(),Q.meta.aborted=!0,L(_.complete)&&_.complete(Q),v=""},this.guessLineEndings=function(Oe,xe){Oe=Oe.substring(0,1048576);var xe=new RegExp(y(xe)+"([^]*?)"+y(xe),"gm"),ve=(Oe=Oe.replace(xe,"")).split("\r"),xe=Oe.split(`
`),Oe=1<xe.length&&xe[0].length<ve[0].length;if(ve.length===1||Oe)return`
`;for(var Ve=0,R=0;R<ve.length;R++)ve[R][0]===`
`&&Ve++;return Ve>=ve.length/2?`\r
`:"\r"}}function y(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(_){var v=(_=_||{}).delimiter,T=_.newline,E=_.comments,x=_.step,F=_.preview,k=_.fastMode,Z=null,ue=!1,ne=_.quoteChar==null?'"':_.quoteChar,j=ne;if(_.escapeChar!==void 0&&(j=_.escapeChar),(typeof v!="string"||-1<l.BAD_DELIMITERS.indexOf(v))&&(v=","),E===v)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<l.BAD_DELIMITERS.indexOf(E))&&(E=!1),T!==`
`&&T!=="\r"&&T!==`\r
`&&(T=`
`);var G=0,pe=!1;this.parse=function(q,N,Q){if(typeof q!="string")throw new Error("Input must be a string");var V=q.length,X=v.length,Ae=T.length,te=E.length,se=L(x),de=[],ve=[],xe=[],Oe=G=0;if(!q)return Qe();if(k||k!==!1&&q.indexOf(ne)===-1){for(var Ve=q.split(T),R=0;R<Ve.length;R++){if(xe=Ve[R],G+=xe.length,R!==Ve.length-1)G+=T.length;else if(Q)return Qe();if(!E||xe.substring(0,te)!==E){if(se){if(de=[],Ce(xe.split(v)),Pe(),pe)return Qe()}else Ce(xe.split(v));if(F&&F<=R)return de=de.slice(0,F),Qe(!0)}}return Qe()}for(var $=q.indexOf(v,G),ye=q.indexOf(T,G),re=new RegExp(y(j)+y(ne),"g"),W=q.indexOf(ne,G);;)if(q[G]===ne)for(W=G,G++;;){if((W=q.indexOf(ne,W+1))===-1)return Q||ve.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:de.length,index:G}),be();if(W===V-1)return be(q.substring(G,W).replace(re,ne));if(ne===j&&q[W+1]===j)W++;else if(ne===j||W===0||q[W-1]!==j){$!==-1&&$<W+1&&($=q.indexOf(v,W+1));var ae=_e((ye=ye!==-1&&ye<W+1?q.indexOf(T,W+1):ye)===-1?$:Math.min($,ye));if(q.substr(W+1+ae,X)===v){xe.push(q.substring(G,W).replace(re,ne)),q[G=W+1+ae+X]!==ne&&(W=q.indexOf(ne,G)),$=q.indexOf(v,G),ye=q.indexOf(T,G);break}if(ae=_e(ye),q.substring(W+1+ae,W+1+ae+Ae)===T){if(xe.push(q.substring(G,W).replace(re,ne)),Ie(W+1+ae+Ae),$=q.indexOf(v,G),W=q.indexOf(ne,G),se&&(Pe(),pe))return Qe();if(F&&de.length>=F)return Qe(!0);break}ve.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:de.length,index:G}),W++}}else if(E&&xe.length===0&&q.substring(G,G+te)===E){if(ye===-1)return Qe();G=ye+Ae,ye=q.indexOf(T,G),$=q.indexOf(v,G)}else if($!==-1&&($<ye||ye===-1))xe.push(q.substring(G,$)),G=$+X,$=q.indexOf(v,G);else{if(ye===-1)break;if(xe.push(q.substring(G,ye)),Ie(ye+Ae),se&&(Pe(),pe))return Qe();if(F&&de.length>=F)return Qe(!0)}return be();function Ce(He){de.push(He),Oe=G}function _e(He){var At=0;return At=He!==-1&&(He=q.substring(W+1,He))&&He.trim()===""?He.length:At}function be(He){return Q||(He===void 0&&(He=q.substring(G)),xe.push(He),G=V,Ce(xe),se&&Pe()),Qe()}function Ie(He){G=He,Ce(xe),xe=[],ye=q.indexOf(T,G)}function Qe(He){if(_.header&&!N&&de.length&&!ue){var At=de[0],tt=Object.create(null),lt=new Set(At);let xt=!1;for(let at=0;at<At.length;at++){let ut=At[at];if(tt[ut=L(_.transformHeader)?_.transformHeader(ut,at):ut]){let rt,it=tt[ut];for(;rt=ut+"_"+it,it++,lt.has(rt););lt.add(rt),At[at]=rt,tt[ut]++,xt=!0,(Z=Z===null?{}:Z)[rt]=ut}else tt[ut]=1,At[at]=ut;lt.add(ut)}xt&&console.warn("Duplicate headers found and renamed."),ue=!0}return{data:de,errors:ve,meta:{delimiter:v,linebreak:T,aborted:pe,truncated:!!He,cursor:Oe+(N||0),renamedHeaders:Z}}}function Pe(){x(Qe()),de=[],ve=[]}},this.abort=function(){pe=!0},this.getCharIndex=function(){return G}}function B(_){var v=_.data,T=o[v.workerId],E=!1;if(v.error)T.userError(v.error,v.file);else if(v.results&&v.results.data){var x={abort:function(){E=!0,S(v.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(L(T.userStep)){for(var F=0;F<v.results.data.length&&(T.userStep({data:v.results.data[F],errors:v.results.errors,meta:v.results.meta},x),!E);F++);delete v.results}else L(T.userChunk)&&(T.userChunk(v.results,x,v.file),delete v.results)}v.finished&&!E&&S(v.workerId,v.results)}function S(_,v){var T=o[_];L(T.userComplete)&&T.userComplete(v),T.terminate(),delete o[_]}function C(){throw new Error("Not implemented.")}function P(_){if(typeof _!="object"||_===null)return _;var v,T=Array.isArray(_)?[]:{};for(v in _)T[v]=P(_[v]);return T}function M(_,v){return function(){_.apply(v,arguments)}}function L(_){return typeof _=="function"}return l.parse=function(_,v){var T=(v=v||{}).dynamicTyping||!1;if(L(T)&&(v.dynamicTypingFunction=T,T={}),v.dynamicTyping=T,v.transform=!!L(v.transform)&&v.transform,!v.worker||!l.WORKERS_SUPPORTED)return T=null,l.NODE_STREAM_INPUT,typeof _=="string"?(_=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(_),T=new(v.download?u:d)(v)):_.readable===!0&&L(_.read)&&L(_.on)?T=new p(v):(n.File&&_ instanceof File||_ instanceof Object)&&(T=new h(v)),T.stream(_);(T=(()=>{var E;return!!l.WORKERS_SUPPORTED&&(E=(()=>{var x=n.URL||n.webkitURL||null,F=t.toString();return l.BLOB_URL||(l.BLOB_URL=x.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))})(),(E=new n.Worker(E)).onmessage=B,E.id=A++,o[E.id]=E)})()).userStep=v.step,T.userChunk=v.chunk,T.userComplete=v.complete,T.userError=v.error,v.step=L(v.step),v.chunk=L(v.chunk),v.complete=L(v.complete),v.error=L(v.error),delete v.worker,T.postMessage({input:_,config:v,workerId:T.id})},l.unparse=function(_,v){var T=!1,E=!0,x=",",F=`\r
`,k='"',Z=k+k,ue=!1,ne=null,j=!1,G=((()=>{if(typeof v=="object"){if(typeof v.delimiter!="string"||l.BAD_DELIMITERS.filter(function(N){return v.delimiter.indexOf(N)!==-1}).length||(x=v.delimiter),typeof v.quotes!="boolean"&&typeof v.quotes!="function"&&!Array.isArray(v.quotes)||(T=v.quotes),typeof v.skipEmptyLines!="boolean"&&typeof v.skipEmptyLines!="string"||(ue=v.skipEmptyLines),typeof v.newline=="string"&&(F=v.newline),typeof v.quoteChar=="string"&&(k=v.quoteChar),typeof v.header=="boolean"&&(E=v.header),Array.isArray(v.columns)){if(v.columns.length===0)throw new Error("Option columns is empty");ne=v.columns}v.escapeChar!==void 0&&(Z=v.escapeChar+k),v.escapeFormulae instanceof RegExp?j=v.escapeFormulae:typeof v.escapeFormulae=="boolean"&&v.escapeFormulae&&(j=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(k),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return pe(null,_,ue);if(typeof _[0]=="object")return pe(ne||Object.keys(_[0]),_,ue)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||ne),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),pe(_.fields||[],_.data||[],ue);throw new Error("Unable to serialize unrecognized input");function pe(N,Q,V){var X="",Ae=(typeof N=="string"&&(N=JSON.parse(N)),typeof Q=="string"&&(Q=JSON.parse(Q)),Array.isArray(N)&&0<N.length),te=!Array.isArray(Q[0]);if(Ae&&E){for(var se=0;se<N.length;se++)0<se&&(X+=x),X+=q(N[se],se);0<Q.length&&(X+=F)}for(var de=0;de<Q.length;de++){var ve=(Ae?N:Q[de]).length,xe=!1,Oe=Ae?Object.keys(Q[de]).length===0:Q[de].length===0;if(V&&!Ae&&(xe=V==="greedy"?Q[de].join("").trim()==="":Q[de].length===1&&Q[de][0].length===0),V==="greedy"&&Ae){for(var Ve=[],R=0;R<ve;R++){var $=te?N[R]:R;Ve.push(Q[de][$])}xe=Ve.join("").trim()===""}if(!xe){for(var ye=0;ye<ve;ye++){0<ye&&!Oe&&(X+=x);var re=Ae&&te?N[ye]:ye;X+=q(Q[de][re],ye)}de<Q.length-1&&(!V||0<ve&&!Oe)&&(X+=F)}}return X}function q(N,Q){var V,X;return N==null?"":N.constructor===Date?JSON.stringify(N).slice(1,25):(X=!1,j&&typeof N=="string"&&j.test(N)&&(N="'"+N,X=!0),V=N.toString().replace(G,Z),(X=X||T===!0||typeof T=="function"&&T(N,Q)||Array.isArray(T)&&T[Q]||((Ae,te)=>{for(var se=0;se<te.length;se++)if(-1<Ae.indexOf(te[se]))return!0;return!1})(V,l.BAD_DELIMITERS)||-1<V.indexOf(x)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?k+V+k:V)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!s&&!!n.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=b,l.ParserHandle=f,l.NetworkStreamer=u,l.FileStreamer=h,l.StringStreamer=d,l.ReadableStreamStreamer=p,n.jQuery&&((i=n.jQuery).fn.parse=function(_){var v=_.config||{},T=[];return this.each(function(F){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var k=0;k<this.files.length;k++)T.push({file:this.files[k],inputElem:this,instanceConfig:i.extend({},v)})}),E(),this;function E(){if(T.length===0)L(_.complete)&&_.complete();else{var F,k,Z,ue,ne=T[0];if(L(_.before)){var j=_.before(ne.file,ne.inputElem);if(typeof j=="object"){if(j.action==="abort")return F="AbortError",k=ne.file,Z=ne.inputElem,ue=j.reason,void(L(_.error)&&_.error({name:F},k,Z,ue));if(j.action==="skip")return void x();typeof j.config=="object"&&(ne.instanceConfig=i.extend(ne.instanceConfig,j.config))}else if(j==="skip")return void x()}var G=ne.instanceConfig.complete;ne.instanceConfig.complete=function(pe){L(G)&&G(pe,ne.file,ne.inputElem),x()},l.parse(ne.file,ne.instanceConfig)}}function x(){T.splice(0,1),E()}}),a&&(n.onmessage=function(_){_=_.data,l.WORKER_ID===void 0&&_&&(l.WORKER_ID=_.workerId),typeof _.input=="string"?n.postMessage({workerId:l.WORKER_ID,results:l.parse(_.input,_.config),finished:!0}):(n.File&&_.input instanceof File||_.input instanceof Object)&&(_=l.parse(_.input,_.config))&&n.postMessage({workerId:l.WORKER_ID,results:_,finished:!0})}),(u.prototype=Object.create(c.prototype)).constructor=u,(h.prototype=Object.create(c.prototype)).constructor=h,(d.prototype=Object.create(d.prototype)).constructor=d,(p.prototype=Object.create(c.prototype)).constructor=p,l})})(nb)),nb.exports}var xte=_te();const Bte=gB(xte);class Cte{constructor(){this._state=this._initializeState(),this.state=this._state,console.log("StateManager initialized.")}_initializeState(){return{groups:[],students:[],tasks:[],evaluations:[],admins:[],currentUser:null,currentUserData:null,authLoading:!0,isPublicMode:!0,filters:{membersList:{searchTerm:"",groupFilter:"all",academicFilter:"all"},studentCards:{searchTerm:"",groupFilter:"all",academicFilter:"all"},groupAnalysis:{groupFilter:"all"},graphAnalysis:{groupFilter:"all",startDate:"",endDate:"",studentSearch:""},statistics:{taskFilter:"all",groupFilter:"all",evaluationType:"all",viewMode:"table",showPendingOnly:!1},analysis:{groupFilter:"all",taskFilter:"all",evaluationType:"all",viewMode:"table",showFullOnly:!1,criteriaView:"topic",summaryEvaluationView:"table"},adminManagement:{searchTerm:""}},activePage:"dashboard",isLoading:!1}}getState(){return this.state}get(e){if(e in this.state)return this.state[e];console.warn(`Attempted to get unknown state key: ${e}`)}set(e,t){e in this.state?this.state[e]=t:console.warn(`Attempted to set unknown state key: ${e}`)}update(e){if(typeof e!="object"||e===null){console.warn("StateManager update called with invalid argument:",e);return}for(const t in e)e.hasOwnProperty(t)&&t in this.state?this.set(t,e[t]):e.hasOwnProperty(t)&&console.warn(`Attempted to update unknown state key during bulk update: ${t}`)}getFilters(){return this.state.filters}getFilterSection(e){if(e in this.state.filters)return this.state.filters[e];console.warn(`Attempted to get unknown filter section: ${e}`)}updateFilters(e,t){if(!(e in this.state.filters))return console.warn(`Attempted to update filters for unknown section: ${e}`),!1;if(typeof t!="object"||t===null)return console.warn(`Invalid filterUpdates provided for section ${e}:`,t),!1;const n=this.state.filters[e];let i=!1;for(const s in t)t.hasOwnProperty(s)&&s in n?n[s]!==t[s]&&(n[s]=t[s],i=!0):t.hasOwnProperty(s)&&console.warn(`Attempted to update unknown filter key "${s}" in section "${e}"`);return i}resetAllFilters(){const e=this._initializeState().filters;this.set("filters",JSON.parse(JSON.stringify(e))),console.log("All filters reset.")}resetFiltersForSection(e){if(!(e in this.state.filters)){console.warn(`Attempted to reset filters for unknown section: ${e}`);return}const t=this._initializeState().filters[e];this.state.filters[e]=JSON.parse(JSON.stringify(t)),console.log(`Filters reset for section: ${e}`)}setUser(e,t){this.update({currentUser:e,currentUserData:t,isPublicMode:!e,authLoading:!1})}setAuthLoading(e){this.set("authLoading",e)}setLoading(e){this.set("isLoading",e)}}const ji=new Cte;function Ete(r){return typeof r!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.trim())}function Ste(r){let e;return t=>{if(typeof t!="function"){console.warn("Debouncer called without a valid callback.");return}clearTimeout(e),e=setTimeout(t,r)}}function Ite(r){return typeof r!="string"?String(r||""):r.replace(/^\uFEFF/,"").normalize("NFC").trim()}function G2(r){const e=String(r??"");if(!e)return"";const t=["","","","","","","","","",""];return e.replace(/\d/g,n=>t[parseInt(n,10)]??n)}function kte(r){return typeof r!="number"||!Number.isInteger(r)||r<1?G2(r):{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""}[r]||`${G2(r)}`}function Tte(r){if(!Number.isFinite(r)||r<0||r===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB","TB","PB"],n=Math.floor(Math.log(r)/Math.log(e)),i=Math.min(n,t.length-1);return`${parseFloat((r/Math.pow(e,i)).toFixed(2))} ${t[i]}`}function Fte(r,e){if(typeof r!="string")return"";if(r.length<=e)return r;const t=Math.max(e-3,0);return r.substring(0,t)+"..."}function Lte(r){return typeof r!="number"||isNaN(r)?" ":r>=90?" ":r>=80?"  ":r>=70?" ":r>=60?" ":r>=50?" ":r>=40?" ":" "}function Pte(r){return typeof r!="number"||isNaN(r)?"text-gray-500 dark:text-gray-400":r>=80?"text-green-600 dark:text-green-400":r>=60?"text-blue-600 dark:text-blue-400":r>=40?"text-orange-500 dark:text-orange-400":"text-red-600 dark:text-red-400"}function Nte(r){return typeof r!="number"||isNaN(r)?"bg-gray-400 dark:bg-gray-600":r>=80?"bg-green-500":r>=60?"bg-blue-500":r>=40?"bg-orange-500":"bg-red-500"}function Dte(r){if(!r)return"N/A";let e;try{if(r instanceof Date)e=r;else if(r&&typeof r.seconds=="number")e=new Date(r.seconds*1e3);else if(typeof r=="string"){if(e=new Date(r),isNaN(e.getTime()))return console.warn(`formatTimestamp: Invalid date string received: ${r}`)," "}else return console.warn(`formatTimestamp: Invalid input type: ${typeof r}`)," ";return isNaN(e.getTime())?(console.warn("formatTimestamp: Resulting date is invalid.")," "):new Intl.DateTimeFormat("bn-BD",{day:"numeric",month:"long",year:"numeric"}).format(e)}catch(t){return console.error("Error formatting date:",r,t)," "}}function tD(r,e,t,n=!1){r instanceof Element&&typeof t=="function"?r.addEventListener(e,t,n):r&&typeof t!="function"&&console.warn(`addListener: Invalid handler provided for element and event "${e}".`,r)}const Rte=Object.freeze(Object.defineProperty({__proto__:null,addListener:tD,convertToBanglaNumber:G2,convertToBanglaRank:kte,createDebouncer:Ste,ensureBengaliText:Ite,formatFileSize:Tte,formatTimestamp:Dte,getPerformanceBgClass:Nte,getPerformanceColorClass:Pte,getStudentPerformanceLevel:Lte,truncateText:Fte,validateEmail:Ete},Symbol.toStringTag,{value:"Module"}));class Ute{constructor(){this.elements=this._cacheDOMElements(),this.onConfirmDelete=null,this.onSaveEdit=null,this.onSaveAdmin=null,this.toastTimeout=null,this._initTheme(),this._setupEventListeners(),console.log(" UIManager initialized.")}_cacheDOMElements(){const e={},t=["loadingOverlay","loadingMessage","toast","toastMessage","mobileMenuOverlay","mobileMenuButton","themeToggle","headerLoginBtn","logoutBtn","userInfo","sidebar","appContainer","authModal","closeAuthModal","loginForm","registerForm","showRegister","showLogin","loginEmail","loginPassword","loginBtn","registerEmail","registerPassword","adminType","registerBtn","googleSignInBtn","logoutModal","cancelLogout","confirmLogout","deleteModal","deleteModalTitle","deleteModalText","cancelDelete","confirmDelete","editModal","editModalTitle","editModalContent","cancelEdit","saveEdit","profileModal","openProfileModal","closeProfileModal","adminModal","adminModalTitle","adminModalContent","cancelAdmin","saveAdmin","adminEmail","adminPassword","adminTypeSelect","permissionsSection","permissionRead","permissionWrite","permissionEdit","permissionDelete"];e.pages=document.querySelectorAll(".page"),e.navButtons=document.querySelectorAll(".nav-btn"),e.privateTabs=document.querySelectorAll(".private-tab"),e.privateTabDividers=document.querySelectorAll(".private-tab-divider"),e.privateTabContent=document.querySelectorAll(".private-tab-content");for(const n of t)e[n]=document.getElementById(n),!e[n]&&["appContainer","loadingOverlay","toast","sidebar","authModal","deleteModal","editModal","adminModal","profileModal","logoutModal"].includes(n)&&console.error(` UIManager: Essential element with ID "${n}" not found!`);return e}addListener(e,t,n,i=!1){tD(e,t,n,i)}_setupEventListeners(){console.log(" Setting up UIManager internal event listeners..."),this.addListener(this.elements.themeToggle,"click",()=>this._toggleTheme()),this.addListener(this.elements.mobileMenuButton,"click",()=>this._toggleMobileMenu()),this.addListener(this.elements.mobileMenuOverlay,"click",()=>this._toggleMobileMenu(!1)),this.addListener(this.elements.openProfileModal,"click",()=>this.showModal(this.elements.profileModal)),this.addListener(this.elements.closeProfileModal,"click",()=>this.hideModal(this.elements.profileModal)),this.addListener(this.elements.profileModal,"click",e=>{e.target===this.elements.profileModal&&this.hideModal(this.elements.profileModal)}),this.addListener(this.elements.headerLoginBtn,"click",()=>{this._toggleAuthForm(!1),this.showModal(this.elements.authModal)}),this.addListener(this.elements.closeAuthModal,"click",()=>this.hideModal(this.elements.authModal)),this.addListener(this.elements.showRegister,"click",()=>this._toggleAuthForm(!0)),this.addListener(this.elements.showLogin,"click",()=>this._toggleAuthForm(!1)),this.addListener(this.elements.authModal,"click",e=>{e.target===this.elements.authModal&&this.hideModal(this.elements.authModal)}),this.addListener(this.elements.logoutBtn,"click",()=>this.showModal(this.elements.logoutModal)),this.addListener(this.elements.cancelLogout,"click",()=>this.hideModal(this.elements.logoutModal)),this.addListener(this.elements.cancelDelete,"click",()=>this.hideModal(this.elements.deleteModal)),this.addListener(this.elements.confirmDelete,"click",()=>{typeof this.onConfirmDelete=="function"&&this.onConfirmDelete(),this.hideModal(this.elements.deleteModal)}),this.addListener(this.elements.cancelEdit,"click",()=>this.hideModal(this.elements.editModal)),this.addListener(this.elements.saveEdit,"click",()=>{typeof this.onSaveEdit=="function"&&this.onSaveEdit()}),this.addListener(this.elements.cancelAdmin,"click",()=>this.hideModal(this.elements.adminModal)),this.addListener(this.elements.saveAdmin,"click",()=>{typeof this.onSaveAdmin=="function"&&this.onSaveAdmin()}),this.addListener(this.elements.adminTypeSelect,"change",e=>this._togglePermissionsSection(e.target.value)),console.log(" UIManager internal event listeners attached.")}_initTheme(){const e=localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches;this._applyTheme(e)}_toggleTheme(){const e=document.documentElement.classList.contains("dark");this._applyTheme(!e)}_applyTheme(e){document.documentElement.classList.toggle("dark",e),localStorage.theme=e?"dark":"light",this._updateThemeIcon(e)}_updateThemeIcon(e){var n;const t=(n=this.elements.themeToggle)==null?void 0:n.querySelector("i");t&&(t.className=`fas ${e?"fa-sun":"fa-moon"} text-base sm:text-lg`,this.elements.themeToggle.setAttribute("aria-label",e?"Switch to light theme":"Switch to dark theme"))}_toggleMobileMenu(e){var o;const t=this.elements.sidebar,n=this.elements.mobileMenuOverlay,i=(o=this.elements.mobileMenuButton)==null?void 0:o.querySelector("i");if(!t||!n)return;let s;const a=t.classList.contains("-translate-x-full");e===void 0?s=a:s=e,t.classList.toggle("-translate-x-full",!s),n.classList.toggle("hidden",!s),i&&(i.className=`fas ${s?"fa-times":"fa-bars"} text-xl sm:text-2xl`),this.elements.mobileMenuButton&&this.elements.mobileMenuButton.setAttribute("aria-expanded",String(s))}showPage(e){(!e||typeof e!="string")&&(console.warn(`showPage: Invalid pageId "${e}". Defaulting to dashboard.`),e="dashboard");const t=document.getElementById(`page-${e}`);if(!t){console.error(`showPage: Page element #page-${e} not found! Showing dashboard.`),e!=="dashboard"&&this.showPage("dashboard");return}this.elements.pages.forEach(n=>{n!==t&&n.classList.add("hidden")}),t.classList.remove("hidden"),ji.set("activePage",e),this._updateActiveNav(e),window.innerWidth<1024&&this._toggleMobileMenu(!1),window.scrollTo({top:0,behavior:"smooth"})}_updateActiveNav(e){var n;const t="active-nav-btn";(n=this.elements.navButtons)==null||n.forEach(i=>{const s=i.dataset.page===e;i.classList.toggle(t,s),i.setAttribute("aria-current",s?"page":"false")})}showLoading(e=" ..."){this.elements.loadingOverlay?(this.elements.loadingMessage&&(this.elements.loadingMessage.textContent=e),this.elements.loadingOverlay.classList.remove("hidden","opacity-0"),ji.setLoading(!0)):console.warn("showLoading: loadingOverlay element not found.")}hideLoading(){this.elements.loadingOverlay&&(this.elements.loadingOverlay.classList.add("opacity-0"),setTimeout(()=>{this.elements.loadingOverlay.classList.contains("opacity-0")&&this.elements.loadingOverlay.classList.add("hidden")},300),ji.setLoading(!1))}showToast(e,t="info",n=3500){if(!this.elements.toast||!this.elements.toastMessage){console.warn("showToast: Toast elements not found.");return}clearTimeout(this.toastTimeout),this.elements.toastMessage.textContent=e,this.elements.toast.className=`toast toast-${t}`,this.elements.toast.classList.remove("hidden"),this.elements.toast.offsetWidth,this.elements.toast.classList.add("toast-show"),this.toastTimeout=setTimeout(()=>{var i;(i=this.elements.toast)==null||i.classList.remove("toast-show"),setTimeout(()=>{var s;(s=this.elements.toast)==null||s.classList.add("hidden")},500)},n)}showModal(e){e instanceof Element?(e.classList.remove("hidden"),document.body.style.overflow="hidden"):console.warn("showModal: Invalid or missing modal element.")}hideModal(e){if(e instanceof Element){e.classList.add("hidden"),document.body.style.overflow="";const t=e.id;t==="deleteModal"?this.onConfirmDelete=null:t==="editModal"?(this.onSaveEdit=null,this.elements.editModalContent&&(this.elements.editModalContent.innerHTML="")):t==="adminModal"&&(this.onSaveAdmin=null)}else console.warn("hideModal: Invalid or missing modal element.")}showDeleteModal(e="",t="  ?",n){this.elements.deleteModal?(this.elements.deleteModalTitle&&(this.elements.deleteModalTitle.textContent=e),this.elements.deleteModalText&&(this.elements.deleteModalText.textContent=t),this.onConfirmDelete=n,this.showModal(this.elements.deleteModal)):console.error("showDeleteModal: deleteModal element not found.")}showEditModal(e,t,n){this.elements.editModal?(this.elements.editModalTitle&&(this.elements.editModalTitle.textContent=e),this.elements.editModalContent?this.elements.editModalContent.innerHTML=t:console.warn("showEditModal: editModalContent element not found."),this.onSaveEdit=n,this.showModal(this.elements.editModal)):console.error("showEditModal: editModal element not found.")}showAdminModal(e,t=null,n){if(this.elements.adminModal){this.elements.adminModalTitle&&(this.elements.adminModalTitle.textContent=e);const i=this.elements.adminEmail,s=this.elements.adminPassword,a=this.elements.adminTypeSelect;i&&(i.value=(t==null?void 0:t.email)||"",i.disabled=!!t),s&&(s.value="",s.placeholder=t?"  ()":"*"),a&&(a.value=(t==null?void 0:t.type)||"user");const o=(t==null?void 0:t.permissions)||{read:!0,write:!1,edit:!1,delete:!1};this.elements.permissionRead&&(this.elements.permissionRead.checked=o.read),this.elements.permissionWrite&&(this.elements.permissionWrite.checked=o.write),this.elements.permissionEdit&&(this.elements.permissionEdit.checked=o.edit),this.elements.permissionDelete&&(this.elements.permissionDelete.checked=o.delete),this._togglePermissionsSection((a==null?void 0:a.value)||"user"),this.onSaveAdmin=n,this.showModal(this.elements.adminModal)}else console.error("showAdminModal: adminModal element not found.")}_toggleAuthForm(e){var t;if(this.elements.loginForm&&this.elements.registerForm&&this.elements.showRegister&&this.elements.showLogin){this.elements.loginForm.classList.toggle("hidden",e),this.elements.registerForm.classList.toggle("hidden",!e),this.elements.showRegister.classList.toggle("hidden",e),this.elements.showLogin.classList.toggle("hidden",!e);const n=(t=this.elements.authModal)==null?void 0:t.querySelector("h3");n&&(n.textContent=e?"   ":"  ")}}_togglePermissionsSection(e){var n;const t=e==="admin";(n=this.elements.permissionsSection)==null||n.classList.toggle("hidden",!t)}updateUserInfo(e){var n,i,s;const t=!!e;if((n=this.elements.headerLoginBtn)==null||n.classList.toggle("hidden",t),(i=this.elements.logoutBtn)==null||i.classList.toggle("hidden",!t),(s=this.elements.userInfo)==null||s.classList.toggle("hidden",!t),t&&this.elements.userInfo){const a={"super-admin":" ",admin:"",user:""},o=this.elements.userInfo.querySelector("div");o&&(o.textContent=a[e==null?void 0:e.type]||"")}else if(this.elements.userInfo){const a=this.elements.userInfo.querySelector("div");a&&(a.textContent="")}}enableNavigation(e,t){const n=t==="admin"||t==="super-admin",i=t==="super-admin",s="disabled-nav";document.querySelectorAll(".private-tab").forEach(A=>{const l=A.dataset.page;let c=!1;e&&(l==="admin-management"?c=i:c=n),A.disabled=!c,A.classList.toggle(s,!c)}),document.querySelectorAll(".private-tab-divider").forEach(A=>{A.classList.toggle("hidden",!n&&!i)})}populateSelect(e,t,n="",i=""){if(!(e instanceof HTMLSelectElement)){console.warn("populateSelect: Provided element is not a select.");return}const s=e.value;e.innerHTML="";const a=document.createElement("option");a.value=n.includes("")||n.includes("All")?"all":"",a.textContent=n,n.includes(" ")&&(a.disabled=!0,a.selected=!i&&!s),e.appendChild(a),t==null||t.forEach(l=>{if(l&&typeof l.value<"u"&&typeof l.text<"u"){const c=document.createElement("option");c.value=l.value,c.textContent=l.text,e.appendChild(c)}});const o=["","all",...t.map(l=>l.value)],A=i&&o.includes(i)?i:s&&o.includes(s)?s:a.value;e.value=A}displayEmptyMessage(e,t="   "){if(!(e instanceof Element)){console.warn("displayEmptyMessage: Provided container is not valid.");return}e.innerHTML=`<div class="placeholder-content p-6 text-center text-gray-500 dark:text-gray-400">
            <i class="fas fa-info-circle text-3xl mb-3 text-gray-400"></i><p>${t}</p>
        </div>`}clearContainer(e){e instanceof Element?e.innerHTML="":e&&console.warn("clearContainer: Provided container is not valid.",e)}}const sn=new Ute;class Mte{constructor(e="smart_evaluator_",t=5){if(typeof e!="string")throw new Error("CacheManager prefix must be a string.");if(typeof t!="number"||t<=0)throw new Error("CacheManager default duration must be a positive number.");this.PREFIX=e,this.DEFAULT_CACHE_DURATION_MS=t*60*1e3,this.forceRefresh=!1,console.log(`CacheManager initialized with prefix "${this.PREFIX}" and default duration ${t} minutes.`)}set(e,t,n=null){if(!e||typeof e!="string"){console.warn("Cache set failed: Invalid key.",{key:e});return}if(t===void 0){console.warn(`Cache set skipped for key "${e}": Data is undefined.`);return}const i=n!==null&&n>0?n*60*1e3:this.DEFAULT_CACHE_DURATION_MS,s={data:t,timestamp:Date.now(),expires:Date.now()+i};try{const a=JSON.stringify(s);localStorage.setItem(this.PREFIX+e,a)}catch(a){if(console.error(`Error setting cache for key "${e}":`,a),a.name==="QuotaExceededError"||a.message&&a.message.toLowerCase().includes("quota")){console.warn("LocalStorage quota exceeded. Attempting to clear oldest items..."),this.clearOldest();try{localStorage.setItem(this.PREFIX+e,JSON.stringify(s)),console.log(`Cache set for key: ${e} after clearing space.`)}catch(o){console.error(`Failed to set cache for key "${e}" even after clearing space:`,o)}}}}get(e){if(!e||typeof e!="string")return console.warn("Cache get failed: Invalid key."),null;const t=this.PREFIX+e,n=localStorage.getItem(t);if(!n)return null;if(this.forceRefresh)return console.log(`Cache force refresh triggered for key: ${e}.`),this.forceRefresh=!1,this.clear(e),null;try{const i=JSON.parse(n);return typeof i!="object"||i===null||!i.hasOwnProperty("data")||!i.hasOwnProperty("expires")||typeof i.expires!="number"?(console.warn(`Invalid cache structure for key: ${e}. Clearing item.`),localStorage.removeItem(t),null):Date.now()>i.expires?(localStorage.removeItem(t),null):i.data}catch(i){return console.error(`Error parsing cache for key "${e}". Clearing item.`,i),localStorage.removeItem(t),null}}clear(e){if(!(!e||typeof e!="string"))try{localStorage.removeItem(this.PREFIX+e)}catch(t){console.error(`Error clearing cache for key "${e}":`,t)}}clearAll(){let e=0;try{Object.keys(localStorage).filter(n=>n.startsWith(this.PREFIX)).forEach(n=>{localStorage.removeItem(n),e++}),e>0&&console.log(`Cleared ${e} cache items.`)}catch(t){console.error("Error clearing all cache items:",t)}}clearOldest(e=50,t=10){if(!(e<=0||t<=0))try{const n=Object.keys(localStorage).filter(i=>i.startsWith(this.PREFIX));if(n.length>e){console.log(`Cache limit exceeded. Clearing ${t} oldest items.`);const i=n.map(s=>{try{const a=localStorage.getItem(s),o=a?JSON.parse(a):null;return{key:s,timestamp:(o==null?void 0:o.timestamp)||0}}catch{return{key:s,timestamp:0}}});i.sort((s,a)=>s.timestamp-a.timestamp),i.slice(0,t).forEach(s=>{localStorage.removeItem(s.key)})}}catch(n){console.error("Error clearing oldest cache items:",n)}}setForceRefresh(){this.forceRefresh=!0,console.log("Cache force refresh enabled for the next get() call.")}}const Ks=new Mte,Ote=()=>{};var FT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Qte=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],o=r[t++],A=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(A>>10)),e[n++]=String.fromCharCode(56320+(A&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},nD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,A=i+2<r.length,l=A?r[i+2]:0,c=s>>2,u=(s&3)<<4|o>>4;let h=(o&15)<<2|l>>6,d=l&63;A||(d=64,a||(h=64)),n.push(t[c],t[u],t[h],t[d])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(rD(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Qte(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],o=i<r.length?t[r.charAt(i)]:0;++i;const l=i<r.length?t[r.charAt(i)]:64;++i;const u=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||o==null||l==null||u==null)throw new Hte;const h=s<<2|o>>4;if(n.push(h),l!==64){const d=o<<4&240|l>>2;if(n.push(d),u!==64){const p=l<<6&192|u;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Hte extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vte=function(r){const e=rD(r);return nD.encodeByteArray(e,!0)},Xb=function(r){return Vte(r).replace(/\./g,"")},FB=function(r){try{return nD.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jb(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!$te(t)||(r[t]=Jb(r[t],e[t]));return r}function $te(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jte=()=>LB().__FIREBASE_DEFAULTS__,Gte=()=>{if(typeof process>"u"||typeof FT>"u")return;const r=FT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Kte=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&FB(r[1]);return e&&JSON.parse(e)},PB=()=>{try{return Ote()||jte()||Gte()||Kte()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},NB=()=>{var r;return(r=PB())==null?void 0:r.config},zte=r=>{var e;return(e=PB())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qte{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iD(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wte(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Xb(JSON.stringify(t)),Xb(JSON.stringify(a)),""].join(".")}const yp={};function Yte(){const r={prod:[],emulator:[]};for(const e of Object.keys(yp))yp[e]?r.emulator.push(e):r.prod.push(e);return r}function Xte(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let LT=!1;function sD(r,e){if(typeof window>"u"||typeof document>"u"||!Ff(window.location.host)||yp[r]===e||yp[r]||LT)return;yp[r]=e;function t(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=Yte().prod.length>0;function a(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function A(h,d){h.setAttribute("width","24"),h.setAttribute("id",d),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{LT=!0,a()},h}function c(h,d){h.setAttribute("id",d),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function u(){const h=Xte(n),d=t("text"),p=document.getElementById(d)||document.createElement("span"),f=t("learnmore"),y=document.getElementById(f)||document.createElement("a"),b=t("preprendIcon"),B=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const S=h.element;o(S),c(y,f);const C=l();A(B,b),S.append(B,p,y,C),document.body.appendChild(S)}s?(p.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",d)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",u):u()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jte(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function qw(){var e;const r=(e=PB())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zte(){return typeof window<"u"||aD()}function aD(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ere(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oD(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function DB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AD(){const r=Un();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function lD(){return!qw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cD(){return!qw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function qp(){try{return typeof indexedDB=="object"}catch{return!1}}function tre(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rre="FirebaseError";class js extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=rre,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Md.prototype.create)}}class Md{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?nre(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new js(i,o,n)}}function nre(r,e){return r.replace(ire,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const ire=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function sre(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Hc(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(NT(s)&&NT(a)){if(!Hc(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function NT(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function kh(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function $g(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function uD(r,e){const t=new are(r,e);return t.subscribe.bind(t)}class are{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");ore(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=h_),i.error===void 0&&(i.error=h_),i.complete===void 0&&(i.complete=h_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ore(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function h_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(r){return r&&r._delegate?r._delegate:r}class SA{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Are{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new qte;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cre(e))try{this.getOrInitializeService({instanceIdentifier:Lu})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Lu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lu){return this.instances.has(e)}getOptions(e=Lu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:lre(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Lu){return this.component?this.component.multipleInstances?e:Lu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lre(r){return r===Lu?void 0:r}function cre(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Are(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=[];var dr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(dr||(dr={}));const hD={debug:dr.DEBUG,verbose:dr.VERBOSE,info:dr.INFO,warn:dr.WARN,error:dr.ERROR,silent:dr.SILENT},ure=dr.INFO,dre={[dr.DEBUG]:"log",[dr.VERBOSE]:"log",[dr.INFO]:"info",[dr.WARN]:"warn",[dr.ERROR]:"error"},hre=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=dre[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ww{constructor(e){this.name=e,this._logLevel=ure,this._logHandler=hre,this._userLogHandler=null,RB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dr.DEBUG,...e),this._logHandler(this,dr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dr.VERBOSE,...e),this._logHandler(this,dr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dr.INFO,...e),this._logHandler(this,dr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dr.WARN,...e),this._logHandler(this,dr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dr.ERROR,...e),this._logHandler(this,dr.ERROR,...e)}}function fre(r){RB.forEach(e=>{e.setLogLevel(r)})}function gre(r,e){for(const t of RB){let n=null;e&&e.level&&(n=hD[e.level]),r===null?t.userLogHandler=null:t.userLogHandler=(i,s,...a)=>{const o=a.map(A=>{if(A==null)return null;if(typeof A=="string")return A;if(typeof A=="number"||typeof A=="boolean")return A.toString();if(A instanceof Error)return A.message;try{return JSON.stringify(A)}catch{return null}}).filter(A=>A).join(" ");s>=(n??i.logLevel)&&r({level:dr[s].toLowerCase(),message:o,args:a,type:i.name})}}}const pre=(r,e)=>e.some(t=>r instanceof t);let DT,RT;function mre(){return DT||(DT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yre(){return RT||(RT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fD=new WeakMap,K2=new WeakMap,gD=new WeakMap,f_=new WeakMap,UB=new WeakMap;function bre(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(Ic(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&fD.set(t,r)}).catch(()=>{}),UB.set(e,r),e}function wre(r){if(K2.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});K2.set(r,e)}let z2={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return K2.get(r);if(e==="objectStoreNames")return r.objectStoreNames||gD.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ic(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vre(r){z2=r(z2)}function _re(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(g_(this),e,...t);return gD.set(n,e.sort?e.sort():[e]),Ic(n)}:yre().includes(r)?function(...e){return r.apply(g_(this),e),Ic(fD.get(this))}:function(...e){return Ic(r.apply(g_(this),e))}}function xre(r){return typeof r=="function"?_re(r):(r instanceof IDBTransaction&&wre(r),pre(r,mre())?new Proxy(r,z2):r)}function Ic(r){if(r instanceof IDBRequest)return bre(r);if(f_.has(r))return f_.get(r);const e=xre(r);return e!==r&&(f_.set(r,e),UB.set(e,r)),e}const g_=r=>UB.get(r);function Bre(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),o=Ic(a);return n&&a.addEventListener("upgradeneeded",A=>{n(Ic(a.result),A.oldVersion,A.newVersion,Ic(a.transaction),A)}),t&&a.addEventListener("blocked",A=>t(A.oldVersion,A.newVersion,A)),o.then(A=>{s&&A.addEventListener("close",()=>s()),i&&A.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const Cre=["get","getKey","getAll","getAllKeys","count"],Ere=["put","add","delete","clear"],p_=new Map;function UT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(p_.get(e))return p_.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=Ere.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Cre.includes(t)))return;const s=async function(a,...o){const A=this.transaction(a,i?"readwrite":"readonly");let l=A.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[t](...o),i&&A.done]))[0]};return p_.set(e,s),s}vre(r=>({...r,get:(e,t,n)=>UT(e,t)||r.get(e,t,n),has:(e,t)=>!!UT(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ire(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function Ire(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zb="@firebase/app",q2="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new Ww("@firebase/app"),kre="@firebase/app-compat",Tre="@firebase/analytics-compat",Fre="@firebase/analytics",Lre="@firebase/app-check-compat",Pre="@firebase/app-check",Nre="@firebase/auth",Dre="@firebase/auth-compat",Rre="@firebase/database",Ure="@firebase/data-connect",Mre="@firebase/database-compat",Ore="@firebase/functions",Qre="@firebase/functions-compat",Hre="@firebase/installations",Vre="@firebase/installations-compat",$re="@firebase/messaging",jre="@firebase/messaging-compat",Gre="@firebase/performance",Kre="@firebase/performance-compat",zre="@firebase/remote-config",qre="@firebase/remote-config-compat",Wre="@firebase/storage",Yre="@firebase/storage-compat",Xre="@firebase/firestore",Jre="@firebase/ai",Zre="@firebase/firestore-compat",ene="firebase",tne="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc="[DEFAULT]",rne={[Zb]:"fire-core",[kre]:"fire-core-compat",[Fre]:"fire-analytics",[Tre]:"fire-analytics-compat",[Pre]:"fire-app-check",[Lre]:"fire-app-check-compat",[Nre]:"fire-auth",[Dre]:"fire-auth-compat",[Rre]:"fire-rtdb",[Ure]:"fire-data-connect",[Mre]:"fire-rtdb-compat",[Ore]:"fire-fn",[Qre]:"fire-fn-compat",[Hre]:"fire-iid",[Vre]:"fire-iid-compat",[$re]:"fire-fcm",[jre]:"fire-fcm-compat",[Gre]:"fire-perf",[Kre]:"fire-perf-compat",[zre]:"fire-rc",[qre]:"fire-rc-compat",[Wre]:"fire-gcs",[Yre]:"fire-gcs-compat",[Xre]:"fire-fst",[Zre]:"fire-fst-compat",[Jre]:"fire-vertex","fire-js":"fire-js",[ene]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new Map,ef=new Map,tf=new Map;function Wp(r,e){try{r.container.addComponent(e)}catch(t){bl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function pD(r,e){r.container.addOrOverwriteComponent(e)}function jc(r){const e=r.name;if(tf.has(e))return bl.debug(`There were multiple attempts to register component ${e}.`),!1;tf.set(e,r);for(const t of $c.values())Wp(t,r);for(const t of ef.values())Wp(t,r);return!0}function mD(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function nne(r,e,t=Vc){mD(r,e).clearInstance(t)}function MB(r){return r.options!==void 0}function yD(r){return MB(r)?!1:"authIdToken"in r||"appCheckToken"in r||"releaseOnDeref"in r||"automaticDataCollectionEnabled"in r}function Tn(r){return r==null?!1:r.settings!==void 0}function ine(){tf.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sne={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ga=new Md("app","Firebase",sne);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bD=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new SA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ga.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(r,e){const t=FB(r.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class ane extends bD{constructor(e,t,n,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,a={name:n,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,i);else{const o=e;super(o.options,a,i)}this._serverConfig={automaticDataCollectionEnabled:s,...t},this._serverConfig.authIdToken&&MT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&MT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,To(Zb,q2,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){QB(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ga.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=tne;function OB(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Vc,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Ga.create("bad-app-name",{appName:String(i)});if(t||(t=NB()),!t)throw Ga.create("no-options");const s=$c.get(i);if(s){if(Hc(t,s.options)&&Hc(n,s.config))return s;throw Ga.create("duplicate-app",{appName:i})}const a=new dD(i);for(const A of tf.values())a.addComponent(A);const o=new bD(t,n,a);return $c.set(i,o),o}function one(r,e={}){if(Zte()&&!aD())throw Ga.create("invalid-server-app-environment");let t,n=e||{};if(r&&(MB(r)?t=r.options:yD(r)?n=r:t=r),n.automaticDataCollectionEnabled===void 0&&(n.automaticDataCollectionEnabled=!0),t||(t=NB()),!t)throw Ga.create("no-options");const i={...n,...t};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const s=c=>[...c].reduce((u,h)=>Math.imul(31,u)+h.charCodeAt(0)|0,0);if(n.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ga.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(i)),o=ef.get(a);if(o)return o.incRefCount(n.releaseOnDeref),o;const A=new dD(a);for(const c of tf.values())A.addComponent(c);const l=new ane(t,n,a,A);return ef.set(a,l),l}function Ane(r=Vc){const e=$c.get(r);if(!e&&r===Vc&&NB())return OB();if(!e)throw Ga.create("no-app",{appName:r});return e}function lne(){return Array.from($c.values())}async function QB(r){let e=!1;const t=r.name;$c.has(t)?(e=!0,$c.delete(t)):ef.has(t)&&r.decRefCount()<=0&&(ef.delete(t),e=!0),e&&(await Promise.all(r.container.getProviders().map(n=>n.delete())),r.isDeleted=!0)}function To(r,e,t){let n=rne[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bl.warn(a.join(" "));return}jc(new SA(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}function wD(r,e){if(r!==null&&typeof r!="function")throw Ga.create("invalid-log-argument");gre(r,e)}function vD(r){fre(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cne="firebase-heartbeat-database",une=1,Yp="firebase-heartbeat-store";let m_=null;function _D(){return m_||(m_=Bre(cne,une,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Yp)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ga.create("idb-open",{originalErrorMessage:r.message})})),m_}async function dne(r){try{const t=(await _D()).transaction(Yp),n=await t.objectStore(Yp).get(xD(r));return await t.done,n}catch(e){if(e instanceof js)bl.warn(e.message);else{const t=Ga.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bl.warn(t.message)}}}async function OT(r,e){try{const n=(await _D()).transaction(Yp,"readwrite");await n.objectStore(Yp).put(e,xD(r)),await n.done}catch(t){if(t instanceof js)bl.warn(t.message);else{const n=Ga.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});bl.warn(n.message)}}}function xD(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hne=1024,fne=30;class gne{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mne(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=QT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>fne){const a=yne(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){bl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=QT(),{heartbeatsToSend:n,unsentEntries:i}=pne(this._heartbeatsCache.heartbeats),s=Xb(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return bl.warn(t),""}}}function QT(){return new Date().toISOString().substring(0,10)}function pne(r,e=hne){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),HT(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),HT(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class mne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qp()?tre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dne(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return OT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return OT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function HT(r){return Xb(JSON.stringify({version:2,heartbeats:r})).length}function yne(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bne(r){jc(new SA("platform-logger",e=>new Sre(e),"PRIVATE")),jc(new SA("heartbeat",e=>new gne(e),"PRIVATE")),To(Zb,q2,r),To(Zb,q2,"esm2020"),To("fire-js","")}bne("");const wne=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:js,SDK_VERSION:nu,_DEFAULT_ENTRY_NAME:Vc,_addComponent:Wp,_addOrOverwriteComponent:pD,_apps:$c,_clearComponents:ine,_components:tf,_getProvider:mD,_isFirebaseApp:MB,_isFirebaseServerApp:Tn,_isFirebaseServerAppSettings:yD,_registerComponent:jc,_removeServiceInstance:nne,_serverApps:ef,deleteApp:QB,getApp:Ane,getApps:lne,initializeApp:OB,initializeServerApp:one,onLog:wD,registerVersion:To,setLogLevel:vD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vne{constructor(e,t){this._delegate=e,this.firebase=t,Wp(e,new SA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),QB(this._delegate)))}_getService(e,t=Vc){var i;this._delegate.checkDestroyed();const n=this._delegate.container.getProvider(e);return!n.isInitialized()&&((i=n.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&n.initialize(),n.getImmediate({identifier:t})}_removeServiceInstance(e,t=Vc){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Wp(this._delegate,e)}_addOrOverwriteComponent(e){pD(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ne={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},VT=new Md("app-compat","Firebase",_ne);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xne(r){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:To,setLogLevel:vD,onLog:wD,apps:null,SDK_VERSION:nu,INTERNAL:{registerComponent:o,removeApp:n,useAsService:A,modularAPIs:wne}};t.default=t,Object.defineProperty(t,"apps",{get:a});function n(l){delete e[l]}function i(l){if(l=l||Vc,!PT(e,l))throw VT.create("no-app",{appName:l});return e[l]}i.App=r;function s(l,c={}){const u=OB(l,c);if(PT(e,u.name))return e[u.name];const h=new r(u,t);return e[u.name]=h,h}function a(){return Object.keys(e).map(l=>e[l])}function o(l){const c=l.name,u=c.replace("-compat","");if(jc(l)&&l.type==="PUBLIC"){const h=(d=i())=>{if(typeof d[u]!="function")throw VT.create("invalid-app-argument",{appName:c});return d[u]()};l.serviceProps!==void 0&&Jb(h,l.serviceProps),t[u]=h,r.prototype[u]=function(...d){return this._getService.bind(this,c).apply(this,l.multipleInstances?d:[])}}return l.type==="PUBLIC"?t[u]:null}function A(l,c){return c==="serverAuth"?null:c}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(){const r=xne(vne);r.INTERNAL={...r.INTERNAL,createFirebaseNamespace:BD,extendNamespace:e,createSubscribe:uD,ErrorFactory:Md,deepExtend:Jb};function e(t){Jb(r,t)}return r}const Bne=BD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=new Ww("@firebase/app-compat"),Cne="@firebase/app-compat",Ene="0.5.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sne(r){To(Cne,Ene,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const r=LB();if(r.firebase!==void 0){$T.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=r.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&$T.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ka=Bne;Sne();var Ine="firebase",kne="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ka.registerVersion(Ine,kne,"app-compat");const vg={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},lh={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function CD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Fne=Tne,Lne=CD,ED=new Md("auth","Firebase",CD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new Ww("@firebase/auth");function Pne(r,...e){ew.logLevel<=dr.WARN&&ew.warn(`Auth (${nu}): ${r}`,...e)}function ib(r,...e){ew.logLevel<=dr.ERROR&&ew.error(`Auth (${nu}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(r,...e){throw VB(r,...e)}function Ni(r,...e){return VB(r,...e)}function HB(r,e,t){const n={...Lne(),[e]:t};return new Md("auth","Firebase",n).create(e,{appName:r.name})}function Yi(r){return HB(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pf(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&fs(r,"argument-error"),HB(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function VB(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return ED.create(r,...e)}function et(r,e,...t){if(!r)throw VB(e,...t)}function dA(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ib(e),new Error(e)}function No(r,e){r||dA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function $B(){return jT()==="http:"||jT()==="https:"}function jT(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nne(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($B()||oD()||"connection"in navigator)?navigator.onLine:!0}function Dne(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t){this.shortDelay=e,this.longDelay=t,No(t>e,"Short delay should be less than long delay!"),this.isMobile=Jte()||DB()}get(){return Nne()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(r,e){No(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Une=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mne=new Fm(3e4,6e4);function Xn(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Jn(r,e,t,n,i={}){return ID(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=Lf({key:r.config.apiKey,...a}).slice(1),A=await r._getAdditionalHeaders();A["Content-Type"]="application/json",r.languageCode&&(A["X-Firebase-Locale"]=r.languageCode);const l={method:e,headers:A,...s};return ere()||(l.referrerPolicy="no-referrer"),r.emulatorConfig&&Ff(r.emulatorConfig.host)&&(l.credentials="include"),SD.fetch()(await kD(r,r.config.apiHost,t,o),l)})}async function ID(r,e,t){r._canInitEmulator=!1;const n={...Rne,...e};try{const i=new Qne(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw jg(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[A,l]=o.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw jg(r,"credential-already-in-use",a);if(A==="EMAIL_EXISTS")throw jg(r,"email-already-in-use",a);if(A==="USER_DISABLED")throw jg(r,"user-disabled",a);const c=n[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw HB(r,c,l);fs(r,c)}}catch(i){if(i instanceof js)throw i;fs(r,"network-request-failed",{message:String(i)})}}async function Bl(r,e,t,n,i={}){const s=await Jn(r,e,t,n,i);return"mfaPendingCredential"in s&&fs(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function kD(r,e,t,n){const i=`${e}${t}?${n}`,s=r,a=s.config.emulator?jB(r.config,i):`${r.config.apiScheme}://${i}`;return Une.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function One(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qne{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ni(this.auth,"network-request-failed")),Mne.get())})}}function jg(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Ni(r,e,n);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(r){return r!==void 0&&r.getResponse!==void 0}function KT(r){return r!==void 0&&r.enterprise!==void 0}class TD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return One(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hne(r){return(await Jn(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function FD(r,e){return Jn(r,"GET","/v2/recaptchaConfig",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vne(r,e){return Jn(r,"POST","/v1/accounts:delete",e)}async function $ne(r,e){return Jn(r,"POST","/v1/accounts:update",e)}async function tw(r,e){return Jn(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jne(r,e=!1){const t=Ht(r),n=await t.getIdToken(e),i=Yw(n);et(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:bp(y_(i.auth_time)),issuedAtTime:bp(y_(i.iat)),expirationTime:bp(y_(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function y_(r){return Number(r)*1e3}function Yw(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return ib("JWT malformed, contained fewer than 3 sections"),null;try{const i=FB(t);return i?JSON.parse(i):(ib("Failed to decode base64 JWT payload"),null)}catch(i){return ib("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zT(r){const e=Yw(r);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof js&&Gne(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function Gne({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kne{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bp(this.lastLoginAt),this.creationTime=bp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jp(r){var u;const e=r.auth,t=await r.getIdToken(),n=await wl(r,tw(e,{idToken:t}));et(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const s=(u=i.providerUserInfo)!=null&&u.length?LD(i.providerUserInfo):[],a=qne(r.providerData,s),o=r.isAnonymous,A=!(r.email&&i.passwordHash)&&!(a!=null&&a.length),l=o?A:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new W2(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(r,c)}async function zne(r){const e=Ht(r);await Jp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qne(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function LD(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wne(r,e){const t=await ID(r,{},async()=>{const n=Lf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=await kD(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const A={method:"POST",headers:o,body:n};return r.emulatorConfig&&Ff(r.emulatorConfig.host)&&(A.credentials="include"),SD.fetch()(a,A)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Yne(r,e){return Jn(r,"POST","/v2/accounts:revokeToken",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){et(e.length!==0,"internal-error");const t=zT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await Wne(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new Hh;return n&&(et(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(et(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(et(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hh,this.toJSON())}_performRefresh(){return dA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(r,e){et(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class So{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new Kne(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new W2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await wl(this,this.stsTokenManager.getToken(this.auth,e));return et(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jne(this,e)}reload(){return zne(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new So({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Jp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(Yi(this.auth));const e=await this.getIdToken();return await wl(this,Vne(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,A=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:h,isAnonymous:d,providerData:p,stsTokenManager:f}=t;et(u&&f,e,"internal-error");const y=Hh.fromJSON(this.name,f);et(typeof u=="string",e,"internal-error"),Zl(n,e.name),Zl(i,e.name),et(typeof h=="boolean",e,"internal-error"),et(typeof d=="boolean",e,"internal-error"),Zl(s,e.name),Zl(a,e.name),Zl(o,e.name),Zl(A,e.name),Zl(l,e.name),Zl(c,e.name);const b=new So({uid:u,auth:e,email:i,emailVerified:h,displayName:n,isAnonymous:d,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:y,createdAt:l,lastLoginAt:c});return p&&Array.isArray(p)&&(b.providerData=p.map(B=>({...B}))),A&&(b._redirectEventId=A),b}static async _fromIdTokenResponse(e,t,n=!1){const i=new Hh;i.updateFromServerResponse(t);const s=new So({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Jp(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];et(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?LD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Hh;o.updateFromIdToken(n);const A=new So({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new W2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(A,l),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new Map;function Va(r){No(r instanceof Function,"Expected a class definition");let e=qT.get(r);return e?(No(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,qT.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}PD.type="NONE";const rf=PD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(r,e,t){return`firebase:${r}:${e}:${t}`}class Vh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=od(this.userKey,i.apiKey,s),this.fullPersistenceKey=od("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await tw(this.auth,{idToken:e}).catch(()=>{});return t?So._fromGetAccountInfoResponse(this.auth,t,e):null}return So._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Vh(Va(rf),e,n);const i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Va(rf);const a=od(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const c=await l._get(a);if(c){let u;if(typeof c=="string"){const h=await tw(e,{idToken:c}).catch(()=>{});if(!h)break;u=await So._fromGetAccountInfoResponse(e,h,c)}else u=So._fromJSON(e,c);l!==s&&(o=u),s=l;break}}catch{}const A=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!A.length?new Vh(s,e,n):(s=A[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(a)}catch{}})),new Vh(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ND(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MD(e))return"Blackberry";if(OD(e))return"Webos";if(DD(e))return"Safari";if((e.includes("chrome/")||RD(e))&&!e.includes("edge/"))return"Chrome";if(Lm(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function ND(r=Un()){return/firefox\//i.test(r)}function DD(r=Un()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RD(r=Un()){return/crios\//i.test(r)}function UD(r=Un()){return/iemobile/i.test(r)}function Lm(r=Un()){return/android/i.test(r)}function MD(r=Un()){return/blackberry/i.test(r)}function OD(r=Un()){return/webos/i.test(r)}function Pm(r=Un()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Xne(r=Un()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(r)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(r)}function Jne(r=Un()){var e;return Pm(r)&&!!((e=window.navigator)!=null&&e.standalone)}function Zne(){return AD()&&document.documentMode===10}function QD(r=Un()){return Pm(r)||Lm(r)||OD(r)||MD(r)||/windows phone/i.test(r)||UD(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(r,e=[]){let t;switch(r){case"Browser":t=WT(Un());break;case"Worker":t=`${WT(Un())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nu}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,o)=>{try{const A=e(s);a(A)}catch(A){o(A)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tie(r,e={}){return Jn(r,"GET","/v2/passwordPolicy",Xn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rie=6;class nie{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??rie,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iie{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YT(this),this.idTokenSubscription=new YT(this),this.beforeStateQueue=new eie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ED,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Va(t)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await Vh.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tw(this,{idToken:e}),n=await So._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Tn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,A=await this.tryRedirectSignIn(e);(!a||a===o)&&(A!=null&&A.user)&&(n=A.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jp(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Dne()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(Yi(this));const t=e?Ht(e):null;return t&&et(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(Yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(Yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Va(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tie(this),t=new nie(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Md("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await Yne(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Va(e)||this._popupRedirectResolver;et(t,this,"argument-error"),this.redirectPersistenceManager=await Vh.create(this,[Va(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const A=e.addObserver(t,n,i);return()=>{a=!0,A()}}else{const A=e.addObserver(t);return()=>{a=!0,A()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Pne(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mn(r){return Ht(r)}class YT{constructor(e){this.auth=e,this.observer=null,this.addObserver=uD(t=>this.observer=t)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sie(r){Nm=r}function GB(r){return Nm.loadJS(r)}function aie(){return Nm.recaptchaV2Script}function oie(){return Nm.recaptchaEnterpriseScript}function Aie(){return Nm.gapiScript}function VD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lie=500,cie=6e4,Cy=1e12;class uie{constructor(e){this.auth=e,this.counter=Cy,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new fie(e,this.auth.name,t||{})),this.counter++,n}reset(e){var n;const t=e||Cy;(n=this._widgets.get(t))==null||n.delete(),this._widgets.delete(t)}getResponse(e){var n;const t=e||Cy;return((n=this._widgets.get(t))==null?void 0:n.getResponse())||""}async execute(e){var n;const t=e||Cy;return(n=this._widgets.get(t))==null||n.execute(),""}}class die{constructor(){this.enterprise=new hie}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hie{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class fie{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;et(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=gie(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},cie)},lie))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function gie(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<r;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const pie="recaptcha-enterprise",wp="NO_RECAPTCHA";class $D{constructor(e){this.type=pie,this.auth=Mn(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{FD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(A.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const l=new TD(A);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,a(l.siteKey)}}).catch(A=>{o(A)})})}function i(s,a,o){const A=window.grecaptcha;KT(A)?A.enterprise.ready(()=>{A.enterprise.execute(s,{action:e}).then(l=>{a(l)}).catch(()=>{a(wp)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new die().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(o=>{if(!t&&KT(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let A=oie();A.length!==0&&(A+=o),GB(A).then(()=>{i(o,s,a)}).catch(l=>{a(l)})}}).catch(o=>{a(o)})})}}async function _g(r,e,t,n=!1,i=!1){const s=new $D(r);let a;if(i)a=wp;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const o={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const A=o.phoneEnrollmentInfo.phoneNumber,l=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:A,recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const A=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:A,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function kc(r,e,t,n,i){var s,a;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=r._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _g(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const A=await _g(r,e,t,t==="getOobCode");return n(r,A)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if((a=r._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await _g(r,e,t);return n(r,o).catch(async A=>{var l;if(((l=r._getRecaptchaConfig())==null?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(A.code==="auth/missing-recaptcha-token"||A.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const c=await _g(r,e,t,!1,!0);return n(r,c)}return Promise.reject(A)})}else{const o=await _g(r,e,t,!1,!0);return n(r,o)}else return Promise.reject(i+" provider is not supported.")}async function mie(r){const e=Mn(r),t=await FD(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new TD(t);e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,n.isAnyProviderEnabled()&&new $D(e).verify()}function yie(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Va);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function bie(r,e,t){const n=Mn(r);et(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=jD(e),{host:a,port:o}=wie(e),A=o===null?"":`:${o}`,l={url:`${s}//${a}${A}/`},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){et(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),et(Hc(l,n.config.emulator)&&Hc(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=l,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,Ff(a)?(iD(`${s}//${a}${A}`),sD("Auth",!0)):i||vie()}function jD(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function wie(r){const e=jD(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:XT(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:XT(a)}}}function XT(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function vie(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dA("not implemented")}_getIdTokenResponse(e){return dA("not implemented")}_linkToIdToken(e,t){return dA("not implemented")}_getReauthenticationResolver(e){return dA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(r,e){return Jn(r,"POST","/v1/accounts:resetPassword",Xn(r,e))}async function _ie(r,e){return Jn(r,"POST","/v1/accounts:update",e)}async function xie(r,e){return Jn(r,"POST","/v1/accounts:signUp",e)}async function Bie(r,e){return Jn(r,"POST","/v1/accounts:update",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cie(r,e){return Bl(r,"POST","/v1/accounts:signInWithPassword",Xn(r,e))}async function Xw(r,e){return Jn(r,"POST","/v1/accounts:sendOobCode",Xn(r,e))}async function Eie(r,e){return Xw(r,e)}async function Sie(r,e){return Xw(r,e)}async function Iie(r,e){return Xw(r,e)}async function kie(r,e){return Xw(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tie(r,e){return Bl(r,"POST","/v1/accounts:signInWithEmailLink",Xn(r,e))}async function Fie(r,e){return Bl(r,"POST","/v1/accounts:signInWithEmailLink",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp extends Nf{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Zp(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Zp(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kc(e,t,"signInWithPassword",Cie,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Tie(e,{email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kc(e,n,"signUpPassword",xie,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Fie(e,{idToken:t,email:this._email,oobCode:this._password});default:fs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(r,e){return Bl(r,"POST","/v1/accounts:signInWithIdp",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lie="http://localhost";class IA extends Nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new IA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=t;if(!n||!i)return null;const a=new IA(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return gl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,gl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gl(e,t)}buildRequest(){const e={requestUri:Lie,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(r,e){return Jn(r,"POST","/v1/accounts:sendVerificationCode",Xn(r,e))}async function Pie(r,e){return Bl(r,"POST","/v1/accounts:signInWithPhoneNumber",Xn(r,e))}async function Nie(r,e){const t=await Bl(r,"POST","/v1/accounts:signInWithPhoneNumber",Xn(r,e));if(t.temporaryProof)throw jg(r,"account-exists-with-different-credential",t);return t}const Die={USER_NOT_FOUND:"user-not-found"};async function Rie(r,e){const t={...e,operation:"REAUTH"};return Bl(r,"POST","/v1/accounts:signInWithPhoneNumber",Xn(r,t),Die)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Nf{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ad({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ad({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Pie(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Nie(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Rie(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return!n&&!t&&!i&&!s?null:new Ad({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uie(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mie(r){const e=kh($g(r)).link,t=e?kh($g(e)).deep_link_id:null,n=kh($g(r)).deep_link_id;return(n?kh($g(n)).link:null)||n||t||e||r}class Jw{constructor(e){const t=kh($g(e)),n=t.apiKey??null,i=t.oobCode??null,s=Uie(t.mode??null);et(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Mie(e);try{return new Jw(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(){this.providerId=iu.PROVIDER_ID}static credential(e,t){return Zp._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Jw.parseLink(t);return et(n,"argument-error"),Zp._fromEmailAndCode(e,n.code,n.tenantId)}}iu.PROVIDER_ID="password";iu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";iu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends Cl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $h extends Df{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return et("providerId"in t&&"signInMethod"in t,"argument-error"),IA._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return et(e.idToken||e.accessToken,"argument-error"),IA._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return $h.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return $h.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!n&&!i&&!t&&!s||!o)return null;try{return new $h(o)._credential({idToken:t,accessToken:n,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends Df{constructor(){super("facebook.com")}static credential(e){return IA._fromParams({providerId:aA.PROVIDER_ID,signInMethod:aA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aA.credentialFromTaggedObject(e)}static credentialFromError(e){return aA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return aA.credential(e.oauthAccessToken)}catch{return null}}}aA.FACEBOOK_SIGN_IN_METHOD="facebook.com";aA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA extends Df{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return IA._fromParams({providerId:oA.PROVIDER_ID,signInMethod:oA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oA.credentialFromTaggedObject(e)}static credentialFromError(e){return oA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return oA.credential(t,n)}catch{return null}}}oA.GOOGLE_SIGN_IN_METHOD="google.com";oA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA extends Df{constructor(){super("github.com")}static credential(e){return IA._fromParams({providerId:AA.PROVIDER_ID,signInMethod:AA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return AA.credentialFromTaggedObject(e)}static credentialFromError(e){return AA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return AA.credential(e.oauthAccessToken)}catch{return null}}}AA.GITHUB_SIGN_IN_METHOD="github.com";AA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oie="http://localhost";class nf extends Nf{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return gl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,gl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gl(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:s}=t;return!n||!i||!s||n!==i?null:new nf(n,s)}static _create(e,t){return new nf(e,t)}buildRequest(){return{requestUri:Oie,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qie="saml.";class rw extends Cl{constructor(e){et(e.startsWith(Qie),"argument-error"),super(e)}static credentialFromResult(e){return rw.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return rw.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=nf.fromJSON(e);return et(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return nf._create(n,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA extends Df{constructor(){super("twitter.com")}static credential(e,t){return IA._fromParams({providerId:lA.PROVIDER_ID,signInMethod:lA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lA.credentialFromTaggedObject(e)}static credentialFromError(e){return lA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return lA.credential(t,n)}catch{return null}}}lA.TWITTER_SIGN_IN_METHOD="twitter.com";lA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(r,e){return Bl(r,"POST","/v1/accounts:signUp",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await So._fromIdTokenResponse(e,n,i),a=ZT(n);return new go({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ZT(n);return new go({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ZT(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hie(r){var i;if(Tn(r.app))return Promise.reject(Yi(r));const e=Mn(r);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new go({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await KD(e,{returnSecureToken:!0}),n=await go._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw extends js{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,nw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new nw(e,t,n,i)}}function zD(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nw._fromErrorAndOperation(r,s,e,n):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vie(r,e){const t=Ht(r);await Zw(!0,t,e);const{providerUserInfo:n}=await $ne(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=qD(n||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function KB(r,e,t=!1){const n=await wl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return go._forOperation(r,"link",n)}async function Zw(r,e,t){await Jp(e);const n=qD(e.providerData),i=r===!1?"provider-already-linked":"no-such-provider";et(n.has(t)===r,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(r,e,t=!1){const{auth:n}=r;if(Tn(n.app))return Promise.reject(Yi(n));const i="reauthenticate";try{const s=await wl(r,zD(n,i,e,r),t);et(s.idToken,n,"internal-error");const a=Yw(s.idToken);et(a,n,"internal-error");const{sub:o}=a;return et(r.uid===o,n,"user-mismatch"),go._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fs(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(r,e,t=!1){if(Tn(r.app))return Promise.reject(Yi(r));const n="signIn",i=await zD(r,n,e),s=await go._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function ev(r,e){return YD(Mn(r),e)}async function XD(r,e){const t=Ht(r);return await Zw(!1,t,e.providerId),KB(t,e)}async function JD(r,e){return WD(Ht(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $ie(r,e){return Bl(r,"POST","/v1/accounts:signInWithCustomToken",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jie(r,e){if(Tn(r.app))return Promise.reject(Yi(r));const t=Mn(r),n=await $ie(t,{token:e,returnSecureToken:!0}),i=await go._fromIdTokenResponse(t,"signIn",n);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?zB._fromServerResponse(e,t):"totpInfo"in t?qB._fromServerResponse(e,t):fs(e,"internal-error")}}class zB extends Dm{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new zB(t)}}class qB extends Dm{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new qB(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r,e,t){var n;et(((n=t.url)==null?void 0:n.length)>0,r,"invalid-continue-uri"),et(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),et(typeof t.linkDomain>"u"||t.linkDomain.length>0,r,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(et(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(et(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(r){const e=Mn(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Gie(r,e,t){const n=Mn(r),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&tv(n,i,t),await kc(n,i,"getOobCode",Sie,"EMAIL_PASSWORD_PROVIDER")}async function Kie(r,e,t){await GD(Ht(r),{oobCode:e,newPassword:t}).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&WB(r),n})}async function zie(r,e){await Bie(Ht(r),{oobCode:e})}async function ZD(r,e){const t=Ht(r),n=await GD(t,{oobCode:e}),i=n.requestType;switch(et(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":et(n.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":et(n.mfaInfo,t,"internal-error");default:et(n.email,t,"internal-error")}let s=null;return n.mfaInfo&&(s=Dm._fromServerResponse(Mn(t),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:s},operation:i}}async function qie(r,e){const{data:t}=await ZD(Ht(r),e);return t.email}async function Wie(r,e,t){if(Tn(r.app))return Promise.reject(Yi(r));const n=Mn(r),a=await kc(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KD,"EMAIL_PASSWORD_PROVIDER").catch(A=>{throw A.code==="auth/password-does-not-meet-requirements"&&WB(r),A}),o=await go._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function Yie(r,e,t){return Tn(r.app)?Promise.reject(Yi(r)):ev(Ht(r),iu.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&WB(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xie(r,e,t){const n=Mn(r),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){et(o.handleCodeInApp,n,"argument-error"),o&&tv(n,a,o)}s(i,t),await kc(n,i,"getOobCode",Iie,"EMAIL_PASSWORD_PROVIDER")}function Jie(r,e){const t=Jw.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function Zie(r,e,t){if(Tn(r.app))return Promise.reject(Yi(r));const n=Ht(r),i=iu.credentialWithLink(e,t||Xp());return et(i._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),ev(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ese(r,e){return Jn(r,"POST","/v1/accounts:createAuthUri",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tse(r,e){const t=$B()?Xp():"http://localhost",n={identifier:e,continueUri:t},{signinMethods:i}=await ese(Ht(r),n);return i||[]}async function rse(r,e){const t=Ht(r),i={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()};e&&tv(t.auth,i,e);const{email:s}=await Eie(t.auth,i);s!==r.email&&await r.reload()}async function nse(r,e,t){const n=Ht(r),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await r.getIdToken(),newEmail:e};t&&tv(n.auth,s,t);const{email:a}=await kie(n.auth,s);a!==r.email&&await r.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ise(r,e){return Jn(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sse(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Ht(r),s={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await wl(n,ise(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:A})=>A==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function ase(r,e){const t=Ht(r);return Tn(t.auth.app)?Promise.reject(Yi(t.auth)):eR(t,e,null)}function ose(r,e){return eR(Ht(r),null,e)}async function eR(r,e,t){const{auth:n}=r,s={idToken:await r.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await wl(r,_ie(n,s));await r._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ase(r){var i,s;if(!r)return null;const{providerId:e}=r,t=r.rawUserInfo?JSON.parse(r.rawUserInfo):{},n=r.isNewUser||r.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(r!=null&&r.idToken)){const a=(s=(i=Yw(r.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new jh(n,o)}}if(!e)return null;switch(e){case"facebook.com":return new lse(n,t);case"github.com":return new cse(n,t);case"google.com":return new use(n,t);case"twitter.com":return new dse(n,t,r.screenName||null);case"custom":case"anonymous":return new jh(n,null);default:return new jh(n,e,t)}}class jh{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class tR extends jh{constructor(e,t,n,i){super(e,t,n),this.username=i}}class lse extends jh{constructor(e,t){super(e,"facebook.com",t)}}class cse extends tR{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class use extends jh{constructor(e,t){super(e,"google.com",t)}}class dse extends tR{constructor(e,t,n){super(e,"twitter.com",t,n)}}function hse(r){const{user:e,_tokenResponse:t}=r;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Ase(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new zu("enroll",e,t)}static _fromMfaPendingCredential(e){return new zu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return zu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((n=e.multiFactorSession)!=null&&n.idToken)return zu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Mn(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(o=>Dm._fromServerResponse(n,o));et(i.mfaPendingCredential,n,"internal-error");const a=zu._fromMfaPendingCredential(i.mfaPendingCredential);return new YB(a,s,async o=>{const A=await o._process(n,a);delete i.mfaInfo,delete i.mfaPendingCredential;const l={...i,idToken:A.idToken,refreshToken:A.refreshToken};switch(t.operationType){case"signIn":const c=await go._fromIdTokenResponse(n,t.operationType,l);return await n._updateCurrentUser(c.user),c;case"reauthenticate":return et(t.user,n,"internal-error"),go._forOperation(t.user,t.operationType,l);default:fs(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function fse(r,e){var i;const t=Ht(r),n=e;return et(e.customData.operationType,t,"argument-error"),et((i=n.customData._serverResponse)==null?void 0:i.mfaPendingCredential,t,"argument-error"),YB._fromError(t,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(r,e){return Jn(r,"POST","/v2/accounts/mfaEnrollment:start",Xn(r,e))}function gse(r,e){return Jn(r,"POST","/v2/accounts/mfaEnrollment:finalize",Xn(r,e))}function pse(r,e){return Jn(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Xn(r,e))}class XB{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(n=>Dm._fromServerResponse(e.auth,n)))})}static _fromUser(e){return new XB(e)}async getSession(){return zu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,i=await this.getSession(),s=await wl(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,n=await this.user.getIdToken();try{const i=await wl(this.user,pse(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const b_=new WeakMap;function mse(r){const e=Ht(r);return b_.has(e)||b_.set(e,XB._fromUser(e)),b_.get(e)}const iw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(iw,"1"),this.storage.removeItem(iw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yse=1e3,bse=10;class nR extends rR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,A)=>{this.notifyListeners(a,A)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);Zne()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bse):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},yse)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nR.type="LOCAL";const JB=nR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR extends rR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iR.type="SESSION";const md=iR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wse(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new rv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async l=>l(t.origin,s)),A=await wse(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:A})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vse{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,A)=>{const l=Rm("",20);i.port1.start();const c=setTimeout(()=>{A(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(u){const h=u;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(c),clearTimeout(s),A(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function _se(r){bi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function xse(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Bse(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function Cse(){return ZB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="firebaseLocalStorageDb",Ese=1,sw="firebaseLocalStorage",aR="fbase_key";class Um{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nv(r,e){return r.transaction([sw],e?"readwrite":"readonly").objectStore(sw)}function Sse(){const r=indexedDB.deleteDatabase(sR);return new Um(r).toPromise()}function Y2(){const r=indexedDB.open(sR,Ese);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(sw,{keyPath:aR})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(sw)?e(n):(n.close(),await Sse(),e(await Y2()))})})}async function tF(r,e,t){const n=nv(r,!0).put({[aR]:e,value:t});return new Um(n).toPromise()}async function Ise(r,e){const t=nv(r,!1).get(e),n=await new Um(t).toPromise();return n===void 0?null:n.value}function rF(r,e){const t=nv(r,!0).delete(e);return new Um(t).toPromise()}const kse=800,Tse=3;class oR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y2(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Tse)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rv._getInstance(Cse()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await xse(),!this.activeServiceWorker)return;this.sender=new vse(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Bse()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y2();return await tF(e,iw,"1"),await rF(e,iw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>tF(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>Ise(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rF(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=nv(i,!1).getAll();return new Um(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kse)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oR.type="LOCAL";const em=oR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(r,e){return Jn(r,"POST","/v2/accounts/mfaSignIn:start",Xn(r,e))}function Fse(r,e){return Jn(r,"POST","/v2/accounts/mfaSignIn:finalize",Xn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=VD("rcb"),Lse=new Fm(3e4,6e4);class Pse{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=bi().grecaptcha)!=null&&e.render)}load(e,t=""){return et(Nse(t),e,"argument-error"),this.shouldResolveImmediately(t)&&GT(bi().grecaptcha)?Promise.resolve(bi().grecaptcha):new Promise((n,i)=>{const s=bi().setTimeout(()=>{i(Ni(e,"network-request-failed"))},Lse.get());bi()[w_]=()=>{bi().clearTimeout(s),delete bi()[w_];const o=bi().grecaptcha;if(!o||!GT(o)){i(Ni(e,"internal-error"));return}const A=o.render;o.render=(l,c)=>{const u=A(l,c);return this.counter++,u},this.hostLanguage=t,n(o)};const a=`${aie()}?${Lf({onload:w_,render:"explicit",hl:t})}`;GB(a).catch(()=>{clearTimeout(s),i(Ni(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=bi().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Nse(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class Dse{async load(e){return new uie(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="recaptcha",Rse={theme:"light",type:"image"};let Use=class{constructor(e,t,n={...Rse}){this.parameters=n,this.type=vp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(e),this.isInvisible=this.parameters.size==="invisible",et(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;et(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dse:new Pse,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){et(!this.parameters.sitekey,this.auth,"argument-error"),et(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),et(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(n=>n(t)),typeof e=="function")e(t);else if(typeof e=="string"){const n=bi()[e];typeof n=="function"&&n(t)}}}assertNotDestroyed(){et(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){et($B()&&!ZB(),this.auth,"internal-error"),await Mse(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Hne(this.auth);et(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return et(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Mse(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ad._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Ose(r,e,t){if(Tn(r.app))return Promise.reject(Yi(r));const n=Mn(r),i=await iv(n,e,Ht(t));return new e5(i,s=>ev(n,s))}async function Qse(r,e,t){const n=Ht(r);await Zw(!1,n,"phone");const i=await iv(n.auth,e,Ht(t));return new e5(i,s=>XD(n,s))}async function Hse(r,e,t){const n=Ht(r);if(Tn(n.auth.app))return Promise.reject(Yi(n.auth));const i=await iv(n.auth,e,Ht(t));return new e5(i,s=>JD(n,s))}async function iv(r,e,t){var n;if(!r._getRecaptchaConfig())try{await mie(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){et(s.type==="enroll",r,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await kc(r,a,"mfaSmsEnrollment",async(c,u)=>{if(u.phoneEnrollmentInfo.captchaResponse===wp){et((t==null?void 0:t.type)===vp,c,"argument-error");const h=await v_(c,u,t);return eF(c,h)}return eF(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).phoneSessionInfo.sessionInfo}else{et(s.type==="signin",r,"internal-error");const a=((n=i.multiFactorHint)==null?void 0:n.uid)||i.multiFactorUid;et(a,r,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await kc(r,o,"mfaSmsSignIn",async(u,h)=>{if(h.phoneSignInInfo.captchaResponse===wp){et((t==null?void 0:t.type)===vp,u,"argument-error");const d=await v_(u,h,t);return nF(u,d)}return nF(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await kc(r,s,"sendVerificationCode",async(l,c)=>{if(c.captchaResponse===wp){et((t==null?void 0:t.type)===vp,l,"argument-error");const u=await v_(l,c,t);return JT(l,u)}return JT(l,c)},"PHONE_PROVIDER").catch(l=>Promise.reject(l))).sessionInfo}}finally{t==null||t._reset()}}async function Vse(r,e){const t=Ht(r);if(Tn(t.auth.app))return Promise.reject(Yi(t.auth));await KB(t,e)}async function v_(r,e,t){et(t.type===vp,r,"argument-error");const n=await t.verify();et(typeof n=="string",r,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,a=i.phoneEnrollmentInfo.captchaResponse,o=i.phoneEnrollmentInfo.clientType,A=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:n,captchaResponse:a,clientType:o,recaptchaVersion:A}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,a=i.phoneSignInInfo.clientType,o=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:s,clientType:a,recaptchaVersion:o}}),i}else return Object.assign(i,{recaptchaToken:n}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=class sb{constructor(e){this.providerId=sb.PROVIDER_ID,this.auth=Mn(e)}verifyPhoneNumber(e,t){return iv(this.auth,e,Ht(t))}static credential(e,t){return Ad._fromVerification(e,t)}static credentialFromResult(e){const t=e;return sb.credentialFromTaggedObject(t)}static credentialFromError(e){return sb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ad._fromTokenResponse(t,n):null}};yd.PROVIDER_ID="phone";yd.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(r,e){return e?Va(e):(et(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5 extends Nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $se(r){return YD(r.auth,new t5(r),r.bypassAuthState)}function jse(r){const{auth:e,user:t}=r;return et(t,e,"internal-error"),WD(t,new t5(r),r.bypassAuthState)}async function Gse(r){const{auth:e,user:t}=r;return et(t,e,"internal-error"),KB(t,new t5(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const A={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(A))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $se;case"linkViaPopup":case"linkViaRedirect":return Gse;case"reauthViaPopup":case"reauthViaRedirect":return jse;default:fs(this.auth,"internal-error")}}resolve(e){No(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){No(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kse=new Fm(2e3,1e4);async function zse(r,e,t){if(Tn(r.app))return Promise.reject(Ni(r,"operation-not-supported-in-this-environment"));const n=Mn(r);Pf(r,e,Cl);const i=Od(n,t);return new ll(n,"signInViaPopup",e,i).executeNotNull()}async function qse(r,e,t){const n=Ht(r);if(Tn(n.auth.app))return Promise.reject(Ni(n.auth,"operation-not-supported-in-this-environment"));Pf(n.auth,e,Cl);const i=Od(n.auth,t);return new ll(n.auth,"reauthViaPopup",e,i,n).executeNotNull()}async function Wse(r,e,t){const n=Ht(r);Pf(n.auth,e,Cl);const i=Od(n.auth,t);return new ll(n.auth,"linkViaPopup",e,i,n).executeNotNull()}class ll extends AR{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,ll.currentPopupAction&&ll.currentPopupAction.cancel(),ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){No(this.filter.length===1,"Popup operations only handle one event");const e=Rm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Kse.get())};e()}}ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yse="pendingRedirect",_p=new Map;class Xse extends AR{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=_p.get(this.auth._key());if(!e){try{const n=await Jse(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}_p.set(this.auth._key(),e)}return this.bypassAuthState||_p.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jse(r,e){const t=cR(e),n=lR(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}async function r5(r,e){return lR(r)._set(cR(e),"true")}function Zse(){_p.clear()}function n5(r,e){_p.set(r._key(),e)}function lR(r){return Va(r._redirectPersistence)}function cR(r){return od(Yse,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eae(r,e,t){return tae(r,e,t)}async function tae(r,e,t){if(Tn(r.app))return Promise.reject(Yi(r));const n=Mn(r);Pf(r,e,Cl),await n._initializationPromise;const i=Od(n,t);return await r5(i,n),i._openRedirect(n,e,"signInViaRedirect")}function rae(r,e,t){return nae(r,e,t)}async function nae(r,e,t){const n=Ht(r);if(Pf(n.auth,e,Cl),Tn(n.auth.app))return Promise.reject(Yi(n.auth));await n.auth._initializationPromise;const i=Od(n.auth,t);await r5(i,n.auth);const s=await uR(n);return i._openRedirect(n.auth,e,"reauthViaRedirect",s)}function iae(r,e,t){return sae(r,e,t)}async function sae(r,e,t){const n=Ht(r);Pf(n.auth,e,Cl),await n.auth._initializationPromise;const i=Od(n.auth,t);await Zw(!1,n,e.providerId),await r5(i,n.auth);const s=await uR(n);return i._openRedirect(n.auth,e,"linkViaRedirect",s)}async function aae(r,e){return await Mn(r)._initializationPromise,sv(r,e,!1)}async function sv(r,e,t=!1){if(Tn(r.app))return Promise.reject(Yi(r));const n=Mn(r),i=Od(n,e),a=await new Xse(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}async function uR(r){const e=Rm(`${r.uid}:::`);return r._redirectEventId=e,await r.auth._setRedirectUser(r),await r.auth._persistUserIfCurrent(r),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oae=600*1e3;class dR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Aae(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!hR(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ni(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oae&&this.cachedEventUids.clear(),this.cachedEventUids.has(iF(e))}saveEventToCache(e){this.cachedEventUids.add(iF(e)),this.lastProcessedEventTime=Date.now()}}function iF(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function hR({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Aae(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hR(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(r,e={}){return Jn(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lae=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cae=/^https?/;async function uae(r){if(r.config.emulator)return;const{authorizedDomains:e}=await fR(r);for(const t of e)try{if(dae(t))return}catch{}fs(r,"unauthorized-domain")}function dae(r){const e=Xp(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!cae.test(t))return!1;if(lae.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hae=new Fm(3e4,6e4);function sF(){const r=bi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function fae(r){return new Promise((e,t)=>{var i,s,a;function n(){sF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sF(),t(Ni(r,"network-request-failed"))},timeout:hae.get()})}if((s=(i=bi().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=bi().gapi)!=null&&a.load)n();else{const o=VD("iframefcb");return bi()[o]=()=>{gapi.load?n():t(Ni(r,"network-request-failed"))},GB(`${Aie()}?onload=${o}`).catch(A=>t(A))}}).catch(e=>{throw ab=null,e})}let ab=null;function gae(r){return ab=ab||fae(r),ab}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pae=new Fm(5e3,15e3),mae="__/auth/iframe",yae="emulator/auth/iframe",bae={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wae=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vae(r){const e=r.config;et(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?jB(e,yae):`https://${r.config.authDomain}/${mae}`,n={apiKey:e.apiKey,appName:r.name,v:nu},i=wae.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${Lf(n).slice(1)}`}async function _ae(r){const e=await gae(r),t=bi().gapi;return et(t,r,"internal-error"),e.open({where:document.body,url:vae(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bae,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Ni(r,"network-request-failed"),o=bi().setTimeout(()=>{s(a)},pae.get());function A(){bi().clearTimeout(o),i(n)}n.ping(A).then(A,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xae={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bae=500,Cae=600,Eae="_blank",Sae="http://localhost";class aF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Iae(r,e,t,n=Bae,i=Cae){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const A={...xae,width:n.toString(),height:i.toString(),top:s,left:a},l=Un().toLowerCase();t&&(o=RD(l)?Eae:t),ND(l)&&(e=e||Sae,A.scrollbars="yes");const c=Object.entries(A).reduce((h,[d,p])=>`${h}${d}=${p},`,"");if(Jne(l)&&o!=="_self")return kae(e||"",o),new aF(null);const u=window.open(e||"",o,c);et(u,r,"popup-blocked");try{u.focus()}catch{}return new aF(u)}function kae(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tae="__/auth/handler",Fae="emulator/auth/handler",Lae=encodeURIComponent("fac");async function X2(r,e,t,n,i,s){et(r.config.authDomain,r,"auth-domain-config-required"),et(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:nu,eventId:i};if(e instanceof Cl){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",sre(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,u]of Object.entries(s||{}))a[c]=u}if(e instanceof Df){const c=e.getScopes().filter(u=>u!=="");c.length>0&&(a.scopes=c.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const A=await r._getAppCheckToken(),l=A?`#${Lae}=${encodeURIComponent(A)}`:"";return`${Pae(r)}?${Lf(o).slice(1)}${l}`}function Pae({config:r}){return r.emulator?jB(r,Fae):`https://${r.authDomain}/${Tae}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="webStorageSupport";class Nae{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=md,this._completeRedirectFn=sv,this._overrideRedirectResult=n5}async _openPopup(e,t,n,i){var a;No((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await X2(e,t,n,Xp(),i);return Iae(e,s,Rm())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await X2(e,t,n,Xp(),i);return _se(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(No(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await _ae(e),n=new dR(e);return t.register("authEvent",i=>(et(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(__,{type:__},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[__];s!==void 0&&t(!!s),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uae(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return QD()||DD()||Pm()}}const Dae=Nae;class Rae{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return dA("unexpected MultiFactorSessionType")}}}class i5 extends Rae{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new i5(e)}_finalizeEnroll(e,t,n){return gse(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Fse(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class gR{constructor(){}static assertion(e){return i5._fromCredential(e)}}gR.FACTOR_ID="phone";var oF="@firebase/auth",AF="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uae{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mae(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Oae(r){jc(new SA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;et(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const A={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HD(r)},l=new iie(n,i,s,A);return yie(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),jc(new SA("auth-internal",e=>{const t=Mn(e.getProvider("auth").getImmediate());return(n=>new Uae(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),To(oF,AF,Mae(r)),To(oF,AF,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qae=300;zte("authIdTokenMaxAge");function Hae(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}sie({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Ni("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",Hae().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Oae("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vae=2e3;async function $ae(r,e,t){const{BuildInfo:n}=bd();No(e.sessionId,"AuthEvent did not contain a session ID");const i=await qae(e.sessionId),s={};return Pm()?s.ibi=n.packageName:Lm()?s.apn=n.packageName:fs(r,"operation-not-supported-in-this-environment"),n.displayName&&(s.appDisplayName=n.displayName),s.sessionId=i,X2(r,t,e.type,void 0,e.eventId??void 0,s)}async function jae(r){const{BuildInfo:e}=bd(),t={};Pm()?t.iosBundleId=e.packageName:Lm()?t.androidPackageName=e.packageName:fs(r,"operation-not-supported-in-this-environment"),await fR(r,t)}function Gae(r){const{cordova:e}=bd();return new Promise(t=>{e.plugins.browsertab.isAvailable(n=>{let i=null;n?e.plugins.browsertab.openUrl(r):i=e.InAppBrowser.open(r,Xne()?"_blank":"_system","location=yes"),t(i)})})}async function Kae(r,e,t){const{cordova:n}=bd();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function A(){var h;s();const u=(h=n.plugins.browsertab)==null?void 0:h.close;typeof u=="function"&&u(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function l(){o||(o=window.setTimeout(()=>{a(Ni(r,"redirect-cancelled-by-user"))},Vae))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&l()}e.addPassiveListener(A),document.addEventListener("resume",l,!1),Lm()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(A),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",c,!1),o&&window.clearTimeout(o)}})}finally{i()}}function zae(r){var t,n,i,s,a,o,A,l,c,u;const e=bd();et(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),et(typeof((n=e==null?void 0:e.BuildInfo)==null?void 0:n.packageName)<"u",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),et(typeof((a=(s=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),et(typeof((l=(A=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:A.browsertab)==null?void 0:l.isAvailable)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),et(typeof((u=(c=e==null?void 0:e.cordova)==null?void 0:c.InAppBrowser)==null?void 0:u.open)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function qae(r){const e=Wae(r),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Wae(r){if(No(/[0-9a-zA-Z]+/.test(r),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(r);const e=new ArrayBuffer(r.length),t=new Uint8Array(e);for(let n=0;n<r.length;n++)t[n]=r.charCodeAt(n);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yae=20;class Xae extends dR{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Jae(r,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:toe(),postBody:null,tenantId:r.tenantId,error:Ni(r,"no-auth-event")}}function Zae(r,e){return J2()._set(Z2(r),e)}async function lF(r){const e=await J2()._get(Z2(r));return e&&await J2()._remove(Z2(r)),e}function eoe(r,e){var n,i;const t=noe(e);if(t.includes("/__/auth/callback")){const s=ob(t),a=s.firebaseError?roe(decodeURIComponent(s.firebaseError)):null,o=(i=(n=a==null?void 0:a.code)==null?void 0:n.split("auth/"))==null?void 0:i[1],A=o?Ni(o):null;return A?{type:r.type,eventId:r.eventId,tenantId:r.tenantId,error:A,urlResponse:null,sessionId:null,postBody:null}:{type:r.type,eventId:r.eventId,tenantId:r.tenantId,sessionId:r.sessionId,urlResponse:t,postBody:null}}return null}function toe(){const r=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<Yae;t++){const n=Math.floor(Math.random()*e.length);r.push(e.charAt(n))}return r.join("")}function J2(){return Va(JB)}function Z2(r){return od("authEvent",r.config.apiKey,r.name)}function roe(r){try{return JSON.parse(r)}catch{return null}}function noe(r){const e=ob(r),t=e.link?decodeURIComponent(e.link):void 0,n=ob(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ob(i).link||i||n||t||r}function ob(r){if(!(r!=null&&r.includes("?")))return{};const[e,...t]=r.split("?");return kh(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ioe=500;class soe{constructor(){this._redirectPersistence=md,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=sv,this._overrideRedirectResult=n5}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Xae(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){fs(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){zae(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),Zse(),await this._originValidation(e);const a=Jae(e,n,i);await Zae(e,a);const o=await $ae(e,a,t),A=await Gae(o);return Kae(e,s,A)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jae(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=bd(),a=setTimeout(async()=>{await lF(e),t.onEvent(cF())},ioe),o=async c=>{clearTimeout(a);const u=await lF(e);let h=null;u&&(c!=null&&c.url)&&(h=eoe(u,c.url)),t.onEvent(h||cF())};typeof n<"u"&&typeof n.subscribe=="function"&&n.subscribe(null,o);const A=i,l=`${s.packageName.toLowerCase()}://`;bd().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(l)&&o({url:c}),typeof A=="function")try{A(c)}catch(u){console.error(u)}}}}const aoe=soe;function cF(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ni("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ooe(r,e){Mn(r)._logFramework(e)}var Aoe="@firebase/auth-compat",loe="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const coe=1e3;function xp(){var r;return((r=self==null?void 0:self.location)==null?void 0:r.protocol)||null}function uoe(){return xp()==="http:"||xp()==="https:"}function pR(r=Un()){return!!((xp()==="file:"||xp()==="ionic:"||xp()==="capacitor:")&&r.toLowerCase().match(/iphone|ipad|ipod|android/))}function doe(){return DB()||qw()}function hoe(){return AD()&&(document==null?void 0:document.documentMode)===11}function foe(r=Un()){return/Edge\/\d+/.test(r)}function goe(r=Un()){return hoe()||foe(r)}function mR(){try{const r=self.localStorage,e=Rm();if(r)return r.setItem(e,"1"),r.removeItem(e),goe()?qp():!0}catch{return s5()&&qp()}return!1}function s5(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function x_(){return(uoe()||oD()||pR())&&!doe()&&mR()&&!s5()}function yR(){return pR()&&typeof document<"u"}async function poe(){return yR()?new Promise(r=>{const e=setTimeout(()=>{r(!1)},coe);document.addEventListener("deviceready",()=>{clearTimeout(e),r(!0)})}):!1}function moe(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa={LOCAL:"local",NONE:"none",SESSION:"session"},xg=et,bR="persistence";function yoe(r,e){if(xg(Object.values(Qa).includes(e),r,"invalid-persistence-type"),DB()){xg(e!==Qa.SESSION,r,"unsupported-persistence-type");return}if(qw()){xg(e===Qa.NONE,r,"unsupported-persistence-type");return}if(s5()){xg(e===Qa.NONE||e===Qa.LOCAL&&qp(),r,"unsupported-persistence-type");return}xg(e===Qa.NONE||mR(),r,"unsupported-persistence-type")}async function ex(r){await r._initializationPromise;const e=wR(),t=od(bR,r.config.apiKey,r.name);e&&e.setItem(t,r._getPersistenceType())}function boe(r,e){const t=wR();if(!t)return[];const n=od(bR,r,e);switch(t.getItem(n)){case Qa.NONE:return[rf];case Qa.LOCAL:return[em,md];case Qa.SESSION:return[md];default:return[]}}function wR(){var r;try{return((r=moe())==null?void 0:r.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const woe=et;class wc{constructor(){this.browserResolver=Va(Dae),this.cordovaResolver=Va(aoe),this.underlyingResolver=null,this._redirectPersistence=md,this._completeRedirectFn=sv,this._overrideRedirectResult=n5}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return yR()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return woe(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await poe();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r){return r.unwrap()}function voe(r){return r.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _oe(r){return _R(r)}function xoe(r,e){var n;const t=(n=e.customData)==null?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new Boe(r,fse(r,e))}else if(t){const i=_R(e),s=e;i&&(s.credential=i,s.tenantId=t.tenantId||void 0,s.email=t.email||void 0,s.phoneNumber=t.phoneNumber||void 0)}}function _R(r){const{_tokenResponse:e}=r instanceof js?r.customData:r;if(!e)return null;if(!(r instanceof js)&&"temporaryProof"in e&&"phoneNumber"in e)return yd.credentialFromResult(r);const t=e.providerId;if(!t||t===vg.PASSWORD)return null;let n;switch(t){case vg.GOOGLE:n=oA;break;case vg.FACEBOOK:n=aA;break;case vg.GITHUB:n=AA;break;case vg.TWITTER:n=lA;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:A}=e;return!s&&!a&&!i&&!o?null:o?t.startsWith("saml.")?nf._create(t,o):IA._fromParams({providerId:t,signInMethod:t,pendingToken:o,idToken:i,accessToken:s}):new $h(t).credential({idToken:i,accessToken:s,rawNonce:A})}return r instanceof js?n.credentialFromError(r):n.credentialFromResult(r)}function ca(r,e){return e.catch(t=>{throw t instanceof js&&xoe(r,t),t}).then(t=>{const n=t.operationType,i=t.user;return{operationType:n,credential:_oe(t),additionalUserInfo:hse(t),user:av.getOrCreate(i)}})}async function tx(r,e){const t=await e;return{verificationId:t.verificationId,confirm:n=>ca(r,t.confirm(n))}}class Boe{constructor(e,t){this.resolver=t,this.auth=voe(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ca(vR(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let av=class Gg{constructor(e){this._delegate=e,this.multiFactor=mse(e)}static getOrCreate(e){return Gg.USER_MAP.has(e)||Gg.USER_MAP.set(e,new Gg(e)),Gg.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ca(this.auth,XD(this._delegate,e))}async linkWithPhoneNumber(e,t){return tx(this.auth,Qse(this._delegate,e,t))}async linkWithPopup(e){return ca(this.auth,Wse(this._delegate,e,wc))}async linkWithRedirect(e){return await ex(Mn(this.auth)),iae(this._delegate,e,wc)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ca(this.auth,JD(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return tx(this.auth,Hse(this._delegate,e,t))}reauthenticateWithPopup(e){return ca(this.auth,qse(this._delegate,e,wc))}async reauthenticateWithRedirect(e){return await ex(Mn(this.auth)),rae(this._delegate,e,wc)}sendEmailVerification(e){return rse(this._delegate,e)}async unlink(e){return await Vie(this._delegate,e),this}updateEmail(e){return ase(this._delegate,e)}updatePassword(e){return ose(this._delegate,e)}updatePhoneNumber(e){return Vse(this._delegate,e)}updateProfile(e){return sse(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return nse(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};av.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=et;class rx{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:n}=e.options;Bg(n,"invalid-api-key",{appName:e.name}),Bg(n,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?wc:void 0;this._delegate=t.initialize({options:{persistence:Coe(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Fne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?av.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){bie(this._delegate,e,t)}applyActionCode(e){return zie(this._delegate,e)}checkActionCode(e){return ZD(this._delegate,e)}confirmPasswordReset(e,t){return Kie(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return ca(this._delegate,Wie(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return tse(this._delegate,e)}isSignInWithEmailLink(e){return Jie(this._delegate,e)}async getRedirectResult(){Bg(x_(),this._delegate,"operation-not-supported-in-this-environment");const e=await aae(this._delegate,wc);return e?ca(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){ooe(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:i,error:s,complete:a}=uF(e,t,n);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,t,n){const{next:i,error:s,complete:a}=uF(e,t,n);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,t){return Xie(this._delegate,e,t)}sendPasswordResetEmail(e,t){return Gie(this._delegate,e,t||void 0)}async setPersistence(e){yoe(this._delegate,e);let t;switch(e){case Qa.SESSION:t=md;break;case Qa.LOCAL:t=await Va(em)._isAvailable()?em:JB;break;case Qa.NONE:t=rf;break;default:return fs("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ca(this._delegate,Hie(this._delegate))}signInWithCredential(e){return ca(this._delegate,ev(this._delegate,e))}signInWithCustomToken(e){return ca(this._delegate,jie(this._delegate,e))}signInWithEmailAndPassword(e,t){return ca(this._delegate,Yie(this._delegate,e,t))}signInWithEmailLink(e,t){return ca(this._delegate,Zie(this._delegate,e,t))}signInWithPhoneNumber(e,t){return tx(this._delegate,Ose(this._delegate,e,t))}async signInWithPopup(e){return Bg(x_(),this._delegate,"operation-not-supported-in-this-environment"),ca(this._delegate,zse(this._delegate,e,wc))}async signInWithRedirect(e){return Bg(x_(),this._delegate,"operation-not-supported-in-this-environment"),await ex(this._delegate),eae(this._delegate,e,wc)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return qie(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}rx.Persistence=Qa;function uF(r,e,t){let n=r;typeof r!="function"&&({next:n,error:e,complete:t}=r);const i=n;return{next:a=>i(a&&av.getOrCreate(a)),error:e,complete:t}}function Coe(r,e){const t=boe(r,e);if(typeof self<"u"&&!t.includes(em)&&t.push(em),typeof window<"u")for(const n of[JB,md])t.includes(n)||t.push(n);return t.includes(rf)||t.push(rf),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{static credential(e,t){return yd.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new yd(vR(Ka.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}a5.PHONE_SIGN_IN_METHOD=yd.PHONE_SIGN_IN_METHOD;a5.PROVIDER_ID=yd.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eoe=et;class Soe{constructor(e,t,n=Ka.app()){var i;Eoe((i=n.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Use(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ioe="auth-compat";function koe(r){r.INTERNAL.registerComponent(new SA(Ioe,e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new rx(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lh.EMAIL_SIGNIN,PASSWORD_RESET:lh.PASSWORD_RESET,RECOVER_EMAIL:lh.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:lh.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:lh.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:lh.VERIFY_EMAIL}},EmailAuthProvider:iu,FacebookAuthProvider:aA,GithubAuthProvider:AA,GoogleAuthProvider:oA,OAuthProvider:$h,SAMLAuthProvider:rw,PhoneAuthProvider:a5,PhoneMultiFactorGenerator:gR,RecaptchaVerifier:Soe,TwitterAuthProvider:lA,Auth:rx,AuthCredential:Nf,Error:js}).setInstantiationMode("LAZY").setMultipleInstances(!1)),r.registerVersion(Aoe,loe)}koe(Ka);var dF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tc,xR;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,_){function v(){}v.prototype=_.prototype,L.F=_.prototype,L.prototype=new v,L.prototype.constructor=L,L.D=function(T,E,x){for(var F=Array(arguments.length-2),k=2;k<arguments.length;k++)F[k-2]=arguments[k];return _.prototype[E].apply(T,F)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,_,v){v||(v=0);const T=Array(16);if(typeof _=="string")for(var E=0;E<16;++E)T[E]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(E=0;E<16;++E)T[E]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=L.g[0],v=L.g[1],E=L.g[2];let x=L.g[3],F;F=_+(x^v&(E^x))+T[0]+3614090360&4294967295,_=v+(F<<7&4294967295|F>>>25),F=x+(E^_&(v^E))+T[1]+3905402710&4294967295,x=_+(F<<12&4294967295|F>>>20),F=E+(v^x&(_^v))+T[2]+606105819&4294967295,E=x+(F<<17&4294967295|F>>>15),F=v+(_^E&(x^_))+T[3]+3250441966&4294967295,v=E+(F<<22&4294967295|F>>>10),F=_+(x^v&(E^x))+T[4]+4118548399&4294967295,_=v+(F<<7&4294967295|F>>>25),F=x+(E^_&(v^E))+T[5]+1200080426&4294967295,x=_+(F<<12&4294967295|F>>>20),F=E+(v^x&(_^v))+T[6]+2821735955&4294967295,E=x+(F<<17&4294967295|F>>>15),F=v+(_^E&(x^_))+T[7]+4249261313&4294967295,v=E+(F<<22&4294967295|F>>>10),F=_+(x^v&(E^x))+T[8]+1770035416&4294967295,_=v+(F<<7&4294967295|F>>>25),F=x+(E^_&(v^E))+T[9]+2336552879&4294967295,x=_+(F<<12&4294967295|F>>>20),F=E+(v^x&(_^v))+T[10]+4294925233&4294967295,E=x+(F<<17&4294967295|F>>>15),F=v+(_^E&(x^_))+T[11]+2304563134&4294967295,v=E+(F<<22&4294967295|F>>>10),F=_+(x^v&(E^x))+T[12]+1804603682&4294967295,_=v+(F<<7&4294967295|F>>>25),F=x+(E^_&(v^E))+T[13]+4254626195&4294967295,x=_+(F<<12&4294967295|F>>>20),F=E+(v^x&(_^v))+T[14]+2792965006&4294967295,E=x+(F<<17&4294967295|F>>>15),F=v+(_^E&(x^_))+T[15]+1236535329&4294967295,v=E+(F<<22&4294967295|F>>>10),F=_+(E^x&(v^E))+T[1]+4129170786&4294967295,_=v+(F<<5&4294967295|F>>>27),F=x+(v^E&(_^v))+T[6]+3225465664&4294967295,x=_+(F<<9&4294967295|F>>>23),F=E+(_^v&(x^_))+T[11]+643717713&4294967295,E=x+(F<<14&4294967295|F>>>18),F=v+(x^_&(E^x))+T[0]+3921069994&4294967295,v=E+(F<<20&4294967295|F>>>12),F=_+(E^x&(v^E))+T[5]+3593408605&4294967295,_=v+(F<<5&4294967295|F>>>27),F=x+(v^E&(_^v))+T[10]+38016083&4294967295,x=_+(F<<9&4294967295|F>>>23),F=E+(_^v&(x^_))+T[15]+3634488961&4294967295,E=x+(F<<14&4294967295|F>>>18),F=v+(x^_&(E^x))+T[4]+3889429448&4294967295,v=E+(F<<20&4294967295|F>>>12),F=_+(E^x&(v^E))+T[9]+568446438&4294967295,_=v+(F<<5&4294967295|F>>>27),F=x+(v^E&(_^v))+T[14]+3275163606&4294967295,x=_+(F<<9&4294967295|F>>>23),F=E+(_^v&(x^_))+T[3]+4107603335&4294967295,E=x+(F<<14&4294967295|F>>>18),F=v+(x^_&(E^x))+T[8]+1163531501&4294967295,v=E+(F<<20&4294967295|F>>>12),F=_+(E^x&(v^E))+T[13]+2850285829&4294967295,_=v+(F<<5&4294967295|F>>>27),F=x+(v^E&(_^v))+T[2]+4243563512&4294967295,x=_+(F<<9&4294967295|F>>>23),F=E+(_^v&(x^_))+T[7]+1735328473&4294967295,E=x+(F<<14&4294967295|F>>>18),F=v+(x^_&(E^x))+T[12]+2368359562&4294967295,v=E+(F<<20&4294967295|F>>>12),F=_+(v^E^x)+T[5]+4294588738&4294967295,_=v+(F<<4&4294967295|F>>>28),F=x+(_^v^E)+T[8]+2272392833&4294967295,x=_+(F<<11&4294967295|F>>>21),F=E+(x^_^v)+T[11]+1839030562&4294967295,E=x+(F<<16&4294967295|F>>>16),F=v+(E^x^_)+T[14]+4259657740&4294967295,v=E+(F<<23&4294967295|F>>>9),F=_+(v^E^x)+T[1]+2763975236&4294967295,_=v+(F<<4&4294967295|F>>>28),F=x+(_^v^E)+T[4]+1272893353&4294967295,x=_+(F<<11&4294967295|F>>>21),F=E+(x^_^v)+T[7]+4139469664&4294967295,E=x+(F<<16&4294967295|F>>>16),F=v+(E^x^_)+T[10]+3200236656&4294967295,v=E+(F<<23&4294967295|F>>>9),F=_+(v^E^x)+T[13]+681279174&4294967295,_=v+(F<<4&4294967295|F>>>28),F=x+(_^v^E)+T[0]+3936430074&4294967295,x=_+(F<<11&4294967295|F>>>21),F=E+(x^_^v)+T[3]+3572445317&4294967295,E=x+(F<<16&4294967295|F>>>16),F=v+(E^x^_)+T[6]+76029189&4294967295,v=E+(F<<23&4294967295|F>>>9),F=_+(v^E^x)+T[9]+3654602809&4294967295,_=v+(F<<4&4294967295|F>>>28),F=x+(_^v^E)+T[12]+3873151461&4294967295,x=_+(F<<11&4294967295|F>>>21),F=E+(x^_^v)+T[15]+530742520&4294967295,E=x+(F<<16&4294967295|F>>>16),F=v+(E^x^_)+T[2]+3299628645&4294967295,v=E+(F<<23&4294967295|F>>>9),F=_+(E^(v|~x))+T[0]+4096336452&4294967295,_=v+(F<<6&4294967295|F>>>26),F=x+(v^(_|~E))+T[7]+1126891415&4294967295,x=_+(F<<10&4294967295|F>>>22),F=E+(_^(x|~v))+T[14]+2878612391&4294967295,E=x+(F<<15&4294967295|F>>>17),F=v+(x^(E|~_))+T[5]+4237533241&4294967295,v=E+(F<<21&4294967295|F>>>11),F=_+(E^(v|~x))+T[12]+1700485571&4294967295,_=v+(F<<6&4294967295|F>>>26),F=x+(v^(_|~E))+T[3]+2399980690&4294967295,x=_+(F<<10&4294967295|F>>>22),F=E+(_^(x|~v))+T[10]+4293915773&4294967295,E=x+(F<<15&4294967295|F>>>17),F=v+(x^(E|~_))+T[1]+2240044497&4294967295,v=E+(F<<21&4294967295|F>>>11),F=_+(E^(v|~x))+T[8]+1873313359&4294967295,_=v+(F<<6&4294967295|F>>>26),F=x+(v^(_|~E))+T[15]+4264355552&4294967295,x=_+(F<<10&4294967295|F>>>22),F=E+(_^(x|~v))+T[6]+2734768916&4294967295,E=x+(F<<15&4294967295|F>>>17),F=v+(x^(E|~_))+T[13]+1309151649&4294967295,v=E+(F<<21&4294967295|F>>>11),F=_+(E^(v|~x))+T[4]+4149444226&4294967295,_=v+(F<<6&4294967295|F>>>26),F=x+(v^(_|~E))+T[11]+3174756917&4294967295,x=_+(F<<10&4294967295|F>>>22),F=E+(_^(x|~v))+T[2]+718787259&4294967295,E=x+(F<<15&4294967295|F>>>17),F=v+(x^(E|~_))+T[9]+3951481745&4294967295,L.g[0]=L.g[0]+_&4294967295,L.g[1]=L.g[1]+(E+(F<<21&4294967295|F>>>11))&4294967295,L.g[2]=L.g[2]+E&4294967295,L.g[3]=L.g[3]+x&4294967295}n.prototype.v=function(L,_){_===void 0&&(_=L.length);const v=_-this.blockSize,T=this.C;let E=this.h,x=0;for(;x<_;){if(E==0)for(;x<=v;)i(this,L,x),x+=this.blockSize;if(typeof L=="string"){for(;x<_;)if(T[E++]=L.charCodeAt(x++),E==this.blockSize){i(this,T),E=0;break}}else for(;x<_;)if(T[E++]=L[x++],E==this.blockSize){i(this,T),E=0;break}}this.h=E,this.o+=_},n.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var _=1;_<L.length-8;++_)L[_]=0;_=this.o*8;for(var v=L.length-8;v<L.length;++v)L[v]=_&255,_/=256;for(this.v(L),L=Array(16),_=0,v=0;v<4;++v)for(let T=0;T<32;T+=8)L[_++]=this.g[v]>>>T&255;return L};function s(L,_){var v=o;return Object.prototype.hasOwnProperty.call(v,L)?v[L]:v[L]=_(L)}function a(L,_){this.h=_;const v=[];let T=!0;for(let E=L.length-1;E>=0;E--){const x=L[E]|0;T&&x==_||(v[E]=x,T=!1)}this.g=v}var o={};function A(L){return-128<=L&&L<128?s(L,function(_){return new a([_|0],_<0?-1:0)}):new a([L|0],L<0?-1:0)}function l(L){if(isNaN(L)||!isFinite(L))return u;if(L<0)return y(l(-L));const _=[];let v=1;for(let T=0;L>=v;T++)_[T]=L/v|0,v*=4294967296;return new a(_,0)}function c(L,_){if(L.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(L.charAt(0)=="-")return y(c(L.substring(1),_));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=l(Math.pow(_,8));let T=u;for(let x=0;x<L.length;x+=8){var E=Math.min(8,L.length-x);const F=parseInt(L.substring(x,x+E),_);E<8?(E=l(Math.pow(_,E)),T=T.j(E).add(l(F))):(T=T.j(v),T=T.add(l(F)))}return T}var u=A(0),h=A(1),d=A(16777216);r=a.prototype,r.m=function(){if(f(this))return-y(this).m();let L=0,_=1;for(let v=0;v<this.g.length;v++){const T=this.i(v);L+=(T>=0?T:4294967296+T)*_,_*=4294967296}return L},r.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(p(this))return"0";if(f(this))return"-"+y(this).toString(L);const _=l(Math.pow(L,6));var v=this;let T="";for(;;){const E=C(v,_).g;v=b(v,E.j(_));let x=((v.g.length>0?v.g[0]:v.h)>>>0).toString(L);if(v=E,p(v))return x+T;for(;x.length<6;)x="0"+x;T=x+T}},r.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function p(L){if(L.h!=0)return!1;for(let _=0;_<L.g.length;_++)if(L.g[_]!=0)return!1;return!0}function f(L){return L.h==-1}r.l=function(L){return L=b(this,L),f(L)?-1:p(L)?0:1};function y(L){const _=L.g.length,v=[];for(let T=0;T<_;T++)v[T]=~L.g[T];return new a(v,~L.h).add(h)}r.abs=function(){return f(this)?y(this):this},r.add=function(L){const _=Math.max(this.g.length,L.g.length),v=[];let T=0;for(let E=0;E<=_;E++){let x=T+(this.i(E)&65535)+(L.i(E)&65535),F=(x>>>16)+(this.i(E)>>>16)+(L.i(E)>>>16);T=F>>>16,x&=65535,F&=65535,v[E]=F<<16|x}return new a(v,v[v.length-1]&-2147483648?-1:0)};function b(L,_){return L.add(y(_))}r.j=function(L){if(p(this)||p(L))return u;if(f(this))return f(L)?y(this).j(y(L)):y(y(this).j(L));if(f(L))return y(this.j(y(L)));if(this.l(d)<0&&L.l(d)<0)return l(this.m()*L.m());const _=this.g.length+L.g.length,v=[];for(var T=0;T<2*_;T++)v[T]=0;for(T=0;T<this.g.length;T++)for(let E=0;E<L.g.length;E++){const x=this.i(T)>>>16,F=this.i(T)&65535,k=L.i(E)>>>16,Z=L.i(E)&65535;v[2*T+2*E]+=F*Z,B(v,2*T+2*E),v[2*T+2*E+1]+=x*Z,B(v,2*T+2*E+1),v[2*T+2*E+1]+=F*k,B(v,2*T+2*E+1),v[2*T+2*E+2]+=x*k,B(v,2*T+2*E+2)}for(L=0;L<_;L++)v[L]=v[2*L+1]<<16|v[2*L];for(L=_;L<2*_;L++)v[L]=0;return new a(v,0)};function B(L,_){for(;(L[_]&65535)!=L[_];)L[_+1]+=L[_]>>>16,L[_]&=65535,_++}function S(L,_){this.g=L,this.h=_}function C(L,_){if(p(_))throw Error("division by zero");if(p(L))return new S(u,u);if(f(L))return _=C(y(L),_),new S(y(_.g),y(_.h));if(f(_))return _=C(L,y(_)),new S(y(_.g),_.h);if(L.g.length>30){if(f(L)||f(_))throw Error("slowDivide_ only works with positive integers.");for(var v=h,T=_;T.l(L)<=0;)v=P(v),T=P(T);var E=M(v,1),x=M(T,1);for(T=M(T,2),v=M(v,2);!p(T);){var F=x.add(T);F.l(L)<=0&&(E=E.add(v),x=F),T=M(T,1),v=M(v,1)}return _=b(L,E.j(_)),new S(E,_)}for(E=u;L.l(_)>=0;){for(v=Math.max(1,Math.floor(L.m()/_.m())),T=Math.ceil(Math.log(v)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),x=l(v),F=x.j(_);f(F)||F.l(L)>0;)v-=T,x=l(v),F=x.j(_);p(x)&&(x=h),E=E.add(x),L=b(L,F)}return new S(E,L)}r.B=function(L){return C(this,L).h},r.and=function(L){const _=Math.max(this.g.length,L.g.length),v=[];for(let T=0;T<_;T++)v[T]=this.i(T)&L.i(T);return new a(v,this.h&L.h)},r.or=function(L){const _=Math.max(this.g.length,L.g.length),v=[];for(let T=0;T<_;T++)v[T]=this.i(T)|L.i(T);return new a(v,this.h|L.h)},r.xor=function(L){const _=Math.max(this.g.length,L.g.length),v=[];for(let T=0;T<_;T++)v[T]=this.i(T)^L.i(T);return new a(v,this.h^L.h)};function P(L){const _=L.g.length+1,v=[];for(let T=0;T<_;T++)v[T]=L.i(T)<<1|L.i(T-1)>>>31;return new a(v,L.h)}function M(L,_){const v=_>>5;_%=32;const T=L.g.length-v,E=[];for(let x=0;x<T;x++)E[x]=_>0?L.i(x+v)>>>_|L.i(x+v+1)<<32-_:L.i(x+v);return new a(E,L.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,xR=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=c,Tc=a}).apply(typeof dF<"u"?dF:typeof self<"u"?self:typeof window<"u"?window:{});var Ey=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BR,Kg,CR,Ab,nx,ER,SR,IR;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ey=="object"&&Ey];for(var U=0;U<m.length;++U){var H=m[U];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var n=t(this);function i(m,U){if(U)e:{var H=n;m=m.split(".");for(var oe=0;oe<m.length-1;oe++){var Te=m[oe];if(!(Te in H))break e;H=H[Te]}m=m[m.length-1],oe=H[m],U=U(oe),U!=oe&&U!=null&&e(H,m,{configurable:!0,writable:!0,value:U})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(U){var H=[],oe;for(oe in U)Object.prototype.hasOwnProperty.call(U,oe)&&H.push([oe,U[oe]]);return H}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(m){var U=typeof m;return U=="object"&&m!=null||U=="function"}function A(m,U,H){return m.call.apply(m.bind,arguments)}function l(m,U,H){return l=A,l.apply(null,arguments)}function c(m,U){var H=Array.prototype.slice.call(arguments,1);return function(){var oe=H.slice();return oe.push.apply(oe,arguments),m.apply(this,oe)}}function u(m,U){function H(){}H.prototype=U.prototype,m.Z=U.prototype,m.prototype=new H,m.prototype.constructor=m,m.Ob=function(oe,Te,Re){for(var st=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)st[zt-2]=arguments[zt];return U.prototype[Te].apply(oe,st)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function d(m){const U=m.length;if(U>0){const H=Array(U);for(let oe=0;oe<U;oe++)H[oe]=m[oe];return H}return[]}function p(m,U){for(let oe=1;oe<arguments.length;oe++){const Te=arguments[oe];var H=typeof Te;if(H=H!="object"?H:Te?Array.isArray(Te)?"array":H:"null",H=="array"||H=="object"&&typeof Te.length=="number"){H=m.length||0;const Re=Te.length||0;m.length=H+Re;for(let st=0;st<Re;st++)m[H+st]=Te[st]}else m.push(Te)}}class f{constructor(U,H){this.i=U,this.j=H,this.h=0,this.g=null}get(){let U;return this.h>0?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}function y(m){a.setTimeout(()=>{throw m},0)}function b(){var m=L;let U=null;return m.g&&(U=m.g,m.g=m.g.next,m.g||(m.h=null),U.next=null),U}class B{constructor(){this.h=this.g=null}add(U,H){const oe=S.get();oe.set(U,H),this.h?this.h.next=oe:this.g=oe,this.h=oe}}var S=new f(()=>new C,m=>m.reset());class C{constructor(){this.next=this.g=this.h=null}set(U,H){this.h=U,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let P,M=!1,L=new B,_=()=>{const m=Promise.resolve(void 0);P=()=>{m.then(v)}};function v(){for(var m;m=b();){try{m.h.call(m.g)}catch(H){y(H)}var U=S;U.j(m),U.h<100&&(U.h++,m.next=U.g,U.g=m)}M=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(m,U){this.type=m,this.g=this.target=U,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var x=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,U=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const H=()=>{};a.addEventListener("test",H,U),a.removeEventListener("test",H,U)}catch{}return m})();function F(m){return/^[\s\xa0]*$/.test(m)}function k(m,U){E.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,U)}u(k,E),k.prototype.init=function(m,U){const H=this.type=m.type,oe=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=U,U=m.relatedTarget,U||(H=="mouseover"?U=m.fromElement:H=="mouseout"&&(U=m.toElement)),this.relatedTarget=U,oe?(this.clientX=oe.clientX!==void 0?oe.clientX:oe.pageX,this.clientY=oe.clientY!==void 0?oe.clientY:oe.pageY,this.screenX=oe.screenX||0,this.screenY=oe.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&k.Z.h.call(this)},k.prototype.h=function(){k.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ue=0;function ne(m,U,H,oe,Te){this.listener=m,this.proxy=null,this.src=U,this.type=H,this.capture=!!oe,this.ha=Te,this.key=++ue,this.da=this.fa=!1}function j(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function G(m,U,H){for(const oe in m)U.call(H,m[oe],oe,m)}function pe(m,U){for(const H in m)U.call(void 0,m[H],H,m)}function q(m){const U={};for(const H in m)U[H]=m[H];return U}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(m,U){let H,oe;for(let Te=1;Te<arguments.length;Te++){oe=arguments[Te];for(H in oe)m[H]=oe[H];for(let Re=0;Re<N.length;Re++)H=N[Re],Object.prototype.hasOwnProperty.call(oe,H)&&(m[H]=oe[H])}}function V(m){this.src=m,this.g={},this.h=0}V.prototype.add=function(m,U,H,oe,Te){const Re=m.toString();m=this.g[Re],m||(m=this.g[Re]=[],this.h++);const st=Ae(m,U,oe,Te);return st>-1?(U=m[st],H||(U.fa=!1)):(U=new ne(U,this.src,Re,!!oe,Te),U.fa=H,m.push(U)),U};function X(m,U){const H=U.type;if(H in m.g){var oe=m.g[H],Te=Array.prototype.indexOf.call(oe,U,void 0),Re;(Re=Te>=0)&&Array.prototype.splice.call(oe,Te,1),Re&&(j(U),m.g[H].length==0&&(delete m.g[H],m.h--))}}function Ae(m,U,H,oe){for(let Te=0;Te<m.length;++Te){const Re=m[Te];if(!Re.da&&Re.listener==U&&Re.capture==!!H&&Re.ha==oe)return Te}return-1}var te="closure_lm_"+(Math.random()*1e6|0),se={};function de(m,U,H,oe,Te){if(Array.isArray(U)){for(let Re=0;Re<U.length;Re++)de(m,U[Re],H,oe,Te);return null}return H=W(H),m&&m[Z]?m.J(U,H,o(oe)?!!oe.capture:!1,Te):ve(m,U,H,!1,oe,Te)}function ve(m,U,H,oe,Te,Re){if(!U)throw Error("Invalid event type");const st=o(Te)?!!Te.capture:!!Te;let zt=ye(m);if(zt||(m[te]=zt=new V(m)),H=zt.add(U,H,oe,st,Re),H.proxy)return H;if(oe=xe(),H.proxy=oe,oe.src=m,oe.listener=H,m.addEventListener)x||(Te=st),Te===void 0&&(Te=!1),m.addEventListener(U.toString(),oe,Te);else if(m.attachEvent)m.attachEvent(R(U.toString()),oe);else if(m.addListener&&m.removeListener)m.addListener(oe);else throw Error("addEventListener and attachEvent are unavailable.");return H}function xe(){function m(H){return U.call(m.src,m.listener,H)}const U=$;return m}function Oe(m,U,H,oe,Te){if(Array.isArray(U))for(var Re=0;Re<U.length;Re++)Oe(m,U[Re],H,oe,Te);else oe=o(oe)?!!oe.capture:!!oe,H=W(H),m&&m[Z]?(m=m.i,Re=String(U).toString(),Re in m.g&&(U=m.g[Re],H=Ae(U,H,oe,Te),H>-1&&(j(U[H]),Array.prototype.splice.call(U,H,1),U.length==0&&(delete m.g[Re],m.h--)))):m&&(m=ye(m))&&(U=m.g[U.toString()],m=-1,U&&(m=Ae(U,H,oe,Te)),(H=m>-1?U[m]:null)&&Ve(H))}function Ve(m){if(typeof m!="number"&&m&&!m.da){var U=m.src;if(U&&U[Z])X(U.i,m);else{var H=m.type,oe=m.proxy;U.removeEventListener?U.removeEventListener(H,oe,m.capture):U.detachEvent?U.detachEvent(R(H),oe):U.addListener&&U.removeListener&&U.removeListener(oe),(H=ye(U))?(X(H,m),H.h==0&&(H.src=null,U[te]=null)):j(m)}}}function R(m){return m in se?se[m]:se[m]="on"+m}function $(m,U){if(m.da)m=!0;else{U=new k(U,this);const H=m.listener,oe=m.ha||m.src;m.fa&&Ve(m),m=H.call(oe,U)}return m}function ye(m){return m=m[te],m instanceof V?m:null}var re="__closure_events_fn_"+(Math.random()*1e9>>>0);function W(m){return typeof m=="function"?m:(m[re]||(m[re]=function(U){return m.handleEvent(U)}),m[re])}function ae(){T.call(this),this.i=new V(this),this.M=this,this.G=null}u(ae,T),ae.prototype[Z]=!0,ae.prototype.removeEventListener=function(m,U,H,oe){Oe(this,m,U,H,oe)};function Ce(m,U){var H,oe=m.G;if(oe)for(H=[];oe;oe=oe.G)H.push(oe);if(m=m.M,oe=U.type||U,typeof U=="string")U=new E(U,m);else if(U instanceof E)U.target=U.target||m;else{var Te=U;U=new E(oe,m),Q(U,Te)}Te=!0;let Re,st;if(H)for(st=H.length-1;st>=0;st--)Re=U.g=H[st],Te=_e(Re,oe,!0,U)&&Te;if(Re=U.g=m,Te=_e(Re,oe,!0,U)&&Te,Te=_e(Re,oe,!1,U)&&Te,H)for(st=0;st<H.length;st++)Re=U.g=H[st],Te=_e(Re,oe,!1,U)&&Te}ae.prototype.N=function(){if(ae.Z.N.call(this),this.i){var m=this.i;for(const U in m.g){const H=m.g[U];for(let oe=0;oe<H.length;oe++)j(H[oe]);delete m.g[U],m.h--}}this.G=null},ae.prototype.J=function(m,U,H,oe){return this.i.add(String(m),U,!1,H,oe)},ae.prototype.K=function(m,U,H,oe){return this.i.add(String(m),U,!0,H,oe)};function _e(m,U,H,oe){if(U=m.i.g[String(U)],!U)return!0;U=U.concat();let Te=!0;for(let Re=0;Re<U.length;++Re){const st=U[Re];if(st&&!st.da&&st.capture==H){const zt=st.listener,en=st.ha||st.src;st.fa&&X(m.i,st),Te=zt.call(en,oe)!==!1&&Te}}return Te&&!oe.defaultPrevented}function be(m,U){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=l(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(U)>2147483647?-1:a.setTimeout(m,U||0)}function Ie(m){m.g=be(()=>{m.g=null,m.i&&(m.i=!1,Ie(m))},m.l);const U=m.h;m.h=null,m.m.apply(null,U)}class Qe extends T{constructor(U,H){super(),this.m=U,this.l=H,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:Ie(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(m){T.call(this),this.h=m,this.g={}}u(Pe,T);var He=[];function At(m){G(m.g,function(U,H){this.g.hasOwnProperty(H)&&Ve(U)},m),m.g={}}Pe.prototype.N=function(){Pe.Z.N.call(this),At(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tt=a.JSON.stringify,lt=a.JSON.parse,xt=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function at(){}function ut(){}var rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function it(){E.call(this,"d")}u(it,E);function pt(){E.call(this,"c")}u(pt,E);var Rt={},Bt=null;function Qt(){return Bt=Bt||new ae}Rt.Ia="serverreachability";function Ut(m){E.call(this,Rt.Ia,m)}u(Ut,E);function lr(m){const U=Qt();Ce(U,new Ut(U))}Rt.STAT_EVENT="statevent";function kr(m,U){E.call(this,Rt.STAT_EVENT,m),this.stat=U}u(kr,E);function Tt(m){const U=Qt();Ce(U,new kr(U,m))}Rt.Ja="timingevent";function Ft(m,U){E.call(this,Rt.Ja,m),this.size=U}u(Ft,E);function sr(m,U){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},U)}function pi(){this.g=!0}pi.prototype.ua=function(){this.g=!1};function Pn(m,U,H,oe,Te,Re){m.info(function(){if(m.g)if(Re){var st="",zt=Re.split("&");for(let pr=0;pr<zt.length;pr++){var en=zt[pr].split("=");if(en.length>1){const ln=en[0];en=en[1];const Vi=ln.split("_");st=Vi.length>=2&&Vi[1]=="type"?st+(ln+"="+en+"&"):st+(ln+"=redacted&")}}}else st=null;else st=Re;return"XMLHTTP REQ ("+oe+") [attempt "+Te+"]: "+U+`
`+H+`
`+st})}function gs(m,U,H,oe,Te,Re,st){m.info(function(){return"XMLHTTP RESP ("+oe+") [ attempt "+Te+"]: "+U+`
`+H+`
`+Re+" "+st})}function xi(m,U,H,oe){m.info(function(){return"XMLHTTP TEXT ("+U+"): "+xa(m,H)+(oe?" "+oe:"")})}function Ot(m,U){m.info(function(){return"TIMEOUT: "+U})}pi.prototype.info=function(){};function xa(m,U){if(!m.g)return U;if(!U)return null;try{const Re=JSON.parse(U);if(Re){for(m=0;m<Re.length;m++)if(Array.isArray(Re[m])){var H=Re[m];if(!(H.length<2)){var oe=H[1];if(Array.isArray(oe)&&!(oe.length<1)){var Te=oe[0];if(Te!="noop"&&Te!="stop"&&Te!="close")for(let st=1;st<oe.length;st++)oe[st]=""}}}}return tt(Re)}catch{return U}}var Bi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ji;function Hr(){}u(Hr,at),Hr.prototype.g=function(){return new XMLHttpRequest},Ji=new Hr;function Wr(m){return encodeURIComponent(String(m))}function Zn(m){var U=1;m=m.split(":");const H=[];for(;U>0&&m.length;)H.push(m.shift()),U--;return m.length&&H.push(m.join(":")),H}function Ci(m,U,H,oe){this.j=m,this.i=U,this.l=H,this.S=oe||1,this.V=new Pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ba}function Ba(){this.i=null,this.g="",this.h=!1}var Zi={},es={};function Ri(m,U,H){m.M=1,m.A=ei(gr(U)),m.u=H,m.R=!0,ts(m,null)}function ts(m,U){m.F=Date.now(),Qi(m),m.B=gr(m.A);var H=m.B,oe=m.S;Array.isArray(oe)||(oe=[String(oe)]),Xt(H.i,"t",oe),m.C=0,H=m.j.L,m.h=new Ba,m.g=bt(m.j,H?U:null,!m.u),m.P>0&&(m.O=new Qe(l(m.Y,m,m.g),m.P)),U=m.V,H=m.g,oe=m.ba;var Te="readystatechange";Array.isArray(Te)||(Te&&(He[0]=Te.toString()),Te=He);for(let Re=0;Re<Te.length;Re++){const st=de(H,Te[Re],oe||U.handleEvent,!1,U.h||U);if(!st)break;U.g[st.key]=st}U=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),U["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,U)):(m.v="GET",m.g.ea(m.B,m.v,null,U)),lr(),Pn(m.i,m.v,m.B,m.l,m.S,m.u)}Ci.prototype.ba=function(m){m=m.target;const U=this.O;U&&sa(m)==3?U.j():this.Y(m)},Ci.prototype.Y=function(m){try{if(m==this.g)e:{const zt=sa(this.g),en=this.g.ya(),pr=this.g.ca();if(!(zt<3)&&(zt!=3||this.g&&(this.h.h||this.g.la()||Nl(this.g)))){this.K||zt!=4||en==7||(en==8||pr<=0?lr(3):lr(2)),Ys(this);var U=this.g.ca();this.X=U;var H=Ui(this);if(this.o=U==200,gs(this.i,this.v,this.B,this.l,this.S,zt,U),this.o){if(this.U&&!this.L){t:{if(this.g){var oe,Te=this.g;if((oe=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(oe)){var Re=oe;break t}}Re=null}if(m=Re)xi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Js(this,m);else{this.o=!1,this.m=3,Tt(12),Ca(this),Xs(this);break e}}if(this.R){m=!0;let ln;for(;!this.K&&this.C<H.length;)if(ln=Oi(this,H),ln==es){zt==4&&(this.m=4,Tt(14),m=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Zi){this.m=4,Tt(15),xi(this.i,this.l,H,"[Invalid Chunk]"),m=!1;break}else xi(this.i,this.l,ln,null),Js(this,ln);if(Mi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||H.length!=0||this.h.h||(this.m=1,Tt(16),m=!1),this.o=this.o&&m,!m)xi(this.i,this.l,H,"[Invalid Chunked Response]"),Ca(this),Xs(this);else if(H.length>0&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.aa&&!st.P&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Rl(st),st.P=!0,Tt(11))}}else xi(this.i,this.l,H,null),Js(this,H);zt==4&&Ca(this),this.o&&!this.K&&(zt==4?he(this.j,this):(this.o=!1,Qi(this)))}else MA(this.g),U==400&&H.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),Ca(this),Xs(this)}}}catch{}finally{}};function Ui(m){if(!Mi(m))return m.g.la();const U=Nl(m.g);if(U==="")return"";let H="";const oe=U.length,Te=sa(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Ca(m),Xs(m),"";m.h.i=new a.TextDecoder}for(let Re=0;Re<oe;Re++)m.h.h=!0,H+=m.h.i.decode(U[Re],{stream:!(Te&&Re==oe-1)});return U.length=0,m.h.g+=H,m.C=0,m.h.g}function Mi(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Oi(m,U){var H=m.C,oe=U.indexOf(`
`,H);return oe==-1?es:(H=Number(U.substring(H,oe)),isNaN(H)?Zi:(oe+=1,oe+H>U.length?es:(U=U.slice(oe,oe+H),m.C=oe+H,U)))}Ci.prototype.cancel=function(){this.K=!0,Ca(this)};function Qi(m){m.T=Date.now()+m.H,Ws(m,m.H)}function Ws(m,U){if(m.D!=null)throw Error("WatchDog timer not null");m.D=sr(l(m.aa,m),U)}function Ys(m){m.D&&(a.clearTimeout(m.D),m.D=null)}Ci.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ot(this.i,this.B),this.M!=2&&(lr(),Tt(17)),Ca(this),this.m=2,Xs(this)):Ws(this,this.T-m)};function Xs(m){m.j.I==0||m.K||he(m.j,m)}function Ca(m){Ys(m);var U=m.O;U&&typeof U.dispose=="function"&&U.dispose(),m.O=null,At(m.V),m.g&&(U=m.g,m.g=null,U.abort(),U.dispose())}function Js(m,U){try{var H=m.j;if(H.I!=0&&(H.g==m||ea(H.h,m))){if(!m.L&&ea(H.h,m)&&H.I==3){try{var oe=H.Ba.g.parse(U)}catch{oe=null}if(Array.isArray(oe)&&oe.length==3){var Te=oe;if(Te[0]==0){e:if(!H.v){if(H.g)if(H.g.F+3e3<m.F)K(H),Go(H);else break e;po(H),Tt(18)}}else H.xa=Te[1],0<H.xa-H.K&&Te[2]<37500&&H.F&&H.A==0&&!H.C&&(H.C=sr(l(H.Va,H),6e3));Hi(H.h)<=1&&H.ta&&(H.ta=void 0)}else Se(H,11)}else if((m.L||H.g==m)&&K(H),!F(U))for(Te=H.Ba.g.parse(U),U=0;U<Te.length;U++){let pr=Te[U];const ln=pr[0];if(!(ln<=H.K))if(H.K=ln,pr=pr[1],H.I==2)if(pr[0]=="c"){H.M=pr[1],H.ba=pr[2];const Vi=pr[3];Vi!=null&&(H.ka=Vi,H.j.info("VER="+H.ka));const Rs=pr[4];Rs!=null&&(H.za=Rs,H.j.info("SVER="+H.za));const pn=pr[5];pn!=null&&typeof pn=="number"&&pn>0&&(oe=1.5*pn,H.O=oe,H.j.info("backChannelRequestTimeoutMs_="+oe)),oe=H;const ms=m.g;if(ms){const Xa=ms.g?ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var Re=oe.h;Re.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(Re.j=Re.l,Re.g=new Set,Re.h&&(mi(Re,Re.h),Re.h=null))}if(oe.G){const QA=ms.g?ms.g.getResponseHeader("X-HTTP-Session-Id"):null;QA&&(oe.wa=QA,ur(oe.J,oe.G,QA))}}H.I=3,H.l&&H.l.ra(),H.aa&&(H.T=Date.now()-m.F,H.j.info("Handshake RTT: "+H.T+"ms")),oe=H;var st=m;if(oe.na=We(oe,oe.L?oe.ba:null,oe.W),st.L){rs(oe.h,st);var zt=st,en=oe.O;en&&(zt.H=en),zt.D&&(Ys(zt),Qi(zt)),oe.g=st}else mu(oe);H.i.length>0&&OA(H)}else pr[0]!="stop"&&pr[0]!="close"||Se(H,7);else H.I==3&&(pr[0]=="stop"||pr[0]=="close"?pr[0]=="stop"?Se(H,7):jo(H):pr[0]!="noop"&&H.l&&H.l.qa(pr),H.A=0)}}lr(4)}catch{}}var Ei=class{constructor(m,U){this.g=m,this.map=U}};function Zs(m){this.l=m||10,a.PerformanceNavigationTiming?(m=a.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cn(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Hi(m){return m.h?1:m.g?m.g.size:0}function ea(m,U){return m.h?m.h==U:m.g?m.g.has(U):!1}function mi(m,U){m.g?m.g.add(U):m.h=U}function rs(m,U){m.h&&m.h==U?m.h=null:m.g&&m.g.has(U)&&m.g.delete(U)}Zs.prototype.cancel=function(){if(this.i=Oo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Oo(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let U=m.i;for(const H of m.g.values())U=U.concat(H.G);return U}return d(m.i)}var Qo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ea(m,U){if(m){m=m.split("&");for(let H=0;H<m.length;H++){const oe=m[H].indexOf("=");let Te,Re=null;oe>=0?(Te=m[H].substring(0,oe),Re=m[H].substring(oe+1)):Te=m[H],U(Te,Re?decodeURIComponent(Re.replace(/\+/g," ")):"")}}}function En(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let U;m instanceof En?(this.l=m.l,ta(this,m.j),this.o=m.o,this.g=m.g,ra(this,m.u),this.h=m.h,ns(this,Jr(m.i)),this.m=m.m):m&&(U=String(m).match(Qo))?(this.l=!1,ta(this,U[1]||"",!0),this.o=Qn(U[2]||""),this.g=Qn(U[3]||"",!0),ra(this,U[4]),this.h=Qn(U[5]||"",!0),ns(this,U[6]||"",!0),this.m=Qn(U[7]||"")):(this.l=!1,this.i=new le(null,this.l))}En.prototype.toString=function(){const m=[];var U=this.j;U&&m.push(Vr(U,Vo,!0),":");var H=this.g;return(H||U=="file")&&(m.push("//"),(U=this.o)&&m.push(Vr(U,Vo,!0),"@"),m.push(Wr(H).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.u,H!=null&&m.push(":",String(H))),(H=this.h)&&(this.g&&H.charAt(0)!="/"&&m.push("/"),m.push(Vr(H,H.charAt(0)=="/"?du:Tl,!0))),(H=this.i.toString())&&m.push("?",H),(H=this.m)&&m.push("#",Vr(H,J)),m.join("")},En.prototype.resolve=function(m){const U=gr(this);let H=!!m.j;H?ta(U,m.j):H=!!m.o,H?U.o=m.o:H=!!m.g,H?U.g=m.g:H=m.u!=null;var oe=m.h;if(H)ra(U,m.u);else if(H=!!m.h){if(oe.charAt(0)!="/")if(this.g&&!this.h)oe="/"+oe;else{var Te=U.h.lastIndexOf("/");Te!=-1&&(oe=U.h.slice(0,Te+1)+oe)}if(Te=oe,Te==".."||Te==".")oe="";else if(Te.indexOf("./")!=-1||Te.indexOf("/.")!=-1){oe=Te.lastIndexOf("/",0)==0,Te=Te.split("/");const Re=[];for(let st=0;st<Te.length;){const zt=Te[st++];zt=="."?oe&&st==Te.length&&Re.push(""):zt==".."?((Re.length>1||Re.length==1&&Re[0]!="")&&Re.pop(),oe&&st==Te.length&&Re.push("")):(Re.push(zt),oe=!0)}oe=Re.join("/")}else oe=Te}return H?U.h=oe:H=m.i.toString()!=="",H?ns(U,Jr(m.i)):H=!!m.m,H&&(U.m=m.m),U};function gr(m){return new En(m)}function ta(m,U,H){m.j=H?Qn(U,!0):U,m.j&&(m.j=m.j.replace(/:$/,""))}function ra(m,U){if(U){if(U=Number(U),isNaN(U)||U<0)throw Error("Bad port number "+U);m.u=U}else m.u=null}function ns(m,U,H){U instanceof le?(m.i=U,an(m.i,m.l)):(H||(U=Vr(U,na)),m.i=new le(U,m.l))}function ur(m,U,H){m.i.set(U,H)}function ei(m){return ur(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Qn(m,U){return m?U?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Vr(m,U,H){return typeof m=="string"?(m=encodeURI(m).replace(U,Ho),H&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ho(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Vo=/[#\/\?@]/g,Tl=/[#\?:]/g,du=/[#\?]/g,na=/[#\?@]/g,J=/#/g;function le(m,U){this.h=this.g=null,this.i=m||null,this.j=!!U}function me(m){m.g||(m.g=new Map,m.h=0,m.i&&Ea(m.i,function(U,H){m.add(decodeURIComponent(U.replace(/\+/g," ")),H)}))}r=le.prototype,r.add=function(m,U){me(this),this.i=null,m=Tr(this,m);let H=this.g.get(m);return H||this.g.set(m,H=[]),H.push(U),this.h+=1,this};function Ue(m,U){me(m),U=Tr(m,U),m.g.has(U)&&(m.i=null,m.h-=m.g.get(U).length,m.g.delete(U))}function Xe(m,U){return me(m),U=Tr(m,U),m.g.has(U)}r.forEach=function(m,U){me(this),this.g.forEach(function(H,oe){H.forEach(function(Te){m.call(U,Te,oe,this)},this)},this)};function ht(m,U){me(m);let H=[];if(typeof U=="string")Xe(m,U)&&(H=H.concat(m.g.get(Tr(m,U))));else for(m=Array.from(m.g.values()),U=0;U<m.length;U++)H=H.concat(m[U]);return H}r.set=function(m,U){return me(this),this.i=null,m=Tr(this,m),Xe(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[U]),this.h+=1,this},r.get=function(m,U){return m?(m=ht(this,m),m.length>0?String(m[0]):U):U};function Xt(m,U,H){Ue(m,U),H.length>0&&(m.i=null,m.g.set(Tr(m,U),d(H)),m.h+=H.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],U=Array.from(this.g.keys());for(let oe=0;oe<U.length;oe++){var H=U[oe];const Te=Wr(H);H=ht(this,H);for(let Re=0;Re<H.length;Re++){let st=Te;H[Re]!==""&&(st+="="+Wr(H[Re])),m.push(st)}}return this.i=m.join("&")};function Jr(m){const U=new le;return U.i=m.i,m.g&&(U.g=new Map(m.g),U.h=m.h),U}function Tr(m,U){return U=String(U),m.j&&(U=U.toLowerCase()),U}function an(m,U){U&&!m.j&&(me(m),m.i=null,m.g.forEach(function(H,oe){const Te=oe.toLowerCase();oe!=Te&&(Ue(this,oe),Xt(this,Te,H))},m)),m.j=U}function ps(m,U){const H=new pi;if(a.Image){const oe=new Image;oe.onload=c(ia,H,"TestLoadImage: loaded",!0,U,oe),oe.onerror=c(ia,H,"TestLoadImage: error",!1,U,oe),oe.onabort=c(ia,H,"TestLoadImage: abort",!1,U,oe),oe.ontimeout=c(ia,H,"TestLoadImage: timeout",!1,U,oe),a.setTimeout(function(){oe.ontimeout&&oe.ontimeout()},1e4),oe.src=m}else U(!1)}function NA(m,U){const H=new pi,oe=new AbortController,Te=setTimeout(()=>{oe.abort(),ia(H,"TestPingServer: timeout",!1,U)},1e4);fetch(m,{signal:oe.signal}).then(Re=>{clearTimeout(Te),Re.ok?ia(H,"TestPingServer: ok",!0,U):ia(H,"TestPingServer: server error",!1,U)}).catch(()=>{clearTimeout(Te),ia(H,"TestPingServer: error",!1,U)})}function ia(m,U,H,oe,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),oe(H)}catch{}}function Kt(){this.g=new xt}function hu(m){this.i=m.Sb||null,this.h=m.ab||!1}u(hu,at),hu.prototype.g=function(){return new Fl(this.i,this.h)};function Fl(m,U){ae.call(this),this.H=m,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}u(Fl,ae),r=Fl.prototype,r.open=function(m,U){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=U,this.readyState=1,Ns(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const U={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(U.body=m),(this.H||a).fetch(new Request(this.D,U)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,DA(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gd(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gd(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var U=m.value?m.value:new Uint8Array(0);(U=this.B.decode(U,{stream:!m.done}))&&(this.response=this.responseText+=U)}m.done?DA(this):Ns(this),this.readyState==3&&Gd(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,DA(this))},r.Na=function(m){this.g&&(this.response=m,DA(this))},r.ga=function(){this.g&&DA(this)};function DA(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ns(m)}r.setRequestHeader=function(m,U){this.A.append(m,U)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],U=this.h.entries();for(var H=U.next();!H.done;)H=H.value,m.push(H[0]+": "+H[1]),H=U.next();return m.join(`\r
`)};function Ns(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Wa(m){let U="";return G(m,function(H,oe){U+=oe,U+=":",U+=H,U+=`\r
`}),U}function fu(m,U,H){e:{for(oe in H){var oe=!1;break e}oe=!0}oe||(H=Wa(H),typeof m=="string"?H!=null&&Wr(H):ur(m,U,H))}function on(m){ae.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}u(on,ae);var Ll=/^https?$/i,gu=["POST","PUT"];r=on.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,U,H,oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);U=U?U.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ji.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(U,String(m),!0),this.B=!1}catch(Re){$o(this,Re);return}if(m=H||"",H=new Map(this.headers),oe)if(Object.getPrototypeOf(oe)===Object.prototype)for(var Te in oe)H.set(Te,oe[Te]);else if(typeof oe.keys=="function"&&typeof oe.get=="function")for(const Re of oe.keys())H.set(Re,oe.get(Re));else throw Error("Unknown input type for opt_headers: "+String(oe));oe=Array.from(H.keys()).find(Re=>Re.toLowerCase()=="content-type"),Te=a.FormData&&m instanceof a.FormData,!(Array.prototype.indexOf.call(gu,U,void 0)>=0)||oe||Te||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Re,st]of H)this.g.setRequestHeader(Re,st);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Re){$o(this,Re)}};function $o(m,U){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=U,m.o=5,RA(m),Pl(m)}function RA(m){m.A||(m.A=!0,Ce(m,"complete"),Ce(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ce(this,"complete"),Ce(this,"abort"),Pl(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pl(this,!0)),on.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?UA(this):this.Xa())},r.Xa=function(){UA(this)};function UA(m){if(m.h&&typeof s<"u"){if(m.v&&sa(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ce(m,"readystatechange"),sa(m)==4){m.h=!1;try{const Re=m.ca();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var H;if(!(H=U)){var oe;if(oe=Re===0){let st=String(m.D).match(Qo)[1]||null;!st&&a.self&&a.self.location&&(st=a.self.location.protocol.slice(0,-1)),oe=!Ll.test(st?st.toLowerCase():"")}H=oe}if(H)Ce(m,"complete"),Ce(m,"success");else{m.o=6;try{var Te=sa(m)>2?m.g.statusText:""}catch{Te=""}m.l=Te+" ["+m.ca()+"]",RA(m)}}finally{Pl(m)}}}}function Pl(m,U){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const H=m.g;m.g=null,U||Ce(m,"ready");try{H.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function sa(m){return m.g?m.g.readyState:0}r.ca=function(){try{return sa(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var U=this.g.responseText;return m&&U.indexOf(m)==0&&(U=U.substring(m.length)),lt(U)}};function Nl(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function MA(m){const U={};m=(m.g&&sa(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let oe=0;oe<m.length;oe++){if(F(m[oe]))continue;var H=Zn(m[oe]);const Te=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Re=U[Te]||[];U[Te]=Re,Re.push(H)}pe(U,function(oe){return oe.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(m,U,H){return H&&H.internalChannelParams&&H.internalChannelParams[m]||U}function Dl(m){this.za=0,this.i=[],this.j=new pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,m),this.Za=Sa("retryDelaySeedMs",1e4,m),this.Ta=Sa("forwardChannelMaxRetries",2,m),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Zs(m&&m.concurrentRequestLimit),this.Ba=new Kt,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Dl.prototype,r.ka=8,r.I=1,r.connect=function(m,U,H,oe){Tt(0),this.W=m,this.H=U||{},H&&oe!==void 0&&(this.H.OSID=H,this.H.OAID=oe),this.F=this.X,this.J=We(this,null,this.W),OA(this)};function jo(m){if(Ko(m),m.I==3){var U=m.V++,H=gr(m.J);if(ur(H,"SID",m.M),ur(H,"RID",U),ur(H,"TYPE","terminate"),Ds(m,H),U=new Ci(m,m.j,U),U.M=2,U.A=ei(gr(H)),H=!1,a.navigator&&a.navigator.sendBeacon)try{H=a.navigator.sendBeacon(U.A.toString(),"")}catch{}!H&&a.Image&&(new Image().src=U.A,H=!0),H||(U.g=bt(U.j,null),U.g.ea(U.A)),U.F=Date.now(),Qi(U)}je(m)}function Go(m){m.g&&(Rl(m),m.g.cancel(),m.g=null)}function Ko(m){Go(m),m.v&&(a.clearTimeout(m.v),m.v=null),K(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&a.clearTimeout(m.m),m.m=null)}function OA(m){if(!Cn(m.h)&&!m.m){m.m=!0;var U=m.Ea;P||_(),M||(P(),M=!0),L.add(U,m),m.D=0}}function Kd(m,U){return Hi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=U.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=sr(l(m.Ea,m,U),we(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Te=new Ci(this,this.j,m);let Re=this.o;if(this.U&&(Re?(Re=q(Re),Q(Re,this.U)):Re=this.U),this.u!==null||this.R||(Te.J=Re,Re=null),this.S)e:{for(var U=0,H=0;H<this.i.length;H++){t:{var oe=this.i[H];if("__data__"in oe.map&&(oe=oe.map.__data__,typeof oe=="string")){oe=oe.length;break t}oe=void 0}if(oe===void 0)break;if(U+=oe,U>4096){U=H;break e}if(U===4096||H===this.i.length-1){U=H+1;break e}}U=1e3}else U=1e3;U=pu(this,Te,U),H=gr(this.J),ur(H,"RID",m),ur(H,"CVER",22),this.G&&ur(H,"X-HTTP-Session-Id",this.G),Ds(this,H),Re&&(this.R?U="headers="+Wr(Wa(Re))+"&"+U:this.u&&fu(H,this.u,Re)),mi(this.h,Te),this.Ra&&ur(H,"TYPE","init"),this.S?(ur(H,"$req",U),ur(H,"SID","null"),Te.U=!0,Ri(Te,H,null)):Ri(Te,H,U),this.I=2}}else this.I==3&&(m?Ya(this,m):this.i.length==0||Cn(this.h)||Ya(this))};function Ya(m,U){var H;U?H=U.l:H=m.V++;const oe=gr(m.J);ur(oe,"SID",m.M),ur(oe,"RID",H),ur(oe,"AID",m.K),Ds(m,oe),m.u&&m.o&&fu(oe,m.u,m.o),H=new Ci(m,m.j,H,m.D+1),m.u===null&&(H.J=m.o),U&&(m.i=U.G.concat(m.i)),U=pu(m,H,1e3),H.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),mi(m.h,H),Ri(H,oe,U)}function Ds(m,U){m.H&&G(m.H,function(H,oe){ur(U,oe,H)}),m.l&&G({},function(H,oe){ur(U,oe,H)})}function pu(m,U,H){H=Math.min(m.i.length,H);const oe=m.l?l(m.l.Ka,m.l,m):null;e:{var Te=m.i;let zt=-1;for(;;){const en=["count="+H];zt==-1?H>0?(zt=Te[0].g,en.push("ofs="+zt)):zt=0:en.push("ofs="+zt);let pr=!0;for(let ln=0;ln<H;ln++){var Re=Te[ln].g;const Vi=Te[ln].map;if(Re-=zt,Re<0)zt=Math.max(0,Te[ln].g-100),pr=!1;else try{Re="req"+Re+"_"||"";try{var st=Vi instanceof Map?Vi:Object.entries(Vi);for(const[Rs,pn]of st){let ms=pn;o(pn)&&(ms=tt(pn)),en.push(Re+Rs+"="+encodeURIComponent(ms))}}catch(Rs){throw en.push(Re+"type="+encodeURIComponent("_badmap")),Rs}}catch{oe&&oe(Vi)}}if(pr){st=en.join("&");break e}}st=void 0}return m=m.i.splice(0,H),U.G=m,st}function mu(m){if(!m.g&&!m.v){m.Y=1;var U=m.Da;P||_(),M||(P(),M=!0),L.add(U,m),m.A=0}}function po(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=sr(l(m.Da,m),we(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,I(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=sr(l(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Go(this),I(this))};function Rl(m){m.B!=null&&(a.clearTimeout(m.B),m.B=null)}function I(m){m.g=new Ci(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var U=gr(m.na);ur(U,"RID","rpc"),ur(U,"SID",m.M),ur(U,"AID",m.K),ur(U,"CI",m.F?"0":"1"),!m.F&&m.ia&&ur(U,"TO",m.ia),ur(U,"TYPE","xmlhttp"),Ds(m,U),m.u&&m.o&&fu(U,m.u,m.o),m.O&&(m.g.H=m.O);var H=m.g;m=m.ba,H.M=1,H.A=ei(gr(U)),H.u=null,H.R=!0,ts(H,m)}r.Va=function(){this.C!=null&&(this.C=null,Go(this),po(this),Tt(19))};function K(m){m.C!=null&&(a.clearTimeout(m.C),m.C=null)}function he(m,U){var H=null;if(m.g==U){K(m),Rl(m),m.g=null;var oe=2}else if(ea(m.h,U))H=U.G,rs(m.h,U),oe=1;else return;if(m.I!=0){if(U.o)if(oe==1){H=U.u?U.u.length:0,U=Date.now()-U.F;var Te=m.D;oe=Qt(),Ce(oe,new Ft(oe,H)),OA(m)}else mu(m);else if(Te=U.m,Te==3||Te==0&&U.X>0||!(oe==1&&Kd(m,U)||oe==2&&po(m)))switch(H&&H.length>0&&(U=m.h,U.i=U.i.concat(H)),Te){case 1:Se(m,5);break;case 4:Se(m,10);break;case 3:Se(m,6);break;default:Se(m,2)}}}function we(m,U){let H=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(H*=2),H*U}function Se(m,U){if(m.j.info("Error code "+U),U==2){var H=l(m.bb,m),oe=m.Ua;const Te=!oe;oe=new En(oe||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ta(oe,"https"),ei(oe),Te?ps(oe.toString(),H):NA(oe.toString(),H)}else Tt(2);m.I=0,m.l&&m.l.pa(U),je(m),Ko(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function je(m){if(m.I=0,m.ja=[],m.l){const U=Oo(m.h);(U.length!=0||m.i.length!=0)&&(p(m.ja,U),p(m.ja,m.i),m.h.i.length=0,d(m.i),m.i.length=0),m.l.oa()}}function We(m,U,H){var oe=H instanceof En?gr(H):new En(H);if(oe.g!="")U&&(oe.g=U+"."+oe.g),ra(oe,oe.u);else{var Te=a.location;oe=Te.protocol,U=U?U+"."+Te.hostname:Te.hostname,Te=+Te.port;const Re=new En(null);oe&&ta(Re,oe),U&&(Re.g=U),Te&&ra(Re,Te),H&&(Re.h=H),oe=Re}return H=m.G,U=m.wa,H&&U&&ur(oe,H,U),ur(oe,"VER",m.ka),Ds(m,oe),oe}function bt(m,U,H){if(U&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return U=m.Aa&&!m.ma?new on(new hu({ab:H})):new on(m.ma),U.Fa(m.L),U}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function St(){}r=St.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Vt(){}Vt.prototype.g=function(m,U){return new Nt(m,U)};function Nt(m,U){ae.call(this),this.g=new Dl(U),this.l=m,this.h=U&&U.messageUrlParams||null,m=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(m?m["X-WebChannel-Content-Type"]=U.messageContentType:m={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.sa&&(m?m["X-WebChannel-Client-Profile"]=U.sa:m={"X-WebChannel-Client-Profile":U.sa}),this.g.U=m,(m=U&&U.Qb)&&!F(m)&&(this.g.u=m),this.A=U&&U.supportsCrossDomainXhr||!1,this.v=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!F(U)&&(this.g.G=U,m=this.h,m!==null&&U in m&&(m=this.h,U in m&&delete m[U])),this.j=new Zr(this)}u(Nt,ae),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){jo(this.g)},Nt.prototype.o=function(m){var U=this.g;if(typeof m=="string"){var H={};H.__data__=m,m=H}else this.v&&(H={},H.__data__=tt(m),m=H);U.i.push(new Ei(U.Ya++,m)),U.I==3&&OA(U)},Nt.prototype.N=function(){this.g.l=null,delete this.j,jo(this.g),delete this.g,Nt.Z.N.call(this)};function _r(m){it.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var U=m.__sm__;if(U){e:{for(const H in U){m=H;break e}m=void 0}(this.i=m)&&(m=this.i,U=U!==null&&m in U?U[m]:void 0),this.data=U}else this.data=m}u(_r,it);function An(){pt.call(this),this.status=1}u(An,pt);function Zr(m){this.g=m}u(Zr,St),Zr.prototype.ra=function(){Ce(this.g,"a")},Zr.prototype.qa=function(m){Ce(this.g,new _r(m))},Zr.prototype.pa=function(m){Ce(this.g,new An)},Zr.prototype.oa=function(){Ce(this.g,"b")},Vt.prototype.createWebChannel=Vt.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,IR=function(){return new Vt},SR=function(){return Qt()},ER=Rt,nx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,Ab=Bi,Xi.COMPLETE="complete",CR=Xi,ut.EventType=rt,rt.OPEN="a",rt.CLOSE="b",rt.ERROR="c",rt.MESSAGE="d",ae.prototype.listen=ae.prototype.J,Kg=ut,on.prototype.listenOnce=on.prototype.K,on.prototype.getLastError=on.prototype.Ha,on.prototype.getLastErrorCode=on.prototype.ya,on.prototype.getStatus=on.prototype.ca,on.prototype.getResponseJson=on.prototype.La,on.prototype.getResponseText=on.prototype.la,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Fa,BR=on}).apply(typeof Ey<"u"?Ey:typeof self<"u"?self:typeof window<"u"?window:{});const hF="@firebase/firestore",fF="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zi.UNAUTHENTICATED=new zi(null),zi.GOOGLE_CREDENTIALS=new zi("google-credentials-uid"),zi.FIRST_PARTY=new zi("first-party-uid"),zi.MOCK_USER=new zi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Ww("@firebase/firestore");function vh(){return Gc.logLevel}function Toe(r){Gc.setLogLevel(r)}function Je(r,...e){if(Gc.logLevel<=dr.DEBUG){const t=e.map(o5);Gc.debug(`Firestore (${Rf}): ${r}`,...t)}}function ci(r,...e){if(Gc.logLevel<=dr.ERROR){const t=e.map(o5);Gc.error(`Firestore (${Rf}): ${r}`,...t)}}function kA(r,...e){if(Gc.logLevel<=dr.WARN){const t=e.map(o5);Gc.warn(`Firestore (${Rf}): ${r}`,...t)}}function o5(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,kR(r,n,t)}function kR(r,e,t){let n=`FIRESTORE (${Rf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw ci(n),new Error(n)}function Et(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||kR(e,i,n)}function Foe(r,e){r||gt(57014,e)}function dt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends js{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Loe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zi.UNAUTHENTICATED)))}shutdown(){}}class Poe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Noe{constructor(e){this.t=e,this.currentUser=zi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0,42304);let n=this.i;const i=A=>this.i!==n?(n=this.i,t(A)):Promise.resolve();let s=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ds,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const A=s;e.enqueueRetryable((async()=>{await A.promise,await i(this.currentUser)}))},o=A=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((A=>o(A))),setTimeout((()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?o(A):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ds)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Et(typeof n.accessToken=="string",31837,{l:n}),new TR(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new zi(e)}}class Doe{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=zi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Roe{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Doe(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uoe{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Et(this.o===void 0,3512);const n=s=>{s.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gF(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gF(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Moe(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=Moe(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function Wt(r,e){return r<e?-1:r>e?1:0}function ix(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),s=e.charAt(n);if(i!==s)return B_(i)===B_(s)?Wt(i,s):B_(i)?1:-1}return Wt(r.length,e.length)}const Ooe=55296,Qoe=57343;function B_(r){const e=r.charCodeAt(0);return e>=Ooe&&e<=Qoe}function sf(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}function FR(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="__name__";class tA{constructor(e,t,n){t===void 0?t=0:t>e.length&&gt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&gt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return tA.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tA?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=tA.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Wt(e.length,t.length)}static compareSegments(e,t){const n=tA.isNumericId(e),i=tA.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?tA.extractNumericId(e).compare(tA.extractNumericId(t)):ix(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tc.fromString(e.substring(4,e.length-2))}}class hr extends tA{construct(e,t,n){return new hr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new qe(Me.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new hr(t)}static emptyPath(){return new hr([])}}const Hoe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends tA{construct(e,t,n){return new Fn(e,t,n)}static isValidIdentifier(e){return Hoe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pF}static keyField(){return new Fn([pF])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new qe(Me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new qe(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[i+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new qe(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=A,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new qe(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(t)}static emptyPath(){return new Fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.path=e}static fromPath(e){return new ot(hr.fromString(e))}static fromName(e){return new ot(hr.fromString(e).popFirst(5))}static empty(){return new ot(hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return hr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new hr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(r,e,t){if(!t)throw new qe(Me.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function LR(r,e,t,n){if(e===!0&&n===!0)throw new qe(Me.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function mF(r){if(!ot.isDocumentKey(r))throw new qe(Me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function yF(r){if(ot.isDocumentKey(r))throw new qe(Me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function PR(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ov(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":gt(12329,{type:typeof r})}function Nr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new qe(Me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ov(r);throw new qe(Me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function NR(r,e){if(e<=0)throw new qe(Me.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(r,e){const t={typeString:r};return e&&(t.value=e),t}function Mm(r,e){if(!PR(r))throw new qe(Me.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const a=r[n];if(i&&typeof a!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new qe(Me.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=-62135596800,wF=1e6;class Qr{static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*wF);return new Qr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bF)throw new qe(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wF}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mm(e,Qr._jsonSchema))return new Qr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bF;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qr._jsonSchemaVersion="firestore/timestamp/1.0",Qr._jsonSchema={type:_i("string",Qr._jsonSchemaVersion),seconds:_i("number"),nanoseconds:_i("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Qr(0,0))}static max(){return new Pt(new Qr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=-1;class aw{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function sx(r){return r.fields.find((e=>e.kind===2))}function Pu(r){return r.fields.filter((e=>e.kind!==2))}aw.UNKNOWN_ID=-1;class lb{constructor(e,t){this.fieldPath=e,this.kind=t}}class tm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tm(0,qa.min())}}function DR(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(n===1e9?new Qr(t+1,0):new Qr(t,n));return new qa(i,ot.empty(),e)}function RR(r){return new qa(r.readTime,r.key,af)}class qa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new qa(Pt.min(),ot.empty(),af)}static max(){return new qa(Pt.max(),ot.empty(),af)}}function c5(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(r.documentKey,e.documentKey),t!==0?t:Wt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(r){if(r.code!==Me.FAILED_PRECONDITION||r.message!==UR)throw r;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Le(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Le?t:Le.resolve(t)}catch(t){return Le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Le.reject(t)}static resolve(e){return new Le(((t,n)=>{t(e)}))}static reject(e){return new Le(((t,n)=>{n(e)}))}static waitFor(e){return new Le(((t,n)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(A=>n(A)))})),a=!0,s===i&&t()}))}static or(e){let t=Le.resolve(!1);for(const n of e)t=t.next((i=>i?Le.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,s)=>{n.push(t.call(this,i,s))})),this.waitFor(n)}static mapArray(e,t){return new Le(((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let A=0;A<s;A++){const l=A;t(e[l]).next((c=>{a[l]=c,++o,o===s&&n(a)}),(c=>i(c)))}}))}static doWhile(e,t){return new Le(((n,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):n()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="SimpleDb";class Av{static open(e,t,n,i){try{return new Av(t,e.transaction(i,n))}catch(s){throw new Bp(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ds,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Bp(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const i=u5(n.target.error);this.S.reject(new Bp(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Je(Oa,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $oe(t)}}class mA{static delete(e){return Je(Oa,"Removing database:",e),Uu(LB().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!qp())return!1;if(mA.F())return!0;const e=Un(),t=mA.M(e),n=0<t&&t<10,i=OR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,mA.M(Un())===12.2&&ci("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Je(Oa,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{n(new Bp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?n(new qe(Me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new qe(Me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new Bp(e,a))},i.onupgradeneeded=s=>{Je(Oa,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{Je(Oa,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Av.open(this.db,e,s?"readonly":"readwrite",n),A=i(o).next((l=>(o.C(),l))).catch((l=>(o.abort(l),Le.reject(l)))).toPromise();return A.catch((()=>{})),await o.D,A}catch(o){const A=o,l=A.name!=="FirebaseError"&&a<3;if(Je(Oa,"Transaction failed with error:",A.message,"Retrying:",l),this.close(),!l)return Promise.reject(A)}}}close(){this.db&&this.db.close(),this.db=void 0}}function OR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Voe{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Uu(this.U.delete())}}class Bp extends qe{constructor(e,t){super(Me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function au(r){return r.name==="IndexedDbTransactionError"}class $oe{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Je(Oa,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Je(Oa,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Uu(n)}add(e){return Je(Oa,"ADD",this.store.name,e,e),Uu(this.store.add(e))}get(e){return Uu(this.store.get(e)).next((t=>(t===void 0&&(t=null),Je(Oa,"GET",this.store.name,e,t),t)))}delete(e){return Je(Oa,"DELETE",this.store.name,e),Uu(this.store.delete(e))}count(){return Je(Oa,"COUNT",this.store.name),Uu(this.store.count())}J(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(n.range);return new Le(((a,o)=>{s.onerror=A=>{o(A.target.error)},s.onsuccess=A=>{a(A.target.result)}}))}{const s=this.cursor(n),a=[];return this.H(s,((o,A)=>{a.push(A)})).next((()=>a))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new Le(((i,s)=>{n.onerror=a=>{s(a.target.error)},n.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){Je(Oa,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const i=this.cursor(n);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.H(i,t)}te(e){const t=this.cursor({});return new Le(((n,i)=>{t.onerror=s=>{const a=u5(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():n()})):n()}}))}H(e,t){const n=[];return new Le(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const A=new Voe(o),l=t(o.primaryKey,o.value,A);if(l instanceof Le){const c=l.catch((u=>(A.done(),Le.reject(u))));n.push(c)}A.isDone?i():A.G===null?o.continue():o.continue(A.G)}})).next((()=>Le.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uu(r){return new Le(((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=u5(n.target.error);t(i)}}))}let vF=!1;function u5(r){const e=mA.M(Un());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vF||(vF=!0,setTimeout((()=>{throw n}),0)),n}}return r}const Cp="IndexBackfiller";class joe{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Je(Cp,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Je(Cp,`Documents written: ${t}`)}catch(t){au(t)?Je(Cp,"Ignoring IndexedDB error during index backfill: ",t):await su(t)}await this.re(6e4)}))}}class Goe{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let i=t,s=!0;return Le.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!n.has(a))return Je(Cp,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,n.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>(Je(Cp,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((i,s)=>{const a=RR(s);c5(a,n)>0&&(n=a)})),new qa(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ya.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=-1;function Om(r){return r==null}function rm(r){return r===0&&1/r==-1/0}function QR(r){return typeof r=="number"&&Number.isInteger(r)&&!rm(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="";function Ls(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=_F(e)),e=Koe(r.get(t),e);return _F(e)}function Koe(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case ow:t+="";break;default:t+=s}}return t}function _F(r){return r+ow+""}function hA(r){const e=r.length;if(Et(e>=2,64408,{path:r}),e===2)return Et(r.charAt(0)===ow&&r.charAt(1)==="",56145,{path:r}),hr.emptyPath();const t=e-2,n=[];let i="";for(let s=0;s<e;){const a=r.indexOf(ow,s);switch((a<0||a>t)&&gt(50515,{path:r}),r.charAt(a+1)){case"":const o=r.substring(s,a);let A;i.length===0?A=o:(i+=o,A=i,i=""),n.push(A);break;case"":i+=r.substring(s,a),i+="\0";break;case"":i+=r.substring(s,a+1);break;default:gt(61167,{path:r})}s=a+2}return new hr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu="remoteDocuments",Qm="owner",ch="owner",nm="mutationQueues",zoe="userId",xo="mutations",xF="batchId",qu="userMutationsIndex",BF=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(r,e){return[r,Ls(e)]}function HR(r,e,t){return[r,Ls(e),t]}const qoe={},of="documentMutations",Aw="remoteDocumentsV14",Woe=["prefixPath","collectionGroup","readTime","documentId"],ub="documentKeyIndex",Yoe=["prefixPath","collectionGroup","documentId"],VR="collectionGroupIndex",Xoe=["collectionGroup","readTime","prefixPath","documentId"],im="remoteDocumentGlobal",ax="remoteDocumentGlobalKey",Af="targets",$R="queryTargetsIndex",Joe=["canonicalId","targetId"],lf="targetDocuments",Zoe=["targetId","path"],d5="documentTargetsIndex",eAe=["path","targetId"],lw="targetGlobalKey",ld="targetGlobal",sm="collectionParents",tAe=["collectionId","parent"],cf="clientMetadata",rAe="clientId",lv="bundles",nAe="bundleId",cv="namedQueries",iAe="name",h5="indexConfiguration",sAe="indexId",ox="collectionGroupIndex",aAe="collectionGroup",Ep="indexState",oAe=["indexId","uid"],jR="sequenceNumberIndex",AAe=["uid","sequenceNumber"],Sp="indexEntries",lAe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GR="documentKeyIndex",cAe=["indexId","uid","orderedDocumentKey"],uv="documentOverlays",uAe=["userId","collectionPath","documentId"],Ax="collectionPathOverlayIndex",dAe=["userId","collectionPath","largestBatchId"],KR="collectionGroupOverlayIndex",hAe=["userId","collectionGroup","largestBatchId"],f5="globals",fAe="name",zR=[nm,xo,of,Nu,Af,Qm,ld,lf,cf,im,sm,lv,cv],gAe=[...zR,uv],qR=[nm,xo,of,Aw,Af,Qm,ld,lf,cf,im,sm,lv,cv,uv],WR=qR,g5=[...WR,h5,Ep,Sp],pAe=g5,YR=[...g5,f5],mAe=YR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx extends MR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Di(r,e){const t=dt(r);return mA.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ou(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function XR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t){this.comparator=e,this.root=t||As.EMPTY}insert(e,t){return new gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,As.BLACK,null,null))}remove(e){return new gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,As.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sy(this.root,e,this.comparator,!0)}}class Sy{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class As{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??As.RED,this.left=i??As.EMPTY,this.right=s??As.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new As(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return As.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return As.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,As.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,As.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gt(27949);return e+(this.isRed()?0:1)}}As.EMPTY=null,As.RED=!0,As.BLACK=!1;As.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(e,t,n,i,s){return this}insert(e,t,n){return new As(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.comparator=e,this.data=new gn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new EF(this.data.getIterator())}getIteratorFrom(e){return new EF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof qr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qr(this.comparator);return t.data=e,t}}class EF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uh(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new ba([])}unionWith(e){let t=new qr(Fn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ba(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sf(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yAe(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JR("Invalid base64 string: "+s):s}})(e);return new Yn(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const bAe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vl(r){if(Et(!!r,39018),typeof r=="string"){let e=0;const t=bAe.exec(r);if(Et(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:kn(r.seconds),nanos:kn(r.nanos)}}function kn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function _l(r){return typeof r=="string"?Yn.fromBase64String(r):Yn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="server_timestamp",eU="__type__",tU="__previous_value__",rU="__local_write_time__";function dv(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[eU])==null?void 0:n.stringValue)===ZR}function hv(r){const e=r.mapValue.fields[tU];return dv(e)?hv(e):e}function am(r){const e=vl(r.mapValue.fields[rU].timestampValue);return new Qr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wAe{constructor(e,t,n,i,s,a,o,A,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=A,this.useFetchStreams=l,this.isUsingEmulator=c}}const cx="(default)";class Kc{constructor(e,t){this.projectId=e,this.database=t||cx}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===cx}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="__type__",nU="__max__",vc={mapValue:{fields:{__type__:{stringValue:nU}}}},m5="__vector__",uf="value",db={nullValue:"NULL_VALUE"};function zc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?dv(r)?4:iU(r)?9007199254740991:fv(r)?10:11:gt(28295,{value:r})}function TA(r,e){if(r===e)return!0;const t=zc(r);if(t!==zc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return am(r).isEqual(am(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=vl(i.timestampValue),o=vl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,s){return _l(i.bytesValue).isEqual(_l(s.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,s){return kn(i.geoPointValue.latitude)===kn(s.geoPointValue.latitude)&&kn(i.geoPointValue.longitude)===kn(s.geoPointValue.longitude)})(r,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return kn(i.integerValue)===kn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=kn(i.doubleValue),o=kn(s.doubleValue);return a===o?rm(a)===rm(o):isNaN(a)&&isNaN(o)}return!1})(r,e);case 9:return sf(r.arrayValue.values||[],e.arrayValue.values||[],TA);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(CF(a)!==CF(o))return!1;for(const A in a)if(a.hasOwnProperty(A)&&(o[A]===void 0||!TA(a[A],o[A])))return!1;return!0})(r,e);default:return gt(52216,{left:r})}}function om(r,e){return(r.values||[]).find((t=>TA(t,e)))!==void 0}function qc(r,e){if(r===e)return 0;const t=zc(r),n=zc(e);if(t!==n)return Wt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(r.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=kn(s.integerValue||s.doubleValue),A=kn(a.integerValue||a.doubleValue);return o<A?-1:o>A?1:o===A?0:isNaN(o)?isNaN(A)?0:-1:1})(r,e);case 3:return SF(r.timestampValue,e.timestampValue);case 4:return SF(am(r),am(e));case 5:return ix(r.stringValue,e.stringValue);case 6:return(function(s,a){const o=_l(s),A=_l(a);return o.compareTo(A)})(r.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),A=a.split("/");for(let l=0;l<o.length&&l<A.length;l++){const c=Wt(o[l],A[l]);if(c!==0)return c}return Wt(o.length,A.length)})(r.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=Wt(kn(s.latitude),kn(a.latitude));return o!==0?o:Wt(kn(s.longitude),kn(a.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return IF(r.arrayValue,e.arrayValue);case 10:return(function(s,a){var h,d,p,f;const o=s.fields||{},A=a.fields||{},l=(h=o[uf])==null?void 0:h.arrayValue,c=(d=A[uf])==null?void 0:d.arrayValue,u=Wt(((p=l==null?void 0:l.values)==null?void 0:p.length)||0,((f=c==null?void 0:c.values)==null?void 0:f.length)||0);return u!==0?u:IF(l,c)})(r.mapValue,e.mapValue);case 11:return(function(s,a){if(s===vc.mapValue&&a===vc.mapValue)return 0;if(s===vc.mapValue)return 1;if(a===vc.mapValue)return-1;const o=s.fields||{},A=Object.keys(o),l=a.fields||{},c=Object.keys(l);A.sort(),c.sort();for(let u=0;u<A.length&&u<c.length;++u){const h=ix(A[u],c[u]);if(h!==0)return h;const d=qc(o[A[u]],l[c[u]]);if(d!==0)return d}return Wt(A.length,c.length)})(r.mapValue,e.mapValue);default:throw gt(23264,{he:t})}}function SF(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Wt(r,e);const t=vl(r),n=vl(e),i=Wt(t.seconds,n.seconds);return i!==0?i:Wt(t.nanos,n.nanos)}function IF(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=qc(t[i],n[i]);if(s)return s}return Wt(t.length,n.length)}function df(r){return ux(r)}function ux(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=vl(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return _l(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ot.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=ux(s);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${ux(t.fields[a])}`;return i+"}"})(r.mapValue):gt(61005,{value:r})}function hb(r){switch(zc(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hv(r);return e?16+hb(e):16;case 5:return 2*r.stringValue.length;case 6:return _l(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+hb(s)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return ou(n.fields,((s,a)=>{i+=s.length+hb(a)})),i})(r.mapValue);default:throw gt(13486,{value:r})}}function wd(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function dx(r){return!!r&&"integerValue"in r}function Am(r){return!!r&&"arrayValue"in r}function kF(r){return!!r&&"nullValue"in r}function TF(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function fb(r){return!!r&&"mapValue"in r}function fv(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[p5])==null?void 0:n.stringValue)===m5}function Ip(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ou(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Ip(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ip(r.arrayValue.values[t]);return e}return{...r}}function iU(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===nU}const sU={mapValue:{fields:{[p5]:{stringValue:m5},[uf]:{arrayValue:{}}}}};function vAe(r){return"nullValue"in r?db:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?wd(Kc.empty(),ot.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?fv(r)?sU:{mapValue:{}}:gt(35942,{value:r})}function _Ae(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?wd(Kc.empty(),ot.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?sU:"mapValue"in r?fv(r)?{mapValue:{}}:vc:gt(61959,{value:r})}function FF(r,e){const t=qc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function LF(r,e){const t=qc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.value=e}static empty(){return new ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!fb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ip(t)}setAll(e){let t=Fn.emptyPath(),n={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const A=this.getFieldsMap(t);this.applyChanges(A,n,i),n={},i=[],t=o.popLast()}a?n[o.lastSegment()]=Ip(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());fb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return TA(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];fb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){ou(t,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new ls(Ip(this.value))}}function aU(r){const e=[];return ou(r.fields,((t,n)=>{const i=new Fn([t]);if(fb(n)){const s=aU(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new ba(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t,n,i,s,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new bn(e,0,Pt.min(),Pt.min(),Pt.min(),ls.empty(),0)}static newFoundDocument(e,t,n,i){return new bn(e,1,t,Pt.min(),n,i,0)}static newNoDocument(e,t){return new bn(e,2,t,Pt.min(),Pt.min(),ls.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,Pt.min(),Pt.min(),ls.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.position=e,this.inclusive=t}}function PF(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=ot.comparator(ot.fromName(a.referenceValue),t.key):n=qc(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function NF(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!TA(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,t="asc"){this.field=e,this.dir=t}}function xAe(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{}class br extends oU{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new BAe(e,t,n):t==="array-contains"?new SAe(e,n):t==="in"?new hU(e,n):t==="not-in"?new IAe(e,n):t==="array-contains-any"?new kAe(e,n):new br(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new CAe(e,n):new EAe(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qc(t,this.value)):t!==null&&zc(this.value)===zc(t)&&this.matchesComparison(qc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends oU{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zr(e,t)}matches(e){return hf(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hf(r){return r.op==="and"}function hx(r){return r.op==="or"}function y5(r){return AU(r)&&hf(r)}function AU(r){for(const e of r.filters)if(e instanceof zr)return!1;return!0}function fx(r){if(r instanceof br)return r.field.canonicalString()+r.op.toString()+df(r.value);if(y5(r))return r.filters.map((e=>fx(e))).join(",");{const e=r.filters.map((t=>fx(t))).join(",");return`${r.op}(${e})`}}function lU(r,e){return r instanceof br?(function(n,i){return i instanceof br&&n.op===i.op&&n.field.isEqual(i.field)&&TA(n.value,i.value)})(r,e):r instanceof zr?(function(n,i){return i instanceof zr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,a,o)=>s&&lU(a,i.filters[o])),!0):!1})(r,e):void gt(19439)}function cU(r,e){const t=r.filters.concat(e);return zr.create(t,r.op)}function uU(r){return r instanceof br?(function(t){return`${t.field.canonicalString()} ${t.op} ${df(t.value)}`})(r):r instanceof zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(uU).join(" ,")+"}"})(r):"Filter"}class BAe extends br{constructor(e,t,n){super(e,t,n),this.key=ot.fromName(n.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class CAe extends br{constructor(e,t){super(e,"in",t),this.keys=dU("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EAe extends br{constructor(e,t){super(e,"not-in",t),this.keys=dU("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dU(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>ot.fromName(n.referenceValue)))}class SAe extends br{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Am(t)&&om(t.arrayValue,this.value)}}class hU extends br{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&om(this.value.arrayValue,t)}}class IAe extends br{constructor(e,t){super(e,"not-in",t)}matches(e){if(om(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!om(this.value.arrayValue,t)}}class kAe extends br{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Am(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>om(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TAe{constructor(e,t=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function gx(r,e=null,t=[],n=[],i=null,s=null,a=null){return new TAe(r,e,t,n,i,s,a)}function vd(r){const e=dt(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>fx(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),Om(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>df(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>df(n))).join(",")),e.Te=t}return e.Te}function Hm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!xAe(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!lU(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!NF(r.startAt,e.startAt)&&NF(r.endAt,e.endAt)}function cw(r){return ot.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function uw(r,e){return r.filters.filter((t=>t instanceof br&&t.field.isEqual(e)))}function DF(r,e,t){let n=db,i=!0;for(const s of uw(r,e)){let a=db,o=!0;switch(s.op){case"<":case"<=":a=vAe(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=db}FF({value:n,inclusive:i},{value:a,inclusive:o})<0&&(n=a,i=o)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const a=t.position[s];FF({value:n,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(n=a,i=t.inclusive);break}}return{value:n,inclusive:i}}function RF(r,e,t){let n=vc,i=!0;for(const s of uw(r,e)){let a=vc,o=!0;switch(s.op){case">=":case">":a=_Ae(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=vc}LF({value:n,inclusive:i},{value:a,inclusive:o})>0&&(n=a,i=o)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const a=t.position[s];LF({value:n,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(n=a,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t=null,n=[],i=[],s=null,a="F",o=null,A=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=A,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fU(r,e,t,n,i,s,a,o){return new El(r,e,t,n,i,s,a,o)}function Uf(r){return new El(r)}function UF(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function b5(r){return r.collectionGroup!==null}function Gh(r){const e=dt(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new qr(Fn.comparator);return a.filters.forEach((A=>{A.getFlattenedFilters().forEach((l=>{l.isInequality()&&(o=o.add(l.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new lm(s,n))})),t.has(Fn.keyField().canonicalString())||e.Ie.push(new lm(Fn.keyField(),n))}return e.Ie}function Gs(r){const e=dt(r);return e.Ee||(e.Ee=FAe(e,Gh(r))),e.Ee}function FAe(r,e){if(r.limitType==="F")return gx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new lm(i.field,s)}));const t=r.endAt?new Wc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Wc(r.startAt.position,r.startAt.inclusive):null;return gx(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function px(r,e){const t=r.filters.concat([e]);return new El(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function dw(r,e,t){return new El(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vm(r,e){return Hm(Gs(r),Gs(e))&&r.limitType===e.limitType}function gU(r){return`${vd(Gs(r))}|lt:${r.limitType}`}function _h(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>uU(i))).join(", ")}]`),Om(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>df(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>df(i))).join(",")),`Target(${n})`})(Gs(r))}; limitType=${r.limitType})`}function $m(r,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ot.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(r,e)&&(function(n,i){for(const s of Gh(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(a,o,A){const l=PF(a,o,A);return a.inclusive?l<=0:l<0})(n.startAt,Gh(n),i)||n.endAt&&!(function(a,o,A){const l=PF(a,o,A);return a.inclusive?l>=0:l>0})(n.endAt,Gh(n),i))})(r,e)}function pU(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function mU(r){return(e,t)=>{let n=!1;for(const i of Gh(r)){const s=LAe(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function LAe(r,e,t){const n=r.field.isKeyField()?ot.comparator(e.key,t.key):(function(s,a,o){const A=a.data.field(s),l=o.data.field(s);return A!==null&&l!==null?qc(A,l):gt(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return gt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ou(this.inner,((t,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return XR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PAe=new gn(ot.comparator);function wa(){return PAe}const yU=new gn(ot.comparator);function zg(...r){let e=yU;for(const t of r)e=e.insert(t.key,t);return e}function bU(r){let e=yU;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function fA(){return kp()}function wU(){return kp()}function kp(){return new Sl((r=>r.toString()),((r,e)=>r.isEqual(e)))}const NAe=new gn(ot.comparator),DAe=new qr(ot.comparator);function nr(...r){let e=DAe;for(const t of r)e=e.add(t);return e}const RAe=new qr(Wt);function w5(){return RAe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(e)?"-0":e}}function vU(r){return{integerValue:""+r}}function _U(r,e){return QR(e)?vU(e):v5(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this._=void 0}}function UAe(r,e,t){return r instanceof ff?(function(i,s){const a={fields:{[eU]:{stringValue:ZR},[rU]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dv(s)&&(s=hv(s)),s&&(a.fields[tU]=s),{mapValue:a}})(t,e):r instanceof _d?BU(r,e):r instanceof xd?CU(r,e):(function(i,s){const a=xU(i,s),o=MF(a)+MF(i.Ae);return dx(a)&&dx(i.Ae)?vU(o):v5(i.serializer,o)})(r,e)}function MAe(r,e,t){return r instanceof _d?BU(r,e):r instanceof xd?CU(r,e):t}function xU(r,e){return r instanceof gf?(function(n){return dx(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class ff extends gv{}class _d extends gv{constructor(e){super(),this.elements=e}}function BU(r,e){const t=EU(e);for(const n of r.elements)t.some((i=>TA(i,n)))||t.push(n);return{arrayValue:{values:t}}}class xd extends gv{constructor(e){super(),this.elements=e}}function CU(r,e){let t=EU(e);for(const n of r.elements)t=t.filter((i=>!TA(i,n)));return{arrayValue:{values:t}}}class gf extends gv{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function MF(r){return kn(r.integerValue||r.doubleValue)}function EU(r){return Am(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.field=e,this.transform=t}}function OAe(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof _d&&i instanceof _d||n instanceof xd&&i instanceof xd?sf(n.elements,i.elements,TA):n instanceof gf&&i instanceof gf?TA(n.Ae,i.Ae):n instanceof ff&&i instanceof ff})(r.transform,e.transform)}class QAe{constructor(e,t){this.version=e,this.transformResults=t}}class Ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gb(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class pv{}function SU(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Of(r.key,Ln.none()):new Mf(r.key,r.data,Ln.none());{const t=r.data,n=ls.empty();let i=new qr(Fn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Il(r.key,n,new ba(i.toArray()),Ln.none())}}function HAe(r,e,t){r instanceof Mf?(function(i,s,a){const o=i.value.clone(),A=QF(i.fieldTransforms,s,a.transformResults);o.setAll(A),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(r,e,t):r instanceof Il?(function(i,s,a){if(!gb(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=QF(i.fieldTransforms,s,a.transformResults),A=s.data;A.setAll(IU(i)),A.setAll(o),s.convertToFoundDocument(a.version,A).setHasCommittedMutations()})(r,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Tp(r,e,t,n){return r instanceof Mf?(function(s,a,o,A){if(!gb(s.precondition,a))return o;const l=s.value.clone(),c=HF(s.fieldTransforms,A,a);return l.setAll(c),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null})(r,e,t,n):r instanceof Il?(function(s,a,o,A){if(!gb(s.precondition,a))return o;const l=HF(s.fieldTransforms,A,a),c=a.data;return c.setAll(IU(s)),c.setAll(l),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((u=>u.field)))})(r,e,t,n):(function(s,a,o){return gb(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(r,e,t)}function VAe(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=xU(n.transform,i||null);s!=null&&(t===null&&(t=ls.empty()),t.set(n.field,s))}return t||null}function OF(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&sf(n,i,((s,a)=>OAe(s,a)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Mf extends pv{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Il extends pv{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IU(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function QF(r,e,t){const n=new Map;Et(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,MAe(a,o,t[i]))}return n}function HF(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,UAe(s,a,e))}return n}class Of extends pv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _5 extends pv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&HAe(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Tp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Tp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=wU();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const A=SU(a,o);A!==null&&n.set(i.key,A),a.isValidDocument()||a.convertToNoDocument(Pt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),nr())}isEqual(e){return this.batchId===e.batchId&&sf(this.mutations,e.mutations,((t,n)=>OF(t,n)))&&sf(this.baseMutations,e.baseMutations,((t,n)=>OF(t,n)))}}class B5{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Et(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return NAe})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new B5(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ae{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yi,Br;function kU(r){switch(r){case Me.OK:return gt(64938);case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0;default:return gt(15467,{code:r})}}function TU(r){if(r===void 0)return ci("GRPC error has no .code"),Me.UNKNOWN;switch(r){case yi.OK:return Me.OK;case yi.CANCELLED:return Me.CANCELLED;case yi.UNKNOWN:return Me.UNKNOWN;case yi.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case yi.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case yi.INTERNAL:return Me.INTERNAL;case yi.UNAVAILABLE:return Me.UNAVAILABLE;case yi.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case yi.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case yi.NOT_FOUND:return Me.NOT_FOUND;case yi.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case yi.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case yi.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case yi.ABORTED:return Me.ABORTED;case yi.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case yi.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case yi.DATA_LOSS:return Me.DATA_LOSS;default:return gt(39323,{code:r})}}(Br=yi||(yi={}))[Br.OK=0]="OK",Br[Br.CANCELLED=1]="CANCELLED",Br[Br.UNKNOWN=2]="UNKNOWN",Br[Br.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Br[Br.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Br[Br.NOT_FOUND=5]="NOT_FOUND",Br[Br.ALREADY_EXISTS=6]="ALREADY_EXISTS",Br[Br.PERMISSION_DENIED=7]="PERMISSION_DENIED",Br[Br.UNAUTHENTICATED=16]="UNAUTHENTICATED",Br[Br.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Br[Br.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Br[Br.ABORTED=10]="ABORTED",Br[Br.OUT_OF_RANGE=11]="OUT_OF_RANGE",Br[Br.UNIMPLEMENTED=12]="UNIMPLEMENTED",Br[Br.INTERNAL=13]="INTERNAL",Br[Br.UNAVAILABLE=14]="UNAVAILABLE",Br[Br.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jAe=new Tc([4294967295,4294967295],0);function VF(r){const e=FU().encode(r),t=new xR;return t.update(e),new Uint8Array(t.digest())}function $F(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tc([t,n],0),new Tc([i,s],0)]}class E5{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qg(`Invalid padding: ${t}`);if(n<0)throw new qg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new qg(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new qg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Tc.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(Tc.fromNumber(n)));return i.compare(jAe)===1&&(i=new Tc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=VF(e),[n,i]=$F(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new E5(s,i,t);return n.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=VF(e),[n,i]=$F(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Km.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Gm(Pt.min(),i,new gn(Wt),wa(),nr())}}class Km{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Km(n,t,nr(),nr(),nr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class LU{constructor(e,t){this.targetId=e,this.Ce=t}}class PU{constructor(e,t,n=Yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class jF{constructor(){this.ve=0,this.Fe=GF(),this.Me=Yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nr(),t=nr(),n=nr();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:gt(38017,{changeType:s})}})),new Km(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=GF()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GAe{constructor(e){this.Ge=e,this.ze=new Map,this.je=wa(),this.Je=Iy(),this.He=Iy(),this.Ye=new gn(Wt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:gt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(cw(s))if(n===0){const a=new ot(s.path);this.et(t,a,bn.newNoDocument(a,Pt.min()))}else Et(n===1,20013,{expectedCount:n});else{const a=this._t(t);if(a!==n){const o=this.ut(e),A=o?this.ct(o,e,a):1;if(A!==0){this.it(t);const l=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=_l(n).toUint8Array()}catch(A){if(A instanceof JR)return kA("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}try{o=new E5(a,i,s)}catch(A){return kA(A instanceof qg?"BloomFilter error: ":"Applying bloom filter failed: ",A),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&cw(o.target)){const A=new ot(o.target.path);this.It(A).has(a)||this.Et(a,A)||this.et(a,A,bn.newNoDocument(A,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let n=nr();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((A=>{const l=this.ot(A);return!l||l.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(n=n.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Gm(e,t,this.Ye,this.je,n);return this.je=wa(),this.Je=Iy(),this.He=Iy(),this.Ye=new gn(Wt),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new jF,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new qr(Wt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new qr(Wt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Je("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jF),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Iy(){return new gn(ot.comparator)}function GF(){return new gn(ot.comparator)}const KAe={asc:"ASCENDING",desc:"DESCENDING"},zAe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qAe={and:"AND",or:"OR"};class WAe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mx(r,e){return r.useProto3Json||Om(e)?e:{value:e}}function pf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NU(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function YAe(r,e){return pf(r,e.toTimestamp())}function fi(r){return Et(!!r,49232),Pt.fromTimestamp((function(t){const n=vl(t);return new Qr(n.seconds,n.nanos)})(r))}function S5(r,e){return yx(r,e).canonicalString()}function yx(r,e){const t=(function(i){return new hr(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function DU(r){const e=hr.fromString(r);return Et(GU(e),10190,{key:e.toString()}),e}function cm(r,e){return S5(r.databaseId,e.path)}function yA(r,e){const t=DU(e);if(t.get(1)!==r.databaseId.projectId)throw new qe(Me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new qe(Me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ot(MU(t))}function RU(r,e){return S5(r.databaseId,e)}function UU(r){const e=DU(r);return e.length===4?hr.emptyPath():MU(e)}function bx(r){return new hr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function MU(r){return Et(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function KF(r,e,t){return{name:cm(r,e),fields:t.value.mapValue.fields}}function OU(r,e,t){const n=yA(r,e.name),i=fi(e.updateTime),s=e.createTime?fi(e.createTime):Pt.min(),a=new ls({mapValue:{fields:e.fields}}),o=bn.newFoundDocument(n,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function XAe(r,e){return"found"in e?(function(n,i){Et(!!i.found,43571),i.found.name,i.found.updateTime;const s=yA(n,i.found.name),a=fi(i.found.updateTime),o=i.found.createTime?fi(i.found.createTime):Pt.min(),A=new ls({mapValue:{fields:i.found.fields}});return bn.newFoundDocument(s,a,o,A)})(r,e):"missing"in e?(function(n,i){Et(!!i.missing,3894),Et(!!i.readTime,22933);const s=yA(n,i.missing),a=fi(i.readTime);return bn.newNoDocument(s,a)})(r,e):gt(7234,{result:e})}function JAe(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:gt(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,c){return l.useProto3Json?(Et(c===void 0||typeof c=="string",58123),Yn.fromBase64String(c||"")):(Et(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Yn.fromUint8Array(c||new Uint8Array))})(r,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(l){const c=l.code===void 0?Me.UNKNOWN:TU(l.code);return new qe(c,l.message||"")})(a);t=new PU(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=yA(r,n.document.name),s=fi(n.document.updateTime),a=n.document.createTime?fi(n.document.createTime):Pt.min(),o=new ls({mapValue:{fields:n.document.fields}}),A=bn.newFoundDocument(i,s,a,o),l=n.targetIds||[],c=n.removedTargetIds||[];t=new pb(l,c,A.key,A)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=yA(r,n.document),s=n.readTime?fi(n.readTime):Pt.min(),a=bn.newNoDocument(i,s),o=n.removedTargetIds||[];t=new pb([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=yA(r,n.document),s=n.removedTargetIds||[];t=new pb([],s,i,null)}else{if(!("filter"in e))return gt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new $Ae(i,s),o=n.targetId;t=new LU(o,a)}}return t}function um(r,e){let t;if(e instanceof Mf)t={update:KF(r,e.key,e.value)};else if(e instanceof Of)t={delete:cm(r,e.key)};else if(e instanceof Il)t={update:KF(r,e.key,e.data),updateMask:ile(e.fieldMask)};else{if(!(e instanceof _5))return gt(16599,{Vt:e.type});t={verify:cm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(s,a){const o=a.transform;if(o instanceof ff)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _d)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof xd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof gf)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw gt(20930,{transform:a.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:YAe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gt(27497)})(r,e.precondition)),t}function wx(r,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Ln.updateTime(fi(s.updateTime)):s.exists!==void 0?Ln.exists(s.exists):Ln.none()})(e.currentDocument):Ln.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let A=null;if("setToServerValue"in o)Et(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),A=new ff;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];A=new _d(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];A=new xd(c)}else"increment"in o?A=new gf(a,o.increment):gt(16584,{proto:o});const l=Fn.fromServerFormat(o.fieldPath);return new jm(l,A)})(r,i))):[];if(e.update){e.update.name;const i=yA(r,e.update.name),s=new ls({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(A){const l=A.fieldPaths||[];return new ba(l.map((c=>Fn.fromServerFormat(c))))})(e.updateMask);return new Il(i,s,a,t,n)}return new Mf(i,s,t,n)}if(e.delete){const i=yA(r,e.delete);return new Of(i,t)}if(e.verify){const i=yA(r,e.verify);return new _5(i,t)}return gt(1463,{proto:e})}function ZAe(r,e){return r&&r.length>0?(Et(e!==void 0,14353),r.map((t=>(function(i,s){let a=i.updateTime?fi(i.updateTime):fi(s);return a.isEqual(Pt.min())&&(a=fi(s)),new QAe(a,i.transformResults||[])})(t,e)))):[]}function QU(r,e){return{documents:[RU(r,e.path)]}}function HU(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=RU(r,i);const s=(function(l){if(l.length!==0)return jU(zr.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(l){if(l.length!==0)return l.map((c=>(function(h){return{field:xh(h.field),direction:tle(h.dir)}})(c)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=mx(r,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function VU(r){let e=UU(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){Et(n===1,65062);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=(function(u){const h=$U(u);return h instanceof zr&&y5(h)?h.getFilters():[h]})(t.where));let a=[];t.orderBy&&(a=(function(u){return u.map((h=>(function(p){return new lm(Bh(p.field),(function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(p.direction))})(h)))})(t.orderBy));let o=null;t.limit&&(o=(function(u){let h;return h=typeof u=="object"?u.value:u,Om(h)?null:h})(t.limit));let A=null;t.startAt&&(A=(function(u){const h=!!u.before,d=u.values||[];return new Wc(d,h)})(t.startAt));let l=null;return t.endAt&&(l=(function(u){const h=!u.before,d=u.values||[];return new Wc(d,h)})(t.endAt)),fU(e,i,a,s,o,"F",A,l)}function ele(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $U(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Bh(t.unaryFilter.field);return br.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Bh(t.unaryFilter.field);return br.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bh(t.unaryFilter.field);return br.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bh(t.unaryFilter.field);return br.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(r):r.fieldFilter!==void 0?(function(t){return br.create(Bh(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return zr.create(t.compositeFilter.filters.map((n=>$U(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(t.compositeFilter.op))})(r):gt(30097,{filter:r})}function tle(r){return KAe[r]}function rle(r){return zAe[r]}function nle(r){return qAe[r]}function xh(r){return{fieldPath:r.canonicalString()}}function Bh(r){return Fn.fromServerFormat(r.fieldPath)}function jU(r){return r instanceof br?(function(t){if(t.op==="=="){if(TF(t.value))return{unaryFilter:{field:xh(t.field),op:"IS_NAN"}};if(kF(t.value))return{unaryFilter:{field:xh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TF(t.value))return{unaryFilter:{field:xh(t.field),op:"IS_NOT_NAN"}};if(kF(t.value))return{unaryFilter:{field:xh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xh(t.field),op:rle(t.op),value:t.value}}})(r):r instanceof zr?(function(t){const n=t.getFilters().map((i=>jU(i)));return n.length===1?n[0]:{compositeFilter:{op:nle(t.op),filters:n}}})(r):gt(54877,{filter:r})}function ile(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function GU(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t,n,i,s=Pt.min(),a=Pt.min(),o=Yn.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=A}withSequenceNumber(e){return new cl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.yt=e}}function sle(r,e){let t;if(e.document)t=OU(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ot.fromSegments(e.noDocument.path),i=Cd(e.noDocument.readTime);t=bn.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt(56709);{const n=ot.fromSegments(e.unknownDocument.path),i=Cd(e.unknownDocument.version);t=bn.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime((function(i){const s=new Qr(i[0],i[1]);return Pt.fromTimestamp(s)})(e.readTime)),t}function zF(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(s,a){return{name:cm(s,a.key),fields:a.data.value.mapValue.fields,updateTime:pf(s,a.version.toTimestamp()),createTime:pf(s,a.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Bd(e.version)};else{if(!e.isUnknownDocument())return gt(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Bd(e.version)}}return n}function hw(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Bd(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cd(r){const e=new Qr(r.seconds,r.nanoseconds);return Pt.fromTimestamp(e)}function Mu(r,e){const t=(e.baseMutations||[]).map((s=>wx(r.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map((s=>wx(r.yt,s))),i=Qr.fromMillis(e.localWriteTimeMs);return new x5(e.batchId,i,t,n)}function Wg(r){const e=Cd(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Cd(r.lastLimboFreeSnapshotVersion):Pt.min();let n;return n=(function(s){return s.documents!==void 0})(r.query)?(function(s){const a=s.documents.length;return Et(a===1,1966,{count:a}),Gs(Uf(UU(s.documents[0])))})(r.query):(function(s){return Gs(VU(s))})(r.query),new cl(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Yn.fromBase64String(r.resumeToken))}function zU(r,e){const t=Bd(e.snapshotVersion),n=Bd(e.lastLimboFreeSnapshotVersion);let i;i=cw(e.target)?QU(r.yt,e.target):HU(r.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vd(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function I5(r){const e=VU({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?dw(e,e.limit,"L"):e}function C_(r,e){return new C5(e.largestBatchId,wx(r.yt,e.overlayMutation))}function qF(r,e){const t=e.path.lastSegment();return[r,Ls(e.path.popLast()),t]}function WF(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Bd(n.readTime),documentKey:Ls(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ale{getBundleMetadata(e,t){return YF(e).get(t).next((n=>{if(n)return(function(s){return{id:s.bundleId,createTime:Cd(s.createTime),version:s.version}})(n)}))}saveBundleMetadata(e,t){return YF(e).put((function(i){return{bundleId:i.id,createTime:Bd(fi(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return XF(e).get(t).next((n=>{if(n)return(function(s){return{name:s.name,query:I5(s.bundledQuery),readTime:Cd(s.readTime)}})(n)}))}saveNamedQuery(e,t){return XF(e).put((function(i){return{name:i.name,readTime:Bd(fi(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function YF(r){return Di(r,lv)}function XF(r){return Di(r,cv)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new mv(e,n)}getOverlay(e,t){return Cg(e).get(qF(this.userId,t)).next((n=>n?C_(this.serializer,n):null))}getOverlays(e,t){const n=fA();return Le.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((s,a)=>{const o=new C5(t,a);i.push(this.St(e,o))})),Le.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((a=>i.add(Ls(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);s.push(Cg(e).Z(Ax,o))})),Le.waitFor(s)}getOverlaysForCollection(e,t,n){const i=fA(),s=Ls(t),a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Cg(e).J(Ax,a).next((o=>{for(const A of o){const l=C_(this.serializer,A);i.set(l.getKey(),l)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const s=fA();let a;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cg(e).ee({index:KR,range:o},((A,l,c)=>{const u=C_(this.serializer,l);s.size()<i||u.largestBatchId===a?(s.set(u.getKey(),u),a=u.largestBatchId):c.done()})).next((()=>s))}St(e,t){return Cg(e).put((function(i,s,a){const[o,A,l]=qF(s,a.mutation.key);return{userId:s,collectionPath:A,documentId:l,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:um(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Cg(r){return Di(r,uv)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ole{bt(e){return Di(e,f5)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t==null?void 0:t.value;return n?Yn.fromUint8Array(n):Yn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(kn(e.integerValue));else if("doubleValue"in e){const n=kn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),rm(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=vl(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(_l(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?iU(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):fv(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):gt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const i of Object.keys(n))this.Ot(i,t),this.Ct(n[i],t)}kt(e,t){var a,o;const n=e.fields||{};this.Ft(t,53);const i=uf,s=((o=(a=n[i].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(t,15),t.Mt(kn(s)),this.Ot(i,t),this.Ct(n[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const i of n)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ot.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ou.Kt=new Ou;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=255;function Ale(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function JF(r){const e=64-(function(n){let i=0;for(let s=0;s<8;++s){const a=Ale(255&n[s]);if(i+=a,a!==8)break}return i})(r);return Math.ceil(e/8)}class lle{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),n=JF(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),n=JF(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(dh),this.sn(255)}_n(){this.an(dh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===dh?(this.sn(dh),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===dh?(this.an(dh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class cle{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class ule{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Eg{constructor(){this.cn=new lle,this.ln=new cle(this.cn),this.hn=new ule(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t,n,i){this.Tn=e,this.In=t,this.En=n,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Qu(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:mb(this.En),directionalValue:mb(this.dn),orderedDocumentKey:mb(t),documentKey:n.path.toArray()}}Vn(e,t,n){const i=this.Rn(e,t,n);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ec(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=ZF(r.En,e.En),t!==0?t:(t=ZF(r.dn,e.dn),t!==0?t:ot.comparator(r.In,e.In)))}function ZF(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function mb(r){return cD()?(function(t){let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n})(r):r}function e4(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(r)}class t4{constructor(e){this.mn=new qr(((t,n)=>Fn.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Et(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=sx(e);if(t!==void 0&&!this.wn(t))return!1;const n=Pu(e);let i=new Set,s=0,a=0;for(;s<n.length&&this.wn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const A=n[s];if(!this.Sn(o,A)||!this.bn(this.fn[a++],A))return!1}++s}for(;s<n.length;++s){const o=n[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new qr(Fn.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new lb(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new lb(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new lb(n.field,n.dir==="asc"?0:1)));return new aw(aw.UNKNOWN_ID,this.collectionId,t,tm.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(r){var t,n;if(Et(r instanceof br||r instanceof zr,20012),r instanceof br){if(r instanceof hU){const i=((n=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map((s=>br.create(r.field,"==",s))))||[];return zr.create(i,"or")}return r}const e=r.filters.map((i=>qU(i)));return zr.create(e,r.op)}function dle(r){if(r.getFilters().length===0)return[];const e=xx(qU(r));return Et(WU(e),7391),vx(e)||_x(e)?[e]:e.getFilters()}function vx(r){return r instanceof br}function _x(r){return r instanceof zr&&y5(r)}function WU(r){return vx(r)||_x(r)||(function(t){if(t instanceof zr&&hx(t)){for(const n of t.getFilters())if(!vx(n)&&!_x(n))return!1;return!0}return!1})(r)}function xx(r){if(Et(r instanceof br||r instanceof zr,34018),r instanceof br)return r;if(r.filters.length===1)return xx(r.filters[0]);const e=r.filters.map((n=>xx(n)));let t=zr.create(e,r.op);return t=fw(t),WU(t)?t:(Et(t instanceof zr,64498),Et(hf(t),40251),Et(t.filters.length>1,57927),t.filters.reduce(((n,i)=>k5(n,i))))}function k5(r,e){let t;return Et(r instanceof br||r instanceof zr,38388),Et(e instanceof br||e instanceof zr,25473),t=r instanceof br?e instanceof br?(function(i,s){return zr.create([i,s],"and")})(r,e):r4(r,e):e instanceof br?r4(e,r):(function(i,s){if(Et(i.filters.length>0&&s.filters.length>0,48005),hf(i)&&hf(s))return cU(i,s.getFilters());const a=hx(i)?i:s,o=hx(i)?s:i,A=a.filters.map((l=>k5(l,o)));return zr.create(A,"or")})(r,e),fw(t)}function r4(r,e){if(hf(e))return cU(e,r.getFilters());{const t=e.filters.map((n=>k5(r,n)));return zr.create(t,"or")}}function fw(r){if(Et(r instanceof br||r instanceof zr,11850),r instanceof br)return r;const e=r.getFilters();if(e.length===1)return fw(e[0]);if(AU(r))return r;const t=e.map((i=>fw(i))),n=[];return t.forEach((i=>{i instanceof br?n.push(i):i instanceof zr&&(i.op===r.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:zr.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hle{constructor(){this.Cn=new T5}addToCollectionParentIndex(e,t){return this.Cn.add(t),Le.resolve()}getCollectionParents(e,t){return Le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Le.resolve()}deleteFieldIndex(e,t){return Le.resolve()}deleteAllFieldIndexes(e){return Le.resolve()}createTargetIndexes(e,t){return Le.resolve()}getDocumentsMatchingTarget(e,t){return Le.resolve(null)}getIndexType(e,t){return Le.resolve(0)}getFieldIndexes(e,t){return Le.resolve([])}getNextCollectionGroupToUpdate(e){return Le.resolve(null)}getMinOffset(e,t){return Le.resolve(qa.min())}getMinOffsetFromCollectionGroup(e,t){return Le.resolve(qa.min())}updateCollectionGroup(e,t,n){return Le.resolve()}updateIndexEntries(e,t){return Le.resolve()}}class T5{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new qr(hr.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new qr(hr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="IndexedDbIndexManager",ky=new Uint8Array(0);class fle{constructor(e,t){this.databaseId=t,this.vn=new T5,this.Fn=new Sl((n=>vd(n)),((n,i)=>Hm(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:n,parent:Ls(i)};return i4(e).put(s)}return Le.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[FR(t),""],!1,!0);return i4(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;n.push(hA(a.parent))}return n}))}addFieldIndex(e,t){const n=Sg(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((A=>[A.fieldPath.canonicalString(),A.kind]))}})(t);delete i.indexId;const s=n.add(i);if(t.indexState){const a=fh(e);return s.next((o=>{a.put(WF(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const n=Sg(e),i=fh(e),s=hh(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Sg(e),n=hh(e),i=fh(e);return t.Z().next((()=>n.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return Le.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const s=new t4(n).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const n=hh(e);let i=!0;const s=new Map;return Le.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=nr();const o=[];return Le.forEach(s,((A,l)=>{Je(n4,`Using index ${(function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map((C=>`${C.fieldPath}:${C.kind}`)).join(",")}`})(A)} to execute ${vd(t)}`);const c=(function(S,C){const P=sx(C);if(P===void 0)return null;for(const M of uw(S,P.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null})(l,A),u=(function(S,C){const P=new Map;for(const M of Pu(C))for(const L of uw(S,M.fieldPath))switch(L.op){case"==":case"in":P.set(M.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return P.set(M.fieldPath.canonicalString(),L.value),Array.from(P.values())}return null})(l,A),h=(function(S,C){const P=[];let M=!0;for(const L of Pu(C)){const _=L.kind===0?DF(S,L.fieldPath,S.startAt):RF(S,L.fieldPath,S.startAt);P.push(_.value),M&&(M=_.inclusive)}return new Wc(P,M)})(l,A),d=(function(S,C){const P=[];let M=!0;for(const L of Pu(C)){const _=L.kind===0?RF(S,L.fieldPath,S.endAt):DF(S,L.fieldPath,S.endAt);P.push(_.value),M&&(M=_.inclusive)}return new Wc(P,M)})(l,A),p=this.On(A,l,h),f=this.On(A,l,d),y=this.Nn(A,l,u),b=this.Bn(A.indexId,c,p,h.inclusive,f,d.inclusive,y);return Le.forEach(b,(B=>n.Y(B,t.limit).next((S=>{S.forEach((C=>{const P=ot.fromSegments(C.documentKey);a.has(P)||(a=a.add(P),o.push(P))}))}))))})).next((()=>o))}return Le.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=dle(zr.create(e.filters,"and")).map((n=>gx(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,i,s,a,o){const A=(t!=null?t.length:1)*Math.max(n.length,s.length),l=A/(t!=null?t.length:1),c=[];for(let u=0;u<A;++u){const h=t?this.Ln(t[u/l]):ky,d=this.kn(e,h,n[u%l],i),p=this.qn(e,h,s[u%l],a),f=o.map((y=>this.kn(e,h,y,!0)));c.push(...this.createRange(d,p,f))}return c}kn(e,t,n,i){const s=new Qu(e,ot.empty(),t,n);return i?s:s.An()}qn(e,t,n,i){const s=new Qu(e,ot.empty(),t,n);return i?s.An():s}xn(e,t){const n=new t4(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)n.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let n=2;const i=this.Mn(t);return Le.forEach(i,(s=>this.xn(e,s).next((a=>{a?n!==0&&a.fields.length<(function(A){let l=new qr(Fn.comparator),c=!1;for(const u of A.filters)for(const h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:l=l.add(h.field));for(const u of A.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)})(s)&&(n=1):n=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&n===2?1:n))}Qn(e,t){const n=new Eg;for(const i of Pu(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=n.Pn(i.kind);Ou.Kt.Dt(s,a)}return n.un()}Ln(e){const t=new Eg;return Ou.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Eg;return Ou.Kt.Dt(wd(this.databaseId,t),n.Pn((function(s){const a=Pu(s);return a.length===0?0:a[a.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let i=[];i.push(new Eg);let s=0;for(const a of Pu(e)){const o=n[s++];for(const A of i)if(this.Un(t,a.fieldPath)&&Am(o))i=this.Kn(i,a,o);else{const l=A.Pn(a.kind);Ou.Kt.Dt(o,l)}}return this.Wn(i)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const i=[...e],s=[];for(const a of n.arrayValue.values||[])for(const o of i){const A=new Eg;A.seed(o.un()),Ou.Kt.Dt(a,A.Pn(t.kind)),s.push(A)}return s}Un(e,t){return!!e.filters.find((n=>n instanceof br&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Sg(e),i=fh(e);return(t?n.J(ox,IDBKeyRange.bound(t,t)):n.J()).next((s=>{const a=[];return Le.forEach(s,(o=>i.get([o.indexId,this.uid]).next((A=>{a.push((function(c,u){const h=u?new tm(u.sequenceNumber,new qa(Cd(u.readTime),new ot(hA(u.documentKey)),u.largestBatchId)):tm.empty(),d=c.fields.map((([p,f])=>new lb(Fn.fromServerFormat(p),f)));return new aw(c.indexId,c.collectionGroup,d,h)})(o,A))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Wt(n.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=Sg(e),s=fh(e);return this.Gn(e).next((a=>i.J(ox,IDBKeyRange.bound(t,t)).next((o=>Le.forEach(o,(A=>s.put(WF(A.indexId,this.uid,a,n))))))))}updateIndexEntries(e,t){const n=new Map;return Le.forEach(t,((i,s)=>{const a=n.get(i.collectionGroup);return(a?Le.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(n.set(i.collectionGroup,o),Le.forEach(o,(A=>this.zn(e,i,A).next((l=>{const c=this.jn(s,A);return l.isEqual(c)?Le.resolve():this.Jn(e,s,A,l,c)})))))))}))}Hn(e,t,n,i){return hh(e).put(i.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,i){return hh(e).delete(i.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const i=hh(e);let s=new qr(ec);return i.ee({index:GR,range:IDBKeyRange.only([n.indexId,this.uid,mb(this.$n(n,t))])},((a,o)=>{s=s.add(new Qu(n.indexId,t,e4(o.arrayValue),e4(o.directionalValue)))})).next((()=>s))}jn(e,t){let n=new qr(ec);const i=this.Qn(t,e);if(i==null)return n;const s=sx(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Am(a))for(const o of a.arrayValue.values||[])n=n.add(new Qu(t.indexId,e.key,this.Ln(o),i))}else n=n.add(new Qu(t.indexId,e.key,ky,i));return n}Jn(e,t,n,i,s){Je(n4,"Updating index entries for document '%s'",t.key);const a=[];return(function(A,l,c,u,h){const d=A.getIterator(),p=l.getIterator();let f=uh(d),y=uh(p);for(;f||y;){let b=!1,B=!1;if(f&&y){const S=c(f,y);S<0?B=!0:S>0&&(b=!0)}else f!=null?B=!0:b=!0;b?(u(y),y=uh(p)):B?(h(f),f=uh(d)):(f=uh(d),y=uh(p))}})(i,s,ec,(o=>{a.push(this.Hn(e,t,n,o))}),(o=>{a.push(this.Yn(e,t,n,o))})),Le.waitFor(a)}Gn(e){let t=1;return fh(e).ee({index:jR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((a,o)=>ec(a,o))).filter(((a,o,A)=>!o||ec(a,A[o-1])!==0));const i=[];i.push(e);for(const a of n){const o=ec(a,e),A=ec(a,t);if(o===0)i[0]=e.An();else if(o>0&&A<0)i.push(a),i.push(a.An());else if(A>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,ky,ot.empty()),A=i[a+1].Vn(this.uid,ky,ot.empty());s.push(IDBKeyRange.bound(o,A))}return s}Zn(e,t){return ec(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(s4)}getMinOffset(e,t){return Le.mapArray(this.Mn(t),(n=>this.xn(e,n).next((i=>i||gt(44426))))).next(s4)}}function i4(r){return Di(r,sm)}function hh(r){return Di(r,Sp)}function Sg(r){return Di(r,h5)}function fh(r){return Di(r,Ep)}function s4(r){Et(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;c5(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qa(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YU=41943040;class Es{static withCacheSize(e){return new Es(e,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(r,e,t){const n=r.store(xo),i=r.store(of),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const A=n.ee({range:a},((c,u,h)=>(o++,h.delete())));s.push(A.next((()=>{Et(o===1,47070,{batchId:t.batchId})})));const l=[];for(const c of t.mutations){const u=HR(e,c.key.path,t.batchId);s.push(i.delete(u)),l.push(c.key)}return Le.waitFor(s).next((()=>l))}function gw(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw gt(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Es.DEFAULT_COLLECTION_PERCENTILE=10,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Es.DEFAULT=new Es(YU,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Es.DISABLED=new Es(-1,0,0);class yv{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Xn={}}static wt(e,t,n,i){Et(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new yv(s,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tc(e).ee({index:qu,range:n},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const s=Ch(e),a=tc(e);return a.add({}).next((o=>{Et(typeof o=="number",49019);const A=new x5(o,t,n,i),l=(function(d,p,f){const y=f.baseMutations.map((B=>um(d.yt,B))),b=f.mutations.map((B=>um(d.yt,B)));return{userId:p,batchId:f.batchId,localWriteTimeMs:f.localWriteTime.toMillis(),baseMutations:y,mutations:b}})(this.serializer,this.userId,A),c=[];let u=new qr(((h,d)=>Wt(h.canonicalString(),d.canonicalString())));for(const h of i){const d=HR(this.userId,h.key.path,o);u=u.add(h.key.path.popLast()),c.push(a.put(l)),c.push(s.put(d,qoe))}return u.forEach((h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))})),e.addOnCommittedListener((()=>{this.Xn[o]=A.keys()})),Le.waitFor(c).next((()=>A))}))}lookupMutationBatch(e,t){return tc(e).get(t).next((n=>n?(Et(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),Mu(this.serializer,n)):null))}er(e,t){return this.Xn[t]?Le.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const i=n.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return tc(e).ee({index:qu,range:i},((a,o,A)=>{o.userId===this.userId&&(Et(o.batchId>=n,47524,{tr:n}),s=Mu(this.serializer,o)),A.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Fc;return tc(e).ee({index:qu,range:t,reverse:!0},((i,s,a)=>{n=s.batchId,a.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Fc],[this.userId,Number.POSITIVE_INFINITY]);return tc(e).J(qu,t).next((n=>n.map((i=>Mu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=cb(this.userId,t.path),i=IDBKeyRange.lowerBound(n),s=[];return Ch(e).ee({range:i},((a,o,A)=>{const[l,c,u]=a,h=hA(c);if(l===this.userId&&t.path.isEqual(h))return tc(e).get(u).next((d=>{if(!d)throw gt(61480,{nr:a,batchId:u});Et(d.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:d.userId,batchId:u}),s.push(Mu(this.serializer,d))}));A.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qr(Wt);const i=[];return t.forEach((s=>{const a=cb(this.userId,s.path),o=IDBKeyRange.lowerBound(a),A=Ch(e).ee({range:o},((l,c,u)=>{const[h,d,p]=l,f=hA(d);h===this.userId&&s.path.isEqual(f)?n=n.add(p):u.done()}));i.push(A)})),Le.waitFor(i).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,s=cb(this.userId,n),a=IDBKeyRange.lowerBound(s);let o=new qr(Wt);return Ch(e).ee({range:a},((A,l,c)=>{const[u,h,d]=A,p=hA(h);u===this.userId&&n.isPrefixOf(p)?p.length===i&&(o=o.add(d)):c.done()})).next((()=>this.rr(e,o)))}rr(e,t){const n=[],i=[];return t.forEach((s=>{i.push(tc(e).get(s).next((a=>{if(a===null)throw gt(35274,{batchId:s});Et(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),n.push(Mu(this.serializer,a))})))})),Le.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return XU(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),Le.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Le.resolve();const n=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return Ch(e).ee({range:n},((s,a,o)=>{if(s[0]===this.userId){const A=hA(s[1]);i.push(A)}else o.done()})).next((()=>{Et(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return JU(e,this.userId,t)}_r(e){return ZU(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Fc,lastStreamToken:""}))}}function JU(r,e,t){const n=cb(e,t.path),i=n[1],s=IDBKeyRange.lowerBound(n);let a=!1;return Ch(r).ee({range:s,X:!0},((o,A,l)=>{const[c,u,h]=o;c===e&&u===i&&(a=!0),l.done()})).next((()=>a))}function tc(r){return Di(r,xo)}function Ch(r){return Di(r,of)}function ZU(r){return Di(r,nm)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ed(0)}static cr(){return new Ed(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gle{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Ed(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Pt.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>gh(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Et(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let i=0;const s=[];return gh(e).ee(((a,o)=>{const A=Wg(o);A.sequenceNumber<=t&&n.get(A.targetId)===null&&(i++,s.push(this.removeTargetData(e,A)))})).next((()=>Le.waitFor(s))).next((()=>i))}forEachTarget(e,t){return gh(e).ee(((n,i)=>{const s=Wg(i);t(s)}))}lr(e){return o4(e).get(lw).next((t=>(Et(t!==null,2888),t)))}hr(e,t){return o4(e).put(lw,t)}Pr(e,t){return gh(e).put(zU(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=vd(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return gh(e).ee({range:i,index:$R},((a,o,A)=>{const l=Wg(o);Hm(t,l.target)&&(s=l,A.done())})).next((()=>s))}addMatchingKeys(e,t,n){const i=[],s=lc(e);return t.forEach((a=>{const o=Ls(a.path);i.push(s.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,a))})),Le.waitFor(i)}removeMatchingKeys(e,t,n){const i=lc(e);return Le.forEach(t,(s=>{const a=Ls(s.path);return Le.waitFor([i.delete([n,a]),this.referenceDelegate.removeReference(e,n,s)])}))}removeMatchingKeysForTargetId(e,t){const n=lc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=lc(e);let s=nr();return i.ee({range:n,X:!0},((a,o,A)=>{const l=hA(a[1]),c=new ot(l);s=s.add(c)})).next((()=>s))}containsKey(e,t){const n=Ls(t.path),i=IDBKeyRange.bound([n],[FR(n)],!1,!0);let s=0;return lc(e).ee({index:d5,X:!0,range:i},(([a,o],A,l)=>{a!==0&&(s++,l.done())})).next((()=>s>0))}At(e,t){return gh(e).get(t).next((n=>n?Wg(n):null))}}function gh(r){return Di(r,Af)}function o4(r){return Di(r,ld)}function lc(r){return Di(r,lf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="LruGarbageCollector",ple=1048576;function l4([r,e],[t,n]){const i=Wt(r,t);return i===0?Wt(e,n):i}class mle{constructor(e){this.Ir=e,this.buffer=new qr(l4),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();l4(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eM{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Je(A4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){au(t)?Je(A4,"Ignoring IndexedDB error during garbage collection: ",t):await su(t)}await this.Vr(3e5)}))}}class yle{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return Le.resolve(ya.ce);const n=new mle(t);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(a4)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a4):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,s,a,o,A,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((u=>(u>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),i=this.params.maximumSequenceNumbersToCollect):i=u,a=Date.now(),this.nthSequenceNumber(e,i)))).next((u=>(n=u,o=Date.now(),this.removeTargets(e,n,t)))).next((u=>(s=u,A=Date.now(),this.removeOrphanedDocuments(e,n)))).next((u=>(l=Date.now(),vh()<=dr.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(A-o)+`ms
	Removed ${u} documents in `+(l-A)+`ms
Total Duration: ${l-c}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:u}))))}}function tM(r,e){return new yle(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ble{constructor(e,t){this.db=e,this.garbageCollector=tM(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,i)=>t(i)))}addReference(e,t,n){return Ty(e,n)}removeReference(e,t,n){return Ty(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ty(e,t)}br(e,t){return(function(i,s){let a=!1;return ZU(i).te((o=>JU(i,o,s).next((A=>(A&&(a=!0),Le.resolve(!A)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const A=this.br(e,a).next((l=>{if(!l)return s++,n.getEntry(e,a).next((()=>(n.removeEntry(a,Pt.min()),lc(e).delete((function(u){return[0,Ls(u.path)]})(a)))))}));i.push(A)}})).next((()=>Le.waitFor(i))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ty(e,t)}Sr(e,t){const n=lc(e);let i,s=ya.ce;return n.ee({index:d5},(([a,o],{path:A,sequenceNumber:l})=>{a===0?(s!==ya.ce&&t(new ot(hA(i)),s),s=l,i=A):s=ya.ce})).next((()=>{s!==ya.ce&&t(new ot(hA(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ty(r,e){return lc(r).put((function(n,i){return{targetId:0,path:Ls(n.path),sequenceNumber:i}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.changes=new Sl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Le.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wle{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Iu(e).put(n)}removeEntry(e,t,n){return Iu(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],hw(a),o[o.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=bn.newInvalidDocument(t);return Iu(e).ee({index:ub,range:IDBKeyRange.only(Ig(t))},((i,s)=>{n=this.Cr(t,s)})).next((()=>n))}vr(e,t){let n={size:0,document:bn.newInvalidDocument(t)};return Iu(e).ee({index:ub,range:IDBKeyRange.only(Ig(t))},((i,s)=>{n={document:this.Cr(t,s),size:gw(s)}})).next((()=>n))}getEntries(e,t){let n=wa();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);n=n.insert(i,a)})).next((()=>n))}Mr(e,t){let n=wa(),i=new gn(ot.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);n=n.insert(s,o),i=i.insert(s,gw(a))})).next((()=>({documents:n,Or:i})))}Fr(e,t,n){if(t.isEmpty())return Le.resolve();let i=new qr(d4);t.forEach((A=>i=i.add(A)));const s=IDBKeyRange.bound(Ig(i.first()),Ig(i.last())),a=i.getIterator();let o=a.getNext();return Iu(e).ee({index:ub,range:s},((A,l,c)=>{const u=ot.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;o&&d4(o,u)<0;)n(o,null),o=a.getNext();o&&o.isEqual(u)&&(n(o,l),o=a.hasNext()?a.getNext():null),o?c.j(Ig(o)):c.done()})).next((()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),hw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],A=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Iu(e).J(IDBKeyRange.bound(o,A,!0)).next((l=>{s==null||s.incrementDocumentReadCount(l.length);let c=wa();for(const u of l){const h=this.Cr(ot.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&($m(t,h)||i.has(h.key))&&(c=c.insert(h.key,h))}return c}))}getAllFromCollectionGroup(e,t,n,i){let s=wa();const a=u4(t,n),o=u4(t,qa.max());return Iu(e).ee({index:VR,range:IDBKeyRange.bound(a,o,!0)},((A,l,c)=>{const u=this.Cr(ot.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(u.key,u),s.size===i&&c.done()})).next((()=>s))}newChangeBuffer(e){return new vle(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return c4(e).get(ax).next((t=>(Et(!!t,20021),t)))}Dr(e,t){return c4(e).put(ax,t)}Cr(e,t){if(t){const n=sle(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Pt.min())))return n}return bn.newInvalidDocument(e)}}function nM(r){return new wle(r)}class vle extends rM{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Sl((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const t=[];let n=0,i=new qr(((s,a)=>Wt(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const A=zF(this.Nr.serializer,a);i=i.add(s.path.popLast());const l=gw(A);n+=l-o.size,t.push(this.Nr.addEntry(e,s,A))}else if(n-=o.size,this.trackRemovals){const A=zF(this.Nr.serializer,a.convertToNoDocument(Pt.min()));t.push(this.Nr.addEntry(e,s,A))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,n)),Le.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:n.get(s).readTime})})),n)))}}function c4(r){return Di(r,im)}function Iu(r){return Di(r,Aw)}function Ig(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function u4(r,e){const t=e.documentKey.path.toArray();return[r,hw(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function d4(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<n.length-2;++s)if(i=Wt(t[s],n[s]),i)return i;return i=Wt(t.length,n.length),i||(i=Wt(t[t.length-2],n[n.length-2]),i||Wt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _le{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&Tp(n.mutation,i,ba.empty(),Qr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,nr()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=nr()){const i=fA();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((s=>{let a=zg();return s.forEach(((o,A)=>{a=a.insert(o,A.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const n=fA();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,nr())))}populateOverlays(e,t,n){const i=[];return n.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,n,i){let s=wa();const a=kp(),o=(function(){return kp()})();return t.forEach(((A,l)=>{const c=n.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Il)?s=s.insert(l.key,l):c!==void 0?(a.set(l.key,c.mutation.getFieldMask()),Tp(c.mutation,l,c.mutation.getFieldMask(),Qr.now())):a.set(l.key,ba.empty())})),this.recalculateAndSaveOverlays(e,s).next((A=>(A.forEach(((l,c)=>a.set(l,c))),t.forEach(((l,c)=>o.set(l,new _le(c,a.get(l)??null)))),o)))}recalculateAndSaveOverlays(e,t){const n=kp();let i=new gn(((a,o)=>a-o)),s=nr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((A=>{const l=t.get(A);if(l===null)return;let c=n.get(A)||ba.empty();c=o.applyToLocalView(l,c),n.set(A,c);const u=(i.get(o.batchId)||nr()).add(A);i=i.insert(o.batchId,u)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const A=o.getNext(),l=A.key,c=A.value,u=wU();c.forEach((h=>{if(!s.has(h)){const d=SU(t.get(h),n.get(h));d!==null&&u.set(h,d),s=s.add(h)}})),a.push(this.documentOverlayCache.saveOverlays(e,l,u))}return Le.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(a){return ot.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):b5(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):Le.resolve(fA());let o=af,A=s;return a.next((l=>Le.forEach(l,((c,u)=>(o<u.largestBatchId&&(o=u.largestBatchId),s.get(c)?Le.resolve():this.remoteDocumentCache.getEntry(e,c).next((h=>{A=A.insert(c,h)}))))).next((()=>this.populateOverlays(e,l,s))).next((()=>this.computeViews(e,A,l,nr()))).next((c=>({batchId:o,changes:bU(c)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next((n=>{let i=zg();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=zg();return this.indexManager.getCollectionParents(e,s).next((o=>Le.forEach(o,(A=>{const l=(function(u,h){return new El(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)})(t,A.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,n,i).next((c=>{c.forEach(((u,h)=>{a=a.insert(u,h)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i)))).next((a=>{s.forEach(((A,l)=>{const c=l.getKey();a.get(c)===null&&(a=a.insert(c,bn.newInvalidDocument(c)))}));let o=zg();return a.forEach(((A,l)=>{const c=s.get(A);c!==void 0&&Tp(c.mutation,l,ba.empty(),Qr.now()),$m(t,l)&&(o=o.insert(A,l))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xle{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:fi(i.createTime)}})(t)),Le.resolve()}getNamedQuery(e,t){return Le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:I5(i.bundledQuery),readTime:fi(i.readTime)}})(t)),Le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ble{constructor(){this.overlays=new gn(ot.comparator),this.qr=new Map}getOverlay(e,t){return Le.resolve(this.overlays.get(t))}getOverlays(e,t){const n=fA();return Le.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,s)=>{this.St(e,t,s)})),Le.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(n)),Le.resolve()}getOverlaysForCollection(e,t,n){const i=fA(),s=t.length+1,a=new ot(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const A=o.getNext().value,l=A.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&A.largestBatchId>n&&i.set(A.getKey(),A)}return Le.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new gn(((l,c)=>l-c));const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>n){let c=s.get(l.largestBatchId);c===null&&(c=fA(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const o=fA(),A=s.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach(((l,c)=>o.set(l,c))),!(o.size()>=i)););return Le.resolve(o)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new C5(t,n));let s=this.qr.get(t);s===void 0&&(s=nr(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cle{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(e){return Le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.Qr=new qr(Gi.$r),this.Ur=new qr(Gi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Gi(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Gi(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new ot(new hr([])),n=new Gi(t,e),i=new Gi(t,e+1),s=[];return this.Ur.forEachInRange([n,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ot(new hr([])),n=new Gi(t,e),i=new Gi(t,e+1);let s=nr();return this.Ur.forEachInRange([n,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new Gi(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Gi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ot.comparator(e.key,t.key)||Wt(e.Yr,t.Yr)}static Kr(e,t){return Wt(e.Yr,t.Yr)||ot.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ele{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new qr(Gi.$r)}checkEmpty(e){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new x5(s,t,n,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Gi(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Le.resolve(a)}lookupMutationBatch(e,t){return Le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),s=i<0?0:i;return Le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?Fc:this.tr-1)}getAllMutationBatches(e){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Gi(t,0),i=new Gi(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),Le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qr(Wt);return t.forEach((i=>{const s=new Gi(i,0),a=new Gi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{n=n.add(o.Yr)}))})),Le.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;ot.isDocumentKey(s)||(s=s.child(""));const a=new Gi(new ot(s),0);let o=new qr(Wt);return this.Zr.forEachWhile((A=>{const l=A.key.path;return!!n.isPrefixOf(l)&&(l.length===i&&(o=o.add(A.Yr)),!0)}),a),Le.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Le.forEach(t.mutations,(i=>{const s=new Gi(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Gi(t,0),i=this.Zr.firstAfterOrEqual(n);return Le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sle{constructor(e){this.ri=e,this.docs=(function(){return new gn(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Le.resolve(n?n.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let n=wa();return t.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():bn.newInvalidDocument(i))})),Le.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=wa();const a=t.path,o=new ot(a.child("__id-9223372036854775808__")),A=this.docs.getIteratorFrom(o);for(;A.hasNext();){const{key:l,value:{document:c}}=A.getNext();if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||c5(RR(c),n)<=0||(i.has(c.key)||$m(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Le.resolve(s)}getAllFromCollectionGroup(e,t,n,i){gt(9500)}ii(e,t){return Le.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new Ile(this)}getSize(e){return Le.resolve(this.size)}}class Ile extends rM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),Le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kle{constructor(e){this.persistence=e,this.si=new Sl((t=>vd(t)),Hm),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.oi=0,this._i=new F5,this.targetCount=0,this.ai=Ed.ur()}forEachTarget(e,t){return this.si.forEach(((n,i)=>t(i))),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ed(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Le.resolve()}updateTargetData(e,t){return this.Pr(t),Le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Le.waitFor(s).next((()=>i))}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Le.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Le.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),Le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Le.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Le.resolve(n)}containsKey(e,t){return Le.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,t){this.ui={},this.overlays={},this.ci=new ya(0),this.li=!1,this.li=!0,this.hi=new Cle,this.referenceDelegate=e(this),this.Pi=new kle(this),this.indexManager=new hle,this.remoteDocumentCache=(function(i){return new Sle(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new KU(t),this.Ii=new xle(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ble,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Ele(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Je("MemoryPersistence","Starting transaction:",e);const i=new Tle(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return Le.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class Tle extends MR{constructor(e){super(),this.currentSequenceNumber=e}}class bv{constructor(e){this.persistence=e,this.Ri=new F5,this.Vi=null}static mi(e){return new bv(e)}get fi(){if(this.Vi)return this.Vi;throw gt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Le.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.fi,(n=>{const i=ot.fromPath(n);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Pt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Le.or([()=>Le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pw{constructor(e,t){this.persistence=e,this.pi=new Sl((n=>Ls(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=tM(this,t)}static mi(e,t){return new pw(e,t)}Ei(){}di(e){return Le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return Le.forEach(this.pi,((n,i)=>this.br(e,n,i).next((s=>s?Le.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(n++,s.removeEntry(a,Pt.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Le.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Le.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hb(e.data.value)),t}br(e,t,n){return Le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Le.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fle{constructor(e){this.serializer=e}k(e,t,n,i){const s=new Av("createOrUpgrade",t);n<1&&i>=1&&((function(A){A.createObjectStore(Qm)})(e),(function(A){A.createObjectStore(nm,{keyPath:zoe}),A.createObjectStore(xo,{keyPath:xF,autoIncrement:!0}).createIndex(qu,BF,{unique:!0}),A.createObjectStore(of)})(e),h4(e),(function(A){A.createObjectStore(Nu)})(e));let a=Le.resolve();return n<3&&i>=3&&(n!==0&&((function(A){A.deleteObjectStore(lf),A.deleteObjectStore(Af),A.deleteObjectStore(ld)})(e),h4(e)),a=a.next((()=>(function(A){const l=A.store(ld),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return l.put(lw,c)})(s)))),n<4&&i>=4&&(n!==0&&(a=a.next((()=>(function(A,l){return l.store(xo).J().next((u=>{A.deleteObjectStore(xo),A.createObjectStore(xo,{keyPath:xF,autoIncrement:!0}).createIndex(qu,BF,{unique:!0});const h=l.store(xo),d=u.map((p=>h.put(p)));return Le.waitFor(d)}))})(e,s)))),a=a.next((()=>{(function(A){A.createObjectStore(cf,{keyPath:rAe})})(e)}))),n<5&&i>=5&&(a=a.next((()=>this.yi(s)))),n<6&&i>=6&&(a=a.next((()=>((function(A){A.createObjectStore(im)})(e),this.wi(s))))),n<7&&i>=7&&(a=a.next((()=>this.Si(s)))),n<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),n<9&&i>=9&&(a=a.next((()=>{(function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(a=a.next((()=>this.Di(s)))),n<11&&i>=11&&(a=a.next((()=>{(function(A){A.createObjectStore(lv,{keyPath:nAe})})(e),(function(A){A.createObjectStore(cv,{keyPath:iAe})})(e)}))),n<12&&i>=12&&(a=a.next((()=>{(function(A){const l=A.createObjectStore(uv,{keyPath:uAe});l.createIndex(Ax,dAe,{unique:!1}),l.createIndex(KR,hAe,{unique:!1})})(e)}))),n<13&&i>=13&&(a=a.next((()=>(function(A){const l=A.createObjectStore(Aw,{keyPath:Woe});l.createIndex(ub,Yoe),l.createIndex(VR,Xoe)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Nu)))),n<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),n<15&&i>=15&&(a=a.next((()=>(function(A){A.createObjectStore(h5,{keyPath:sAe,autoIncrement:!0}).createIndex(ox,aAe,{unique:!1}),A.createObjectStore(Ep,{keyPath:oAe}).createIndex(jR,AAe,{unique:!1}),A.createObjectStore(Sp,{keyPath:lAe}).createIndex(GR,cAe,{unique:!1})})(e)))),n<16&&i>=16&&(a=a.next((()=>{t.objectStore(Ep).clear()})).next((()=>{t.objectStore(Sp).clear()}))),n<17&&i>=17&&(a=a.next((()=>{(function(A){A.createObjectStore(f5,{keyPath:fAe})})(e)}))),n<18&&i>=18&&cD()&&(a=a.next((()=>{t.objectStore(Ep).clear()})).next((()=>{t.objectStore(Sp).clear()}))),a}wi(e){let t=0;return e.store(Nu).ee(((n,i)=>{t+=gw(i)})).next((()=>{const n={byteSize:t};return e.store(im).put(ax,n)}))}yi(e){const t=e.store(nm),n=e.store(xo);return t.J().next((i=>Le.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,Fc],[s.userId,s.lastAcknowledgedBatchId]);return n.J(qu,a).next((o=>Le.forEach(o,(A=>{Et(A.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:A.batchId});const l=Mu(this.serializer,A);return XU(e,s.userId,l).next((()=>{}))}))))}))))}Si(e){const t=e.store(lf),n=e.store(Nu);return e.store(ld).get(lw).next((i=>{const s=[];return n.ee(((a,o)=>{const A=new hr(a),l=(function(u){return[0,Ls(u)]})(A);s.push(t.get(l).next((c=>c?Le.resolve():(u=>t.put({targetId:0,path:Ls(u),sequenceNumber:i.highestListenSequenceNumber}))(A))))})).next((()=>Le.waitFor(s)))}))}bi(e,t){e.createObjectStore(sm,{keyPath:tAe});const n=t.store(sm),i=new T5,s=a=>{if(i.add(a)){const o=a.lastSegment(),A=a.popLast();return n.put({collectionId:o,parent:Ls(A)})}};return t.store(Nu).ee({X:!0},((a,o)=>{const A=new hr(a);return s(A.popLast())})).next((()=>t.store(of).ee({X:!0},(([a,o,A],l)=>{const c=hA(o);return s(c.popLast())}))))}Di(e){const t=e.store(Af);return t.ee(((n,i)=>{const s=Wg(i),a=zU(this.serializer,s);return t.put(a)}))}Ci(e,t){const n=t.store(Nu),i=[];return n.ee(((s,a)=>{const o=t.store(Aw),A=(function(u){return u.document?new ot(hr.fromString(u.document.name).popFirst(5)):u.noDocument?ot.fromSegments(u.noDocument.path):u.unknownDocument?ot.fromSegments(u.unknownDocument.path):gt(36783)})(a).path.toArray(),l={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(l))})).next((()=>Le.waitFor(i)))}Fi(e,t){const n=t.store(xo),i=nM(this.serializer),s=new L5(bv.mi,this.serializer.yt);return n.J().next((a=>{const o=new Map;return a.forEach((A=>{let l=o.get(A.userId)??nr();Mu(this.serializer,A).keys().forEach((c=>l=l.add(c))),o.set(A.userId,l)})),Le.forEach(o,((A,l)=>{const c=new zi(l),u=mv.wt(this.serializer,c),h=s.getIndexManager(c),d=yv.wt(c,this.serializer,h,s.referenceDelegate);return new iM(i,d,u,h).recalculateAndSaveOverlaysForDocumentKeys(new lx(t,ya.ce),A).next()}))}))}}function h4(r){r.createObjectStore(lf,{keyPath:Zoe}).createIndex(d5,eAe,{unique:!0}),r.createObjectStore(Af,{keyPath:"targetId"}).createIndex($R,Joe,{unique:!0}),r.createObjectStore(ld)}const rc="IndexedDbPersistence",E_=18e5,S_=5e3,I_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sM="main";class P5{constructor(e,t,n,i,s,a,o,A,l,c,u=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=s,this.window=a,this.document=o,this.xi=l,this.Oi=c,this.Ni=u,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=h=>Promise.resolve(),!P5.v())throw new qe(Me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ble(this,i),this.$i=t+sM,this.serializer=new KU(A),this.Ui=new mA(this.$i,this.Ni,new Fle(this.serializer)),this.hi=new ole,this.Pi=new gle(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nM(this.serializer),this.Ii=new ale,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,c===!1&&ci(rc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(Me.FAILED_PRECONDITION,I_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ya(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Fy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(au(e))return Je(rc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je(rc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return kg(e).get(ch).next((t=>Le.resolve(this.es(t))))}ts(e){return Fy(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,E_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=Di(t,cf);return n.J().next((i=>{const s=this.ss(i,E_),a=i.filter((o=>s.indexOf(o)===-1));return Le.forEach(a,(o=>n.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Le.resolve(!0):kg(e).get(ch).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,S_)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new qe(Me.FAILED_PRECONDITION,I_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fy(e).J().next((n=>this.ss(n,S_).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Je(rc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Qm,cf],(e=>{const t=new lx(e,ya.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Fy(e).J().next((t=>this.ss(t,E_).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return yv.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fle(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return mv.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){Je(rc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(A){return A===18?mAe:A===17?YR:A===16?pAe:A===15?g5:A===14?WR:A===13?qR:A===12?gAe:A===11?zR:void gt(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new lx(o,this.ci?this.ci.next():ya.ce),t==="readwrite-primary"?this.Hi(a).next((A=>!!A||this.Yi(a))).next((A=>{if(!A)throw ci(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new qe(Me.FAILED_PRECONDITION,UR);return n(a)})).next((A=>this.Xi(a).next((()=>A)))):this.Is(a).next((()=>n(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return kg(e).get(ch).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,S_)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qe(Me.FAILED_PRECONDITION,I_)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kg(e).put(ch,t)}static v(){return mA.v()}Zi(e){const t=kg(e);return t.get(ch).next((n=>this.es(n)?(Je(rc,"Releasing primary lease."),t.delete(ch)):Le.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ci(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;lD()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const n=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Je(rc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ci(rc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ci("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kg(r){return Di(r,Qm)}function Fy(r){return Di(r,cf)}function N5(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=nr(),i=nr();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new D5(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lle{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lD()?8:OR(Un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,n).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new Lle;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,n,i){return n.documentReadCount<this.fs?(vh()<=dr.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",_h(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Le.resolve()):(vh()<=dr.DEBUG&&Je("QueryEngine","Query:",_h(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(vh()<=dr.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",_h(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gs(t))):Le.resolve())}ys(e,t){if(UF(t))return Le.resolve(null);let n=Gs(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=dw(t,null,"F"),n=Gs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const a=nr(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,n).next((A=>{const l=this.Ds(t,o);return this.Cs(t,l,a,A.readTime)?this.ys(e,dw(t,null,"F")):this.vs(e,l,t,A)}))))})))))}ws(e,t,n,i){return UF(t)||i.isEqual(Pt.min())?Le.resolve(null):this.ps.getDocuments(e,n).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,n,i)?Le.resolve(null):(vh()<=dr.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_h(t)),this.vs(e,a,t,DR(i,af)).next((o=>o)))}))}Ds(e,t){let n=new qr(mU(e));return t.forEach(((i,s)=>{$m(e,s)&&(n=n.add(s))})),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,n){return vh()<=dr.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",_h(t)),this.ps.getDocumentsMatchingQuery(e,t,qa.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5="LocalStore",Ple=3e8;class Nle{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new gn(Wt),this.xs=new Sl((s=>vd(s)),Hm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function oM(r,e,t,n){return new Nle(r,e,t,n)}async function AM(r,e){const t=dt(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((s=>{const a=[],o=[];let A=nr();for(const l of i){a.push(l.batchId);for(const c of l.mutations)A=A.add(c.key)}for(const l of s){o.push(l.batchId);for(const c of l.mutations)A=A.add(c.key)}return t.localDocuments.getDocuments(n,A).next((l=>({Ls:l,removedBatchIds:a,addedBatchIds:o})))}))}))}function Dle(r,e){const t=dt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,A,l,c){const u=l.batch,h=u.keys();let d=Le.resolve();return h.forEach((p=>{d=d.next((()=>c.getEntry(A,p))).next((f=>{const y=l.docVersions.get(p);Et(y!==null,48541),f.version.compareTo(y)<0&&(u.applyToRemoteDocument(f,l),f.isValidDocument()&&(f.setReadTime(l.commitVersion),c.addEntry(f)))}))})),d.next((()=>o.mutationQueue.removeMutationBatch(A,u)))})(t,n,e,s).next((()=>s.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(o){let A=nr();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(A=A.add(o.batch.mutations[l].key));return A})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function lM(r){const e=dt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Rle(r,e){const t=dt(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((c,u)=>{const h=i.get(u);if(!h)return;o.push(t.Pi.removeMatchingKeys(s,c.removedDocuments,u).next((()=>t.Pi.addMatchingKeys(s,c.addedDocuments,u))));let d=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(u)!==null?d=d.withResumeToken(Yn.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,n)),i=i.insert(u,d),(function(f,y,b){return f.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-f.snapshotVersion.toMicroseconds()>=Ple?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0})(h,d,c)&&o.push(t.Pi.updateTargetData(s,d))}));let A=wa(),l=nr();if(e.documentUpdates.forEach((c=>{e.resolvedLimboDocuments.has(c)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))})),o.push(cM(s,a,e.documentUpdates).next((c=>{A=c.ks,l=c.qs}))),!n.isEqual(Pt.min())){const c=t.Pi.getLastRemoteSnapshotVersion(s).next((u=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n)));o.push(c)}return Le.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,A,l))).next((()=>A))})).then((s=>(t.Ms=i,s)))}function cM(r,e,t){let n=nr(),i=nr();return t.forEach((s=>n=n.add(s))),e.getEntries(r,n).next((s=>{let a=wa();return t.forEach(((o,A)=>{const l=s.get(o);A.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(o)),A.isNoDocument()&&A.version.isEqual(Pt.min())?(e.removeEntry(o,A.readTime),a=a.insert(o,A)):!l.isValidDocument()||A.version.compareTo(l.version)>0||A.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(A),a=a.insert(o,A)):Je(R5,"Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",A.version)})),{ks:a,qs:i}}))}function Ule(r,e){const t=dt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=Fc),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function mf(r,e){const t=dt(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Pi.getTargetData(n,e).next((s=>s?(i=s,Le.resolve(i)):t.Pi.allocateTargetId(n).next((a=>(i=new cl(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function yf(r,e,t){const n=dt(r),i=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,(a=>n.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!au(a))throw a;Je(R5,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function mw(r,e,t){const n=dt(r);let i=Pt.min(),s=nr();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(A,l,c){const u=dt(A),h=u.xs.get(c);return h!==void 0?Le.resolve(u.Ms.get(h)):u.Pi.getTargetData(l,c)})(n,a,Gs(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next((A=>{s=A}))})).next((()=>n.Fs.getDocumentsMatchingQuery(a,e,t?i:Pt.min(),t?s:nr()))).next((o=>(hM(n,pU(e),o),{documents:o,Qs:s})))))}function uM(r,e){const t=dt(r),n=dt(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>n.At(s,e).next((a=>a?a.target:null))))}function dM(r,e){const t=dt(r),n=t.Os.get(e)||Pt.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,DR(n,af),Number.MAX_SAFE_INTEGER))).then((i=>(hM(t,e,i),i)))}function hM(r,e,t){let n=r.Os.get(e)||Pt.min();t.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),r.Os.set(e,n)}async function Mle(r,e,t,n){const i=dt(r);let s=nr(),a=wa();for(const l of t){const c=e.$s(l.metadata.name);l.document&&(s=s.add(c));const u=e.Us(l);u.setReadTime(e.Ks(l.metadata.readTime)),a=a.insert(c,u)}const o=i.Ns.newChangeBuffer({trackRemovals:!0}),A=await mf(i,(function(c){return Gs(Uf(hr.fromString(`__bundle__/docs/${c}`)))})(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",(l=>cM(l,o,a).next((c=>(o.apply(l),c))).next((c=>i.Pi.removeMatchingKeysForTargetId(l,A.targetId).next((()=>i.Pi.addMatchingKeys(l,s,A.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(l,c.ks,c.qs))).next((()=>c.ks))))))}async function Ole(r,e,t=nr()){const n=await mf(r,Gs(I5(e.bundledQuery))),i=dt(r);return i.persistence.runTransaction("Save named query","readwrite",(s=>{const a=fi(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return i.Ii.saveNamedQuery(s,e);const o=n.withResumeToken(Yn.EMPTY_BYTE_STRING,a);return i.Ms=i.Ms.insert(o.targetId,o),i.Pi.updateTargetData(s,o).next((()=>i.Pi.removeMatchingKeysForTargetId(s,n.targetId))).next((()=>i.Pi.addMatchingKeys(s,t,n.targetId))).next((()=>i.Ii.saveNamedQuery(s,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="firestore_clients";function f4(r,e){return`${fM}_${r}_${e}`}const gM="firestore_mutations";function g4(r,e,t){let n=`${gM}_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const pM="firestore_targets";function k_(r,e){return`${pM}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="SharedClientState";class yw{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static Ws(e,t,n){const i=JSON.parse(n);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new qe(i.error.code,i.error.message))),a?new yw(e,t,i.state,s):(ci(nA,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(e,t){const n=JSON.parse(t);let i,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(i=new qe(n.error.code,n.error.message))),s?new Fp(e,n.state,i):(ci(nA,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const n=JSON.parse(t);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,s=w5();for(let a=0;i&&a<n.activeTargetIds.length;++a)i=QR(n.activeTargetIds[a]),s=s.add(n.activeTargetIds[a]);return i?new bw(e,s):(ci(nA,`Failed to parse client data for instance '${e}': ${t}`),null)}}class U5{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new U5(t.clientId,t.onlineState):(ci(nA,`Failed to parse online state: ${e}`),null)}}class Bx{constructor(){this.activeTargetIds=w5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T_{constructor(e,t,n,i,s){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new gn(Wt),this.started=!1,this.Xs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=f4(this.persistenceKey,this.Js),this.no=(function(A){return`firestore_sequence_number_${A}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Bx),this.ro=new RegExp(`^${fM}_${a}_([^_]*)$`),this.io=new RegExp(`^${gM}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${pM}_${a}_(\\d+)$`),this.oo=(function(A){return`firestore_online_state_${A}`})(this.persistenceKey),this._o=(function(A){return`firestore_bundle_loaded_v2_${A}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const n of e){if(n===this.Js)continue;const i=this.getItem(f4(this.persistenceKey,n));if(i){const s=bw.Ws(n,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const n=this.uo(t);n&&this.co(n)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(k_(this.persistenceKey,e));if(i){const s=Fp.Ws(e,i);s&&(n=s.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(k_(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach((i=>{this.Po(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je(nA,"READ",e,t),t}setItem(e,t){Je(nA,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je(nA,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(Je(nA,"EVENT",t.key,t.newValue),t.key===this.eo)return void ci("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const n=this.Ro(t.key);return this.Vo(n,null)}{const n=this.mo(t.key,t.newValue);if(n)return this.Vo(n.clientId,n)}}else if(this.io.test(t.key)){if(t.newValue!==null){const n=this.fo(t.key,t.newValue);if(n)return this.po(n)}}else if(this.so.test(t.key)){if(t.newValue!==null){const n=this.yo(t.key,t.newValue);if(n)return this.wo(n)}}else if(t.key===this.oo){if(t.newValue!==null){const n=this.uo(t.newValue);if(n)return this.co(n)}}else if(t.key===this.no){const n=(function(s){let a=ya.ce;if(s!=null)try{const o=JSON.parse(s);Et(typeof o=="number",30636,{So:s}),a=o}catch(o){ci(nA,"Failed to read sequence number from WebStorage",o)}return a})(t.newValue);n!==ya.ce&&this.sequenceNumberHandler(n)}else if(t.key===this._o){const n=this.bo(t.newValue);await Promise.all(n.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){const i=new yw(this.currentUser,e,t,n),s=g4(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=g4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){const i=k_(this.persistenceKey,e),s=new Fp(e,t,n);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const n=this.Ro(e);return bw.Ws(n,t)}fo(e,t){const n=this.io.exec(e),i=Number(n[1]),s=n[2]!==void 0?n[2]:null;return yw.Ws(new zi(s),i,t)}yo(e,t){const n=this.so.exec(e),i=Number(n[1]);return Fp.Ws(i,t)}uo(e){return U5.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Je(nA,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const n=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(n),a=[],o=[];return s.forEach((A=>{i.has(A)||a.push(A)})),i.forEach((A=>{s.has(A)||o.push(A)})),this.syncEngine.Fo(a,o).then((()=>{this.Zs=n}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=w5();return e.forEach(((n,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class mM{constructor(){this.Mo=new Bx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bx,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qle{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="ConnectivityMonitor";class m4{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Je(p4,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Je(p4,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ly=null;function Cx(){return Ly===null?Ly=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ly++,"0x"+Ly.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="RestConnection",Hle={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vle{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===cx?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,s){const a=Cx(),o=this.zo(e,t.toUriEncodedString());Je(F_,`Sending RPC '${e}' ${a}:`,o,n);const A={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(A,i,s);const{host:l}=new URL(o),c=Ff(l);return this.Jo(e,o,A,n,c).then((u=>(Je(F_,`Received RPC '${e}' ${a}: `,u),u)),(u=>{throw kA(F_,`RPC '${e}' ${a} failed with error: `,u,"url: ",o,"request:",n),u}))}Ho(e,t,n,i,s,a){return this.Go(e,t,n,i,s)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rf})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),n&&n.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const n=Hle[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $le{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="WebChannelConnection";class jle extends Vle{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,s){const a=Cx();return new Promise(((o,A)=>{const l=new BR;l.setWithCredentials(!0),l.listenOnce(CR.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case Ab.NO_ERROR:const u=l.getResponseJson();Je(xs,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(u)),o(u);break;case Ab.TIMEOUT:Je(xs,`RPC '${e}' ${a} timed out`),A(new qe(Me.DEADLINE_EXCEEDED,"Request time out"));break;case Ab.HTTP_ERROR:const h=l.getStatus();if(Je(xs,`RPC '${e}' ${a} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const f=(function(b){const B=b.toLowerCase().replace(/_/g,"-");return Object.values(Me).indexOf(B)>=0?B:Me.UNKNOWN})(p.status);A(new qe(f,p.message))}else A(new qe(Me.UNKNOWN,"Server responded with status "+l.getStatus()))}else A(new qe(Me.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:e,streamId:a,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{Je(xs,`RPC '${e}' ${a} completed.`)}}));const c=JSON.stringify(i);Je(xs,`RPC '${e}' ${a} sending request:`,i),l.send(t,"POST",c,n,15)}))}T_(e,t,n){const i=Cx(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=IR(),o=SR(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(A.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(A.useFetchStreams=!0),this.jo(A.initMessageHeaders,t,n),A.encodeInitMessageHeaders=!0;const c=s.join("");Je(xs,`Creating RPC '${e}' stream ${i}: ${c}`,A);const u=a.createWebChannel(c,A);this.I_(u);let h=!1,d=!1;const p=new $le({Yo:y=>{d?Je(xs,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(Je(xs,`Opening RPC '${e}' stream ${i} transport.`),u.open(),h=!0),Je(xs,`RPC '${e}' stream ${i} sending:`,y),u.send(y))},Zo:()=>u.close()}),f=(y,b,B)=>{y.listen(b,(S=>{try{B(S)}catch(C){setTimeout((()=>{throw C}),0)}}))};return f(u,Kg.EventType.OPEN,(()=>{d||(Je(xs,`RPC '${e}' stream ${i} transport opened.`),p.o_())})),f(u,Kg.EventType.CLOSE,(()=>{d||(d=!0,Je(xs,`RPC '${e}' stream ${i} transport closed`),p.a_(),this.E_(u))})),f(u,Kg.EventType.ERROR,(y=>{d||(d=!0,kA(xs,`RPC '${e}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),p.a_(new qe(Me.UNAVAILABLE,"The operation could not be completed")))})),f(u,Kg.EventType.MESSAGE,(y=>{var b;if(!d){const B=y.data[0];Et(!!B,16349);const S=B,C=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(C){Je(xs,`RPC '${e}' stream ${i} received error:`,C);const P=C.status;let M=(function(v){const T=yi[v];if(T!==void 0)return TU(T)})(P),L=C.message;M===void 0&&(M=Me.INTERNAL,L="Unknown error status: "+P+" with message "+C.message),d=!0,p.a_(new qe(M,L)),u.close()}else Je(xs,`RPC '${e}' stream ${i} received:`,B),p.u_(B)}})),f(o,ER.STAT_EVENT,(y=>{y.stat===nx.PROXY?Je(xs,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===nx.NOPROXY&&Je(xs,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(){return typeof window<"u"?window:null}function yb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(r){return new WAe(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="PersistentStream";class bM{constructor(e,t,n,i,s,a,o,A){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=A,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M5(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Me.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===t&&this.G_(n,i)}),(n=>{e((()=>{const i=new qe(Me.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Je(y4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Je(y4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Gle extends bM{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=JAe(this.serializer,e),n=(function(s){if(!("targetChange"in s))return Pt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?fi(a.readTime):Pt.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=bx(this.serializer),t.addTarget=(function(s,a){let o;const A=a.target;if(o=cw(A)?{documents:QU(s,A)}:{query:HU(s,A).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=NU(s,a.resumeToken);const l=mx(s,a.expectedCount);l!==null&&(o.expectedCount=l)}else if(a.snapshotVersion.compareTo(Pt.min())>0){o.readTime=pf(s,a.snapshotVersion.toTimestamp());const l=mx(s,a.expectedCount);l!==null&&(o.expectedCount=l)}return o})(this.serializer,e);const n=ele(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=bx(this.serializer),t.removeTarget=e,this.q_(t)}}class Kle extends bM{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZAe(e.writeResults,e.commitTime),n=fi(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=bx(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>um(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zle{}class qle extends zle{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new qe(Me.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,yx(t,n),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qe(Me.UNKNOWN,s.toString())}))}Ho(e,t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,yx(t,n),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qe(Me.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Wle{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ci(t),this.aa=!1):Je("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="RemoteStore";class Yle{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{n.enqueueAndForget((async()=>{Au(this)&&(Je(Sd,"Restarting streams for network reachability change."),await(async function(A){const l=dt(A);l.Ea.add(4),await Qf(l),l.Ra.set("Unknown"),l.Ea.delete(4),await qm(l)})(this))}))})),this.Ra=new Wle(n,i)}}async function qm(r){if(Au(r))for(const e of r.da)await e(!0)}async function Qf(r){for(const e of r.da)await e(!1)}function wv(r,e){const t=dt(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),H5(t)?Q5(t):Vf(t).O_()&&O5(t,e))}function bf(r,e){const t=dt(r),n=Vf(t);t.Ia.delete(e),n.O_()&&wM(t,e),t.Ia.size===0&&(n.O_()?n.L_():Au(t)&&t.Ra.set("Unknown"))}function O5(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vf(r).Y_(e)}function wM(r,e){r.Va.Ue(e),Vf(r).Z_(e)}function Q5(r){r.Va=new GAe({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Vf(r).start(),r.Ra.ua()}function H5(r){return Au(r)&&!Vf(r).x_()&&r.Ia.size>0}function Au(r){return dt(r).Ea.size===0}function vM(r){r.Va=void 0}async function Xle(r){r.Ra.set("Online")}async function Jle(r){r.Ia.forEach(((e,t)=>{O5(r,e)}))}async function Zle(r,e){vM(r),H5(r)?(r.Ra.ha(e),Q5(r)):r.Ra.set("Unknown")}async function ece(r,e,t){if(r.Ra.set("Online"),e instanceof PU&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(r,e)}catch(n){Je(Sd,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ww(r,n)}else if(e instanceof pb?r.Va.Ze(e):e instanceof LU?r.Va.st(e):r.Va.tt(e),!t.isEqual(Pt.min()))try{const n=await lM(r.localStore);t.compareTo(n)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((A,l)=>{if(A.resumeToken.approximateByteSize()>0){const c=s.Ia.get(l);c&&s.Ia.set(l,c.withResumeToken(A.resumeToken,a))}})),o.targetMismatches.forEach(((A,l)=>{const c=s.Ia.get(A);if(!c)return;s.Ia.set(A,c.withResumeToken(Yn.EMPTY_BYTE_STRING,c.snapshotVersion)),wM(s,A);const u=new cl(c.target,A,l,c.sequenceNumber);O5(s,u)})),s.remoteSyncer.applyRemoteEvent(o)})(r,t)}catch(n){Je(Sd,"Failed to raise snapshot:",n),await ww(r,n)}}async function ww(r,e,t){if(!au(e))throw e;r.Ea.add(1),await Qf(r),r.Ra.set("Offline"),t||(t=()=>lM(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Je(Sd,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await qm(r)}))}function _M(r,e){return e().catch((t=>ww(r,t,e)))}async function Hf(r){const e=dt(r),t=Yc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fc;for(;tce(e);)try{const i=await Ule(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,rce(e,i)}catch(i){await ww(e,i)}xM(e)&&BM(e)}function tce(r){return Au(r)&&r.Ta.length<10}function rce(r,e){r.Ta.push(e);const t=Yc(r);t.O_()&&t.X_&&t.ea(e.mutations)}function xM(r){return Au(r)&&!Yc(r).x_()&&r.Ta.length>0}function BM(r){Yc(r).start()}async function nce(r){Yc(r).ra()}async function ice(r){const e=Yc(r);for(const t of r.Ta)e.ea(t.mutations)}async function sce(r,e,t){const n=r.Ta.shift(),i=B5.from(n,e,t);await _M(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await Hf(r)}async function ace(r,e){e&&Yc(r).X_&&await(async function(n,i){if((function(a){return kU(a)&&a!==Me.ABORTED})(i.code)){const s=n.Ta.shift();Yc(n).B_(),await _M(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Hf(n)}})(r,e),xM(r)&&BM(r)}async function b4(r,e){const t=dt(r);t.asyncQueue.verifyOperationInProgress(),Je(Sd,"RemoteStore received new credentials");const n=Au(t);t.Ea.add(3),await Qf(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qm(t)}async function Ex(r,e){const t=dt(r);e?(t.Ea.delete(2),await qm(t)):e||(t.Ea.add(2),await Qf(t),t.Ra.set("Unknown"))}function Vf(r){return r.ma||(r.ma=(function(t,n,i){const s=dt(t);return s.sa(),new Gle(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{Xo:Xle.bind(null,r),t_:Jle.bind(null,r),r_:Zle.bind(null,r),H_:ece.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),H5(r)?Q5(r):r.Ra.set("Unknown")):(await r.ma.stop(),vM(r))}))),r.ma}function Yc(r){return r.fa||(r.fa=(function(t,n,i){const s=dt(t);return s.sa(),new Kle(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:nce.bind(null,r),r_:ace.bind(null,r),ta:ice.bind(null,r),na:sce.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Hf(r)):(await r.fa.stop(),r.Ta.length>0&&(Je(Sd,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,o=new V5(e,t,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $f(r,e){if(ci("AsyncQueue",`${e}: ${r}`),au(r))return new qe(Me.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{static emptySet(e){return new Kh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ot.comparator(t.key,n.key):(t,n)=>ot.comparator(t.key,n.key),this.keyedMap=zg(),this.sortedSet=new gn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Kh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.ga=new gn(ot.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):gt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class wf{constructor(e,t,n,i,s,a,o,A,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=A,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new wf(e,t,Kh.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oce{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Ace{constructor(){this.queries=v4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=dt(t),s=i.queries;i.queries=v4(),s.forEach(((a,o)=>{for(const A of o.Sa)A.onError(n)}))})(this,new qe(Me.ABORTED,"Firestore shutting down"))}}function v4(){return new Sl((r=>gU(r)),Vm)}async function $5(r,e){const t=dt(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new oce,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=$f(a,`Initialization of query '${_h(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&G5(t)}async function j5(r,e){const t=dt(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function lce(r,e){const t=dt(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(n=!0);a.wa=i}}n&&G5(t)}function cce(r,e,t){const n=dt(r),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);n.queries.delete(e)}function G5(r){r.Ca.forEach((e=>{e.next()}))}var Sx,_4;(_4=Sx||(Sx={})).Ma="default",_4.Cache="cache";class K5{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new wf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=wf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sx.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uce{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.serializer=e}$s(e){return yA(this.serializer,e)}Us(e){return e.metadata.exists?OU(this.serializer,e.document,!1):bn.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return fi(e)}}class dce{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=CM(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const n=hr.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,n=new x4(this.serializer);for(const i of e)if(i.metadata.queries){const s=n.$s(i.metadata.name);for(const a of i.metadata.queries){const o=(t.get(a)||nr()).add(s);t.set(a,o)}}return t}async ja(e){const t=await Mle(e,new x4(this.serializer),this.Wa,this.Ua.id),n=this.za(this.documents);for(const i of this.Ka)await Ole(e,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function CM(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.key=e}}class SM{constructor(e){this.key=e}}class IM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nr(),this.mutatedKeys=nr(),this.eu=mU(e),this.tu=new Kh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new w4,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const A=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((c,u)=>{const h=i.get(c),d=$m(this.query,u)?u:null,p=!!h&&this.mutatedKeys.has(h.key),f=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let y=!1;h&&d?h.data.isEqual(d.data)?p!==f&&(n.track({type:3,doc:d}),y=!0):this.su(h,d)||(n.track({type:2,doc:d}),y=!0,(A&&this.eu(d,A)>0||l&&this.eu(d,l)<0)&&(o=!0)):!h&&d?(n.track({type:0,doc:d}),y=!0):h&&!d&&(n.track({type:1,doc:h}),y=!0,(A||l)&&(o=!0)),y&&(d?(a=a.add(d),s=f?s.add(c):s.delete(c)):(a=a.delete(c),s=s.delete(c)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),s=s.delete(c.key),n.track({type:1,doc:c})}return{tu:a,iu:n,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((c,u)=>(function(d,p){const f=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Rt:y})}};return f(d)-f(p)})(c.type,u.type)||this.eu(c.doc,u.doc))),this.ou(n),i=i??!1;const o=t&&!i?this._u():[],A=this.Xa.size===0&&this.current&&!i?1:0,l=A!==this.Za;return this.Za=A,a.length!==0||l?{snapshot:new wf(this.query,e.tu,s,a,e.mutatedKeys,A===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new w4,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nr(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new SM(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new EM(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=nr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lu="SyncEngine";class hce{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class fce{constructor(e){this.key=e,this.hu=!1}}class gce{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Sl((o=>gU(o)),Vm),this.Iu=new Map,this.Eu=new Set,this.du=new gn(ot.comparator),this.Au=new Map,this.Ru=new F5,this.Vu={},this.mu=new Map,this.fu=Ed.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pce(r,e,t=!0){const n=vv(r);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await kM(n,e,t,!0),i}async function mce(r,e){const t=vv(r);await kM(t,e,!0,!1)}async function kM(r,e,t,n){const i=await mf(r.localStore,Gs(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let o;return n&&(o=await z5(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&wv(r.remoteStore,i),o}async function z5(r,e,t,n,i){r.pu=(u,h,d)=>(async function(f,y,b,B){let S=y.view.ru(b);S.Cs&&(S=await mw(f.localStore,y.query,!1).then((({documents:L})=>y.view.ru(L,S))));const C=B&&B.targetChanges.get(y.targetId),P=B&&B.targetMismatches.get(y.targetId)!=null,M=y.view.applyChanges(S,f.isPrimaryClient,C,P);return Ix(f,y.targetId,M.au),M.snapshot})(r,u,h,d);const s=await mw(r.localStore,e,!0),a=new IM(e,s.Qs),o=a.ru(s.documents),A=Km.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),l=a.applyChanges(o,r.isPrimaryClient,A);Ix(r,t,l.au);const c=new hce(e,t,a);return r.Tu.set(e,c),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),l.snapshot}async function yce(r,e,t){const n=dt(r),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter((a=>!Vm(a,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await yf(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&bf(n.remoteStore,i.targetId),vf(n,i.targetId)})).catch(su)):(vf(n,i.targetId),await yf(n.localStore,i.targetId,!0))}async function bce(r,e){const t=dt(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),bf(t.remoteStore,n.targetId))}async function wce(r,e,t){const n=X5(r);try{const i=await(function(a,o){const A=dt(a),l=Qr.now(),c=o.reduce(((d,p)=>d.add(p.key)),nr());let u,h;return A.persistence.runTransaction("Locally write mutations","readwrite",(d=>{let p=wa(),f=nr();return A.Ns.getEntries(d,c).next((y=>{p=y,p.forEach(((b,B)=>{B.isValidDocument()||(f=f.add(b))}))})).next((()=>A.localDocuments.getOverlayedDocuments(d,p))).next((y=>{u=y;const b=[];for(const B of o){const S=VAe(B,u.get(B.key).overlayedDocument);S!=null&&b.push(new Il(B.key,S,aU(S.value.mapValue),Ln.exists(!0)))}return A.mutationQueue.addMutationBatch(d,l,b,o)})).next((y=>{h=y;const b=y.applyToLocalDocumentSet(u,f);return A.documentOverlayCache.saveOverlays(d,y.batchId,b)}))})).then((()=>({batchId:h.batchId,changes:bU(u)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(a,o,A){let l=a.Vu[a.currentUser.toKey()];l||(l=new gn(Wt)),l=l.insert(o,A),a.Vu[a.currentUser.toKey()]=l})(n,i.batchId,t),await kl(n,i.changes),await Hf(n.remoteStore)}catch(i){const s=$f(i,"Failed to persist write");t.reject(s)}}async function TM(r,e){const t=dt(r);try{const n=await Rle(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Et(a.hu,14607):i.removedDocuments.size>0&&(Et(a.hu,42227),a.hu=!1))})),await kl(t,n,e)}catch(n){await su(n)}}function B4(r,e,t){const n=dt(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const A=dt(a);A.onlineState=o;let l=!1;A.queries.forEach(((c,u)=>{for(const h of u.Sa)h.va(o)&&(l=!0)})),l&&G5(A)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function vce(r,e,t){const n=dt(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new gn(ot.comparator);a=a.insert(s,bn.newNoDocument(s,Pt.min()));const o=nr().add(s),A=new Gm(Pt.min(),new Map,new gn(Wt),a,o);await TM(n,A),n.du=n.du.remove(s),n.Au.delete(e),Y5(n)}else await yf(n.localStore,e,!1).then((()=>vf(n,e,t))).catch(su)}async function _ce(r,e){const t=dt(r),n=e.batch.batchId;try{const i=await Dle(t.localStore,e);W5(t,n,null),q5(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await kl(t,i)}catch(i){await su(i)}}async function xce(r,e,t){const n=dt(r);try{const i=await(function(a,o){const A=dt(a);return A.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let c;return A.mutationQueue.lookupMutationBatch(l,o).next((u=>(Et(u!==null,37113),c=u.keys(),A.mutationQueue.removeMutationBatch(l,u)))).next((()=>A.mutationQueue.performConsistencyCheck(l))).next((()=>A.documentOverlayCache.removeOverlaysForBatchId(l,c,o))).next((()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c))).next((()=>A.localDocuments.getDocuments(l,c)))}))})(n.localStore,e);W5(n,e,t),q5(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await kl(n,i)}catch(i){await su(i)}}async function Bce(r,e){const t=dt(r);Au(t.remoteStore)||Je(lu,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await(function(a){const o=dt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(A=>o.mutationQueue.getHighestUnacknowledgedBatchId(A)))})(t.localStore);if(n===Fc)return void e.resolve();const i=t.mu.get(n)||[];i.push(e),t.mu.set(n,i)}catch(n){const i=$f(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function q5(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function W5(r,e,t){const n=dt(r);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function vf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||FM(r,n)}))}function FM(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(bf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Y5(r))}function Ix(r,e,t){for(const n of t)n instanceof EM?(r.Ru.addReference(n.key,e),Cce(r,n)):n instanceof SM?(Je(lu,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||FM(r,n.key)):gt(19791,{wu:n})}function Cce(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Je(lu,"New document in limbo: "+t),r.Eu.add(n),Y5(r))}function Y5(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ot(hr.fromString(e)),n=r.fu.next();r.Au.set(n,new fce(t)),r.du=r.du.insert(t,n),wv(r.remoteStore,new cl(Gs(Uf(t.path)),n,"TargetPurposeLimboResolution",ya.ce))}}async function kl(r,e,t){const n=dt(r),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach(((o,A)=>{a.push(n.pu(A,e,t).then((l=>{var c;if((l||t)&&n.isPrimaryClient){const u=l?!l.fromCache:(c=t==null?void 0:t.targetChanges.get(A.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(A.targetId,u?"current":"not-current")}if(l){i.push(l);const u=D5.As(A.targetId,l);s.push(u)}})))})),await Promise.all(a),n.Pu.H_(i),await(async function(A,l){const c=dt(A);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",(u=>Le.forEach(l,(h=>Le.forEach(h.Es,(d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d))).next((()=>Le.forEach(h.ds,(d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))))))}catch(u){if(!au(u))throw u;Je(R5,"Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Ms.get(h),p=d.snapshotVersion,f=d.withLastLimboFreeSnapshotVersion(p);c.Ms=c.Ms.insert(h,f)}}})(n.localStore,s))}async function Ece(r,e){const t=dt(r);if(!t.currentUser.isEqual(e)){Je(lu,"User change. New user:",e.toKey());const n=await AM(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((A=>{A.reject(new qe(Me.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await kl(t,n.Ls)}}function Sce(r,e){const t=dt(r),n=t.Au.get(e);if(n&&n.hu)return nr().add(n.key);{let i=nr();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}async function Ice(r,e){const t=dt(r),n=await mw(t.localStore,e.query,!0),i=e.view.cu(n);return t.isPrimaryClient&&Ix(t,e.targetId,i.au),i}async function kce(r,e){const t=dt(r);return dM(t.localStore,e).then((n=>kl(t,n)))}async function Tce(r,e,t,n){const i=dt(r),s=await(function(o,A){const l=dt(o),c=dt(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",(u=>c.er(u,A).next((h=>h?l.localDocuments.getDocuments(u,h):Le.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await Hf(i.remoteStore):t==="acknowledged"||t==="rejected"?(W5(i,e,n||null),q5(i,e),(function(o,A){dt(dt(o).mutationQueue).ir(A)})(i.localStore,e)):gt(6720,"Unknown batchState",{Su:t}),await kl(i,s)):Je(lu,"Cannot apply mutation batch with id: "+e)}async function Fce(r,e){const t=dt(r);if(vv(t),X5(t),e===!0&&t.gu!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),i=await C4(t,n.toArray());t.gu=!0,await Ex(t.remoteStore,!0);for(const s of i)wv(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const n=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?n.push(a):i=i.then((()=>(vf(t,a),yf(t.localStore,a,!0)))),bf(t.remoteStore,a)})),await i,await C4(t,n),(function(a){const o=dt(a);o.Au.forEach(((A,l)=>{bf(o.remoteStore,l)})),o.Ru.Jr(),o.Au=new Map,o.du=new gn(ot.comparator)})(t),t.gu=!1,await Ex(t.remoteStore,!1)}}async function C4(r,e,t){const n=dt(r),i=[],s=[];for(const a of e){let o;const A=n.Iu.get(a);if(A&&A.length!==0){o=await mf(n.localStore,Gs(A[0]));for(const l of A){const c=n.Tu.get(l),u=await Ice(n,c);u.snapshot&&s.push(u.snapshot)}}else{const l=await uM(n.localStore,a);o=await mf(n.localStore,l),await z5(n,LM(l),a,!1,o.resumeToken)}i.push(o)}return n.Pu.H_(s),i}function LM(r){return fU(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Lce(r){return(function(t){return dt(dt(t).persistence).Ts()})(dt(r).localStore)}async function Pce(r,e,t,n){const i=dt(r);if(i.gu)return void Je(lu,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await dM(i.localStore,pU(s[0])),o=Gm.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Yn.EMPTY_BYTE_STRING);await kl(i,a,o);break}case"rejected":await yf(i.localStore,e,!0),vf(i,e,n);break;default:gt(64155,t)}}async function Nce(r,e,t){const n=vv(r);if(n.gu){for(const i of e){if(n.Iu.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Je(lu,"Adding an already active target "+i);continue}const s=await uM(n.localStore,i),a=await mf(n.localStore,s);await z5(n,LM(s),a.targetId,!1,a.resumeToken),wv(n.remoteStore,a)}for(const i of t)n.Iu.has(i)&&await yf(n.localStore,i,!1).then((()=>{bf(n.remoteStore,i),vf(n,i)})).catch(su)}}function vv(r){const e=dt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=TM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sce.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vce.bind(null,e),e.Pu.H_=lce.bind(null,e.eventManager),e.Pu.yu=cce.bind(null,e.eventManager),e}function X5(r){const e=dt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_ce.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xce.bind(null,e),e}function Dce(r,e,t){const n=dt(r);(async function(s,a,o){try{const A=await a.getMetadata();if(await(function(d,p){const f=dt(d),y=fi(p.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",(b=>f.Ii.getBundleMetadata(b,p.id))).then((b=>!!b&&b.createTime.compareTo(y)>=0))})(s.localStore,A))return await a.close(),o._completeWith((function(d){return{taskState:"Success",documentsLoaded:d.totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}})(A)),Promise.resolve(new Set);o._updateProgress(CM(A));const l=new dce(A,a.serializer);let c=await a.bu();for(;c;){const h=await l.Ga(c);h&&o._updateProgress(h),c=await a.bu()}const u=await l.ja(s.localStore);return await kl(s,u.Ha,void 0),await(function(d,p){const f=dt(d);return f.persistence.runTransaction("Save bundle","readwrite",(y=>f.Ii.saveBundleMetadata(y,p)))})(s.localStore,A),o._completeWith(u.progress),Promise.resolve(u.Ja)}catch(A){return kA(lu,`Loading bundle failed with ${A}`),o._failWith(A),Promise.resolve(new Set)}})(n,e,t).then((i=>{n.sharedClientState.notifyBundleLoaded(i)}))}class dm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oM(this.persistence,new aM,e.initialUser,this.serializer)}Cu(e){return new L5(bv.mi,this.serializer)}Du(e){return new mM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dm.provider={build:()=>new dm};class Rce extends dm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Et(this.persistence.referenceDelegate instanceof pw,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new eM(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Es.withCacheSize(this.cacheSizeBytes):Es.DEFAULT;return new L5((n=>pw.mi(n,t)),this.serializer)}}class PM extends dm{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await X5(this.xu.syncEngine),await Hf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return oM(this.persistence,new aM,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new eM(n,e.asyncQueue,t)}Mu(e,t){const n=new Goe(t,this.persistence);return new joe(e.asyncQueue,n)}Cu(e){const t=N5(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Es.withCacheSize(this.cacheSizeBytes):Es.DEFAULT;return new P5(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,yM(),yb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new mM}}class Uce extends PM{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof T_&&(this.sharedClientState.syncEngine={Co:Tce.bind(null,t),vo:Pce.bind(null,t),Fo:Nce.bind(null,t),Ts:Lce.bind(null,t),Do:kce.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async n=>{await Fce(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Du(e){const t=yM();if(!T_.v(t))throw new qe(Me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=N5(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new T_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class hm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>B4(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ece.bind(null,this.syncEngine),await Ex(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ace})()}createDatastore(e){const t=zm(e.databaseInfo.databaseId),n=(function(s){return new jle(s)})(e.databaseInfo);return(function(s,a,o,A){return new qle(s,a,o,A)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,s,a,o){return new Yle(n,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>B4(this.syncEngine,t,0)),(function(){return m4.v()?new m4:new Qle})())}createSyncEngine(e,t){return(function(i,s,a,o,A,l,c){const u=new gce(i,s,a,o,A,l);return c&&(u.gu=!0),u})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const s=dt(i);Je(Sd,"RemoteStore shutting down."),s.Ea.add(5),await Qf(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}hm.provider={build:()=>new hm};function E4(r,e=10240){let t=0;return{async read(){if(t<r.byteLength){const n={value:r.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mce{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new ds,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((n=>{n&&n.$a()?this.metadata.resolve(n.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.Qa)}`))}),(n=>this.metadata.reject(n)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),n=Number(t);isNaN(n)&&this.Qu(`length string (${t}) is not valid number`);const i=await this.$u(n);return new uce(JSON.parse(i),e.length+n)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oce{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new qe(Me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,s){const a=dt(i),o={documents:s.map((u=>cm(a.serializer,u)))},A=await a.Ho("BatchGetDocuments",a.serializer.databaseId,hr.emptyPath(),o,s.length),l=new Map;A.forEach((u=>{const h=XAe(a.serializer,u);l.set(h.key.toString(),h)}));const c=[];return s.forEach((u=>{const h=l.get(u.toString());Et(!!h,55234,{key:u}),c.push(h)})),c})(this.datastore,e);return t.forEach((n=>this.recordVersion(n))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Of(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,n)=>{const i=ot.fromPath(n);this.mutations.push(new _5(i,this.precondition(i)))})),await(async function(n,i){const s=dt(n),a={writes:i.map((o=>um(s.serializer,o)))};await s.Go("Commit",s.serializer.databaseId,hr.emptyPath(),a)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt(50498,{Gu:e.constructor.name});t=Pt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new qe(Me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pt.min())?Ln.exists(!1):Ln.updateTime(t):Ln.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pt.min()))throw new qe(Me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ln.updateTime(t)}return Ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qce{constructor(e,t,n,i,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=s,this.zu=n.maxAttempts,this.M_=new M5(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Oce(this.datastore),t=this.Hu(e);t&&t.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.Yu(i)}))))})).catch((n=>{this.Yu(n)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Om(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!kU(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="FirestoreClient";class Hce{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=zi.UNAUTHENTICATED,this.clientId=A5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async a=>{Je(Xc,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(Je(Xc,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=$f(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function L_(r,e){r.asyncQueue.verifyOperationInProgress(),Je(Xc,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await AM(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function S4(r,e){r.asyncQueue.verifyOperationInProgress();const t=await J5(r);Je(Xc,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>b4(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>b4(e.remoteStore,i))),r._onlineComponents=e}async function J5(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Je(Xc,"Using user provided OfflineComponentProvider");try{await L_(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Me.FAILED_PRECONDITION||i.code===Me.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;kA("Error using user provided cache. Falling back to memory cache: "+t),await L_(r,new dm)}}else Je(Xc,"Using default OfflineComponentProvider"),await L_(r,new Rce(void 0));return r._offlineComponents}async function xv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Je(Xc,"Using user provided OnlineComponentProvider"),await S4(r,r._uninitializedComponentsProvider._online)):(Je(Xc,"Using default OnlineComponentProvider"),await S4(r,new hm))),r._onlineComponents}function NM(r){return J5(r).then((e=>e.persistence))}function Z5(r){return J5(r).then((e=>e.localStore))}function DM(r){return xv(r).then((e=>e.remoteStore))}function eC(r){return xv(r).then((e=>e.syncEngine))}function Vce(r){return xv(r).then((e=>e.datastore))}async function _f(r){const e=await xv(r),t=e.eventManager;return t.onListen=pce.bind(null,e.syncEngine),t.onUnlisten=yce.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mce.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bce.bind(null,e.syncEngine),t}function $ce(r){return r.asyncQueue.enqueue((async()=>{const e=await NM(r),t=await DM(r);return e.setNetworkEnabled(!0),(function(i){const s=dt(i);return s.Ea.delete(0),qm(s)})(t)}))}function jce(r){return r.asyncQueue.enqueue((async()=>{const e=await NM(r),t=await DM(r);return e.setNetworkEnabled(!1),(async function(i){const s=dt(i);s.Ea.add(0),await Qf(s),s.Ra.set("Offline")})(t)}))}function Gce(r,e){const t=new ds;return r.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const o=await(function(l,c){const u=dt(l);return u.persistence.runTransaction("read document","readonly",(h=>u.localDocuments.getDocument(h,c)))})(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new qe(Me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const A=$f(o,`Failed to get document '${s} from cache`);a.reject(A)}})(await Z5(r),e,t))),t.promise}function RM(r,e,t={}){const n=new ds;return r.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,A,l){const c=new _v({next:h=>{c.Nu(),a.enqueueAndForget((()=>j5(s,u)));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new qe(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&A&&A.source==="server"?l.reject(new qe(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new K5(Uf(o.path),c,{includeMetadataChanges:!0,qa:!0});return $5(s,u)})(await _f(r),r.asyncQueue,e,t,n))),n.promise}function Kce(r,e){const t=new ds;return r.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const o=await mw(i,s,!0),A=new IM(s,o.Qs),l=A.ru(o.documents),c=A.applyChanges(l,!1);a.resolve(c.snapshot)}catch(o){const A=$f(o,`Failed to execute query '${s} against cache`);a.reject(A)}})(await Z5(r),e,t))),t.promise}function UM(r,e,t={}){const n=new ds;return r.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,A,l){const c=new _v({next:h=>{c.Nu(),a.enqueueAndForget((()=>j5(s,u))),h.fromCache&&A.source==="server"?l.reject(new qe(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new K5(o,c,{includeMetadataChanges:!0,qa:!0});return $5(s,u)})(await _f(r),r.asyncQueue,e,t,n))),n.promise}function zce(r,e){const t=new _v(e);return r.asyncQueue.enqueueAndForget((async()=>(function(i,s){dt(i).Ca.add(s),s.next()})(await _f(r),t))),()=>{t.Nu(),r.asyncQueue.enqueueAndForget((async()=>(function(i,s){dt(i).Ca.delete(s)})(await _f(r),t)))}}function qce(r,e,t,n){const i=(function(a,o){let A;return A=typeof a=="string"?FU().encode(a):a,(function(c,u){return new Mce(c,u)})((function(c,u){if(c instanceof Uint8Array)return E4(c,u);if(c instanceof ArrayBuffer)return E4(new Uint8Array(c),u);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(A),o)})(t,zm(e));r.asyncQueue.enqueueAndForget((async()=>{Dce(await eC(r),i,n)}))}function Wce(r,e){return r.asyncQueue.enqueue((async()=>(function(n,i){const s=dt(n);return s.persistence.runTransaction("Get named query","readonly",(a=>s.Ii.getNamedQuery(a,i)))})(await Z5(r),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="firestore.googleapis.com",k4=!0;class T4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OM,this.ssl=k4}else this.host=e.host,this.ssl=e.ssl??k4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ple)throw new qe(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MM(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qe(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qe(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qe(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wm{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Loe;switch(n.type){case"firstParty":return new Roe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qe(Me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=I4.get(t);n&&(Je("ComponentProvider","Removing Datastore"),I4.delete(t),n.terminate())})(this),Promise.resolve()}}function Yce(r,e,t,n={}){var l;r=Nr(r,Wm);const i=Ff(e),s=r._getSettings(),a={...s,emulatorOptions:r._getEmulatorOptions()},o=`${e}:${t}`;i&&(iD(`https://${o}`),sD("Firestore",!0)),s.host!==OM&&s.host!==o&&kA("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const A={...s,host:o,ssl:i,emulatorOptions:n};if(!Hc(A,a)&&(r._setSettings(A),n.mockUserToken)){let c,u;if(typeof n.mockUserToken=="string")c=n.mockUserToken,u=zi.MOCK_USER;else{c=Wte(n.mockUserToken,(l=r._app)==null?void 0:l.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new qe(Me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new zi(h)}r._authCredentials=new Poe(new TR(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs=class QM{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new QM(this.firestore,e,this._query)}},fn=class Yg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yg(this.firestore,e,this._key)}toJSON(){return{type:Yg._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Mm(t,Yg._jsonSchema))return new Yg(e,n||null,new ot(hr.fromString(t.referencePath)))}};fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:_i("string",fn._jsonSchemaVersion),referencePath:_i("string")};let Lc=class HM extends zs{constructor(e,t,n){super(e,t,Uf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new ot(e))}withConverter(e){return new HM(this.firestore,e,this._path)}};function VM(r,e,...t){if(r=Ht(r),l5("collection","path",e),r instanceof Wm){const n=hr.fromString(e,...t);return yF(n),new Lc(r,null,n)}{if(!(r instanceof fn||r instanceof Lc))throw new qe(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(hr.fromString(e,...t));return yF(n),new Lc(r.firestore,null,n)}}function Xce(r,e){if(r=Nr(r,Wm),l5("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qe(Me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zs(r,null,(function(n){return new El(hr.emptyPath(),n)})(e))}function vw(r,e,...t){if(r=Ht(r),arguments.length===1&&(e=A5.newId()),l5("doc","path",e),r instanceof Wm){const n=hr.fromString(e,...t);return mF(n),new fn(r,null,new ot(n))}{if(!(r instanceof fn||r instanceof Lc))throw new qe(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(hr.fromString(e,...t));return mF(n),new fn(r.firestore,r instanceof Lc?r.converter:null,new ot(n))}}function $M(r,e){return r=Ht(r),e=Ht(e),(r instanceof fn||r instanceof Lc)&&(e instanceof fn||e instanceof Lc)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function jM(r,e){return r=Ht(r),e=Ht(e),r instanceof zs&&e instanceof zs&&r.firestore===e.firestore&&Vm(r._query,e._query)&&r.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4="AsyncQueue";class L4{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M5(this,"async_queue_retry"),this._c=()=>{const n=yb();n&&Je(F4,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=yb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=yb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!au(e))throw e;Je(F4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,ci("INTERNAL UNHANDLED ERROR: ",P4(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=V5.createAndSchedule(this,e,t,n,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&gt(47125,{Pc:P4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function P4(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1})(r,["next","error","complete"])}class Jce{constructor(){this._progressObserver={},this._taskCompletionResolver=new ds,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zce=-1;let gi=class extends Wm{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new L4,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L4(e),this._firestoreClient=void 0,await e}}};function Ps(r){if(r._terminated)throw new qe(Me.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||GM(r),r._firestoreClient}function GM(r){var n,i,s;const e=r._freezeSettings(),t=(function(o,A,l,c){return new wAe(o,A,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,MM(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Hce(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const A=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(A),_online:A}})(r._componentsProvider))}function eue(r,e){kA("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return KM(r,hm.provider,{build:n=>new PM(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function tue(r){kA("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();KM(r,hm.provider,{build:t=>new Uce(t,e.cacheSizeBytes)})}function KM(r,e,t){if((r=Nr(r,gi))._firestoreClient||r._terminated)throw new qe(Me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new qe(Me.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},GM(r)}function rue(r){if(r._initialized&&!r._terminated)throw new qe(Me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ds;return r._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(n){if(!mA.v())return Promise.resolve();const i=n+sM;await mA.delete(i)})(N5(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function nue(r){return(function(t){const n=new ds;return t.asyncQueue.enqueueAndForget((async()=>Bce(await eC(t),n))),n.promise})(Ps(r=Nr(r,gi)))}function iue(r){return $ce(Ps(r=Nr(r,gi)))}function sue(r){return jce(Ps(r=Nr(r,gi)))}function aue(r,e){const t=Ps(r=Nr(r,gi)),n=new Jce;return qce(t,r._databaseId,e,n),n}function oue(r,e){return Wce(Ps(r=Nr(r,gi)),e).then((t=>t?new zs(r,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ts(Yn.fromBase64String(e))}catch(t){throw new qe(Me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ts(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mm(e,Ts._jsonSchema))return Ts.fromBase64String(e.bytes)}}Ts._jsonSchemaVersion="firestore/bytes/1.0",Ts._jsonSchema={type:_i("string",Ts._jsonSchemaVersion),bytes:_i("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new qe(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fo._jsonSchemaVersion}}static fromJSON(e){if(Mm(e,Fo._jsonSchema))return new Fo(e.latitude,e.longitude)}}Fo._jsonSchemaVersion="firestore/geoPoint/1.0",Fo._jsonSchema={type:_i("string",Fo._jsonSchemaVersion),latitude:_i("number"),longitude:_i("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bA._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mm(e,bA._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bA(e.vectorValues);throw new qe(Me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bA._jsonSchemaVersion="firestore/vectorValue/1.0",bA._jsonSchema={type:_i("string",bA._jsonSchemaVersion),vectorValues:_i("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aue=/^__.*__$/;class lue{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Il(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mf(e,this.data,t,this.fieldTransforms)}}class zM{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Il(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qM(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{Ac:r})}}class Bv{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _w(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qM(this.Ac)&&Aue.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cue{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zm(e)}Cc(e,t,n,i=!1){return new Bv({Ac:e,methodName:t,Dc:n,path:Fn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hd(r){const e=r._freezeSettings(),t=zm(r._databaseId);return new cue(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Cv(r,e,t,n,i,s={}){const a=r.Cc(s.merge||s.mergeFields?2:0,e,t,i);oC("Data must be an object, but it was:",a,n);const o=XM(n,a);let A,l;if(s.merge)A=new ba(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){const c=[];for(const u of s.mergeFields){const h=Tx(e,u,t);if(!a.contains(h))throw new qe(Me.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);ZM(c,h)||c.push(h)}A=new ba(c),l=a.fieldTransforms.filter((u=>A.covers(u.field)))}else A=null,l=a.fieldTransforms;return new lue(new ls(o),A,l)}class Ym extends Qd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ym}}function WM(r,e,t){return new Bv({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tC extends Qd{_toFieldTransform(e){return new jm(e.path,new ff)}isEqual(e){return e instanceof tC}}class rC extends Qd{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=WM(this,e,!0),n=this.vc.map((s=>Vd(s,t))),i=new _d(n);return new jm(e.path,i)}isEqual(e){return e instanceof rC&&Hc(this.vc,e.vc)}}class nC extends Qd{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=WM(this,e,!0),n=this.vc.map((s=>Vd(s,t))),i=new xd(n);return new jm(e.path,i)}isEqual(e){return e instanceof nC&&Hc(this.vc,e.vc)}}class iC extends Qd{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new gf(e.serializer,_U(e.serializer,this.Fc));return new jm(e.path,t)}isEqual(e){return e instanceof iC&&this.Fc===e.Fc}}function sC(r,e,t,n){const i=r.Cc(1,e,t);oC("Data must be an object, but it was:",i,n);const s=[],a=ls.empty();ou(n,((A,l)=>{const c=AC(e,A,t);l=Ht(l);const u=i.yc(c);if(l instanceof Ym)s.push(c);else{const h=Vd(l,u);h!=null&&(s.push(c),a.set(c,h))}}));const o=new ba(s);return new zM(a,o,i.fieldTransforms)}function aC(r,e,t,n,i,s){const a=r.Cc(1,e,t),o=[Tx(e,n,t)],A=[i];if(s.length%2!=0)throw new qe(Me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(Tx(e,s[h])),A.push(s[h+1]);const l=[],c=ls.empty();for(let h=o.length-1;h>=0;--h)if(!ZM(l,o[h])){const d=o[h];let p=A[h];p=Ht(p);const f=a.yc(d);if(p instanceof Ym)l.push(d);else{const y=Vd(p,f);y!=null&&(l.push(d),c.set(d,y))}}const u=new ba(l);return new zM(c,u,a.fieldTransforms)}function YM(r,e,t,n=!1){return Vd(t,r.Cc(n?4:3,e))}function Vd(r,e){if(JM(r=Ht(r)))return oC("Unsupported field value:",e,r),XM(r,e);if(r instanceof Qd)return(function(n,i){if(!qM(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const s=[];let a=0;for(const o of n){let A=Vd(o,i.wc(a));A==null&&(A={nullValue:"NULL_VALUE"}),s.push(A),a++}return{arrayValue:{values:s}}})(r,e)}return(function(n,i){if((n=Ht(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _U(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Qr.fromDate(n);return{timestampValue:pf(i.serializer,s)}}if(n instanceof Qr){const s=new Qr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:pf(i.serializer,s)}}if(n instanceof Fo)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ts)return{bytesValue:NU(i.serializer,n._byteString)};if(n instanceof fn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:S5(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof bA)return(function(a,o){return{mapValue:{fields:{[p5]:{stringValue:m5},[uf]:{arrayValue:{values:a.toArray().map((l=>{if(typeof l!="number")throw o.Sc("VectorValues must only contain numeric values.");return v5(o.serializer,l)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${ov(n)}`)})(r,e)}function XM(r,e){const t={};return XR(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ou(r,((n,i)=>{const s=Vd(i,e.mc(n));s!=null&&(t[n]=s)})),{mapValue:{fields:t}}}function JM(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Qr||r instanceof Fo||r instanceof Ts||r instanceof fn||r instanceof Qd||r instanceof bA)}function oC(r,e,t){if(!JM(t)||!PR(t)){const n=ov(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function Tx(r,e,t){if((e=Ht(e))instanceof Jc)return e._internalPath;if(typeof e=="string")return AC(r,e);throw _w("Field path arguments must be of type string or ",r,!1,void 0,t)}const uue=new RegExp("[~\\*/\\[\\]]");function AC(r,e,t){if(e.search(uue)>=0)throw _w(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch{throw _w(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function _w(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let A="";return(s||a)&&(A+=" (found",s&&(A+=` in field ${n}`),a&&(A+=` in document ${i}`),A+=")"),new qe(Me.INVALID_ARGUMENT,o+r+A)}function ZM(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new due(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ev("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class due extends fm{data(){return super.data()}}function Ev(r,e){return typeof e=="string"?AC(r,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new qe(Me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lC{}class Xm extends lC{}function nc(r,e,...t){let n=[];e instanceof lC&&n.push(e),n=n.concat(t),(function(s){const a=s.filter((A=>A instanceof cC)).length,o=s.filter((A=>A instanceof Sv)).length;if(a>1||a>0&&o>0)throw new qe(Me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class Sv extends Xm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Sv(e,t,n)}_apply(e){const t=this._parse(e);return r6(e._query,t),new zs(e.firestore,e.converter,px(e._query,t))}_parse(e){const t=Hd(e.firestore);return(function(s,a,o,A,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new qe(Me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){D4(u,c);const p=[];for(const f of u)p.push(N4(A,s,f));h={arrayValue:{values:p}}}else h=N4(A,s,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||D4(u,c),h=YM(o,a,u,c==="in"||c==="not-in");return br.create(l,c,h)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hue(r,e,t){const n=e,i=Ev("where",r);return Sv._create(i,n,t)}class cC extends lC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cC(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const A of o)r6(a,A),a=px(a,A)})(e._query,t),new zs(e.firestore,e.converter,px(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class uC extends Xm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new uC(e,t)}_apply(e){const t=(function(i,s,a){if(i.startAt!==null)throw new qe(Me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lm(s,a)})(e._query,this._field,this._direction);return new zs(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new El(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function fue(r,e="asc"){const t=e,n=Ev("orderBy",r);return uC._create(n,t)}class Iv extends Xm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Iv(e,t,n)}_apply(e){return new zs(e.firestore,e.converter,dw(e._query,this._limit,this._limitType))}}function gue(r){return NR("limit",r),Iv._create("limit",r,"F")}function pue(r){return NR("limitToLast",r),Iv._create("limitToLast",r,"L")}class kv extends Xm{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new kv(e,t,n)}_apply(e){const t=t6(e,this.type,this._docOrFields,this._inclusive);return new zs(e.firestore,e.converter,(function(i,s){return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)})(e._query,t))}}function mue(...r){return kv._create("startAt",r,!0)}function yue(...r){return kv._create("startAfter",r,!1)}class Tv extends Xm{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Tv(e,t,n)}_apply(e){const t=t6(e,this.type,this._docOrFields,this._inclusive);return new zs(e.firestore,e.converter,(function(i,s){return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)})(e._query,t))}}function bue(...r){return Tv._create("endBefore",r,!1)}function wue(...r){return Tv._create("endAt",r,!0)}function t6(r,e,t,n){if(t[0]=Ht(t[0]),t[0]instanceof fm)return(function(s,a,o,A,l){if(!A)throw new qe(Me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of Gh(s))if(u.field.isKeyField())c.push(wd(a,A.key));else{const h=A.data.field(u.field);if(dv(h))throw new qe(Me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=u.field.canonicalString();throw new qe(Me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}c.push(h)}return new Wc(c,l)})(r._query,r.firestore._databaseId,e,t[0]._document,n);{const i=Hd(r.firestore);return(function(a,o,A,l,c,u){const h=a.explicitOrderBy;if(c.length>h.length)throw new qe(Me.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let p=0;p<c.length;p++){const f=c[p];if(h[p].field.isKeyField()){if(typeof f!="string")throw new qe(Me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof f}`);if(!b5(a)&&f.indexOf("/")!==-1)throw new qe(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${f}' contains a slash.`);const y=a.path.child(hr.fromString(f));if(!ot.isDocumentKey(y))throw new qe(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const b=new ot(y);d.push(wd(o,b))}else{const y=YM(A,l,f);d.push(y)}}return new Wc(d,u)})(r._query,r.firestore._databaseId,i,e,t,n)}}function N4(r,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new qe(Me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b5(e)&&t.indexOf("/")!==-1)throw new qe(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(hr.fromString(t));if(!ot.isDocumentKey(n))throw new qe(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return wd(r,new ot(n))}if(t instanceof fn)return wd(r,t._key);throw new qe(Me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ov(t)}.`)}function D4(r,e){if(!Array.isArray(r)||r.length===0)throw new qe(Me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r6(r,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new qe(Me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dC{convertValue(e,t="none"){switch(zc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_l(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw gt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return ou(e,((i,s)=>{n[i]=this.convertValue(s,t)})),n}convertVectorValue(e){var n,i,s;const t=(s=(i=(n=e.fields)==null?void 0:n[uf].arrayValue)==null?void 0:i.values)==null?void 0:s.map((a=>kn(a.doubleValue)));return new bA(t)}convertGeoPoint(e){return new Fo(kn(e.latitude),kn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hv(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(am(e));default:return null}}convertTimestamp(e){const t=vl(e);return new Qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=hr.fromString(e);Et(GU(n),9688,{name:e});const i=new Kc(n.get(1),n.get(3)),s=new ot(n.popFirst(5));return i.isEqual(t)||ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class vue extends dC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}class Wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let uo=class n6 extends fm{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Ev("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=n6._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",uo._jsonSchema={type:_i("string",uo._jsonSchemaVersion),bundleSource:_i("string","DocumentSnapshot"),bundleName:_i("string"),bundle:_i("string")};let Lp=class extends uo{data(e={}){return super.data(e)}},Lo=class i6{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wu(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Lp(this._firestore,this._userDataWriter,n.key,n,new Wu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const A=new Lp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Wu(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:A,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const A=new Lp(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Wu(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),c=a.indexOf(o.doc.key)),{type:_ue(o.type),doc:A,oldIndex:l,newIndex:c}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=i6._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=A5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function _ue(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:r})}}function s6(r,e){return r instanceof uo&&e instanceof uo?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(r._document===null?e._document===null:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Lo&&e instanceof Lo&&r._firestore===e._firestore&&jM(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xue(r){r=Nr(r,fn);const e=Nr(r.firestore,gi);return RM(Ps(e),r._key).then((t=>hC(e,r,t)))}Lo._jsonSchemaVersion="firestore/querySnapshot/1.0",Lo._jsonSchema={type:_i("string",Lo._jsonSchemaVersion),bundleSource:_i("string","QuerySnapshot"),bundleName:_i("string"),bundle:_i("string")};class $d extends dC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function Bue(r){r=Nr(r,fn);const e=Nr(r.firestore,gi),t=Ps(e),n=new $d(e);return Gce(t,r._key).then((i=>new uo(e,n,r._key,i,new Wu(i!==null&&i.hasLocalMutations,!0),r.converter)))}function Cue(r){r=Nr(r,fn);const e=Nr(r.firestore,gi);return RM(Ps(e),r._key,{source:"server"}).then((t=>hC(e,r,t)))}function Eue(r){r=Nr(r,zs);const e=Nr(r.firestore,gi),t=Ps(e),n=new $d(e);return e6(r._query),UM(t,r._query).then((i=>new Lo(e,n,r,i)))}function Sue(r){r=Nr(r,zs);const e=Nr(r.firestore,gi),t=Ps(e),n=new $d(e);return Kce(t,r._query).then((i=>new Lo(e,n,r,i)))}function Iue(r){r=Nr(r,zs);const e=Nr(r.firestore,gi),t=Ps(e),n=new $d(e);return UM(t,r._query,{source:"server"}).then((i=>new Lo(e,n,r,i)))}function R4(r,e,t){r=Nr(r,fn);const n=Nr(r.firestore,gi),i=Fv(r.converter,e,t);return Jm(n,[Cv(Hd(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,Ln.none())])}function U4(r,e,t,...n){r=Nr(r,fn);const i=Nr(r.firestore,gi),s=Hd(i);let a;return a=typeof(e=Ht(e))=="string"||e instanceof Jc?aC(s,"updateDoc",r._key,e,t,n):sC(s,"updateDoc",r._key,e),Jm(i,[a.toMutation(r._key,Ln.exists(!0))])}function kue(r){return Jm(Nr(r.firestore,gi),[new Of(r._key,Ln.none())])}function Tue(r,e){const t=Nr(r.firestore,gi),n=vw(r),i=Fv(r.converter,e);return Jm(t,[Cv(Hd(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Ln.exists(!1))]).then((()=>n))}function a6(r,...e){var A,l,c;r=Ht(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||kx(e[n])||(t=e[n++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(kx(e[n])){const u=e[n];e[n]=(A=u.next)==null?void 0:A.bind(u),e[n+1]=(l=u.error)==null?void 0:l.bind(u),e[n+2]=(c=u.complete)==null?void 0:c.bind(u)}let s,a,o;if(r instanceof fn)a=Nr(r.firestore,gi),o=Uf(r._key.path),s={next:u=>{e[n]&&e[n](hC(a,r,u))},error:e[n+1],complete:e[n+2]};else{const u=Nr(r,zs);a=Nr(u.firestore,gi),o=u._query;const h=new $d(a);s={next:d=>{e[n]&&e[n](new Lo(a,h,u,d))},error:e[n+1],complete:e[n+2]},e6(r._query)}return(function(h,d,p,f){const y=new _v(f),b=new K5(d,y,p);return h.asyncQueue.enqueueAndForget((async()=>$5(await _f(h),b))),()=>{y.Nu(),h.asyncQueue.enqueueAndForget((async()=>j5(await _f(h),b)))}})(Ps(a),o,i,s)}function Fue(r,e){return zce(Ps(r=Nr(r,gi)),kx(e)?e:{next:e})}function Jm(r,e){return(function(n,i){const s=new ds;return n.asyncQueue.enqueueAndForget((async()=>wce(await eC(n),i,s))),s.promise})(Ps(r),e)}function hC(r,e,t){const n=t.docs.get(e._key),i=new $d(r);return new uo(r,i,e._key,n,new Wu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lue={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pue=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hd(e)}set(e,t,n){this._verifyNotCommitted();const i=_c(e,this._firestore),s=Fv(i.converter,t,n),a=Cv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Ln.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=_c(e,this._firestore);let a;return a=typeof(t=Ht(t))=="string"||t instanceof Jc?aC(this._dataReader,"WriteBatch.update",s._key,t,n,i):sC(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_c(e,this._firestore);return this._mutations=this._mutations.concat(new Of(t._key,Ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(Me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function _c(r,e){if((r=Ht(r)).firestore!==e)throw new qe(Me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nue{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hd(e)}get(e){const t=_c(e,this._firestore),n=new vue(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return gt(24041);const s=i[0];if(s.isFoundDocument())return new fm(this._firestore,n,s.key,s,t.converter);if(s.isNoDocument())return new fm(this._firestore,n,t._key,null,t.converter);throw gt(18433,{doc:s})}))}set(e,t,n){const i=_c(e,this._firestore),s=Fv(i.converter,t,n),a=Cv(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,n);return this._transaction.set(i._key,a),this}update(e,t,n,...i){const s=_c(e,this._firestore);let a;return a=typeof(t=Ht(t))=="string"||t instanceof Jc?aC(this._dataReader,"Transaction.update",s._key,t,n,i):sC(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this}delete(e){const t=_c(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Due=class extends Nue{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_c(e,this._firestore),n=new $d(this._firestore);return super.get(e).then((i=>new uo(this._firestore,n,t._key,i._document,new Wu(!1,!1),t.converter)))}};function Rue(r,e,t){r=Nr(r,gi);const n={...Lue,...t};return(function(s){if(s.maxAttempts<1)throw new qe(Me.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(s,a,o){const A=new ds;return s.asyncQueue.enqueueAndForget((async()=>{const l=await Vce(s);new Qce(s.asyncQueue,l,o,a,A).ju()})),A.promise})(Ps(r),(i=>e(new Due(r,i))),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uue(){return new Ym("deleteField")}function Mue(){return new tC("serverTimestamp")}function Oue(...r){return new rC("arrayUnion",r)}function Que(...r){return new nC("arrayRemove",r)}function Hue(r){return new iC("increment",r)}(function(e,t=!0){(function(i){Rf=i})(nu),jc(new SA("firestore",((n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new gi(new Noe(n.getProvider("auth-internal")),new Uoe(a,n.getProvider("app-check-internal")),(function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new qe(Me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(l.options.projectId,c)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),To(hF,fF,e),To(hF,fF,"esm2020")})();const Vue="@firebase/firestore-compat",$ue="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(r,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new qe("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(){if(typeof Uint8Array>"u")throw new qe("unimplemented","Uint8Arrays are not available in this environment.")}function O4(){if(!yAe())throw new qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let o6=class Fx{constructor(e){this._delegate=e}static fromBase64String(e){return O4(),new Fx(Ts.fromBase64String(e))}static fromUint8Array(e){return M4(),new Fx(Ts.fromUint8Array(e))}toBase64(){return O4(),this._delegate.toBase64()}toUint8Array(){return M4(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(r){return jue(r,["next","error","complete"])}function jue(r,e){if(typeof r!="object"||r===null)return!1;const t=r;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gue{enableIndexedDbPersistence(e,t){return eue(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return tue(e._delegate)}clearIndexedDbPersistence(e){return rue(e._delegate)}}class A6{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Kc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&kA("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){Yce(this._delegate,e,t,n)}enableNetwork(){return iue(this._delegate)}disableNetwork(){return sue(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,LR("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return nue(this._delegate)}onSnapshotsInSync(e){return Fue(this._delegate,e)}get app(){if(!this._appCompat)throw new qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xf(this,VM(this._delegate,e))}catch(t){throw Vs(t,"collection()","Firestore.collection()")}}doc(e){try{return new oo(this,vw(this._delegate,e))}catch(t){throw Vs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hs(this,Xce(this._delegate,e))}catch(t){throw Vs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Rue(this._delegate,t=>e(new l6(this,t)))}batch(){return Ps(this._delegate),new c6(new Pue(this._delegate,e=>Jm(this._delegate,e)))}loadBundle(e){return aue(this._delegate,e)}namedQuery(e){return oue(this._delegate,e).then(t=>t?new Hs(this,t):null)}}class Lv extends dC{constructor(e){super(),this.firestore=e}convertBytes(e){return new o6(new Ts(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return oo.forKey(t,this.firestore,null)}}function Kue(r){Toe(r)}class l6{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Lv(e)}get(e){const t=Yu(e);return this._delegate.get(t).then(n=>new gm(this._firestore,new uo(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const i=Yu(e);return n?(fC("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=Yu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=Yu(e);return this._delegate.delete(t),this}}class c6{constructor(e){this._delegate=e}set(e,t,n){const i=Yu(e);return n?(fC("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=Yu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=Yu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Id{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Lp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pm(this._firestore,n),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Id.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let s=i.get(t);return s||(s=new Id(e,new Lv(e),t),i.set(t,s)),s}}Id.INSTANCES=new WeakMap;class oo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lv(e)}static forPath(e,t,n){if(e.length%2!==0)throw new qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new oo(t,new fn(t._delegate,n,new ot(e)))}static forKey(e,t,n){return new oo(t,new fn(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new xf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xf(this.firestore,VM(this._delegate,e))}catch(t){throw Vs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ht(e),e instanceof fn?$M(this._delegate,e):!1}set(e,t){t=fC("DocumentReference.set",t);try{return t?R4(this._delegate,e,t):R4(this._delegate,e)}catch(n){throw Vs(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return arguments.length===1?U4(this._delegate,e):U4(this._delegate,e,t,...n)}catch(i){throw Vs(i,"updateDoc()","DocumentReference.update()")}}delete(){return kue(this._delegate)}onSnapshot(...e){const t=u6(e),n=d6(e,i=>new gm(this.firestore,new uo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return a6(this._delegate,t,n)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=Bue(this._delegate):(e==null?void 0:e.source)==="server"?t=Cue(this._delegate):t=xue(this._delegate),t.then(n=>new gm(this.firestore,new uo(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new oo(this.firestore,e?this._delegate.withConverter(Id.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Vs(r,e,t){return r.message=r.message.replace(e,t),r}function u6(r){for(const e of r)if(typeof e=="object"&&!Lx(e))return e;return{}}function d6(r,e){var n,i;let t;return Lx(r[0])?t=r[0]:Lx(r[1])?t=r[1]:typeof r[0]=="function"?t={next:r[0],error:r[1],complete:r[2]}:t={next:r[1],error:r[2],complete:r[3]},{next:s=>{t.next&&t.next(e(s))},error:(n=t.error)==null?void 0:n.bind(t),complete:(i=t.complete)==null?void 0:i.bind(t)}}class gm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new oo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return s6(this._delegate,e._delegate)}}class pm extends gm{data(e){const t=this._delegate.data(e);return this._delegate._converter||Foe(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lv(e)}where(e,t,n){try{return new Hs(this.firestore,nc(this._delegate,hue(e,t,n)))}catch(i){throw Vs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hs(this.firestore,nc(this._delegate,fue(e,t)))}catch(n){throw Vs(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hs(this.firestore,nc(this._delegate,gue(e)))}catch(t){throw Vs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hs(this.firestore,nc(this._delegate,pue(e)))}catch(t){throw Vs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hs(this.firestore,nc(this._delegate,mue(...e)))}catch(t){throw Vs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hs(this.firestore,nc(this._delegate,yue(...e)))}catch(t){throw Vs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hs(this.firestore,nc(this._delegate,bue(...e)))}catch(t){throw Vs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hs(this.firestore,nc(this._delegate,wue(...e)))}catch(t){throw Vs(t,"endAt()","Query.endAt()")}}isEqual(e){return jM(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=Sue(this._delegate):(e==null?void 0:e.source)==="server"?t=Iue(this._delegate):t=Eue(this._delegate),t.then(n=>new Px(this.firestore,new Lo(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=u6(e),n=d6(e,i=>new Px(this.firestore,new Lo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return a6(this._delegate,t,n)}withConverter(e){return new Hs(this.firestore,e?this._delegate.withConverter(Id.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class zue{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Px{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zue(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new pm(this._firestore,n))})}isEqual(e){return s6(this._delegate,e._delegate)}}class xf extends Hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new oo(this.firestore,e):null}doc(e){try{return e===void 0?new oo(this.firestore,vw(this._delegate)):new oo(this.firestore,vw(this._delegate,e))}catch(t){throw Vs(t,"doc()","CollectionReference.doc()")}}add(e){return Tue(this._delegate,e).then(t=>new oo(this.firestore,t))}isEqual(e){return $M(this._delegate,e._delegate)}withConverter(e){return new xf(this.firestore,e?this._delegate.withConverter(Id.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Yu(r){return Nr(r,fn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(...e){this._delegate=new Jc(...e)}static documentId(){return new gC(Fn.keyField().canonicalString())}isEqual(e){return e=Ht(e),e instanceof Jc?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{static serverTimestamp(){const e=Mue();return e._methodName="FieldValue.serverTimestamp",new Hu(e)}static delete(){const e=Uue();return e._methodName="FieldValue.delete",new Hu(e)}static arrayUnion(...e){const t=Oue(...e);return t._methodName="FieldValue.arrayUnion",new Hu(t)}static arrayRemove(...e){const t=Que(...e);return t._methodName="FieldValue.arrayRemove",new Hu(t)}static increment(e){const t=Hue(e);return t._methodName="FieldValue.increment",new Hu(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const que={Firestore:A6,GeoPoint:Fo,Timestamp:Qr,Blob:o6,Transaction:l6,WriteBatch:c6,DocumentReference:oo,DocumentSnapshot:gm,Query:Hs,QueryDocumentSnapshot:pm,QuerySnapshot:Px,CollectionReference:xf,FieldPath:gC,FieldValue:Hu,setLogLevel:Kue,CACHE_SIZE_UNLIMITED:Zce};function Wue(r,e){r.INTERNAL.registerComponent(new SA("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(n,i)},"PUBLIC").setServiceProps({...que}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yue(r){Wue(r,(e,t)=>new A6(e,t,new Gue)),r.registerVersion(Vue,$ue)}Yue(Ka);const Xue={apiKey:"AIzaSyAkw1kL7AU73Y9FWrPZ-ERv5xFvXGGILBA",authDomain:"claritybudget-6lnmd.firebaseapp.com",projectId:"claritybudget-6lnmd",storageBucket:"claritybudget-6lnmd.firebasestorage.app",messagingSenderId:"40318182466",appId:"1:40318182466:web:c2ce0637f8f23afa95b9db"};Ka.apps.length?Ka.app():Ka.initializeApp(Xue);const JA=Ka.auth(),qs=Ka.firestore(),Jue=new Ka.auth.GoogleAuthProvider,Bf=Ka.firestore.FieldValue.serverTimestamp,On={GROUPS:"groups_data",STUDENTS:"students_data",TASKS:"tasks_data",EVALUATIONS:"evaluations_data",ADMINS:"admins_data"},Zue=5;function kd(r){return typeof r=="string"?r.trim():typeof r=="number"?String(r).trim():""}function jd(r){const e=kd(r);return e?e.toLowerCase():""}function h6(r,e,t=null){if(!e)return!1;const n=Ks.get(r);return!Array.isArray(n)||n.length===0?!1:n.some(i=>!i||t&&i.id===t?!1:(typeof i.nameLower=="string"&&i.nameLower?i.nameLower:jd(i.name))===e)}async function Zm(r,e,t={}){const n=Ks.get(e);if(n)return n;try{let i=qs.collection(r);t.orderByField&&(i=i.orderBy(t.orderByField,t.orderByDirection||"asc"));const a=(await i.get()).docs.map(o=>({id:o.id,...o.data()}));return Ks.set(e,a,Zue),a}catch(i){throw console.error(` Error loading ${r}:`,i),new Error(`Failed to load ${r}. Check connection/permissions.`)}}async function Pv(r,e,t){try{const n=await qs.collection(r).add({...e,createdAt:Bf()});return Ks.clear(t),console.log(` Document added to ${r} (${n.id})`),n.id}catch(n){throw console.error(` Error adding document to ${r}:`,n),new Error(`Failed to add item to ${r}.`)}}async function e0(r,e,t,n){if(!e)throw new Error("Document ID required for update.");try{await qs.collection(r).doc(e).update({...t,updatedAt:Bf()}),Ks.clear(n),console.log(` Document updated in ${r} (${e})`),r==="admins"&&Ks.clear(`admin_${e}`)}catch(i){throw console.error(` Error updating document ${e} in ${r}:`,i),new Error(`Failed to update item in ${r}.`)}}async function t0(r,e,t){if(!e)throw new Error("Document ID required for deletion.");try{await qs.collection(r).doc(e).delete(),Ks.clear(t),console.log(` Document deleted from ${r} (${e})`),r==="admins"&&Ks.clear(`admin_${e}`)}catch(n){throw console.error(` Error deleting document ${e} in ${r}:`,n),new Error(`Failed to delete item from ${r}.`)}}const ede=()=>Zm("groups",On.GROUPS,{orderByField:"name"}),tde=(r={})=>{const e=kd(r.name);if(!e)throw new Error("Group name is required.");const t={...r,name:e,nameLower:jd(e)};return Pv("groups",t,On.GROUPS)},rde=(r,e={})=>{if(!r)throw new Error("Group ID required for update.");const t={...e};if(Object.prototype.hasOwnProperty.call(e,"name")){const n=kd(e.name);if(!n)throw new Error("Group name cannot be empty.");t.name=n,t.nameLower=jd(n)}return e0("groups",r,t,On.GROUPS)},nde=r=>t0("groups",r,On.GROUPS),ide=()=>Zm("students",On.STUDENTS,{orderByField:"name"}),sde=r=>Pv("students",r,On.STUDENTS),ade=(r,e)=>e0("students",r,e,On.STUDENTS),ode=async(r,e)=>{if(!r||r.length===0)return;const t=qs.batch();r.forEach(n=>{const i=qs.collection("students").doc(n);t.update(i,{...e,updatedAt:Bf()})});try{await t.commit(),Ks.clear(On.STUDENTS),console.log(` Batch updated ${r.length} students.`)}catch(n){throw console.error(" Error batch updating students:",n),new Error("Failed to update student group assignments.")}},Ade=r=>t0("students",r,On.STUDENTS),lde=()=>Zm("tasks",On.TASKS,{orderByField:"date",orderByDirection:"desc"}),cde=(r={})=>{const e=kd(r.name);if(!e)throw new Error("Task name is required.");const t={...r,name:e,nameLower:jd(e)};return Pv("tasks",t,On.TASKS)},ude=(r,e={})=>{if(!r)throw new Error("Task ID required for update.");const t={...e};if(Object.prototype.hasOwnProperty.call(e,"name")){const n=kd(e.name);if(!n)throw new Error("Task name cannot be empty.");t.name=n,t.nameLower=jd(n)}return e0("tasks",r,t,On.TASKS)},dde=r=>t0("tasks",r,On.TASKS),hde=()=>Zm("evaluations",On.EVALUATIONS,{orderByField:"taskDate",orderByDirection:"desc"}),fde=r=>Pv("evaluations",r,On.EVALUATIONS),gde=(r,e)=>e0("evaluations",r,e,On.EVALUATIONS),pde=r=>t0("evaluations",r,On.EVALUATIONS),mde=async r=>{if(!r||r.length===0)return;const e=qs.batch();r.forEach(t=>{const n=qs.collection("evaluations").doc(t);e.delete(n)});try{await e.commit(),Ks.clear(On.EVALUATIONS),console.log(` Batch deleted ${r.length} evaluations.`)}catch(t){throw console.error(" Error batch deleting evaluations:",t),new Error("Failed to delete associated evaluations.")}};async function yde(r){if(!r)throw new Error("Evaluation ID is required.");try{const e=await qs.collection("evaluations").doc(r).get();return e.exists?{id:e.id,...e.data()}:(console.warn(`Evaluation with ID ${r} not found.`),null)}catch(e){throw console.error(` Error fetching evaluation ${r}:`,e),new Error("Failed to fetch evaluation details.")}}const bde=()=>Zm("admins",On.ADMINS,{orderByField:"email"}),wde=(r,e)=>e0("admins",r,e,On.ADMINS),vde=r=>t0("admins",r,On.ADMINS);async function Nx(r){if(!r)return console.warn("getAdminData called without userId"),null;const e=`admin_${r}`,t=Ks.get(e);if(t)return t;try{const n=await qs.collection("admins").doc(r).get();if(n.exists){const i={id:n.id,...n.data()};return Ks.set(e,i,15),i}else return null}catch(n){return console.error(` Error fetching admin data for user ${r}:`,n),null}}async function _de(r,e,t=null){const n=kd(r),i=kd(e);if(!n||!i)throw new Error("Roll and Academic Group required.");try{const a=await qs.collection("students").where("roll","==",n).where("academicGroup","==",i).limit(1).get();return!(a.empty||t&&a.docs[0].id===t)}catch(s){throw console.error(" Error checking student uniqueness:",s),s.code==="failed-precondition"&&s.message.includes("index")?(console.error("Firestore composite index missing: students(roll ASC, academicGroup ASC)."),new Error("   (Student Index missing)")):new Error("Failed to check duplicate students.")}}const xde=async(r,e=null)=>{const t=jd(r);if(!t)return!1;if(h6(On.GROUPS,t,e))return!0;try{const i=await qs.collection("groups").where("nameLower","==",t).limit(1).get();return!(i.empty||e&&i.docs[0].id===e)}catch(n){throw console.error(" Error checking group name uniqueness:",n),n.code==="failed-precondition"&&n.message.includes("index")?(console.error("Firestore index missing: groups(nameLower ASC)."),new Error("   (Group Index missing)")):new Error("Failed to check duplicate group name.")}},Bde=async(r,e=null)=>{const t=jd(r);if(!t)return!1;if(h6(On.TASKS,t,e))return!0;try{const i=await qs.collection("tasks").where("nameLower","==",t).limit(1).get();return!(i.empty||e&&i.docs[0].id===e)}catch(n){throw console.error(" Error checking task name uniqueness:",n),n.code==="failed-precondition"&&n.message.includes("index")?(console.error("Firestore index missing: tasks(nameLower ASC)."),new Error("   (Task Index missing)")):new Error("     ")}},Cde=Object.freeze(Object.defineProperty({__proto__:null,addEvaluation:fde,addGroup:tde,addStudent:sde,addTask:cde,batchDeleteEvaluations:mde,batchUpdateStudents:ode,checkGroupNameExists:xde,checkStudentUniqueness:_de,checkTaskNameExists:Bde,deleteAdmin:vde,deleteEvaluation:pde,deleteGroup:nde,deleteStudent:Ade,deleteTask:dde,getAdminData:Nx,getEvaluationById:yde,loadAdmins:bde,loadEvaluations:hde,loadGroups:ede,loadStudents:ide,loadTasks:lde,updateAdmin:wde,updateEvaluation:gde,updateGroup:rde,updateStudent:ade,updateTask:ude},Symbol.toStringTag,{value:"Module"}));class Ede{constructor(){this.unsubscribeAuthStateListener=null,this._setupAuthStateListener(),console.log("AuthService initialized and listener attached.")}_setupAuthStateListener(){this.unsubscribeAuthStateListener&&this.unsubscribeAuthStateListener(),this.unsubscribeAuthStateListener=JA.onAuthStateChanged(async e=>{console.log("Auth state changed. User:",e?e.email:"Logged out"),ji.setAuthLoading(!0);let t=null;if(e)try{if(t=await Nx(e.uid),!t){console.warn(`No admin document for ${e.email}, creating default 'user' profile.`);const i={email:e.email,type:"user",permissions:{read:!0,write:!1,edit:!1,delete:!1},createdAt:Bf()};await qs.collection("admins").doc(e.uid).set(i),t={id:e.uid,...i},Ks.clear(`admin_${e.uid}`)}const n={uid:e.uid,email:e.email,displayName:e.displayName};ji.setUser(n,t),console.log(` User ${e.email} logged in. Role: ${t.type}`)}catch(n){console.error("Auth state change - Error handling user data:",n),sn.showToast("     ","error");const i={uid:e.uid,email:e.email,displayName:e.displayName};ji.setUser(i,{id:e.uid,email:e.email,type:"user",permissions:{read:!0}})}else ji.setUser(null,null),Ks.clearAll(),console.log("User logged out, cache cleared.");ji.setAuthLoading(!1),sn.hideLoading(),this._triggerUIUpdateCallbacks()},e=>{console.error("Firebase Auth state listener error:",e),ji.setUser(null,null),ji.setAuthLoading(!1),sn.hideLoading(),sn.showToast(`     : ${e.message}`,"error"),this._triggerUIUpdateCallbacks()})}async loginWithEmail(e,t){if(!e||!t)throw new Error("   ");if(t.length<6)throw new Error("     ");try{await JA.signInWithEmailAndPassword(e,t),sn.showToast(` ${e}!`,"success"),sn.hideModal(sn.elements.authModal)}catch(n){console.error("Login Error:",n);const i=this._translateAuthError(n,"");throw sn.showToast(i,"error"),new Error(i)}}async registerWithEmail(e,t,n="user"){var i;if(!e||!t)throw new Error("   ");if(t.length<6)throw new Error("     ");["user","admin"].includes(n)||(n="user");try{const a=(await JA.createUserWithEmailAndPassword(e,t)).user;let o={read:!0,write:!1,edit:!1,delete:!1};n==="admin"&&(o={read:!0,write:!0,edit:!1,delete:!1});const A={email:a.email,type:n,permissions:o,createdAt:Bf()};await qs.collection("admins").doc(a.uid).set(A),console.log(`User registered: ${a.email}, Type: ${n}, Doc created.`),await JA.signOut(),sn.showToast(" !    ","success")}catch(s){if(console.error("Registration Error:",s),s.code!=="auth/email-already-in-use"&&((i=JA.currentUser)==null?void 0:i.email)===e){try{await JA.currentUser.delete()}catch(o){console.warn("Failed to delete partially registered auth user:",o)}await JA.signOut()}const a=this._translateAuthError(s,"");throw sn.showToast(a,"error"),new Error(a)}}async signInWithGoogle(){try{const t=(await JA.signInWithPopup(Jue)).user;await Nx(t.uid),sn.showToast("Google   !","success"),sn.hideModal(sn.elements.authModal)}catch(e){console.error("Google Sign-In Error:",e);const t=this._translateAuthError(e,"Google  ");throw sn.showToast(t,"error"),new Error(t)}}async logout(){try{await JA.signOut(),sn.showToast("  ","info")}catch(e){console.error("Logout Error:",e);const t=this._translateAuthError(e,"");throw sn.showToast(t,"error"),new Error(t)}}_translateAuthError(e,t=""){let n=`    (${(e==null?void 0:e.code)||"UNKNOWN"})`;switch(e==null?void 0:e.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":n="   ";break;case"auth/invalid-email":n="   ";break;case"auth/email-already-in-use":n="     ";break;case"auth/weak-password":n="  (  )";break;case"auth/too-many-requests":n=" ,   ";break;case"auth/network-request-failed":n="    ";break;case"auth/popup-closed-by-user":n="     ";break;case"auth/cancelled-popup-request":case"auth/popup-blocked":n="     ";break;case"auth/operation-not-allowed":n="     ";break;case"auth/requires-recent-login":n="       ";break}return`${t}  : ${n}`}_triggerUIUpdateCallbacks(){var a,o,A,l,c;const e=ji.get("currentUser"),t=ji.get("currentUserData"),n=(t==null?void 0:t.type)||"user";sn.updateUserInfo(t),sn.enableNavigation(!!e,n);const i=ji.get("activePage"),s=((a=window.smartEvaluator)==null?void 0:a.publicPages)||["dashboard"];!e&&i&&!s.includes(i)&&(console.log(`User logged out from private page "${i}", redirecting to dashboard.`),sn.showPage("dashboard"),(A=(o=window.smartEvaluator)==null?void 0:o.components.dashboard)==null||A.render()),(c=(l=window.smartEvaluator)==null?void 0:l.components.settings)==null||c.applySettings()}}const f6=new Ede,{loginWithEmail:Sde,registerWithEmail:Ide,signInWithGoogle:kde,logout:Tde}=f6;function cu(){const r=ji.get("currentUserData");return(r==null?void 0:r.type)==="super-admin"?{read:!0,write:!0,edit:!0,delete:!0}:(r==null?void 0:r.permissions)||{read:!0,write:!1,edit:!1,delete:!1}}function jf(){const r=ji.get("currentUserData");return(r==null?void 0:r.type)||"user"}function g6(){return cu().read===!0}function p6(){return cu().write===!0}function m6(){return cu().edit===!0}function y6(){return cu().delete===!0}function r0(r){return cu()[r]===!0}function b6(r,e=null){if(!r0(r)){const n=e||{read:"     ",write:"      ",edit:"     ",delete:"     "}[r]||"     ";return sn.showToast(n,"warning"),!1}return!0}function w6(){return jf()==="super-admin"}function v6(){const r=jf();return r==="admin"||r==="super-admin"}function _6(){return jf()==="user"}function x6(){const r=cu(),e=jf();let n=` : ${{"super-admin":" ",admin:"",user:""}[e]||e}
`;n+=": ";const i=[];return r.read&&i.push(""),r.write&&i.push(" "),r.edit&&i.push(""),r.delete&&i.push(" "),n+=i.length>0?i.join(", "):" ",n}function B6(r,e){if(!r)return;r0(e)?(r.classList.remove("hidden"),r.disabled=!1):(r.classList.add("hidden"),r.disabled=!0)}function C6(r,e){if(!r)return;r0(e)?(r.disabled=!1,r.classList.remove("opacity-50","cursor-not-allowed"),r.title=""):(r.disabled=!0,r.classList.add("opacity-50","cursor-not-allowed"),r.title="     ")}const Fde={getUserPermissions:cu,getUserType:jf,canRead:g6,canWrite:p6,canEdit:m6,canDelete:y6,hasPermission:r0,enforcePermission:b6,isSuperAdmin:w6,isAdmin:v6,isRegularUser:_6,getPermissionSummary:x6,toggleElementByPermission:B6,disableIfNoPermission:C6},Lde=Object.freeze(Object.defineProperty({__proto__:null,canDelete:y6,canEdit:m6,canRead:g6,canWrite:p6,default:Fde,disableIfNoPermission:C6,enforcePermission:b6,getPermissionSummary:x6,getUserPermissions:cu,getUserType:jf,hasPermission:r0,isAdmin:v6,isRegularUser:_6,isSuperAdmin:w6,toggleElementByPermission:B6},Symbol.toStringTag,{value:"Module"}));async function uu(r){const e=document.createElement("iframe");e.style.position="fixed",e.style.right="0",e.style.bottom="0",e.style.width="0",e.style.height="0",e.style.border="0",document.body.appendChild(e);const t=e.contentWindow.document;t.open(),t.write(`
    <!DOCTYPE html>
    <html lang="bn">
    <head>
      <meta charset="UTF-8">
      <title>Report</title>
      <script src="https://cdn.tailwindcss.com"><\/script>
      <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;600;700&display=swap" rel="stylesheet">
      <style>
        body { 
          font-family: 'Noto Sans Bengali', sans-serif; 
          -webkit-print-color-adjust: exact; 
          print-color-adjust: exact;
        }
        @media print {
          @page { margin: 5mm; size: A4; }
          body { -webkit-print-color-adjust: exact; }
        }
      </style>
    </head>
    <body class="bg-white text-gray-900 p-4">
      ${r}
      <script>
        // Wait for fonts and styles to load before printing
        window.onload = () => {
          setTimeout(() => {
            window.print();
            window.onafterprint = () => {
              // Optional: Notify parent window
            };
          }, 1000); // Small delay to ensure rendering
        };
      <\/script>
    </body>
    </html>
  `),t.close(),setTimeout(()=>{document.body.removeChild(e)},6e4)}async function Pde(r,e){const t=new Date().toLocaleDateString("bn-BD"),n=r.map((s,a)=>`
    <tr class="border-b border-gray-200 ${a%2===0?"bg-gray-50":"bg-white"}">
      <td class="py-2 px-3 text-left">${s.groupName}</td>
      <td class="py-2 px-3 text-center">${Fr(s.studentCount)}</td>
      <td class="py-2 px-3 text-center">${Fr(s.evaluationCount)}</td>
      <td class="py-2 px-3 text-center">${Fr(s.averageScore)}%</td>
      <td class="py-2 px-3 text-center">${Fr(s.participationRate)}%</td>
    </tr>
  `).join(""),i=`
    <div class="font-bengali">
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-blue-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">   </h2>
        <p class="text-sm text-gray-500 mt-1">: ${t}</p>
      </div>
      
      <table class="w-full border-collapse border border-gray-300 text-sm">
        <thead>
          <tr class="bg-blue-600 text-white">
            <th class="py-2 px-3 text-left font-semibold"> </th>
            <th class="py-2 px-3 text-center font-semibold"></th>
            <th class="py-2 px-3 text-center font-semibold"></th>
            <th class="py-2 px-3 text-center font-semibold"> </th>
            <th class="py-2 px-3 text-center font-semibold"></th>
          </tr>
        </thead>
        <tbody>
          ${n}
        </tbody>
      </table>
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await uu(i),e.showToast("   ...","info")}async function Nde(r,e,t){const n=new Date().toLocaleDateString("bn-BD"),i=r.map((a,o)=>`
    <tr class="border-b border-gray-200 ${o%2===0?"bg-gray-50":"bg-white"}">
      <td class="py-2 px-2 text-center">${Fr(a.roll)}</td>
      <td class="py-2 px-2 text-left font-medium">${a.name}</td>
      <td class="py-2 px-2 text-left">${e.get(a.groupId)||"-"}</td>
      <td class="py-2 px-2 text-center">${a.academicGroup||"-"}</td>
      <td class="py-2 px-2 text-center">${a.gender||"-"}</td>
      <td class="py-2 px-2 text-center">${a.contact||"-"}</td>
    </tr>
  `).join(""),s=`
    <div class="font-bengali">
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-indigo-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">  </h2>
        <p class="text-sm text-gray-500 mt-1"> : ${Fr(r.length)}  | : ${n}</p>
      </div>
      
      <table class="w-full border-collapse border border-gray-300 text-xs">
        <thead>
          <tr class="bg-indigo-600 text-white">
            <th class="py-2 px-2 text-center font-semibold w-16"></th>
            <th class="py-2 px-2 text-left font-semibold"></th>
            <th class="py-2 px-2 text-left font-semibold"></th>
            <th class="py-2 px-2 text-center font-semibold"></th>
            <th class="py-2 px-2 text-center font-semibold"></th>
            <th class="py-2 px-2 text-center font-semibold"></th>
          </tr>
        </thead>
        <tbody>
          ${i}
        </tbody>
      </table>
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await uu(s),t.showToast("   ...","info")}async function Dde(r,e,t){const n=new Date().toLocaleDateString("bn-BD");let i="";r.forEach(a=>{const o=e.filter(l=>l.groupId===a.id);if(o.length===0)return;const A=o.map((l,c)=>`
      <tr class="border-b border-gray-100 ${c%2===0?"bg-gray-50":"bg-white"}">
        <td class="py-1 px-2 text-center">${Fr(l.roll)}</td>
        <td class="py-1 px-2 text-left">${l.name}</td>
        <td class="py-1 px-2 text-center">${l.role||"-"}</td>
        <td class="py-1 px-2 text-center">${l.contact||"-"}</td>
      </tr>
    `).join("");i+=`
      <div class="mb-8 break-inside-avoid">
        <h3 class="text-lg font-bold text-purple-700 mb-2 border-b-2 border-purple-200 pb-1">
          ${a.name} <span class="text-sm font-normal text-gray-500 ml-2">(${Fr(o.length)} )</span>
        </h3>
        <table class="w-full border-collapse border border-gray-200 text-xs">
          <thead>
            <tr class="bg-purple-100 text-purple-900">
              <th class="py-1 px-2 text-center w-16"></th>
              <th class="py-1 px-2 text-left"></th>
              <th class="py-1 px-2 text-center"></th>
              <th class="py-1 px-2 text-center"></th>
            </tr>
          </thead>
          <tbody>
            ${A}
          </tbody>
        </table>
      </div>
    `});const s=`
    <div class="font-bengali">
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-purple-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">   </h2>
        <p class="text-sm text-gray-500 mt-1">: ${n}</p>
      </div>
      
      <div class="space-y-4">
        ${i}
      </div>
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await uu(s),t.showToast("   ...","info")}function Fr(r){if(r==null)return"-";const e=["0","1","2","3","4","5","6","7","8","9"],t=["","","","","","","","","",""];return String(r).split("").map(n=>{const i=e.indexOf(n);return i>-1?t[i]:n}).join("")}function Rde(r){if(!r)return 0;if(typeof r=="object"&&r.seconds)return r.seconds*1e3;const e=Date.parse(r);return Number.isFinite(e)?e:0}function pC(r){return{"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "}[String(r||"").trim()]||(r?String(r):"")}function E6(r){return{"team-leader":"bg-amber-50 text-amber-700 border-amber-200","time-keeper":"bg-sky-50 text-sky-700 border-sky-200",reporter:"bg-purple-50 text-purple-700 border-purple-200","resource-manager":"bg-emerald-50 text-emerald-700 border-emerald-200","peace-maker":"bg-rose-50 text-rose-700 border-rose-200"}[String(r||"").trim()]||"bg-gray-50 text-gray-700 border-gray-200"}function S6(r){const e=Number(r)||0;return e>=85?"bg-emerald-50 text-emerald-700":e>=70?"bg-sky-50 text-sky-700":e>=55?"bg-amber-50 text-amber-700":"bg-rose-50 text-rose-700"}function Ude(r,e,t,n,i){const s=new Map(n.map(d=>[d==null?void 0:d.id,d])),a=t.filter(d=>String(d==null?void 0:d.groupId)===String(r)),o=new Set(a.map(d=>String(d==null?void 0:d.id))),l=i.filter(d=>String(d==null?void 0:d.groupId)===String(r)).map(d=>{const p=s.get(d==null?void 0:d.taskId),f=parseFloat(d==null?void 0:d.maxPossibleScore)||parseFloat(p==null?void 0:p.maxScore)||100;let y=0,b=0,B=null,S=-1;if(f>0&&(d!=null&&d.scores))for(const[P,M]of Object.entries(d.scores)){if(!o.has(String(P)))continue;const _=(parseFloat(M==null?void 0:M.totalScore)||0)/f*100;y++,b+=_,_>S&&(S=_,B=P)}const C=Rde((d==null?void 0:d.taskDate)||(d==null?void 0:d.updatedAt)||(d==null?void 0:d.evaluationDate)||(d==null?void 0:d.createdAt)||(p==null?void 0:p.date));return{ev:d,task:p,ts:C,avgPct:y?b/y:0,count:y,topStudentId:B,topPct:S}}),c=l.length?l.reduce((d,p)=>d+p.avgPct,0)/l.length:0,h=e.map(d=>{const p=String(d==null?void 0:d.id),y=i.filter(b=>String(b==null?void 0:b.groupId)===p).map(b=>{const B=s.get(b==null?void 0:b.taskId),S=parseFloat(b==null?void 0:b.maxPossibleScore)||parseFloat(B==null?void 0:B.maxScore)||100;if(S<=0||!(b!=null&&b.scores))return 0;let C=0,P=0;for(const M of Object.values(b.scores)){const L=parseFloat(M==null?void 0:M.totalScore)||0;C++,P+=L/S*100}return C?P/C:0});return{id:p,avg:y.length?y.reduce((b,B)=>b+B,0)/y.length:-1}}).filter(d=>d.avg>=0).sort((d,p)=>p.avg-d.avg).findIndex(d=>d.id===String(r));return{members:a,perEval:l,groupAvg:c,rank:h>=0?h+1:null}}async function Mde(r,e,t,n,i){const s=new Date().toLocaleDateString("bn-BD");let a="";const o=[...r].sort((l,c)=>(l.name||"").localeCompare(c.name||"","bn"));for(const l of o){const{perEval:c,groupAvg:u,rank:h}=Ude(l.id,r,e,t,n),d=`
      <div class="grid grid-cols-4 gap-3 mb-6">
        <div class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 p-3">
          <div class="text-indigo-600"><i class="fa-solid fa-layer-group text-xl"></i></div>
          <div><div class="text-xs text-gray-500">Group</div><div class="text-sm font-semibold">${l.name}</div></div>
        </div>
        <div class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 p-3">
          <div class="text-emerald-600"><i class="fa-solid fa-chart-line text-xl"></i></div>
          <div><div class="text-xs text-gray-500">Average %</div><div class="text-sm font-semibold">${u.toFixed(2)}%</div></div>
        </div>
        <div class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 p-3">
          <div class="text-amber-600"><i class="fa-solid fa-crown text-xl"></i></div>
          <div><div class="text-xs text-gray-500">Rank</div><div class="text-sm font-semibold">${h?Fr(h):"-"}</div></div>
        </div>
        <div class="flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 p-3">
          <div class="text-sky-600"><i class="fa-solid fa-percent text-xl"></i></div>
          <div><div class="text-xs text-gray-500">Evaluations</div><div class="text-sm font-semibold">${Fr(c.length)}</div></div>
        </div>
      </div>
    `,y=`
      <h4 class="text-sm font-bold text-gray-700 mb-2 uppercase">Evaluations Summary</h4>
      <table class="w-full border-collapse border border-gray-200 text-xs mb-6">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-3 py-2 text-left">Assignment</th>
            <th class="px-3 py-2 text-left">Date</th>
            <th class="px-3 py-2 text-center">Evaluated</th>
            <th class="px-3 py-2 text-center">Avg %</th>
          </tr>
        </thead>
        <tbody>${c.slice().sort((b,B)=>(B.ts||0)-(b.ts||0)).map((b,B)=>{var S;return`
      <tr class="border-b border-gray-100">
        <td class="px-3 py-2">${((S=b.task)==null?void 0:S.name)||"Assignment-"+(B+1)}</td>
        <td class="px-3 py-2">${b.ts?new Date(b.ts).toLocaleDateString("bn-BD"):"-"}</td>
        <td class="px-3 py-2 text-center">${Fr(b.count)}</td>
        <td class="px-3 py-2 text-center">${b.avgPct.toFixed(2)}%</td>
      </tr>
    `}).join("")}</tbody>
      </table>
    `;a+=`
      <div class="break-after-page mb-8">
        <h2 class="text-xl font-bold text-indigo-800 mb-4 border-b-2 border-indigo-100 pb-2">${l.name}</h2>
        ${d}
        ${y}
      </div>
    `}const A=`
    <div class="font-bengali">
      <div class="text-center mb-8">
        <h1 class="text-2xl font-bold text-indigo-700">  </h1>
        <h2 class="text-lg font-semibold text-gray-600">   </h2>
        <p class="text-sm text-gray-500">: ${s}</p>
      </div>
      ${a}
    </div>
  `;await uu(A),i.showToast("   ...","info")}async function Ode(r,e,t,n,i,s){const a=new Date().toLocaleDateString("bn-BD");let o="";const A=String(r),l=n.find(d=>String(d.id)===A),c=l?l.name:"Unknown Assignment",u=[...e].sort((d,p)=>(d.name||"").localeCompare(p.name||"","bn"));for(const d of u){const p=i.find(M=>String(M.groupId)===String(d.id)&&String(M.taskId)===A);if(!p)continue;const f=parseFloat(p.maxPossibleScore)||parseFloat(l==null?void 0:l.maxScore)||100,y=p.scores||{};let b=0,B=0;const S=t.filter(M=>M.groupId===d.id).map(M=>{const L=y[M.id];if(!L)return null;const _=parseFloat(L.taskScore)||0,v=parseFloat(L.teamScore)||0,T=parseFloat(L.additionalScore)||0,E=parseFloat(L.mcqScore)||0,x=parseFloat(L.totalScore)||_+v+T+E,F=f>0?x/f*100:0;return b+=x,B++,{roll:M.roll||M.studentRoll||"-",name:M.name,role:M.role,total:x,pct:F,comment:L.comments||""}}).filter(M=>M!==null).sort((M,L)=>L.pct-M.pct);if(S.length===0)continue;const C=f>0?b/B/f*100:0,P=S.map(M=>`
      <tr class="border-b border-gray-100">
        <td class="px-2 py-1 text-center">${Fr(M.roll)}</td>
        <td class="px-2 py-1 font-medium">${M.name}</td>
        <td class="px-2 py-1 text-xs text-gray-500">${pC(M.role)}</td>
        <td class="px-2 py-1 text-right font-bold">${M.total.toFixed(2)}</td>
        <td class="px-2 py-1 text-right"><span class="px-1 py-0.5 rounded text-xs ${S6(M.pct)}">${M.pct.toFixed(1)}%</span></td>
        <td class="px-2 py-1 text-xs text-gray-500 truncate max-w-[150px]">${M.comment}</td>
      </tr>
    `).join("");o+=`
      <div class="mb-8 break-inside-avoid">
        <div class="flex items-center justify-between mb-2 border-b border-gray-200 pb-1">
          <h3 class="text-lg font-bold text-indigo-700">${d.name}</h3>
          <div class="text-sm text-gray-600">Avg: <span class="font-bold">${C.toFixed(2)}%</span></div>
        </div>
        <table class="w-full border-collapse border border-gray-200 text-xs">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-2 py-1 text-center w-12">Roll</th>
              <th class="px-2 py-1 text-left">Name</th>
              <th class="px-2 py-1 text-left">Role</th>
              <th class="px-2 py-1 text-right">Total</th>
              <th class="px-2 py-1 text-right">%</th>
              <th class="px-2 py-1 text-left">Comment</th>
            </tr>
          </thead>
          <tbody>${P}</tbody>
        </table>
      </div>
    `}const h=`
    <div class="font-bengali">
      <div class="text-center mb-8">
        <h1 class="text-2xl font-bold text-indigo-700">  </h1>
        <h2 class="text-lg font-semibold text-gray-600"> :</h2>
        <h2 class="text-lg font-semibold text-gray-600">${c}</h2>
        <p class="text-sm text-gray-500">: ${a}</p>
      </div>
      <div class="space-y-6">
        ${o||'<p class="text-center text-gray-500">      </p>'}
      </div>
    </div>
  `;await uu(h),s.showToast("   ...","info")}async function Qde(r,e,t,n,i,s="all",a=null){const o=new Date().toLocaleDateString("bn-BD");let A="",l=[...r].sort((y,b)=>(y.name||"").localeCompare(b.name||"","bn"));a&&(l=l.filter(y=>String(y.id)===String(a)));const c=s!=="all",u=c?t.find(y=>String(y.id)===String(s)):null,h=c?"":"    ",d=c&&(u!=null&&u.date)?new Date(u.date).toLocaleDateString("bn-BD"):o,p=new Map;e.forEach(y=>{p.set(y.id,{totalScore:0,maxPossible:0,evalCount:0,taskScore:0,teamScore:0,additionalScore:0,mcqScore:0,comment:""})}),n.forEach(y=>{if(c&&String(y.taskId)!==String(s))return;const b=t.find(S=>String(S.id)===String(y.taskId)),B=parseFloat(y.maxPossibleScore)||parseFloat(b==null?void 0:b.maxScore)||100;y.scores&&Object.entries(y.scores).forEach(([S,C])=>{const P=p.get(S);if(P){const M=parseFloat(C.totalScore)||0;P.totalScore+=M,P.maxPossible+=B,P.evalCount++,P.taskScore+=parseFloat(C.taskScore)||0,P.teamScore+=parseFloat(C.teamScore)||0,P.additionalScore+=parseFloat(C.additionalScore)||0,P.mcqScore+=parseFloat(C.mcqScore)||0,c&&(P.comment=C.comments||"")}})});for(const y of l){const b=e.filter(_=>_.groupId===y.id);if(b.length===0)continue;let B=0,S=0;const C=b.map(_=>{const v=p.get(_.id),T=v.maxPossible>0?v.totalScore/v.maxPossible*100:0;v.evalCount>0&&(B+=T,S++);const E=c?1:v.evalCount||1,x={task:(v.taskScore/E).toFixed(1),team:(v.teamScore/E).toFixed(1),add:(v.additionalScore/E).toFixed(1),mcq:(v.mcqScore/E).toFixed(1),total:v.totalScore.toFixed(1),max:v.maxPossible},F=v.evalCount>0?100:0,k=F>=80?"text-emerald-600":F>=50?"text-amber-600":"text-rose-600";return{..._,stats:v,displayStats:x,avgPct:T,participationRate:F,participationClass:k}}).sort((_,v)=>v.avgPct-_.avgPct),P=S>0?B/S:0,M=C.map((_,v)=>`
      <tr class="border-b border-gray-100 ${v%2===0?"bg-gray-50":"bg-white"} hover:bg-indigo-50 transition-colors">
        <td class="px-2 py-2 text-center border-r border-gray-100">${Fr(_.roll)}</td>
        <td class="px-3 py-2 font-medium border-r border-gray-100">
          ${_.name}
          <div class="text-[10px] text-gray-500">${_.academicGroup||""}</div>
        </td>
        <td class="px-2 py-2 text-center border-r border-gray-100 whitespace-nowrap">
          <span class="px-2 py-0.5 rounded-full text-[10px] border ${E6(_.role)}">
            ${pC(_.role)||""}
          </span>
        </td>
        <td class="px-2 py-2 text-center border-r border-gray-100 font-bold text-gray-700">
             ${Fr(_.stats.evalCount>0?1:0)}
        </td>
        ${c?"":`<td class="px-2 py-2 text-center border-r border-gray-100">${Fr(_.stats.evalCount)}</td>`}
        <td class="px-2 py-2 text-center text-gray-600 border-r border-gray-100">${_.displayStats.task}</td>
        <td class="px-2 py-2 text-center text-gray-600 border-r border-gray-100">${_.displayStats.team}</td>
        <td class="px-2 py-2 text-center text-gray-600 border-r border-gray-100">${_.displayStats.add}</td>
        <td class="px-2 py-2 text-center text-gray-600 border-r border-gray-100">${_.displayStats.mcq}</td>
        <td class="px-2 py-2 text-right font-mono text-gray-800 font-bold border-r border-gray-100">${_.displayStats.total} / ${_.displayStats.max}</td>
        <td class="px-2 py-2 text-right">
          <span class="font-bold ${S6(_.avgPct)} px-1.5 py-0.5 rounded">
            ${_.avgPct.toFixed(1)}%
          </span>
        </td>
      </tr>
    `).join(""),L=c?`
      <div class="bg-indigo-50 border-b border-indigo-100 px-4 py-2 flex justify-between items-center text-xs text-indigo-800">
        <div class="font-semibold"><i class="fas fa-file-alt mr-1"></i> ${(u==null?void 0:u.name)||""}</div>
        <div><i class="far fa-calendar-alt mr-1"></i> ${d}</div>
      </div>
    `:"";A+=`
      <div class="break-inside-avoid mb-8 border border-gray-200 rounded-xl overflow-hidden shadow-sm">
        <div class="bg-gradient-to-r from-gray-50 to-white border-b border-gray-200 p-4 flex justify-between items-center">
          <div>
            <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
              <i class="fas fa-layer-group text-indigo-500"></i> ${y.name}
            </h3>
            <p class="text-xs text-gray-500 mt-1">: ${Fr(b.length)} </p>
          </div>
          <div class="text-right">
            <div class="text-xs text-gray-500"> </div>
            <div class="text-xl font-bold text-indigo-600">${P.toFixed(1)}%</div>
          </div>
        </div>
        
        ${L}

        <table class="w-full text-xs table-fixed border-collapse">
          <thead class="bg-indigo-600 text-white uppercase tracking-wider text-[10px]">
            <tr>
              <th class="px-2 py-3 text-center font-bold w-[6%] border-r border-indigo-500/30"></th>
              <th class="px-3 py-3 text-left font-bold w-[20%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-center font-bold w-[12%] border-r border-indigo-500/30 whitespace-nowrap"></th>
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>
              ${c?"":'<th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>'}
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-center font-bold w-[8%] border-r border-indigo-500/30">MCQ</th>
              <th class="px-2 py-3 text-right font-bold w-[9%] border-r border-indigo-500/30"></th>
              <th class="px-2 py-3 text-right font-bold w-[9%]"> %</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100">
            ${M}
          </tbody>
        </table>
      </div>
    `}const f=`
    <div class="font-bengali bg-white min-h-screen">
      <!-- Top Header Section -->
      <div class="flex justify-between items-end border-b-[3px] border-indigo-600 pb-4 mb-8">
        <div>
          <h1 class="text-4xl font-extrabold text-indigo-800 tracking-tight mb-1">  </h1>
          <div class="flex items-center gap-2 text-sm text-gray-600 font-medium">
            <span class="bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded"> </span>
            <span>|</span>
            <span>: -</span>
          </div>
        </div>
        <div class="text-right">
          <div class="text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-1">  </div>
          <div class="text-xl font-bold text-gray-800 font-mono bg-gray-50 px-3 py-1 rounded border border-gray-200 inline-block">
            ${new Date().toLocaleDateString("bn-BD")}
          </div>
        </div>
      </div>

      <!-- Report Title Card -->
      <div class="mb-10 bg-gradient-to-br from-indigo-50 to-white rounded-2xl border border-indigo-100 p-6 shadow-sm text-center relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-400 to-purple-400"></div>
        
        ${h?`<h2 class="text-2xl font-bold text-gray-800 mb-2">${h}</h2>`:""}
        ${c?`<div class="inline-block bg-white border border-indigo-100 text-indigo-600 px-4 py-1 rounded-full text-sm font-semibold shadow-sm mb-4">${u==null?void 0:u.name}</div>`:""}
        
        <div class="flex justify-center flex-wrap gap-4 mt-2">
          <div class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border border-gray-100 shadow-sm">
            <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600"><i class="fas fa-layer-group"></i></div>
            <div class="text-left">
              <div class="text-[10px] text-gray-400 uppercase font-bold"> </div>
              <div class="text-sm font-bold text-gray-700">${Fr(l.length)}</div>
            </div>
          </div>
          <div class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border border-gray-100 shadow-sm">
            <div class="w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600"><i class="fas fa-users"></i></div>
            <div class="text-left">
              <div class="text-[10px] text-gray-400 uppercase font-bold"> </div>
              <div class="text-sm font-bold text-gray-700">${Fr(e.length)}</div>
            </div>
          </div>
          <div class="flex items-center gap-2 bg-white px-3 py-1.5 rounded-lg border border-gray-100 shadow-sm">
             <div class="w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-amber-600"><i class="far fa-calendar-alt"></i></div>
             <div class="text-left">
               <div class="text-[10px] text-gray-400 uppercase font-bold"></div>
               <div class="text-sm font-bold text-gray-700">${d}</div>
             </div>
          </div>
        </div>

        <!-- Developer Info -->
        <div class="mt-6 pt-4 border-t border-indigo-50">
          <div class="inline-flex items-center gap-2 bg-indigo-50 px-4 py-2 rounded-full border border-indigo-100">
            <i class="fas fa-code text-indigo-500 text-sm"></i>
            <span class="text-xs font-medium text-indigo-800">
               : <span class="font-bold">  </span>,  ,  ( ) | : <span class="font-mono font-bold">01840-643936</span>
            </span>
          </div>
        </div>
      </div>
      
      <!-- Main Content -->
      <div class="space-y-8">
        ${A}
      </div>
      
      <!-- Footer -->
      <div class="mt-16 pt-8 border-t border-gray-200 flex justify-between items-end">
        <div class="text-xs text-gray-400">
          <p class="font-semibold text-gray-500 mb-1">   </p>
          <p>    </p>
        </div>
        <div class="text-right text-xs">
          <p class="text-gray-400 mb-1"> </p>
          <p class="font-bold text-indigo-600 text-sm">   </p>
          <p class="text-[10px] text-gray-400 mt-0.5"> ${new Date().getFullYear()}    </p>
        </div>
      </div>
    </div>
  `;await uu(f),i.showToast("   ...","info")}async function Hde(r,e){const t=new Date().toLocaleDateString("bn-BD"),n=r.metric||{},i=n.groupName||"Group",s=r.members||[],a=r.evaluations||[],o=`
    <div class="grid grid-cols-4 gap-4 mb-6">
      <div class="p-4 bg-blue-50 rounded-lg border border-blue-100">
        <div class="text-xs text-blue-600 uppercase font-semibold"> </div>
        <div class="text-2xl font-bold text-blue-800">${Fr(n.evaluationCount)}</div>
      </div>
      <div class="p-4 bg-emerald-50 rounded-lg border border-emerald-100">
        <div class="text-xs text-emerald-600 uppercase font-semibold">  </div>
        <div class="text-2xl font-bold text-emerald-800">${Fr(n.averageScore)}%</div>
      </div>
      <div class="p-4 bg-indigo-50 rounded-lg border border-indigo-100">
        <div class="text-xs text-indigo-600 uppercase font-semibold"> </div>
        <div class="text-2xl font-bold text-indigo-800">${Fr(n.participationRate)}%</div>
      </div>
      <div class="p-4 bg-amber-50 rounded-lg border border-amber-100">
        <div class="text-xs text-amber-600 uppercase font-semibold"> </div>
        <div class="text-2xl font-bold text-amber-800">${Fr(n.pendingStudents)}</div>
      </div>
    </div>
  `,l=`
    <div class="mb-8 break-inside-avoid">
      <h3 class="text-lg font-bold text-gray-800 mb-3 border-b pb-2"> </h3>
      <table class="w-full text-xs border border-gray-200">
        <thead class="bg-gray-100 text-gray-600 uppercase">
          <tr>
            <th class="px-3 py-2 text-left"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"> </th>
            <th class="px-3 py-2 text-center"> </th>
            <th class="px-3 py-2 text-center"> </th>
            <th class="px-3 py-2 text-center">MCQ </th>
            <th class="px-3 py-2 text-center"> </th>
          </tr>
        </thead>
        <tbody>${s.map((d,p)=>`
    <tr class="border-b border-gray-100 ${p%2===0?"bg-gray-50":"bg-white"}">
      <td class="px-3 py-2 font-medium">
        ${d.name}
        <div class="text-[10px] text-gray-500">${d.academicGroup||""}</div>
      </td>
      <td class="px-3 py-2 text-center">${Fr(d.roll)}</td>
      <td class="px-3 py-2 text-center text-xs">
        <span class="px-2 py-0.5 rounded-full border ${E6(d.role)}">
          ${pC(d.role)}
        </span>
      </td>
      <td class="px-3 py-2 text-center">${Fr(d.evaluationCount)}</td>
      <td class="px-3 py-2 text-center text-gray-600">${d.avgTaskScore?d.avgTaskScore.toFixed(1):"-"}</td>
      <td class="px-3 py-2 text-center text-gray-600">${d.avgTeamScore?d.avgTeamScore.toFixed(1):"-"}</td>
      <td class="px-3 py-2 text-center text-gray-600">${d.avgAdditionalScore?d.avgAdditionalScore.toFixed(1):"-"}</td>
      <td class="px-3 py-2 text-center text-gray-600">${d.avgMcqScore?d.avgMcqScore.toFixed(1):"-"}</td>
      <td class="px-3 py-2 text-center font-bold text-indigo-700">${d.avgTotalScore?d.avgTotalScore.toFixed(1):"-"}</td>
    </tr>
  `).join("")}</tbody>
      </table>
    </div>
  `,u=`
    <div class="mb-8 break-inside-avoid">
      <h3 class="text-lg font-bold text-gray-800 mb-3 border-b pb-2"> </h3>
      <table class="w-full text-xs border border-gray-200">
        <thead class="bg-gray-100 text-gray-600 uppercase">
          <tr>
            <th class="px-3 py-2 text-left"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"></th>
            <th class="px-3 py-2 text-center"> </th>
            <th class="px-3 py-2 text-center"> %</th>
          </tr>
        </thead>
        <tbody>${a.map((d,p)=>`
    <tr class="border-b border-gray-100 ${p%2===0?"bg-gray-50":"bg-white"}">
      <td class="px-3 py-2 font-medium">${d.taskName}</td>
      <td class="px-3 py-2 text-center">${d.dateLabel}</td>
      <td class="px-3 py-2 text-center">${Fr(d.assessedCount)} / ${Fr(d.assessedCount+d.pendingCount)}</td>
      <td class="px-3 py-2 text-center">${d.avgTaskScore.toFixed(1)}</td>
      <td class="px-3 py-2 text-center font-bold text-indigo-700">${d.averagePercentage.toFixed(1)}%</td>
    </tr>
  `).join("")}</tbody>
      </table>
    </div>
  `,h=`
    <div class="font-bengali">
      <div class="text-center mb-8 border-b-2 border-gray-100 pb-6">
        <h1 class="text-2xl font-bold text-indigo-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">  : ${i}</h2>
        <div class="flex justify-center gap-4 mt-2 text-sm text-gray-500">
          <span>: ${t}</span>
          <span>: ${Fr(n.studentCount)} </span>
        </div>
      </div>
      
      ${o}
      ${l}
      ${u}
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await uu(h),e.showToast("   ...","info")}async function I6(r,e,t,n,i,s){var u;const a=new Date().toLocaleDateString("bn-BD"),o=()=>{var d;const h=[];if(e.group!=="all"&&h.push(`: ${((d=n.get(e.group))==null?void 0:d.name)||e.group}`),e.academicGroup!=="all"&&h.push(`: ${e.academicGroup}`),e.session!=="all"&&h.push(`: ${e.session}`),e.gender!=="all"&&h.push(`: ${e.gender}`),e.role!=="all"&&h.push(`: ${e.role}`),e.extra&&e.extra.length>0){const p=e.extra.map(f=>i.get(f)||f).join(", ");h.push(`: ${p}`)}return h.length>0?h.join(" | "):" "};let A="";e.assignment!=="all"&&s&&(A=((u=s.get(e.assignment))==null?void 0:u.name)||"");const l=r.map((h,d)=>{var C;const p=((C=n.get(h.groupId))==null?void 0:C.name)||"-",f=[];t.forEach(P=>{P.scores&&P.scores[h.id]&&f.push({taskId:P.taskId,...P.scores[h.id]})});const y=f.reduce((P,M)=>P+(M.totalScore||0),0),b=f.length?(y/f.length).toFixed(1):0,B=f.length?Fr(b):"-";let S="-";if(e.assignment!=="all"){const P=f.find(M=>M.taskId===e.assignment);P&&(S=Fr(P.totalScore))}return`
        <tr class="border-b border-gray-200 ${d%2===0?"bg-gray-50":"bg-white"}">
          <td class="py-2 px-3 text-center text-gray-500">${Fr(d+1)}</td>
          <td class="py-2 px-3 text-left">${h.name}</td>
          <td class="py-2 px-3 text-center">${Fr(h.roll)}</td>
          <td class="py-2 px-3 text-center">${h.gender||"-"}</td>
          <td class="py-2 px-3 text-center">${p}</td>
          <td class="py-2 px-3 text-center">${h.academicGroup||"-"}</td>
          <td class="py-2 px-3 text-center">${h.session||"-"}</td>
          <td class="py-2 px-3 text-center">${h.role==="member"?"":h.role||"-"}</td>
          <td class="py-2 px-3 text-center">${B}</td>
          ${e.assignment!=="all"?`<td class="py-2 px-3 text-center font-bold">${S}</td>`:""}
        </tr>
      `}).join(""),c=`
    <div class="font-bengali">
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold text-blue-700 mb-2">  </h1>
        <h2 class="text-xl font-semibold text-gray-700">  </h2>
        ${A?`<h3 class="text-lg font-medium text-blue-600 mt-1">${A}</h3>`:""}
        <div class="flex flex-col items-center gap-1 mt-2">
            <p class="text-sm text-gray-600 font-medium text-center px-4">${o()}</p>
            <p class="text-xs text-gray-500">: ${a} |  : ${Fr(r.length)} </p>
        </div>
      </div>
      
      <table class="w-full border-collapse border border-gray-300 text-xs">
        <thead>
          <tr class="bg-gray-100 text-gray-700">
            <th class="py-2 px-3 text-center font-semibold border border-gray-300 w-12">#</th>
            <th class="py-2 px-3 text-left font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>
            <th class="py-2 px-3 text-center font-semibold border border-gray-300"> </th>
            ${e.assignment!=="all"?'<th class="py-2 px-3 text-center font-semibold border border-gray-300"></th>':""}
          </tr>
        </thead>
        <tbody>
          ${l}
        </tbody>
      </table>
      
      <div class="mt-8 text-xs text-gray-400 text-center border-t pt-2">
              
      </div>
    </div>
  `;await uu(c)}const Vde=Object.freeze(Object.defineProperty({__proto__:null,generateAllGroupsResultPDF:Mde,generateAllStudentsPDF:Nde,generateAssignmentResultPDF:Ode,generateGroupAnalysisPDF:Pde,generateGroupWiseFullDetailsPDF:Qde,generateGroupWiseStudentsPDF:Dde,generateSingleGroupAnalysisPDF:Hde,generateStudentListPDF:I6},Symbol.toStringTag,{value:"Module"}));let k6,ho,Pr;const nt={},mC=11,yC=55,bC=0,$de=1,jde=["time","scheduledTime","scheduleTime","assignmentTime","startTime","startAt","timeSlot","slotTime","meetingTime"];function Gde(r){return k6=r.managers.stateManager,ho=r.managers.uiManager,Pr=r.utils,Zde(),console.log(" Dashboard component initialized."),{render:Kde}}function Kde(){if(console.log("Rendering Dashboard..."),!nt.page){console.error(" Dashboard render failed: Page element (#page-dashboard) not found.");return}ho.clearContainer(nt.page),nt.page.innerHTML='<div class="placeholder-content"><i class="fas fa-spinner fa-spin mr-2"></i>    ...</div>';try{const{groups:r,students:e,tasks:t,evaluations:n}=k6.getState();if(!r||!e||!t||!n){ho.displayEmptyMessage(nt.page,"   ...");return}const i=the(r,e,t,n);nt.page.innerHTML=zde(),ehe(),uhe(i),hhe(i.groupPerformanceData),fhe(i.academicGroupStats),phe(i.groupPerformanceData,i.groupRankingMeta),console.log(" Dashboard rendered successfully.")}catch(r){console.error(" Error rendering dashboard:",r),nt.page&&ho.displayEmptyMessage(nt.page,`    : ${r.message}`)}}function zde(){return`
    <style>
      @keyframes glowOrbit {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      .glow-ring {
        position: relative;
        isolation: isolate;
      }
      .glow-ring::before,
      .glow-ring::after {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 9999px;
        pointer-events: none;
      }
      .glow-ring::before {
        background: conic-gradient(from 0deg,
          rgba(255,180,0,0) 0deg,
          rgba(255,190,0,0.2) 180deg,
          rgba(255,200,0,0.9) 300deg,
          rgba(255,215,0,1) 340deg,
          rgba(255,180,0,0) 360deg);
        mask: radial-gradient(circle, transparent 65%, black 72%);
        -webkit-mask: radial-gradient(circle, transparent 65%, black 72%);
        box-shadow: 0 0 40px rgba(255,180,0,0.7), 0 0 80px rgba(255,200,0,0.5);
        animation: glowOrbit 3s linear infinite;
      }
      .glow-ring::after {
        background: conic-gradient(from 0deg,
          rgba(255,160,0,0) 0deg,
          rgba(255,180,0,0.3) 240deg,
          rgba(255,200,0,0.9) 320deg,
          rgba(255,160,0,0) 360deg);
        mask: radial-gradient(circle, transparent 55%, black 68%);
        -webkit-mask: radial-gradient(circle, transparent 55%, black 68%);
        filter: blur(12px);
        opacity: 1;
        animation: glowOrbit 5s linear infinite;
      }
    </style>
    <div class="max-w-7xl mx-auto space-y-2">
     

    <section id="dashboard-hero" class="relative overflow-hidden rounded-3xl border border-slate-300/60
  bg-gradient-to-br from-white via-slate-50 to-slate-200
  text-slate-900 shadow-[0_4px_10px_rgba(0,0,0,0.10),0_10px_28px_rgba(255,255,255,0.65)]
  hover:shadow-[0_8px_18px_rgba(0,0,0,0.14),0_14px_34px_rgba(255,255,255,0.75)]
  transition-all duration-500 ease-out
  dark:border-slate-700/60 dark:bg-gradient-to-br dark:from-slate-800 dark:via-slate-900 dark:to-black
  dark:text-slate-100 dark:shadow-[inset_0_2px_4px_rgba(255,255,255,0.05),0_6px_18px_rgba(0,0,0,0.60),0_0_28px_rgba(255,255,255,0.10)]
  dark:hover:shadow-[inset_0_3px_6px_rgba(255,255,255,0.08),0_10px_24px_rgba(0,0,0,0.75),0_0_36px_rgba(255,255,255,0.14)]">

  <!-- subtle radial aura -->
  <div aria-hidden class="absolute inset-0 opacity-30 bg-[radial-gradient(60%_50%_at_50%_0%,rgba(99,102,241,0.35),transparent_60%)]"></div>

  <div class="relative p-2 sm:p-3 space-y-2">

    <!-- Card (hero row) -->
    <section class="relative overflow-hidden rounded-3xl border
      border-slate-300/70 ring-1 ring-white/40 backdrop-blur supports-[backdrop-filter]:bg-white/70
      bg-gradient-to-br from-amber-50 via-rose-50 to-sky-50
      shadow-[0_6px_16px_rgba(0,0,0,0.10),0_0_30px_rgba(255,255,255,0.55)]
      hover:shadow-[0_10px_24px_rgba(0,0,0,0.14),0_0_36px_rgba(255,255,255,0.65)]
      transition-all duration-500 ease-out
      dark:border-slate-700/70 dark:bg-gradient-to-br dark:from-slate-800 dark:via-slate-900 dark:to-slate-950
      dark:text-slate-100 dark:shadow-[inset_0_2px_4px_rgba(255,255,255,0.06),0_10px_26px_rgba(0,0,0,0.70),0_0_34px_rgba(255,255,255,0.10)]
      dark:hover:shadow-[inset_0_3px_6px_rgba(255,255,255,0.08),0_14px_30px_rgba(0,0,0,0.78),0_0_40px_rgba(255,255,255,0.14)]">

      <!-- conic aura -->
      <div aria-hidden class="pointer-events-none absolute -inset-px rounded-[24px] opacity-[0.10] blur-2xl"
           style="background: conic-gradient(#fde68a, #f0abfc, #93c5fd, #fde68a)"></div>

      <div class="relative p-2 sm:p-3">
        <div class="flex flex-col items-center justify-between gap-2 md:flex-row">

          <!-- Left: title & icon -->
          <div class="flex w-full items-center gap-3 md:w-auto justify-center md:justify-start">
            
            <p class="text-2xl font-black tracking-tight text-slate-900 dark:text-white text-center md:text-left">
                
            </p>
          </div>

          <!-- Score chips -->
          <div class="grid w-full grid-cols-2 gap-2 text-[0.9rem] font-semibold sm:w-auto sm:grid-cols-3 md:grid-cols-4">
            <span class="relative rounded-2xl px-4 py-1.5
              text-emerald-900 bg-gradient-to-b from-emerald-50 via-emerald-200 to-emerald-500
              ring-2 ring-emerald-300/80
              shadow-[inset_0_1px_3px_rgba(255,255,255,0.9),0_4px_8px_rgba(0,0,0,0.15),0_10px_18px_rgba(0,0,0,0.20)]
              transition-all duration-300
              dark:text-emerald-100 dark:from-emerald-700 dark:via-emerald-800 dark:to-emerald-900 dark:ring-emerald-600/40
              dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.08),0_6px_12px_rgba(0,0,0,0.75)]"> </span>

            <span class="relative rounded-2xl px-4 py-1.5
              text-sky-900 bg-gradient-to-b from-sky-50 via-sky-200 to-sky-500
              ring-2 ring-sky-300/80
              shadow-[inset_0_1px_3px_rgba(255,255,255,0.9),0_4px_8px_rgba(0,0,0,0.15),0_10px_18px_rgba(0,0,0,0.20)]
              transition-all duration-300
              dark:text-sky-100 dark:from-sky-700 dark:via-sky-800 dark:to-sky-900 dark:ring-sky-600/40
              dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.08),0_6px_12px_rgba(0,0,0,0.75)]"> </span>

            <span class="relative rounded-2xl px-4 py-1.5
              text-rose-900 bg-gradient-to-b from-rose-50 via-rose-200 to-rose-500
              ring-2 ring-rose-300/80
              shadow-[inset_0_1px_3px_rgba(255,255,255,0.9),0_4px_8px_rgba(0,0,0,0.15),0_10px_18px_rgba(0,0,0,0.20)]
              transition-all duration-300
              dark:text-rose-100 dark:from-rose-700 dark:via-rose-800 dark:to-rose-900 dark:ring-rose-600/40
              dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.08),0_6px_12px_rgba(0,0,0,0.75)]"> </span>

            <span class="relative rounded-2xl px-4 py-1.5
              text-amber-900 bg-gradient-to-b from-amber-50 via-amber-200 to-amber-500
              ring-2 ring-amber-300/80
              shadow-[inset_0_1px_3px_rgba(255,255,255,0.9),0_4px_8px_rgba(0,0,0,0.15),0_10px_18px_rgba(0,0,0,0.20)]
              transition-all duration-300
              dark:text-amber-100 dark:from-amber-700 dark:via-amber-800 dark:to-amber-900 dark:ring-amber-700/40
              dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.08),0_6px_12px_rgba(0,0,0,0.75)]">MCQ </span>
          </div>

          <!-- Right: image preview -->
          <div class="w-full md:w-auto">
            <div class="glow-ring relative mx-auto h-28 w-28 sm:h-32 sm:w-32">
              <div class="absolute inset-[10px] overflow-hidden rounded-full border-2 border-amber-200/60 bg-white
                shadow-[0_10px_25px_rgba(0,0,0,0.25),0_0_35px_rgba(255,214,155,0.7)]
                dark:bg-slate-900 dark:shadow-[0_12px_28px_rgba(0,0,0,0.65),0_0_35px_rgba(255,214,155,0.10)]">
                <img src="images/smart.png" alt="Evaluation summary visual"
                     class="h-full w-full object-cover object-center" loading="lazy" decoding="async" />
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Two-column content -->
    <div class="grid gap-3 lg:grid-cols-2 items-stretch">

      <!-- Students & Groups -->
      <article class="rounded-3xl border border-slate-300/70 bg-gradient-to-br from-white via-slate-50 to-slate-100 
        text-slate-900 shadow-[0_8px_24px_rgba(0,0,0,0.10),0_0_24px_rgba(255,255,255,0.5)]
        backdrop-blur dark:border-slate-700/70 dark:bg-gradient-to-br dark:from-slate-800 dark:via-slate-900 dark:to-black 
        dark:text-white dark:shadow-[inset_0_2px_4px_rgba(255,255,255,0.06),0_12px_32px_rgba(0,0,0,0.7)] h-full p-2">

        <div class="space-y-2">
          <div class="flex items-center justify-center text-xs font-semibold text-slate-800 dark:text-white/80">
            <span class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-slate-900 
              ring-1 ring-slate-200 shadow-sm dark:bg-white/10 dark:text-white">
              <i class="fas fa-people-group text-indigo-600 drop-shadow-[0_1px_1px_rgba(0,0,0,0.3)]"></i>
                  
            </span>
           
          </div>
           <!-- Evaluation progress -->
        <div class="relative rounded-2xl border border-blue-300/70
            bg-gradient-to-br from-white via-blue-50 to-emerald-50
            shadow-[inset_0_1px_2px_rgba(255,255,255,0.9),0_8px_18px_rgba(0,0,0,0.08)]
            p-1 mb-2
            dark:border-blue-400/40 dark:from-slate-900 dark:via-slate-900 dark:to-slate-950
            dark:shadow-[inset_0_1px_2px_rgba(255,255,255,0.05),0_10px_24px_rgba(0,0,0,0.55)]">

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 items-center">
            <!-- Col 1: Title chip -->
            <div class="min-w-0">
              <span class="inline-flex items-center gap-2 rounded-full
                           px-3 py-1 text-[0.85rem] font-semibold
                           bg-white/90 text-slate-900 ring-1 ring-white/70
                           shadow-[0_1px_2px_rgba(0,0,0,0.14)] backdrop-blur
                           dark:bg-white/10 dark:text-white dark:ring-white/15">
                <i class="fas fa-chart-simple text-indigo-600 dark:text-indigo-300 text-sm"></i>
                <span class="truncate" lang="bn">  </span>
              </span>
            </div>

            <!-- Col 2: Progress bar -->
            <div>
              <div class="battery">
                <div class="battery-shell">
                  <div id="progressBar" class="battery-liquid">
                    <span id="progressBarLabel" class="battery-label">75%</span>
                  </div>
                </div>
               
              </div>
            </div>
          </div>
        </div>

          <div class="grid gap-3 md:grid-cols-2">
            <!--  -->
            <div class="rounded-2xl border border-emerald-300/70 bg-gradient-to-br from-white via-emerald-50 to-emerald-100/70 
              shadow-[0_6px_16px_rgba(16,185,129,0.18)] px-4 py-2
              dark:border-emerald-300/30 dark:from-emerald-900/40 dark:via-slate-900 dark:to-emerald-900/10">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-bold text-emerald-900 dark:text-emerald-200"></p>
                  <p class="text-xs text-emerald-700 dark:text-emerald-300/90"> </p>
                </div>
                <span class="flex h-9 w-9 items-center justify-center rounded-full bg-emerald-100 text-emerald-600 
                  shadow-[0_1px_2px_rgba(0,0,0,0.2)] dark:bg-emerald-500/20 dark:text-emerald-200">
                  <i class="fas fa-user-graduate"></i>
                </span>
              </div>

              <div class="mt-3 space-y-2 text-sm font-semibold text-slate-900 dark:text-white">
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentEvaluated">-</span> </span></div>
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentPending">-</span> </span></div>
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentStudentTotal">-</span> </span></div>
              </div>
            </div>

            <!--  -->
            <div class="rounded-2xl border border-sky-300/70 bg-gradient-to-br from-white via-sky-50 to-sky-100/70 
              shadow-[0_6px_16px_rgba(14,165,233,0.18)] px-4 py-4
              dark:border-sky-300/30 dark:from-sky-900/40 dark:via-slate-900 dark:to-sky-900/10">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm font-bold text-sky-900 dark:text-sky-100"></p>
                  <p class="text-xs text-sky-700 dark:text-sky-200/80"> </p>
                </div>
                <span class="flex h-9 w-9 items-center justify-center rounded-full bg-sky-100 text-sky-600 
                  shadow-[0_1px_2px_rgba(0,0,0,0.2)] dark:bg-sky-500/20 dark:text-sky-200">
                  <i class="fas fa-layer-group"></i>
                </span>
              </div>
              <div class="mt-3 space-y-2 text-sm font-semibold text-slate-900 dark:text-white">
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentGroupEvaluated">-</span> </span></div>
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentGroupPending">-</span> </span></div>
                <div class="flex items-center justify-between"><span></span><span><span id="latestAssignmentGroupTotal">-</span> </span></div>
              </div>
            </div>
          </div>
        </div>
      </article>

      <!-- Latest assignment + progress -->
      <article class="relative rounded-3xl border border-slate-300/70 
        bg-gradient-to-br from-blue-50 via-sky-100 to-emerald-50 
        text-slate-900 shadow-[0_10px_25px_rgba(0,0,0,0.08),0_0_35px_rgba(255,255,255,0.6)] 
        backdrop-blur p-3 sm:p-4 transition-all duration-500 
        dark:border-slate-700/70 dark:bg-gradient-to-br dark:from-slate-800 dark:via-slate-900 dark:to-slate-950 
        dark:text-white dark:shadow-[inset_0_2px_4px_rgba(255,255,255,0.06),0_12px_32px_rgba(0,0,0,0.7)] h-full">

       

        <!-- Header -->
        <div class="mb-2 sm:mb-3 ">
          <p class="text-xs font-bold text-slate-700 dark:text-white/60" lang="bn" >
                 <span class="text-xs text-slate-700 dark:text-white/60">
            : <span id="latestAssignmentUpdated">-</span>
          </span>
          </p>
          <p id="latestTaskTitle"
            class="mt-1 max-w-[28rem]  font-bold text-slate-900 dark:text-white text-sm sm:text-lg"
            title="-">-</p>
        </div>

       

        <!-- Content: 3-column on sm+ -->
        <div class="grid grid-cols-2 gap-3">
          <!-- Average -->
          <div class="flex flex-col items-center justify-center gap-2 sm:gap-3">
            <div class="relative h-24 w-24 sm:h-26 sm:w-26 rounded-full border border-emerald-300/60 
              bg-emerald-50 dark:bg-slate-800
              shadow-[0_6px_16px_rgba(16,185,129,0.25)] 
              dark:border-emerald-300/30 flex items-center justify-center"
              id="latestAssignmentCircle">
              <div class="absolute inset-3 rounded-full bg-white dark:bg-slate-900 flex items-center justify-center shadow-sm">
                <p id="latestAssignmentAverage" class="text-2xl sm:text-3xl font-bold text-emerald-600 dark:text-emerald-400">-</p>
              </div>
            </div>
            <p class="text-[0.8rem] sm:text-sm font-bold text-emerald-800 dark:text-white/80 text-center">
                
            </p>
          </div>

          <!-- Overall -->
          <div class="flex flex-col items-center justify-center gap-2 sm:gap-3">
            <div class="relative h-24 w-24 sm:h-26 sm:w-26 rounded-full border border-sky-300/60 
              bg-sky-50 dark:bg-slate-800
              shadow-[0_6px_16px_rgba(14,165,233,0.25)] 
              dark:border-sky-300/30 flex items-center justify-center"
              id="overallProgressCircle">
              <div class="absolute inset-3 rounded-full bg-white dark:bg-slate-900 flex items-center justify-center shadow-sm">
                <p id="overallProgress" class="text-2xl sm:text-3xl font-bold text-sky-600 dark:text-sky-400">-</p>
              </div>
            </div>
            <p class="text-[0.8rem] sm:text-sm font-bold text-sky-800 dark:text-white/80 text-center">
               
            </p>
          </div>
        </div>
      </article>

    </div>
  </div>
</section>

      <section id="dashboard-stats" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="totalGroups">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-indigo-500/15 text-indigo-600 dark:text-indigo-300">
              <i class="fas fa-layer-group text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="totalStudents">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-500/15 text-emerald-600 dark:text-emerald-300">
              <i class="fas fa-user-graduate text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-sky-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="totalAcademicGroups">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">    </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-sky-500/15 text-sky-600 dark:text-sky-300">
              <i class="fas fa-university text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-amber-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="pendingRoles">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-amber-500/15 text-amber-600 dark:text-amber-300">
              <i class="fas fa-user-clock text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="maleStudents">-</p>
              <div class="mt-1 inline-flex items-center gap-2 rounded-full bg-blue-500/10 px-3 py-1 text-xs font-medium text-blue-600 dark:text-blue-300">
                <i class="fas fa-male"></i>
                <span id="malePercentage">-</span>
              </div>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-blue-500/15 text-blue-600 dark:text-blue-300">
              <i class="fas fa-venus-mars text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-rose-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="femaleStudents">-</p>
              <div class="mt-1 inline-flex items-center gap-2 rounded-full bg-rose-500/10 px-3 py-1 text-xs font-medium text-rose-600 dark:text-rose-300">
                <i class="fas fa-female"></i>
                <span id="femalePercentage">-</span>
              </div>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-rose-500/15 text-rose-600 dark:text-rose-300">
              <i class="fas fa-user-friends text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-teal-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="totalTasks">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-teal-500/15 text-teal-600 dark:text-teal-300">
              <i class="fas fa-tasks text-lg"></i>
            </span>
          </div>
        </article>

        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-4 shadow-sm dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br from-red-500/10 via-transparent to-transparent"></div>
          <div class="relative flex items-start justify-between">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400"> </p>
              <h3 class="text-lg font-semibold text-gray-800 dark:text-white"> </h3>
              <p class="mt-4 text-3xl font-bold text-gray-900 dark:text-white" id="pendingEvaluations">-</p>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">   </p>
            </div>
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-red-500/15 text-red-600 dark:text-red-300">
              <i class="fas fa-hourglass-half text-lg"></i>
            </span>
          </div>
        </article>
      </section>

      <section id="dashboard-top-groups" class="relative overflow-hidden rounded-3xl border border-gray-200/70 bg-white shadow-sm transition hover:shadow-lg dark:border-gray-700/70 dark:bg-gray-900/70">
        <div class="border-b border-gray-200/60 px-6 py-4 dark:border-gray-800/80">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white"> </h3>
              <p class="text-xs text-gray-500 dark:text-gray-400">        </p>
            </div>
            <span class="inline-flex items-center gap-2 rounded-full bg-indigo-500/10 px-3 py-1 text-xs font-medium text-indigo-600 dark:text-indigo-300">
              <i class="fas fa-trophy"></i> Elite Group
            </span>
          </div>
        </div>
        <div id="topGroupsContainer" class="p-6"></div>
      </section>

      <section id="dashboard-academic-stats" class="relative overflow-hidden rounded-3xl border border-gray-200/70 bg-white shadow-sm transition hover:shadow-lg dark:border-gray-700/70 dark:bg-gray-900/70">
        <div class="border-b border-gray-200/60 px-6 py-4 dark:border-gray-800/80">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">  </h3>
              <p class="text-xs text-gray-500 dark:text-gray-400">     </p>
            </div>
            <span class="inline-flex items-center gap-2 rounded-full bg-emerald-500/10 px-3 py-1 text-xs font-medium text-emerald-600 dark:text-emerald-300">
              <i class="fas fa-chart-bar"></i> 
            </span>
          </div>
        </div>
        <div id="academicGroupStatsList" class="p-6"></div>
      </section>

      <section id="dashboard-ranking" class="relative overflow-hidden rounded-3xl border border-gray-200/70 bg-white shadow-sm transition hover:shadow-lg dark:border-gray-700/70 dark:bg-gray-900/70">
        <div class="border-b border-gray-200/60 px-6 py-4 dark:border-gray-800/80">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">     </h3>
              <p class="text-xs text-gray-500 dark:text-gray-400"> ,  ,     </p>
            </div>
            <span class="inline-flex items-center gap-2 rounded-full bg-purple-500/10 px-3 py-1 text-xs font-medium text-purple-600 dark:text-purple-300">
              <i class="fas fa-star"></i>  
            </span>
          </div>
        </div>
        <div id="groupsRankingList" class="p-6 space-y-4"></div>
      </section>
    </div>
  `}function $a(r){if(!r)return 0;if(r instanceof Date){const t=r.getTime();return Number.isNaN(t)?0:t}if(typeof r=="object"){if(typeof r.seconds=="number")return r.seconds*1e3;if(typeof r.toDate=="function")try{return r.toDate().getTime()}catch{return 0}}const e=Date.parse(r);return Number.isNaN(e)?0:e}function wC(r){if(!r)return 0;const e=[r.date,r.scheduleDate,r.startDate,r.dueDate,r.deadline,r.assignmentDate,r.assignmentDay,r.createdAt,r.updatedAt];let t=0;for(const s of e){const a=$a(s);if(a){t=a;break}}if(!t)return 0;const n=vC(r),i=new Date(t);return n?i.setHours(n.hour,n.minute,0,0):i.getHours()===0&&i.getMinutes()===0&&i.getSeconds()===0&&i.getMilliseconds()===0&&i.setHours(mC,yC,bC,0),i.getTime()}function vC(r){if(!r)return null;const e=["timeHour","hour","startHour"],t=["timeMinute","minute","startMinute"],n=e.map(s=>typeof r[s]=="number"?r[s]:parseInt(r[s],10)).find(s=>Number.isFinite(s)),i=t.map(s=>typeof r[s]=="number"?r[s]:parseInt(r[s],10)).find(s=>Number.isFinite(s));if(Number.isFinite(n)&&n>=0&&n<=23){const s=Number.isFinite(i)&&i>=0&&i<=59?i:0;return{hour:n,minute:s}}for(const s of jde){if(!Object.prototype.hasOwnProperty.call(r,s))continue;const a=qde(r[s]);if(a)return a}return null}function qde(r){if(!r)return null;const e=String(r).trim();if(!e)return null;const n=e.toLowerCase().match(/(\d{1,2})(?::(\d{1,2}))?\s*(am|pm|a\.m\.|p\.m\.)?/i);if(!n)return null;let i=parseInt(n[1],10),s=n[2]?parseInt(n[2],10):0;if(Number.isNaN(i)||Number.isNaN(s))return null;const a=n[3];if(a){const o=a.includes("p"),A=a.includes("a");o&&i<12&&(i+=12),A&&i===12&&(i=0)}return i=Math.min(Math.max(i,0),23),s=Math.min(Math.max(s,0),59),{hour:i,minute:s}}function Wde(r=[]){let e=null;return r.forEach(t=>{if(!t)return;const n=wC(t);if(n&&(!e||n>e.ts)){const i=t.id??t.uid??t.key??t.slug??null,s=vC(t);e={task:t,id:i,ts:n,timeParts:s}}}),e}function Yde(r){if(!r)return null;try{const e=new Date;return e.setHours(r.hour,r.minute??0,0,0),new Intl.DateTimeFormat("bn-BD",{hour:"numeric",minute:"2-digit",hour12:!0}).format(e)}catch{return null}}function Xde(r){const e=$a(r);if(!e)return"-";try{const t=new Date(e);return Number.isNaN(t.getTime())?"-":(t.getHours()===0&&t.getMinutes()===0&&t.getSeconds()===0&&t.getMilliseconds()===0&&t.setHours(mC,yC,bC,0),new Intl.DateTimeFormat("bn-BD",{dateStyle:"medium",timeStyle:"short"}).format(t))}catch{return"-"}}function T6(r){if(!r)return"-";try{const e=new Date(r);return new Intl.DateTimeFormat("bn-BD",{dateStyle:"medium"}).format(e)}catch{return"-"}}function Jde(r){const e=$a(r);if(!e)return"-";try{const t=new Date(e);return Number.isNaN(t.getTime())?"-":(t.getHours()===0&&t.getMinutes()===0&&t.getSeconds()===0&&t.getMilliseconds()===0&&t.setHours(mC,yC,bC,0),new Intl.DateTimeFormat("bn-BD",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t))}catch{return"-"}}function Zde(){nt.page=document.getElementById("page-dashboard"),nt.page||console.error(" Dashboard init failed: #page-dashboard not found!")}function ehe(){if(!nt.page)return;["totalGroups","totalStudents","totalAcademicGroups","pendingRoles","maleStudents","malePercentage","femaleStudents","femalePercentage","totalTasks","pendingEvaluations","progressBar","progressBarLabel","overallProgress","overallProgressCircle","latestAssignmentAverage","latestAssignmentCircle","latestTaskTitle","latestAssignmentUpdated","latestAssignmentEvaluated","latestAssignmentPending","latestAssignmentStudentTotal","latestAssignmentGroupEvaluated","latestAssignmentGroupPending","latestAssignmentGroupTotal","topGroupsContainer","academicGroupStatsList","groupsRankingList"].forEach(e=>{nt[e]=nt.page.querySelector(`#${e}`),nt[e]||console.warn(`Dashboard: Element #${e} not found.`)})}function the(r=[],e=[],t=[],n=[]){const i=r.length,s=e.length,a=t.length,{male:o,female:A}=rhe(e),l=s>0?o/s*100:0,c=s>0?A/s*100:0,h=new Set(e.map(k=>k.academicGroup).filter(Boolean)).size,d=e.filter(k=>!k.role||k.role==="").length,p=ihe(r,e,n,t),f=she(r,e,n),y=p.filter(k=>k.evalCount>0),b=y.reduce((k,Z)=>k+Z.averageScore,0),B=y.length>0?b/y.length:0,S=new Set(n.map(k=>`${k.taskId}_${k.groupId}`));let C=0;if(t.length>0&&r.length>0)for(const k of t)for(const Z of r)S.has(`${k.id}_${Z.id}`)||C++;const P=che(e,p),M=ahe(r,e,t,n),L=ohe(t,n),_=L.assignmentSummaries,v=_.length>0,T=v?L.overallAverage:0,E=v?T:B,x=Ahe(t,M),F=M!=null&&M.taskId&&L.assignmentAverageMap?L.assignmentAverageMap.get(M.taskId)??null:null;return{totalGroups:i,totalStudents:s,totalTasks:a,maleStudents:o,femaleStudents:A,malePercentage:l,femalePercentage:c,totalAcademicGroups:h,pendingRoles:d,pendingEvaluations:C,overallProgress:E,overallAssignmentAverage:T,latestAssignmentAverage:F,assignmentSummaries:_,groupPerformanceData:p,groupRankingMeta:f,academicGroupStats:P,latestAssignmentSummary:M,assignmentOverview:x}}function rhe(r=[]){return r.reduce((e,t)=>{const n=nhe(t.gender);return n==="male"?e.male++:n==="female"&&e.female++,e},{male:0,female:0})}function nhe(r){const e=(r||"").toString().trim();if(!e)return"";const t=e.normalize("NFC").toLowerCase().replace(/\s+/g,""),n=t.replace(//g,"");return n.includes("")||t.includes("male")||t.includes("boy")||t==="m"?"male":n.includes("")||t.includes("female")||t.includes("girl")||t==="f"?"female":""}function ihe(r,e,t,n){const i=new Map(n.map(s=>[s.id,s]));return r.map(s=>{const a=e.filter(b=>b.groupId===s.id),o=t.filter(b=>b.groupId===s.id);let A=0,l=0;const c=new Set,u=new Set;let h={ts:0,avgPct:null,participants:null,participationRate:null};o.forEach(b=>{const B=b!=null&&b.scores?Object.keys(b.scores).length:0,S=F6(b,i);typeof S=="number"&&!Number.isNaN(S)&&(A+=S,l++),b!=null&&b.scores&&Object.keys(b.scores).forEach(P=>{P&&c.add(P)}),b!=null&&b.taskId&&u.add(b.taskId);const C=$a(b.taskDate)||$a(b.updatedAt)||$a(b.createdAt);if(C&&C>=(h.ts||0)){const P=a.length>0?Math.min(100,B/a.length*100):0;h={ts:C,avgPct:typeof S=="number"?S:h.avgPct,participants:B,participationRate:P}}});const d=l>0?A/l:0,p=c.size,f=u.size,y=a.length>0?Math.min(100,p/a.length*100):0;return{group:s,groupName:s.name,studentCount:a.length,averageScore:d,evalCount:l,evaluatedMembers:p,taskCount:f,participationRate:y,latestAverageScore:h.avgPct,latestParticipantCount:h.participants,latestParticipationRate:h.participationRate}}).sort((s,a)=>a.averageScore-s.averageScore)}function she(r=[],e=[],t=[]){if(!Array.isArray(r)||!Array.isArray(e)||!Array.isArray(t))return{list:[],map:new Map};const n=new Map(e.map(o=>[String(o.id),bb(o.groupId)])),i={};e.forEach(o=>{const A=bb(o.groupId);i[A]=(i[A]||0)+1});const s={};t.forEach(o=>{const A=parseFloat(o.maxPossibleScore)||60,l=$a(o.taskDate)||$a(o.updatedAt)||$a(o.evaluationDate)||$a(o.createdAt),c=o.scores||{},u=new Set;Object.entries(c).forEach(([h,d])=>{const p=h!=null?String(h):"",f=n.get(p)||"__none",y=bb(f);s[y]||(s[y]={evalCount:0,totalScore:0,maxScoreSum:0,latestMs:null,participants:new Set});const b=s[y];u.has(y)||(b.evalCount+=1,u.add(y)),b.totalScore+=parseFloat(d==null?void 0:d.totalScore)||0,b.maxScoreSum+=A,b.participants.add(p),l&&(b.latestMs=b.latestMs?Math.max(b.latestMs,l):l)})});const a=Object.entries(s).map(([o,A])=>{if(A.evalCount<$de)return null;const l=A.maxScoreSum>0?A.totalScore/A.maxScoreSum*100:0,c=i[o]||0,u=A.participants.size;return{groupId:o,efficiency:l,evalCount:A.evalCount,totalScore:A.totalScore,maxScoreSum:A.maxScoreSum,latestEvaluationMs:A.latestMs||0,participantsCount:u,groupSize:c,remainingCount:Math.max(0,c-u)}}).filter(Boolean).sort((o,A)=>A.efficiency!==o.efficiency?A.efficiency-o.efficiency:A.evalCount!==o.evalCount?A.evalCount-o.evalCount:A.totalScore!==o.totalScore?A.totalScore-o.totalScore:A.maxScoreSum!==o.maxScoreSum?A.maxScoreSum-o.maxScoreSum:(A.latestEvaluationMs||0)-(o.latestEvaluationMs||0));return a.forEach((o,A)=>{o.rank=A+1}),{list:a,map:new Map(a.map(o=>[o.groupId,o]))}}function bb(r){return r==null||r===""?"__none":String(r)}function F6(r,e){if(!r)return null;const t=parseFloat(r.groupAverageScore);if(!Number.isNaN(t))return t;if(!r.scores)return null;const n=e.get(r.taskId),i=parseFloat(n==null?void 0:n.maxScore)||parseFloat(r.maxPossibleScore)||100;if(!(i>0))return null;let s=0,a=0;return Object.values(r.scores).forEach(o=>{s+=parseFloat(o.totalScore)||0,a++}),a===0?null:s/a/i*100}function ahe(r=[],e=[],t=[],n=[]){var T,E;const i=Wde(t);if(!n.length&&!i)return null;const s=new Map(r.map(x=>[x.id,0]));e.forEach(x=>{const F=x.groupId;F&&(s.has(F)||s.set(F,0),s.set(F,s.get(F)+1))});let a=null;n.forEach(x=>{const F=$a(x.taskDate)||$a(x.updatedAt)||$a(x.createdAt);(!a||F>a.ts)&&(a={ts:F,taskId:x.taskId})});const o=(a==null?void 0:a.taskId)||(i==null?void 0:i.id);if(!o)return null;const A=t.find(x=>x.id===o)||(i==null?void 0:i.task)||null,l=(A==null?void 0:A.title)||(A==null?void 0:A.name)||((T=i==null?void 0:i.task)==null?void 0:T.title)||((E=i==null?void 0:i.task)==null?void 0:E.name)||" ",c=wC(A)||(i==null?void 0:i.ts)||0,u=vC(A)||(i==null?void 0:i.timeParts)||null,h=Yde(u),d=new Set;let p=!1;const f=["assignedGroupIds","targetGroupIds","groupIds","assignedGroups","groups","targets","selectedGroups","participantGroups","assignmentTargets"],y=(x,F=!1,k=0)=>{if(x==null||k>6)return;if(Array.isArray(x)){x.forEach(ue=>y(ue,F,k+1));return}if(typeof x=="object"){if("id"in x||"groupId"in x||"value"in x){y(x.id??x.groupId??x.value,F,k+1);return}if(x.group){y(x.group.id??x.group.groupId,F,k+1);return}Object.values(x).forEach(ue=>y(ue,F,k+1));return}const Z=typeof x=="string"?x.trim():x;Z!=null&&Z!==""&&(d.add(Z),F&&(p=!0))};A&&((A.assignToAllGroups||A.assignmentScope==="all"||A.targetScope==="all")&&r.forEach(x=>y(x.id,!0)),f.forEach(x=>{Object.prototype.hasOwnProperty.call(A,x)&&y(A[x],!0)}));const b=n.filter(x=>x.taskId===o),B=new Set;let S=0;b.forEach(x=>{x.groupId&&(B.add(x.groupId),y(x.groupId,!1));const F=x!=null&&x.scores?Object.keys(x.scores).length:Number(x.participantCount)||0;S+=F}),(!d.size||!p)&&r.forEach(x=>{(x==null?void 0:x.id)!==void 0&&(x==null?void 0:x.id)!==null&&d.add(x.id)});let C=0;d.forEach(x=>{C+=s.get(x)||0}),C===0&&(C=e.length),C===0&&(C=S),S=Math.min(S,C);const P=Math.max(C-S,0),M=C>0?Math.min(100,S/C*100):0,L=d.size||r.length||B.size,_=B.size,v=Math.max((L||0)-_,0);return{taskId:o,taskTitle:l,evaluated:S,pending:P,total:C,completionPercent:M,lastUpdated:(a==null?void 0:a.ts)||c||Date.now(),scheduledTimeDisplay:h,groupTotal:L,groupsEvaluated:_,groupsPending:v}}function ohe(r=[],e=[]){if(!e.length)return{assignmentSummaries:[],overallAverage:0,assignmentAverageMap:new Map};const t=new Map(r.map(o=>[o.id,o])),n=new Map;e.forEach(o=>{if(!o.taskId)return;const A=F6(o,t);if(typeof A!="number"||Number.isNaN(A))return;n.has(o.taskId)||n.set(o.taskId,{total:0,count:0});const l=n.get(o.taskId);l.total+=A,l.count+=1});const i=[],s=new Map;n.forEach((o,A)=>{if(!o.count)return;const l=t.get(A),c=o.total/o.count;i.push({taskId:A,taskTitle:(l==null?void 0:l.title)||(l==null?void 0:l.name)||" ",averagePercent:c,evaluationCount:o.count}),s.set(A,c)});const a=i.length?i.reduce((o,A)=>o+A.averagePercent,0)/i.length:0;return{assignmentSummaries:i,overallAverage:a,assignmentAverageMap:s}}function Ahe(r=[],e=null){if(!Array.isArray(r)||r.length===0)return[];const t=(e==null?void 0:e.taskId)||null;return r.map(n=>{const i=wC(n),s=n.title||n.name||" ";return{id:n.id??n.uid??n.key??`${s}-${i||Date.now()}`,title:s,timestamp:i,dateLabel:i?T6(i):"  "}}).sort((n,i)=>(i.timestamp||0)-(n.timestamp||0)).slice(0,6).map((n,i)=>{const s=t?n.id===t:i===0;return{...n,index:i+1,isLatest:s,relativeLabel:lhe(n.timestamp)}})}function lhe(r){if(!r)return"";const e=new Date(r);if(Number.isNaN(e.getTime()))return"";const t=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),s=Math.round((n-i)/(1e3*60*60*24));if(s===0)return"";const a=Math.abs(s),o=Pr!=null&&Pr.convertToBanglaNumber&&typeof Pr.convertToBanglaNumber=="function"?Pr.convertToBanglaNumber(String(a)):String(a);return s>0?`${o}  `:`${o}  `}function che(r,e){const t={},n=new Map(e.map(i=>[i.group.id,i.averageScore]));return r.forEach(i=>{const s=i.academicGroup,a=i.groupId;!s||!a||(t[s]||(t[s]={totalStudents:0,scoreSum:0,groupCount:0,processedGroups:new Set}),t[s].totalStudents++,n.has(a)&&!t[s].processedGroups.has(a)&&n.get(a)>0&&(t[s].scoreSum+=n.get(a),t[s].groupCount++,t[s].processedGroups.add(a)))}),Object.keys(t).forEach(i=>{const s=t[i];s.averageScore=s.groupCount>0?s.scoreSum/s.groupCount:0}),t}function uhe(r){const e=(B,S)=>{B&&(B.textContent=S??"-")},t=(B,S=0)=>typeof B!="number"||isNaN(B)?"-":Pr.convertToBanglaNumber(B.toFixed(S));e(nt.totalGroups,t(r.totalGroups)),e(nt.totalStudents,t(r.totalStudents)),e(nt.totalAcademicGroups,t(r.totalAcademicGroups)),e(nt.pendingRoles,t(r.pendingRoles)),e(nt.maleStudents,t(r.maleStudents)),e(nt.malePercentage,`${t(r.malePercentage,0)}%`),e(nt.femaleStudents,t(r.femaleStudents)),e(nt.femalePercentage,`${t(r.femalePercentage,0)}%`),e(nt.totalTasks,t(r.totalTasks)),e(nt.pendingEvaluations,t(r.pendingEvaluations));const n=r.latestAssignmentSummary||null,i=n?Math.min(100,Math.max(0,Number(n.completionPercent)||0)):0,s=n?t(n.evaluated):"-",a=n?t(n.pending):"-",o=n?t(n.total):"-",A=n?t(n.groupsEvaluated):"-",l=n?t(n.groupsPending):"-",c=n?t(n.groupTotal):"-",u=n?T6(n.lastUpdated):"-";let h=n?Jde(n.lastUpdated):"-";h==="-"&&(n!=null&&n.scheduledTimeDisplay)&&(h=n.scheduledTimeDisplay);const d=u==="-"&&h==="-"?"-":`: ${u} | : ${h}`;if(nt.latestTaskTitle){const B=(n==null?void 0:n.taskTitle)||" ";e(nt.latestTaskTitle,B),nt.latestTaskTitle.setAttribute("title",B)}nt.latestAssignmentUpdated&&e(nt.latestAssignmentUpdated,d),nt.latestAssignmentEvaluated&&e(nt.latestAssignmentEvaluated,s),nt.latestAssignmentPending&&e(nt.latestAssignmentPending,a),nt.latestAssignmentStudentTotal&&e(nt.latestAssignmentStudentTotal,o),nt.latestAssignmentGroupEvaluated&&e(nt.latestAssignmentGroupEvaluated,A),nt.latestAssignmentGroupPending&&e(nt.latestAssignmentGroupPending,l),nt.latestAssignmentGroupTotal&&e(nt.latestAssignmentGroupTotal,c);const p=Array.isArray(r.assignmentSummaries)&&r.assignmentSummaries.length>0&&typeof r.overallAssignmentAverage=="number"&&!Number.isNaN(r.overallAssignmentAverage),f=typeof r.latestAssignmentAverage=="number"&&!isNaN(r.latestAssignmentAverage)?Math.min(100,Math.max(0,r.latestAssignmentAverage)):null,y=p?r.overallAssignmentAverage:r.overallProgress,b=typeof y=="number"&&!isNaN(y)?Math.min(100,Math.max(0,y)):0;if(e(nt.overallProgress,`${t(b,0)}%`),nt.latestAssignmentAverage&&(f!==null?e(nt.latestAssignmentAverage,`${t(f,0)}%`):nt.latestAssignmentAverage.textContent="-"),nt.overallProgressCircle){const B=b/100*360,S="#0ea5e9",C="rgba(14,165,233,0.1)";nt.overallProgressCircle.style.background=`conic-gradient(${S} ${B}deg, ${C} ${B}deg)`,nt.overallProgressCircle.style.boxShadow="0 0 20px rgba(14,165,233,0.3)"}if(nt.overallProgress,nt.latestAssignmentCircle&&f!==null){const B=f/100*360,S="#10b981",C="rgba(16,185,129,0.1)";nt.latestAssignmentCircle.style.background=`conic-gradient(${S} ${B}deg, ${C} ${B}deg)`,nt.latestAssignmentCircle.style.boxShadow="0 0 20px rgba(16,185,129,0.3)",nt.latestAssignmentAverage}if(nt.progressBar){const B=nt.progressBar,S=xC(i),C=Math.max(0,Math.min(100,i)),P=Number(B.dataset.prevWidth||0);B.classList.add("battery-liquid","shadow-lg"),B.style.setProperty("--fill",S.solid),B.style.boxShadow=`0 8px 20px ${S.shadow}`,B.style.transition="width 900ms cubic-bezier(0.4, 0, 0.2, 1)",P!==C?(B.style.width=`${P}%`,B.offsetWidth,requestAnimationFrame(()=>{B.style.width=`${C}%`})):B.style.width=`${C}%`,B.dataset.prevWidth=String(C)}if(nt.progressBarLabel){const B=`${t(i,0)}%`;nt.progressBarLabel.textContent=B;const S=i>=20;nt.progressBarLabel.style.right=S?"8px":"auto",nt.progressBarLabel.style.left=S?"auto":"8px",nt.progressBarLabel.style.color="rgba(255,255,255,0.92)",nt.progressBarLabel.style.minWidth="32px",nt.progressBarLabel.style.textAlign=S?"right":"left"}dhe(r.assignmentOverview||[],n)}function dhe(r=[],e=null){if(!nt.assignmentOverviewList)return;const t=i=>Pr!=null&&Pr.convertToBanglaNumber&&typeof Pr.convertToBanglaNumber=="function"?Pr.convertToBanglaNumber(String(i)):String(i);if(!r.length)nt.assignmentOverviewList.innerHTML='<div class="py-4 text-sm text-gray-500 dark:text-gray-400">    </div>';else{const i=r.map(s=>{const a=t(s.index),o=s.isLatest?'<span class="inline-flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-0.5 text-[0.65rem] font-medium text-emerald-600 dark:text-emerald-300"><i class="fas fa-bolt text-[0.6rem]"></i> </span>':"",A=s.relativeLabel?`<p class="text-xs text-gray-500 dark:text-gray-400">${wb(s.relativeLabel)}</p>`:"",l=wb(s.title);return`
          <div class="flex items-center justify-between gap-4 py-3">
            <div class="flex items-center gap-3 min-w-0">
              <span class="flex h-10 w-10 items-center justify-center rounded-2xl bg-indigo-500/10 text-sm font-semibold text-indigo-600 dark:text-indigo-300">${a}</span>
              <div class="min-w-0 space-y-1">
                <p class="text-sm font-semibold text-gray-900 dark:text-white truncate" title="${l}">${l}</p>
                ${o}
              </div>
            </div>
            <div class="text-right">
              <p class="text-sm font-medium text-gray-700 dark:text-gray-200">${wb(s.dateLabel)}</p>
              ${A}
            </div>
          </div>
        `}).join("");nt.assignmentOverviewList.innerHTML=i}const n=r.find(i=>i.isLatest)||r[0];if(nt.assignmentOverviewLatestTitle){const i=(e==null?void 0:e.taskTitle)||(n==null?void 0:n.title)||"-";nt.assignmentOverviewLatestTitle.textContent=i,nt.assignmentOverviewLatestTitle.setAttribute("title",i)}if(nt.assignmentOverviewLatestDate){let i="-";e!=null&&e.lastUpdated?i=Xde(e.lastUpdated):n!=null&&n.timestamp&&(i=n.dateLabel||"-"),nt.assignmentOverviewLatestDate.textContent=i}}function hhe(r){if(!nt.topGroupsContainer)return;ho.clearContainer(nt.topGroupsContainer);const e=r.filter(d=>d.evalCount>0).slice(0,3);if(e.length===0){ho.displayEmptyMessage(nt.topGroupsContainer,"     ");return}const t=(d={})=>{const p=typeof d.latestAverageScore=="number"&&!Number.isNaN(d.latestAverageScore)?Pr.convertToBanglaNumber(d.latestAverageScore.toFixed(1)):"-",f=typeof d.latestParticipantCount=="number"&&d.latestParticipantCount!==null?Pr.convertToBanglaNumber(String(d.latestParticipantCount)):"-",y=typeof d.latestParticipationRate=="number"&&!Number.isNaN(d.latestParticipationRate)?Pr.convertToBanglaNumber(String(Math.round(d.latestParticipationRate))):"-";return{avg:p==="-"?"-":`${p}%`,participants:f==="-"?"-":`${f} `,rate:y==="-"?"-":`${y}%`}},n=d=>`
    <div class="elite-latest-metrics">
      <div class="elite-metrics-title">
        <span class="elite-metrics-icon">
          <i class="fas fa-chart-line"></i>
        </span>
        <p class="elite-metrics-headline">   </p>
      </div>
      <div class="elite-metrics-chips">
        <div class="elite-metric-chip">
          <span class="elite-metric-label"></span>
          <span class="elite-metric-value">${d.avg}</span>
        </div>
        <div class="elite-metric-chip">
          <span class="elite-metric-label"></span>
          <span class="elite-metric-value">${d.participants}</span>
        </div>
        <div class="elite-metric-chip">
          <span class="elite-metric-label"> </span>
          <span class="elite-metric-value">${d.rate}</span>
        </div>
      </div>
    </div>
  `,i=[" "," "," "],s=["elite-podium-card relative rounded-3xl bg-gradient-to-br from-amber-400 via-yellow-500 to-orange-500 text-white p-5 md:p-6 shadow-2xl ring-4 ring-yellow-300/60 dark:ring-yellow-400/50 order-1 md:order-2 cursor-pointer","elite-podium-card relative rounded-3xl bg-gradient-to-br from-gray-100 via-gray-200 to-slate-200 dark:from-slate-600 dark:via-slate-500 dark:to-slate-600 text-gray-900 dark:text-gray-100 p-5 shadow-2xl ring-2 ring-slate-300/60 dark:ring-slate-400/40 order-2 md:order-1 cursor-pointer","elite-podium-card relative rounded-3xl bg-gradient-to-br from-amber-200 via-orange-300 to-amber-400 dark:from-amber-700 dark:via-orange-600 dark:to-amber-700 text-gray-900 dark:text-white p-5 shadow-2xl ring-2 ring-amber-300/60 dark:ring-amber-500/50 order-3 md:order-3 cursor-pointer"],a=['<i class="fa-solid fa-crown text-amber-400 dark:text-amber-200"></i>','<i class="fa-solid fa-medal text-slate-700 dark:text-slate-200"></i>','<i class="fa-solid fa-award text-amber-700 dark:text-amber-200"></i>'],o=[{max:34,min:16},{max:30,min:14},{max:28,min:15}],A=()=>{!nt.topGroupsContainer||typeof window>"u"||typeof window.requestAnimationFrame!="function"||window.requestAnimationFrame(()=>{nt.topGroupsContainer.querySelectorAll(".elite-card-name").forEach(p=>{const f=window.getComputedStyle(p),y=parseFloat(p.dataset.maxFont||"")||parseFloat(f.fontSize)||22,b=parseFloat(p.dataset.minFont||"")||Math.max(12,y*.65);let B=y;p.style.fontSize=`${B}px`;let S=0;for(;B>b&&p.scrollWidth>p.clientWidth&&S<25;)B-=.5,p.style.fontSize=`${Math.max(B,b)}px`,S+=1})})},l=(d,p)=>{var x;if(!d)return"";const f=typeof d.averageScore=="number"?d.averageScore:0,y=Pr.convertToBanglaNumber(f.toFixed(1)),b=typeof d.studentCount=="number"?d.studentCount:0,B=Pr.convertToBanglaNumber(b),S=t(d),C=n(S),P=_C(d.groupName),M=o[p]||o[o.length-1],L=p===0?"elite-card-name elite-name-xl font-semibold text-white":"elite-card-name elite-name-lg font-semibold text-gray-900 dark:text-white",_=p===0?"text-white/85":"text-gray-800/80 dark:text-white/80",v=i[p]||Pr.convertToBanglaRank(p+1),T=s[p]||s[s.length-1],E=a[p]||'<i class="fa-solid fa-trophy text-amber-700 dark:text-amber-200"></i>';return`
        <article class="${T}" data-group-id="${(x=d.group)==null?void 0:x.id}" role="button" tabindex="0" aria-pressed="false">
          <span class="elite-rank-chip">
            <span class="elite-rank-icon">${E}</span>
            <span class="elite-rank-title">${v}</span>
          </span>
          <div class="elite-card-inner">
            <div class="elite-score-stack">
              <span class="elite-score-value">${y}%</span>
              <span class="elite-score-label">  </span>
            </div>
            <div class="elite-card-body ${p===0?"space-y-1.5":"space-y-1"}">
              <div class="${L}" title="${P}" data-max-font="${M.max}" data-min-font="${M.min}">${P}</div>
              <div class="${_} text-xs sm:text-sm font-medium">
                <span>:</span>
                <span>${B}</span>
              </div>
            </div>
            ${C}
          </div>
        </article>
      `},c=e.map((d,p)=>l(d,p)).join(""),u=["grid","grid-cols-1","gap-6"];e.length>=2&&u.push("sm:grid-cols-2"),e.length>=3&&u.push("md:grid-cols-3"),nt.topGroupsContainer.innerHTML=`
    <div class="${u.join(" ")}">
      ${c}
    </div>
  `,A(),nt.topGroupsContainer&&typeof window<"u"&&typeof window.openGroupModalById=="function"&&ho.addListener(nt.topGroupsContainer,"click",d=>{const p=d.target.closest("[data-group-id]");if(!p)return;const f=p.getAttribute("data-group-id");if(f)try{window.openGroupModalById(f)}catch(y){console.warn("Elite group modal open failed:",y)}});const h=nt.topGroupsContainer.closest("section");if(h){const d=h.querySelector("h3");d&&(d.textContent=" ");const p=h.querySelector("p.text-xs");p&&(p.textContent="        ");const f=h.querySelector("span.bg-indigo-500\\/10");if(f){const y=f.querySelector("i"),b=y?y.outerHTML:"";f.innerHTML=`${b} Elite Group`}}}function fhe(r){if(!nt.academicGroupStatsList)return;ho.clearContainer(nt.academicGroupStatsList);const e=Object.entries(r).filter(([,s])=>s.groupCount>0).sort(([,s],[,a])=>a.averageScore-s.averageScore);if(e.length===0){ho.displayEmptyMessage(nt.academicGroupStatsList,"   ");return}const t=e.slice(0,3),n=t.map(([s,a])=>{const o=a.averageScore,A=xC(o),l=Math.min(100,Math.round(o)),c=Pr.convertToBanglaNumber(o.toFixed(1)),u=Pr.convertToBanglaNumber(a.totalStudents),h=Pr.convertToBanglaNumber(a.groupCount),d=_C(s);return`
        <article class="relative overflow-hidden rounded-2xl border border-gray-200/70 bg-white p-5 shadow-sm transition hover:shadow-lg dark:border-gray-700/70 dark:bg-gray-900/70">
          <div class="absolute inset-0 bg-gradient-to-br ${A.gradient} opacity-60"></div>
          <div class="relative space-y-4">
            <div class="flex items-center justify-between">
              <h4 class="text-base font-semibold text-gray-900 dark:text-white" title="${d}">${d}</h4>
              <span class="inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 text-xs font-semibold text-gray-700 dark:bg-white/10 dark:text-gray-200 shadow">
                <i class="fas fa-signal"></i> : ${c}%
              </span>
            </div>
            <div class="h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700">
              <div class="h-full rounded-full" style="width: ${l}%; background: ${A.solid}; box-shadow: 0 6px 12px ${A.shadow};"></div>
            </div>
            <div class="grid grid-cols-2 gap-3 text-xs font-medium text-gray-600 dark:text-gray-300">
              <span class="inline-flex items-center gap-2">
                <i class="fas fa-users text-indigo-500"></i> : ${u}
              </span>
              <span class="inline-flex items-center gap-2 justify-end">
                <i class="fas fa-layer-group text-emerald-500"></i> : ${h}
              </span>
            </div>
          </div>
        </article>
      `}).join(""),i=["grid","grid-cols-1","gap-6"];t.length>=2&&i.push("sm:grid-cols-2"),t.length>=3&&i.push("lg:grid-cols-3"),nt.academicGroupStatsList.innerHTML=`
    <div class="${i.join(" ")}">
      ${n}
    </div>
  `}function ghe(r,e){var p;const t=xC(r.averageScore),n=Pr.convertToBanglaRank(e),i=_C(r.groupName),s=f=>{const b=`${Math.max(0,Math.round(Number(f)||0))}`;return Pr.convertToBanglaNumber?Pr.convertToBanglaNumber(b):b},a=f=>{const b=(Number(f)||0).toFixed(2);return Pr.convertToBanglaNumber?Pr.convertToBanglaNumber(b):b},o=Math.min(100,Math.max(0,Number(r.averageScore)||0)),A=a(o),l=s(r.evalCount||0),c=s(r.studentCount||0),u=s(r.evaluatedMembers||0);s(r.taskCount||0);const h=` : ${c}  : ${u} `;return`
  <article class="relative flex items-center justify-between gap-4 rounded-2xl border border-transparent
                  bg-white/90 p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg
                  dark:border-transparent dark:bg-slate-900/70 cursor-pointer"
           data-group-id="${((p=r.group)==null?void 0:p.id)||""}"
           style="box-shadow:0 10px 24px ${t.shadow}; border:1px solid ${t.solid}55;">
    <div class="flex items-start gap-3 min-w-0">
      <div class="flex flex-col items-center justify-center rounded-xl bg-slate-900/5 px-3 py-2 text-center
                  text-slate-700 shadow-sm dark:bg-white/10 dark:text-slate-100">
        <div class="text-sm font-bold">${n}</div>
        <div class="text-[10px] font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300"> </div>
      </div>
      <div class="min-w-0 space-y-2">
        <h4 class="truncate text-base font-semibold text-slate-900 dark:text-white" title="${i}">
          ${i}
        </h4>
        <div class="grid grid-cols-2 gap-2 text-[12px] font-semibold">
          <span class="inline-flex items-center justify-center rounded-lg bg-slate-100 px-2 py-1 text-slate-700
                       dark:bg-slate-800 dark:text-slate-100">
            : ${A}%
          </span>
          <span class="inline-flex items-center justify-center rounded-lg bg-slate-900/5 px-2 py-1 text-slate-700
                       dark:bg-white/10 dark:text-slate-100">
             : ${l} 
          </span>
        </div>
        <p class="text-xs text-slate-600 dark:text-slate-300 truncate" title="${h}">
          ${h}
        </p>
      </div>
    </div>

    <div class="flex flex-col items-center gap-1 shrink-0">
      ${mhe(o,t,64)}
      <span class="text-xs font-semibold text-slate-500 dark:text-slate-300">Avg%</span>
    </div>
  </article>`}function phe(r,e=null){if(!nt.groupsRankingList)return;ho.clearContainer(nt.groupsRankingList);const t=r.filter(A=>A.evalCount>0);if(t.length===0){ho.displayEmptyMessage(nt.groupsRankingList,"   ");return}const n=e&&e.map instanceof Map?e.map:new Map,i=A=>bb(A),s=[...t].sort((A,l)=>{var h,d;const c=n.get(i((h=A.group)==null?void 0:h.id)),u=n.get(i((d=l.group)==null?void 0:d.id));return c&&u?c.rank-u.rank:c?-1:u?1:l.averageScore!==A.averageScore?l.averageScore-A.averageScore:l.evalCount!==A.evalCount?l.evalCount-A.evalCount:(A.groupName||"").localeCompare(l.groupName||"","bn")});let a=0;const o=s.map(A=>{var u;const l=n.get(i((u=A.group)==null?void 0:u.id)),c=(l==null?void 0:l.rank)??++a;return ghe(A,c)}).join("");nt.groupsRankingList.innerHTML=`
    <div class="grid grid-cols-1 gap-4 sm:gap-5">
      ${o}
    </div>
  `,nt.groupsRankingList&&window&&typeof window.openGroupModalById=="function"&&ho.addListener(nt.groupsRankingList,"click",A=>{const l=A.target.closest("[data-group-id]");if(!l)return;const c=l.getAttribute("data-group-id");if(c)try{window.openGroupModalById(c)}catch(u){console.warn("Group modal open failed:",u)}})}function _C(r){if(r==null)return"";const e=Pr!=null&&Pr.ensureBengaliText&&typeof Pr.ensureBengaliText=="function"?Pr.ensureBengaliText(r):String(r);return wb(e.trim())}function wb(r){return String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function xC(r){const e=Number(r)||0;return e>=85?{solid:"#22c55e",soft:"rgba(34,197,94,0.18)",gradient:"from-emerald-500/15 via-emerald-400/10 to-transparent",shadow:"rgba(34,197,94,0.28)"}:e>=70?{solid:"#0ea5e9",soft:"rgba(14,165,233,0.18)",gradient:"from-sky-500/15 via-sky-400/10 to-transparent",shadow:"rgba(14,165,233,0.25)"}:e>=55?{solid:"#f59e0b",soft:"rgba(245,158,11,0.18)",gradient:"from-amber-500/15 via-amber-400/10 to-transparent",shadow:"rgba(245,158,11,0.25)"}:{solid:"#f43f5e",soft:"rgba(244,63,94,0.18)",gradient:"from-rose-500/15 via-rose-400/10 to-transparent",shadow:"rgba(244,63,94,0.25)"}}function mhe(r,e,t=96){const n=Math.max(0,Math.min(100,Number(r)||0)),i=typeof t=="number"?t:96,s=Pr.convertToBanglaNumber(Math.round(n).toString());return`
    <div class="relative flex items-center justify-center" style="width:${i}px;height:${i}px;">
      <div class="absolute inset-0 rounded-full" style="background: conic-gradient(${e.solid} ${n}%, ${e.soft} ${n}% 100%);"></div>
      <div class="absolute inset-[18%] rounded-full bg-white dark:bg-gray-900 flex items-center justify-center shadow-inner" style="box-shadow: 0 8px 18px ${e.shadow};">
        <span class="text-lg font-semibold text-gray-800 dark:text-gray-100">${s}%</span>
      </div>
    </div>
  `}let Pc,yr,Td,mm,Nv,wA;const Fi={};function yhe(r){return Pc=r.managers.stateManager,yr=r.managers.uiManager,Td=r.services.dataService,wA=r.utils.permissionHelper,mm=r.utils,Nv=r.app,whe(),vhe(),console.log(" Groups component initialized."),{render:bhe,populateGroupSelects:Ehe}}function bhe(){if(!Fi.page){console.error(" Groups render failed: Page element #page-groups not found.");return}console.log("Rendering Groups page...");const r=Pc.get("groups");_he(r)}function whe(){if(Fi.page=document.getElementById("page-groups"),!Fi.page){console.error(" Groups init failed: #page-groups element not found!");return}Fi.groupNameInput=Fi.page.querySelector("#groupNameInput"),Fi.addGroupBtn=Fi.page.querySelector("#addGroupBtn"),Fi.groupsList=Fi.page.querySelector("#groupsList")}function vhe(){Fi.page&&(yr.addListener(Fi.addGroupBtn,"click",xhe),yr.addListener(Fi.groupsList,"click",r=>{const e=r.target.closest(".edit-group-btn"),t=r.target.closest(".delete-group-btn");if(e){const n=e.dataset.id;Bhe(n)}else if(t){const n=t.dataset.id;Che(n)}}))}function _he(r){if(!Fi.groupsList){console.warn("Groups render: groupsList element not found.");return}if(yr.clearContainer(Fi.groupsList),!r||r.length===0){yr.displayEmptyMessage(Fi.groupsList,"    ");return}const e=[...r].sort((i,s)=>(i.name||"").localeCompare(s.name||"","bn")),t=Pc.get("students")||[],n=e.map(i=>{const s=t.filter(a=>a.groupId===i.id).length;return`
        <div class="card p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center">
            <div>
                <h4 class="text-lg font-semibold text-gray-800 dark:text-white">${mm.ensureBengaliText(i.name)}</h4>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                     : ${mm.convertToBanglaNumber(s)}
                </p>
            </div>
            <div class="flex space-x-2 mt-3 sm:mt-0 self-end sm:self-auto">
                <button data-id="${i.id}" 
                        class="edit-group-btn btn btn-light btn-sm py-1 px-2"
                        aria-label="  ">
                    <i class="fas fa-edit pointer-events-none"></i>
                </button>
                <button data-id="${i.id}" 
                        class="delete-group-btn btn btn-danger btn-sm py-1 px-2"
                        aria-label="  ">
                    <i class="fas fa-trash pointer-events-none"></i>
                </button>
            </div>
        </div>
        `}).join("");Fi.groupsList.innerHTML=n}async function xhe(){var e;if(!(wA!=null&&wA.canWrite())){yr.showToast("      ","warning");return}const r=(e=Fi.groupNameInput)==null?void 0:e.value.trim();if(!r){yr.showToast("  ","warning");return}if(r.length>50){yr.showToast("      ","warning");return}yr.showLoading("   ...");try{if(await Td.checkGroupNameExists(r)){yr.showToast("     ","warning"),yr.hideLoading();return}const n={name:r};await Td.addGroup(n),await Nv.refreshAllData(),Fi.groupNameInput&&(Fi.groupNameInput.value=""),yr.showToast("    ","success")}catch(t){console.error(" Error adding group:",t),yr.showToast(`    : ${t.message}`,"error")}finally{yr.hideLoading()}}function Bhe(r){if(!(wA!=null&&wA.canEdit())){yr.showToast("     ","warning");return}const e=Pc.get("groups").find(n=>n.id===r);if(!e){yr.showToast("  ","error");return}const t=`
        <div>
            <label class="label" for="editGroupNameInput"> </label>
            <input id="editGroupNameInput" type="text" 
                   class="form-input w-full" 
                   value="${e.name||""}"
                   maxlength="50" />
        </div>
    `;yr.showEditModal(" ",t,async()=>{const n=document.getElementById("editGroupNameInput"),i=n==null?void 0:n.value.trim();if(!i){yr.showToast("     ","warning");return}if(i===e.name){yr.hideModal(yr.elements.editModal);return}yr.showLoading("  ...");try{if(await Td.checkGroupNameExists(i,r)){yr.showToast("     ","warning"),yr.hideLoading();return}await Td.updateGroup(r,{name:i}),await Nv.refreshAllData(),yr.hideModal(yr.elements.editModal),yr.showToast("    ","success")}catch(s){console.error(" Error updating group:",s),yr.showToast(`   : ${s.message}`,"error")}finally{yr.hideLoading()}})}function Che(r){if(!(wA!=null&&wA.canDelete())){yr.showToast("     ","warning");return}const e=Pc.get("groups").find(i=>i.id===r);if(!e){yr.showToast("  ","error");return}const t=Pc.get("students").filter(i=>i.groupId===r).length;let n=`     "${e.name}"    ?`;t>0&&(n+=` (  ${mm.convertToBanglaNumber(t)}           !)`),yr.showDeleteModal("  ",n,async()=>{yr.showLoading("  ...");try{const i=Pc.get("students").filter(s=>s.groupId===r).map(s=>s.id);i.length>0&&await Td.batchUpdateStudents(i,{groupId:"",role:""}),await Td.deleteGroup(r),await Nv.refreshAllData(),yr.showToast("    ","success")}catch(i){console.error(" Error deleting group:",i),yr.showToast(`    : ${i.message}`,"error")}finally{yr.hideLoading()}})}function Ehe(r,e=" "){const n=Pc.get("groups").map(i=>({value:i.id,text:mm.ensureBengaliText(i.name)})).sort((i,s)=>i.text.localeCompare(s.text,"bn"));r.forEach(i=>{const s=document.getElementById(i);if(s){const a=e.includes("")||e.includes("All")?"all":"";yr.populateSelect(s,n,e,s.value||a),e.includes("")&&s.options[0]&&(s.options[0].disabled=!0)}})}let Pi,yt,Zc,Mt,ul,za;const ze={membersPage:null,csvFileInput:null,csvFileName:null,downloadTemplateBtn:null,processImportBtn:null,studentNameInput:null,studentRollInput:null,studentGenderInput:null,studentGroupInput:null,studentContactInput:null,studentAcademicGroupInput:null,studentSessionInput:null,studentRoleInput:null,addStudentBtn:null,membersFilterGroup:null,membersFilterAcademicGroup:null,studentSearchInput:null,studentsListContainer:null,cardsPage:null,cardsFilterGroup:null,cardsFilterAcademicGroup:null,allStudentsSearchInput:null,allStudentsCardsContainer:null};let L6,P6;const N6={membersList:"members-list",studentCards:"student-cards"};let Q4="",H4="";const BC="inline-flex items-center px-2 py-2 text-xs font-semibold rounded-full border",She={"team-leader":{label:" ",className:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-500/20 dark:text-amber-100 dark:border-amber-500/40"},"time-keeper":{label:" ",className:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-500/20 dark:text-sky-100 dark:border-sky-500/40"},reporter:{label:"",className:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-500/20 dark:text-purple-100 dark:border-purple-500/40"},"resource-manager":{label:" ",className:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-500/20 dark:text-emerald-100 dark:border-emerald-500/40"},"peace-maker":{label:" ",className:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-500/20 dark:text-rose-100 dark:border-rose-500/40"}},Ihe={science:{className:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-500/15 dark:text-sky-100 dark:border-sky-500/40"},humanities:{className:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-500/15 dark:text-amber-100 dark:border-amber-500/40"},business:{className:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-500/20 dark:text-emerald-100 dark:border-emerald-500/40"},other:{className:"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"}};function khe(){if(document.getElementById("members-soft3d-styles"))return;const r=document.createElement("style");r.id="members-soft3d-styles",r.textContent=`
  /* Panel (group section wrapper) */
  .panel-3d{
    border-radius: 1rem;
    overflow: hidden;
    box-shadow:
      0 1px 0 rgba(255,255,255,.6) inset,
      0 10px 18px rgba(0,0,0,.06),
      0 2px 4px rgba(0,0,0,.04);
  }
  .dark .panel-3d{
    box-shadow:
      0 1px 0 rgba(255,255,255,.08) inset,
      0 12px 22px rgba(0,0,0,.25),
      0 2px 4px rgba(0,0,0,.18);
  }

  /* Section header gloss */
  .header-3d::after{
    content:""; position:absolute; inset:0; pointer-events:none;
    background: radial-gradient(120% 140% at 110% -20%, rgba(255,255,255,.18), transparent 60%);
  }
  .dark .header-3d::after{
    background: radial-gradient(120% 140% at 110% -20%, rgba(255,255,255,.08), transparent 60%);
  }

  /* Card 3D (student card/list item) */
  .card-3d{
    border-radius: .875rem;
    box-shadow:
      0 1px 0 rgba(255,255,255,.55) inset,
      0 10px 18px rgba(0,0,0,.06),
      0 2px 4px rgba(0,0,0,.04);
    transition: transform .15s ease, box-shadow .15s ease;
    will-change: transform;
  }
  .card-3d:hover{
    transform: translateY(-1px);
    box-shadow:
      0 1px 0 rgba(255,255,255,.6) inset,
      0 14px 24px rgba(0,0,0,.10),
      0 4px 8px rgba(0,0,0,.06);
  }
  .dark .card-3d{
    box-shadow:
      0 1px 0 rgba(255,255,255,.08) inset,
      0 12px 22px rgba(0,0,0,.25),
      0 2px 4px rgba(0,0,0,.18);
  }
  .dark .card-3d:hover{
    box-shadow:
      0 1px 0 rgba(255,255,255,.10) inset,
      0 16px 26px rgba(0,0,0,.35),
      0 4px 8px rgba(0,0,0,.25);
  }

  /* Chip/Badge subtle inner highlight */
  .badge-3d{
    box-shadow: 0 1px 0 rgba(255,255,255,.45) inset, 0 1px 2px rgba(0,0,0,.06);
  }
  .dark .badge-3d{
    box-shadow: 0 1px 0 rgba(255,255,255,.10) inset, 0 1px 2px rgba(0,0,0,.25);
  }
  `,document.head.appendChild(r)}function D6(r){const e=`${BC} badge-3d mt-1`;if(!r)return`<span class="${e} bg-gray-100 text-gray-500 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700">  </span>`;const t=She[r]||{label:r,className:"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"},n=t.label?nl(t.label):nl(r);return`<span class="${e} ${t.className||""}">${n}</span>`}function R6(r){const e=`${BC} badge-3d`,t=(r||"").toString().trim();if(!t)return`<span class="${e} bg-gray-100 text-gray-500 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700">   </span>`;const n=Fhe(t),i=Ihe[n]||{className:"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"},s=nl(t);return`<span class="${e} ${i.className}">${s}</span>`}function nl(r){if(r==null)return"";const e=Mt!=null&&Mt.ensureBengaliText&&typeof Mt.ensureBengaliText=="function"?Mt.ensureBengaliText(r):String(r);return The(e.trim())}function The(r){return String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Fhe(r){const e=(r||"").toString().toLowerCase();return e?e.includes("science")||e.includes("")?"science":e.includes("human")||e.includes("")?"humanities":e.includes("business")||e.includes("")||e.includes("")?"business":"other":"other"}function Py(r){return typeof r=="string"?r.toLowerCase():r==null?"":String(r).toLowerCase()}function Lhe(r){if(!r)return"";if(typeof r=="number"||typeof r=="string")return String(r);if(typeof r=="object"){if(typeof r.toMillis=="function")try{return String(r.toMillis())}catch{}if(typeof r.seconds=="number"){const e=typeof r.nanoseconds=="number"?r.nanoseconds:0;return`${r.seconds}:${e}`}}return JSON.stringify(r)}function U6(r,e,t){const i=[...r].sort((a,o)=>{const A=(a.groupId||"").localeCompare(o.groupId||"");if(A!==0)return A;const l=`${a.roll??""}`.localeCompare(`${o.roll??""}`,void 0,{numeric:!0});return l!==0?l:(a.name||"").localeCompare(o.name||"","bn")}).map(a=>{const o=a.roll===void 0||a.roll===null?"":`${a.roll}`;return[a.id||"",a.name||"",o,a.groupId||"",a.academicGroup||"",a.session||"",a.gender||"",a.role||"",a.contact||"",Lhe(a.updatedAt)].join("|")}).join("~"),s=JSON.stringify({group:(e==null?void 0:e.groupFilter)||"all",academic:(e==null?void 0:e.academicFilter)||"all",search:((e==null?void 0:e.searchTerm)||"").toLowerCase()});return`${t}::${s}::${i}`}function Phe(r){return Pi=r.managers.stateManager,yt=r.managers.uiManager,Zc=r.services.dataService,za=r.utils.permissionHelper,Mt=r.utils,ul=r.app,L6=Mt.createDebouncer(300),P6=Mt.createDebouncer(300),khe(),Rhe(),Uhe(),console.log(" Members component initialized."),{render:Nhe,renderStudentCards:Dhe,populateFilters:CC}}function Nhe(){if(!ze.membersPage){console.error(" Members render failed: Page element #page-members not found.");return}console.log("Rendering Members (List) page..."),CC(),vb()}function Dhe(){if(!ze.cardsPage){console.error(" Student Cards render failed: Page element #page-all-students not found.");return}console.log("Rendering All Students (Cards) page..."),CC(),_b()}function Rhe(){ze.membersPage=document.getElementById("page-members"),ze.membersPage?(ze.csvFileInput=ze.membersPage.querySelector("#csvFileInput"),ze.csvFileName=ze.membersPage.querySelector("#csvFileName"),ze.downloadTemplateBtn=ze.membersPage.querySelector("#downloadTemplateBtn"),ze.processImportBtn=ze.membersPage.querySelector("#processImportBtn"),ze.studentNameInput=ze.membersPage.querySelector("#studentNameInput"),ze.studentRollInput=ze.membersPage.querySelector("#studentRollInput"),ze.studentGenderInput=ze.membersPage.querySelector("#studentGenderInput"),ze.studentGroupInput=ze.membersPage.querySelector("#studentGroupInput"),ze.studentContactInput=ze.membersPage.querySelector("#studentContactInput"),ze.studentAcademicGroupInput=ze.membersPage.querySelector("#studentAcademicGroupInput"),ze.studentSessionInput=ze.membersPage.querySelector("#studentSessionInput"),ze.studentRoleInput=ze.membersPage.querySelector("#studentRoleInput"),ze.addStudentBtn=ze.membersPage.querySelector("#addStudentBtn"),ze.membersFilterGroup=ze.membersPage.querySelector("#membersFilterGroup"),ze.membersFilterAcademicGroup=ze.membersPage.querySelector("#membersFilterAcademicGroup"),ze.studentSearchInput=ze.membersPage.querySelector("#studentSearchInput"),ze.studentsListContainer=ze.membersPage.querySelector("#studentsList")):console.warn("Members page element (#page-members) not found!"),ze.cardsPage=document.getElementById("page-all-students"),ze.cardsPage?(ze.cardsFilterGroup=ze.cardsPage.querySelector("#cardsFilterGroup"),ze.cardsFilterAcademicGroup=ze.cardsPage.querySelector("#cardsFilterAcademicGroup"),ze.allStudentsSearchInput=ze.cardsPage.querySelector("#allStudentsSearchInput"),ze.allStudentsCardsContainer=ze.cardsPage.querySelector("#allStudentsCards")):console.warn("All Students Cards page element (#page-all-students) not found!")}function Uhe(){ze.membersPage&&(yt.addListener(ze.addStudentBtn,"click",Mhe),yt.addListener(ze.downloadTemplateBtn,"click",Hhe),yt.addListener(ze.csvFileInput,"change",Vhe),yt.addListener(ze.processImportBtn,"click",$he),yt.addListener(ze.membersFilterGroup,"change",r=>{Pi.updateFilters("membersList",{groupFilter:r.target.value})&&vb()}),yt.addListener(ze.membersFilterAcademicGroup,"change",r=>{Pi.updateFilters("membersList",{academicFilter:r.target.value})&&vb()}),yt.addListener(ze.studentSearchInput,"input",r=>{const e=r.target.value.trim();L6(()=>{Pi.updateFilters("membersList",{searchTerm:e})&&vb()})}),yt.addListener(ze.studentsListContainer,"click",r=>{const e=r.target.closest(".edit-student-btn"),t=r.target.closest(".delete-student-btn");e?Ohe(e.dataset.id):t&&Qhe(t.dataset.id)})),ze.cardsPage&&(yt.addListener(ze.cardsFilterGroup,"change",r=>{Pi.updateFilters("studentCards",{groupFilter:r.target.value})&&_b()}),yt.addListener(ze.cardsFilterAcademicGroup,"change",r=>{Pi.updateFilters("studentCards",{academicFilter:r.target.value})&&_b()}),yt.addListener(ze.allStudentsSearchInput,"input",r=>{const e=r.target.value.trim();P6(()=>{Pi.updateFilters("studentCards",{searchTerm:e})&&_b()})}))}function CC(){const r=Pi.get("groups")||[],e=JSON.stringify(r.map(s=>`${s.id||""}:${s.name||""}`));if(e!==Q4){Q4=e;const s=[];ze.membersFilterGroup&&s.push("membersFilterGroup"),ze.cardsFilterGroup&&s.push("cardsFilterGroup"),ul.components.groups&&ul.components.groups.populateGroupSelects?(s.length&&ul.components.groups.populateGroupSelects(s," "),ze.studentGroupInput&&(ul.components.groups.populateGroupSelects(["studentGroupInput"],"   "),ze.studentGroupInput.options[0]&&(ze.studentGroupInput.options[0].disabled=!0))):(s.length||ze.studentGroupInput)&&console.warn("Members: Groups component not available to populate group selects.")}const t=Pi.get("students")||[],n=[...new Set(t.map(s=>s.academicGroup).filter(Boolean))].sort((s,a)=>(s||"").localeCompare(a||"","bn")),i=JSON.stringify(n);if(i!==H4){H4=i;const s=n.map(o=>({value:o,text:o}));[ze.membersFilterAcademicGroup,ze.cardsFilterAcademicGroup].forEach(o=>{o&&yt.populateSelect(o,s,"  ")})}}function vb(){if(!ze.studentsListContainer)return;const r=Pi.getFilterSection("membersList"),e=M6(r),t=U6(e,r,N6.membersList);if(ze.studentsListContainer.dataset.renderSignature===t)return;if(yt.clearContainer(ze.studentsListContainer),!e.length){yt.displayEmptyMessage(ze.studentsListContainer,"   "),ze.studentsListContainer.dataset.renderSignature=t;return}const n=Pi.get("groups")||[],i=new Map(n.map(l=>[l.id,l])),s=O6(n),a=new Map;e.forEach(l=>{const c=l.groupId||"unassigned";a.has(c)||a.set(c,[]),a.get(c).push(l)});const A=Array.from(a.entries()).sort((l,c)=>{var d,p;if(l[0]==="unassigned")return 1;if(c[0]==="unassigned")return-1;const u=((d=i.get(l[0]))==null?void 0:d.name)||"",h=((p=i.get(c[0]))==null?void 0:p.name)||"";return u.localeCompare(h,"bn")}).map(([l,c])=>{const u=s[l]||s.__default,h=i.get(l),d=(h==null?void 0:h.name)||"  ",p=Mt!=null&&Mt.ensureBengaliText&&typeof Mt.ensureBengaliText=="function"?Mt.ensureBengaliText(d):d,f=Mt!=null&&Mt.convertToBanglaNumber&&typeof Mt.convertToBanglaNumber=="function"?Mt.convertToBanglaNumber(c.length):c.length;c.sort((C,P)=>{const M=C.roll!==void 0&&C.roll!==null?C.roll.toString():"",L=P.roll!==void 0&&P.roll!==null?P.roll.toString():"",_=M.localeCompare(L,void 0,{numeric:!0});return _!==0?_:(C.name||"").localeCompare(P.name||"","bn")});const y=c.map(C=>{const P=Mt!=null&&Mt.ensureBengaliText&&typeof Mt.ensureBengaliText=="function"?Mt.ensureBengaliText(C.name||""):C.name||"",L=C.roll!==void 0&&C.roll!==null&&`${C.roll}`.trim()!==""?Mt!=null&&Mt.convertToBanglaNumber&&typeof Mt.convertToBanglaNumber=="function"?Mt.convertToBanglaNumber(C.roll):C.roll:"",_=Mt!=null&&Mt.ensureBengaliText&&typeof Mt.ensureBengaliText=="function"?Mt.ensureBengaliText(C.session||""):C.session||"",v=Mt!=null&&Mt.ensureBengaliText&&typeof Mt.ensureBengaliText=="function"?Mt.ensureBengaliText(C.gender||""):C.gender||"",T=Mt!=null&&Mt.ensureBengaliText&&typeof Mt.ensureBengaliText=="function"?Mt.ensureBengaliText(C.academicGroup||""):C.academicGroup||"",E=C.contact?`<div class="mt-2 text-xs text-gray-500 dark:text-gray-400">: ${C.contact}</div>`:"";return`
            <article class="card-3d rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900/70 p-4 hover:shadow-md transition">
              <div class="flex items-start justify-between gap-3">
                <div>
                  <h5 class="text-base font-semibold text-gray-900 dark:text-white">${P||" "}</h5>
                  <div class="mt-2 flex flex-wrap gap-2">
                    ${R6(C.academicGroup)}
                    ${D6(C.role)}
                  </div>
                </div>
                <span class="text-sm font-semibold text-gray-500 dark:text-gray-400">${L?` ${L}`:""}</span>
              </div>
              <div class="mt-3 space-y-1 text-xs text-gray-600 dark:text-gray-300">
                <p><span class="font-medium text-gray-700 dark:text-gray-200">:</span> ${_||"N/A"}</p>
                <p><span class="font-medium text-gray-700 dark:text-gray-200">:</span> ${v||"N/A"}</p>
                <p><span class="font-medium text-gray-700 dark:text-gray-200"> :</span> ${T||"N/A"}</p>
              </div>
              ${E}
              <div class="mt-4 flex justify-end gap-2">
                <button data-id="${C.id}" class="edit-student-btn btn btn-light btn-sm py-1 px-2" aria-label=""><i class="fas fa-edit pointer-events-none"></i></button>
                <button data-id="${C.id}" class="delete-student-btn btn btn-danger btn-sm py-1 px-2" aria-label=""><i class="fas fa-trash pointer-events-none"></i></button>
              </div>
            </article>
          `}).join(""),b=`relative header-3d px-4 py-3 bg-gradient-to-r ${u.headerBg||"from-slate-500 to-slate-600"} text-white flex items-center justify-between`,B=`mb-6 panel-3d rounded-xl overflow-hidden shadow-sm border ${u.panelBorder||"border-gray-200 dark:border-gray-700"}`,S=`p-4 ${u.sectionBg||"bg-gray-50 dark:bg-gray-900/40"}`;return`
        <section class="${B}">
          <header class="${b}">
            <h3 class="text-lg font-semibold">${p}</h3>
            <span class="text-sm font-medium"> : ${f}</span>
          </header>
          <div class="${S}">
            <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-3">
              ${y}
            </div>
          </div>
        </section>
      `}).join("");ze.studentsListContainer.innerHTML=A,ze.studentsListContainer.dataset.renderSignature=t}function _b(){if(!ze.allStudentsCardsContainer)return;const r=Pi.getFilterSection("studentCards"),e=M6(r),t=U6(e,r,N6.studentCards);if(ze.allStudentsCardsContainer.dataset.renderSignature===t)return;if(e.sort((o,A)=>(o.groupId||"").localeCompare(A.groupId||"")||(o.name||"").localeCompare(A.name||"","bn")),yt.clearContainer(ze.allStudentsCardsContainer),!e.length){yt.displayEmptyMessage(ze.allStudentsCardsContainer,"   "),ze.allStudentsCardsContainer.dataset.renderSignature=t;return}const n=Pi.get("groups")||[],i=new Map(n.map(o=>[o.id,o])),s=O6(n),a=e.map(o=>{const A=i.get(o.groupId),l=(A==null?void 0:A.name)||"  ",c=nl(l),u=s[o.groupId]||s.__default,h=nl(o.name||" "),p=o.roll!==void 0&&o.roll!==null&&`${o.roll}`.trim()!==""?Mt!=null&&Mt.convertToBanglaNumber&&typeof Mt.convertToBanglaNumber=="function"?Mt.convertToBanglaNumber(o.roll):String(o.roll):"",f=nl(o.session||"N/A"),y=nl(o.gender||"N/A");nl(o.academicGroup||"N/A");const b=o.contact?nl(o.contact):"",B=b?`<div class="flex items-center gap-2 rounded-xl bg-gray-100/80 px-3 py-2 text-xs text-gray-600 shadow-sm dark:bg-gray-800/70 dark:text-gray-200"><i class="fas fa-phone text-emerald-500"></i><span>${b}</span></div>`:"";return`
  <article
    class="card-3d relative mx-auto w-full max-w-md md:max-w-lg rounded-2xl border ${u.panelBorder||"border-gray-200 dark:border-gray-700"} bg-white dark:bg-gray-900/80 hover:shadow-lg transition duration-200 cursor-pointer focus-visible:outline focus-visible:outline-2 focus-visible:outline-indigo-500 focus-visible:outline-offset-2"
    data-student-id="${o.id}"
    role="button"
    tabindex="0"
    aria-label="${h} - "
    onclick="_handleStudentCardActivation && _handleStudentCardActivation(event)"
    onkeydown="_handleStudentCardActivation && _handleStudentCardActivation(event)"
  >
    <!-- Top gradient bar -->
    <div class="absolute inset-x-0 top-0 h-1.5 bg-gradient-to-r ${u.headerBg||"from-indigo-500 to-blue-500"} rounded-t-2xl"></div>

    <!-- Body (kept compact) -->
    <div class="relative px-4 pt-8 pb-4 flex flex-col items-center gap-3">

      <!-- Roll: top-center -->
      <span
        class="absolute -top-4 left-1/2 -translate-x-1/2 inline-flex h-10 min-w-[72px] px-3 items-center justify-center rounded-xl
               bg-gray-100 text-[13px] font-semibold text-gray-800 dark:bg-gray-800 dark:text-gray-200 shadow-inner
               ring-1 ring-gray-300 dark:ring-gray-700"
      >
        ${p?` ${p}`:"N/A"}
      </span>

      <!-- Name (below roll) -->
      <h4
        class="mt-1 text-base md:text-lg font-semibold leading-snug text-gray-900 dark:text-white
               text-center whitespace-normal break-words hyphens-auto"
        title="${h}"
      >
        ${h}
      </h4>

      <!-- Badges (tight wrap) -->
      <div class="flex flex-wrap justify-center gap-1.5">
        ${R6(o.academicGroup)}
        ${D6(o.role)}
        <span class="${BC} ${u.chipBg||"bg-gray-200 text-gray-700 border border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600"} badge-3d">: ${c}</span>
      </div>

      <!-- Info grid (compact, non-overlapping) -->
      <section
        class="w-full grid gap-2 [grid-template-columns:repeat(auto-fit,minmax(160px,1fr))] text-[13px] font-medium"
        aria-label="Student details"
      >
        <div class="flex items-center gap-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50/70 dark:bg-gray-800/50 px-2.5 py-1.5">
          <i class="fas fa-calendar text-indigo-500"></i>
          <span class="text-gray-600 dark:text-gray-300">:</span>
          <span class="text-gray-900 dark:text-gray-100 font-semibold ml-1 break-words">${f}</span>
        </div>

        <div class="flex items-center gap-1.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50/70 dark:bg-gray-800/50 px-2.5 py-1.5">
          <i class="fas fa-venus-mars text-pink-500"></i>
          <span class="text-gray-600 dark:text-gray-300">:</span>
          <span class="text-gray-900 dark:text-gray-100 font-semibold ml-1 break-words">${y}</span>
        </div>
      </section>

      ${B}
    </div>
  </article>
`}).join("");ze.allStudentsCardsContainer.innerHTML=`
    <div class="grid items-stretch gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      ${a}
    </div>
  `,ze.allStudentsCardsContainer.dataset.renderSignature=t}function M6(r){const e=Pi.get("students")||[],{groupFilter:t,academicFilter:n,searchTerm:i}=r||{},s=Py(i||"");return e.filter(a=>{const o=!t||t==="all"||a.groupId===t,A=!n||n==="all"||a.academicGroup===n,l=!s||Py(a.name).includes(s)||Py(a.roll).includes(s)||Py(a.academicGroup).includes(s);return o&&A&&l})}async function Mhe(){var l,c,u,h,d,p,f,y;if(!(za!=null&&za.canWrite())){yt.showToast("      ","warning");return}const r=(l=ze.studentNameInput)==null?void 0:l.value.trim(),e=(c=ze.studentRollInput)==null?void 0:c.value.trim(),t=(u=ze.studentGenderInput)==null?void 0:u.value,n=(h=ze.studentGroupInput)==null?void 0:h.value,i=(d=ze.studentContactInput)==null?void 0:d.value.trim(),s=(p=ze.studentAcademicGroupInput)==null?void 0:p.value.trim(),a=(f=ze.studentSessionInput)==null?void 0:f.value.trim(),o=(y=ze.studentRoleInput)==null?void 0:y.value;if(!r||!e||!t||!s||!a){yt.showToast(", , ,     ","warning");return}yt.showLoading("   ...");try{if(await Zc.checkStudentUniqueness(e,s)){yt.showToast("          ","warning"),yt.hideLoading();return}}catch(b){console.error("Uniqueness check failed:",b),yt.showToast(`    : ${b.message}`,"error"),yt.hideLoading();return}const A={name:r,roll:e,gender:t,groupId:n,contact:i,academicGroup:s,session:a,role:o};yt.showLoading("   ...");try{await Zc.addStudent(A),await ul.refreshAllData(),ze.studentNameInput&&(ze.studentNameInput.value=""),ze.studentRollInput&&(ze.studentRollInput.value=""),ze.studentGroupInput&&(ze.studentGroupInput.value=""),ze.studentContactInput&&(ze.studentContactInput.value=""),ze.studentAcademicGroupInput&&(ze.studentAcademicGroupInput.value=""),ze.studentSessionInput&&(ze.studentSessionInput.value=""),ze.studentRoleInput&&(ze.studentRoleInput.value=""),yt.showToast("    ","success")}catch(b){console.error(" Error adding student:",b),yt.showToast(`    : ${b.message}`,"error")}finally{yt.hideLoading()}}function Ohe(r){if(!(za!=null&&za.canEdit())){yt.showToast("     ","warning");return}const e=Pi.get("students").find(a=>a.id===r);if(!e){yt.showToast("  ","error");return}const n=Pi.get("groups").map(a=>`<option value="${a.id}" ${a.id===e.groupId?"selected":""}>${Mt.ensureBengaliText(a.name)}</option>`).sort((a,o)=>a.localeCompare(o,"bn")).join(""),i=[{value:"",text:" "},{value:"team-leader",text:" "},{value:"time-keeper",text:" "},{value:"reporter",text:""},{value:"resource-manager",text:" "},{value:"peace-maker",text:" "}].map(a=>`<option value="${a.value}" ${a.value===e.role?"selected":""}>${a.text}</option>`).join(""),s=`
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div><label class="label">*</label><input id="editStudentName" type="text" value="${e.name||""}" class="form-input" maxlength="100"></div>
            <div><label class="label">*</label><input id="editStudentRoll" type="text" value="${e.roll||""}" class="form-input" maxlength="20"></div>
            <div><label class="label">*</label><select id="editStudentGender" class="form-select"><option value="" ${e.gender===""?"selected":""}></option><option value="" ${e.gender===""?"selected":""}></option></select></div>
            <div><label class="label"></label><select id="editStudentGroup" class="form-select"><option value=""> </option>${n}</select></div>
            <div><label class="label"></label><input id="editStudentContact" type="text" value="${e.contact||""}" class="form-input" maxlength="100"></div>
            <div><label class="label"> *</label><input id="editStudentAcademicGroup" type="text" value="${e.academicGroup||""}" class="form-input" maxlength="50"></div>
            <div><label class="label">*</label><input id="editStudentSession" type="text" value="${e.session||""}" class="form-input" maxlength="20"></div>
            <div><label class="label"></label><select id="editStudentRole" class="form-select">${i}</select></div>
        </div>`;yt.showEditModal(" ",s,async()=>{var o,A,l,c,u,h,d,p;const a={name:(o=document.getElementById("editStudentName"))==null?void 0:o.value.trim(),roll:(A=document.getElementById("editStudentRoll"))==null?void 0:A.value.trim(),gender:(l=document.getElementById("editStudentGender"))==null?void 0:l.value,groupId:(c=document.getElementById("editStudentGroup"))==null?void 0:c.value,contact:(u=document.getElementById("editStudentContact"))==null?void 0:u.value.trim(),academicGroup:(h=document.getElementById("editStudentAcademicGroup"))==null?void 0:h.value.trim(),session:(d=document.getElementById("editStudentSession"))==null?void 0:d.value.trim(),role:(p=document.getElementById("editStudentRole"))==null?void 0:p.value};if(!a.name||!a.roll||!a.gender||!a.academicGroup||!a.session){yt.showToast(", , ,     ","warning");return}if(yt.showLoading("  ..."),a.roll!==e.roll||a.academicGroup!==e.academicGroup)try{if(await Zc.checkStudentUniqueness(a.roll,a.academicGroup,r)){yt.showToast("          ","warning"),yt.hideLoading();return}}catch(f){yt.showToast(`  : ${f.message}`,"error"),yt.hideLoading();return}yt.showLoading("  ...");try{await Zc.updateStudent(r,a),await ul.refreshAllData(),yt.hideModal(yt.elements.editModal),yt.showToast("    ","success")}catch(f){console.error(" Error updating student:",f),yt.showToast(`   : ${f.message}`,"error")}finally{yt.hideLoading()}})}function Qhe(r){if(!(za!=null&&za.canDelete())){yt.showToast("     ","warning");return}const e=Pi.get("students").find(n=>n.id===r);if(!e){yt.showToast("  ","error");return}const t=`     "${e.name}" (: ${Mt.convertToBanglaNumber(e.roll)})    ?`;yt.showDeleteModal("  ",t,async()=>{yt.showLoading("  ...");try{await Zc.deleteStudent(r),await ul.refreshAllData(),yt.showToast("    ","success")}catch(n){console.error(" Error deleting student:",n),yt.showToast(`   : ${n.message}`,"error")}finally{yt.hideLoading()}})}function Hhe(){const r=["","",""," ","",""," "," "],e=[" ","","","HSC 2025","2023-24","01xxxxxxxxx"," ","team-leader"],t="#  : team-leader, time-keeper, reporter, resource-manager, peace-maker (  )",n=Papa.unparse([r,e],{header:!1}),i=t+`
`+n,s=new Blob([`\uFEFF${i}`],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="student_template.csv",a.click(),URL.revokeObjectURL(a.href),yt.showToast("CSV    ","info")}function Vhe(){ze.csvFileInput.files.length>0?ze.csvFileName.textContent=` : ${ze.csvFileInput.files[0].name}`:ze.csvFileName.textContent=""}function $he(){var e;if(!(za!=null&&za.canWrite())){yt.showToast(" CSV import   ","warning");return}const r=(e=ze.csvFileInput)==null?void 0:e.files[0];if(!r){yt.showToast("   CSV   ","warning");return}yt.showLoading("CSV    ..."),Papa.parse(r,{header:!0,skipEmptyLines:!0,encoding:"UTF-8",transformHeader:t=>Mt.ensureBengaliText(t).trim(),transform:t=>Mt.ensureBengaliText(t),complete:async t=>{const n=t.data,i=[],s=[];(!n||n.length===0)&&i.push("CSV  ");const o=["","",""," ",""].filter(h=>!t.meta.fields.includes(h));if(o.length>0&&i.push(`  : ${o.join(", ")}`),i.length>0){yt.hideLoading(),yt.showToast(i[0],"error",5e3);return}const A=new Map(Pi.get("groups").map(h=>[h.name.toLowerCase(),h.id]));Pi.get("students"),yt.showLoading("    ...");const l=n.map(async(h,d)=>{const p=d+2,f=h.,y=h.,b=h.,B=h[" "],S=h.,C=h.||"",P=(h[" "]||"").toLowerCase(),M=(h[" "]||"").toLowerCase();if(!f||!y||!b||!B||!S)return{error:` ${p}:    `};if(!["",""].includes(b))return{error:` ${p}:  (${b})  ''  ''  `};const L=P&&A.get(P)||"";if(P&&!L)return{error:` ${p}: "${h[" "]}"    `};try{if(await Zc.checkStudentUniqueness(y,B))return{error:` ${p}:  ${y} (${B})   `}}catch(_){return{error:` ${p}:  ${y}    (${_.message})`}}return{student:{name:f,roll:y,gender:b,groupId:L,contact:C,academicGroup:B,session:S,role:M}}}),c=await Promise.all(l),u=new Set;for(const h of c){if(h.student){const d=`${h.student.roll}|${h.student.academicGroup}`;u.has(d)&&(h.error=` (CSV):  ${h.student.roll} (${h.student.academicGroup})   `,delete h.student),u.add(d)}h.error?i.push(h.error):h.student&&s.push(h.student)}if(i.length>0){yt.hideLoading();const h=i.slice(0,3).join(`
`)+(i.length>3?`
...`:"");yt.showToast(`CSV  ${Mt.convertToBanglaNumber(i.length)}  :
${h}`,"error",1e4),console.error("CSV Import Errors:",i)}else if(s.length>0){yt.showLoading(`(${Mt.convertToBanglaNumber(s.length)})     ...`);try{for(const h of s)await Zc.addStudent(h);await ul.refreshAllData(),yt.showToast(`${Mt.convertToBanglaNumber(s.length)}    `,"success")}catch(h){yt.showToast(`   : ${h.message}`,"error")}finally{yt.hideLoading()}}else yt.hideLoading(),yt.showToast("CSV     ","info");ze.csvFileInput&&(ze.csvFileInput.value=""),ze.csvFileName&&(ze.csvFileName.textContent="")},error:t=>{yt.hideLoading(),yt.showToast(`CSV    : ${t.message}`,"error")}})}function O6(r){const e=[{panelBorder:"border-blue-300 dark:border-blue-700",sectionBg:"bg-blue-50/80 dark:bg-blue-900/15",headerBg:"from-blue-500 to-indigo-500",chipBg:"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/40 dark:text-blue-100 dark:border-blue-800"},{panelBorder:"border-emerald-300 dark:border-emerald-700",sectionBg:"bg-emerald-50/80 dark:bg-emerald-900/15",headerBg:"from-emerald-500 to-teal-500",chipBg:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/40 dark:text-emerald-100 dark:border-emerald-800"},{panelBorder:"border-amber-300 dark:border-amber-700",sectionBg:"bg-amber-50/80 dark:bg-amber-900/20",headerBg:"from-amber-500 to-orange-500",chipBg:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/40 dark:text-amber-100 dark:border-amber-800"},{panelBorder:"border-purple-300 dark:border-purple-700",sectionBg:"bg-purple-50/80 dark:bg-purple-900/15",headerBg:"from-violet-500 to-purple-600",chipBg:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900/40 dark:text-purple-100 dark:border-purple-800"},{panelBorder:"border-rose-300 dark:border-rose-700",sectionBg:"bg-rose-50/80 dark:bg-rose-900/15",headerBg:"from-rose-500 to-pink-500",chipBg:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/40 dark:text-rose-100 dark:border-rose-800"},{panelBorder:"border-sky-300 dark:border-sky-700",sectionBg:"bg-sky-50/80 dark:bg-sky-900/15",headerBg:"from-sky-500 to-cyan-500",chipBg:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-900/40 dark:text-sky-100 dark:border-sky-800"},{panelBorder:"border-indigo-300 dark:border-indigo-700",sectionBg:"bg-indigo-50/80 dark:bg-indigo-900/15",headerBg:"from-indigo-500 to-blue-600",chipBg:"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/40 dark:text-indigo-100 dark:border-indigo-800"},{panelBorder:"border-lime-300 dark:border-lime-700",sectionBg:"bg-lime-50/80 dark:bg-lime-900/15",headerBg:"from-lime-500 to-green-500",chipBg:"bg-lime-100 text-lime-700 border-lime-200 dark:bg-lime-900/40 dark:text-lime-100 dark:border-lime-800"}],n={__default:{panelBorder:"border-gray-200 dark:border-gray-700",sectionBg:"bg-gray-50 dark:bg-gray-900/40",headerBg:"from-slate-500 to-slate-600",chipBg:"bg-gray-200 text-gray-700 border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600"}};return(r||[]).forEach((i,s)=>{n[i.id]=e[s%e.length]}),n}let Cf,Gt,gA,ua,n0,vA;const wt={},Xu={task:20,team:15,additional:25,mcq:40},Q6=100,Fd="11:55",jhe=["scheduledTime","scheduleTime","assignmentTime","assignmentClock","time","startTime","timeSlot","meetingTime"],H6=[{value:"upcoming",label:" "},{value:"ongoing",label:" "},{value:"completed",label:" "}],V4={upcoming:{label:"",badge:"bg-sky-100 text-sky-700 dark:bg-sky-900/40 dark:text-sky-200"},ongoing:{label:"",badge:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200"},completed:{label:"",badge:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200"}},V6=H6.map(r=>r.value);function Ghe(r){return Cf=r.managers.stateManager,Gt=r.managers.uiManager,gA=r.services.dataService,vA=r.utils.permissionHelper,ua=r.utils,n0=r.app,zhe(),qhe(),console.log(" Tasks component initialized."),{render:Khe,populateTaskSelects:nfe}}function Khe(){if(!wt.page)return;const r=Cf.get("tasks");Xhe(r),j6(Xu,"")}function zhe(){if(wt.page=document.getElementById("page-tasks"),!wt.page){console.error(" Tasks page element (#page-tasks) not found!");return}wt.taskNameInput=wt.page.querySelector("#taskNameInput"),wt.maxTaskScoreInput=wt.page.querySelector("#maxTaskScoreInput"),wt.maxTeamScoreInput=wt.page.querySelector("#maxTeamScoreInput"),wt.maxAdditionalScoreInput=wt.page.querySelector("#maxAdditionalScoreInput"),wt.maxMcqScoreInput=wt.page.querySelector("#maxMcqScoreInput"),wt.totalMaxScoreDisplay=wt.page.querySelector("#totalMaxScoreDisplay"),wt.taskDescriptionInput=wt.page.querySelector("#taskDescriptionInput"),wt.taskDateInput=wt.page.querySelector("#taskDateInput"),wt.taskTimeInput=wt.page.querySelector("#taskTimeInput"),wt.taskStatusInput=wt.page.querySelector("#taskStatusInput"),wt.addTaskBtn=wt.page.querySelector("#addTaskBtn"),wt.tasksListContainer=wt.page.querySelector("#tasksList"),(!wt.maxTaskScoreInput||!wt.totalMaxScoreDisplay)&&console.warn("Tasks: One or more score breakdown elements are missing in the HTML."),wt.taskStatusInput&&!wt.taskStatusInput.value&&(wt.taskStatusInput.value="upcoming"),wt.taskTimeInput&&!wt.taskTimeInput.value&&(wt.taskTimeInput.value=Fd)}function qhe(){if(!wt.page)return;Gt.addListener(wt.addTaskBtn,"click",Jhe),[wt.maxTaskScoreInput,wt.maxTeamScoreInput,wt.maxAdditionalScoreInput,wt.maxMcqScoreInput].forEach(e=>{Gt.addListener(e,"input",()=>xw(""))}),Gt.addListener(wt.tasksListContainer,"click",e=>{const t=e.target.closest(".edit-task-btn"),n=e.target.closest(".delete-task-btn");t?efe(t.dataset.id):n&&tfe(n.dataset.id)}),Gt.addListener(wt.tasksListContainer,"change",e=>{const t=e.target.closest(".task-status-select");t&&(e.stopPropagation(),rfe(t))})}function ym(r){if(!r)return"";try{if(typeof r=="string")return r.split("T")[0];if(r instanceof Date)return r.toISOString().split("T")[0];if(typeof r.toDate=="function")return r.toDate().toISOString().split("T")[0]}catch(e){console.warn("Unsupported date type for comparison:",r,e)}return""}function Dv(r){const e=Whe(r);if(!e)return null;const t=String(e.hour).padStart(2,"0"),n=String(e.minute).padStart(2,"0");return`${t}:${n}`}function Whe(r){if(r==null)return null;const e=String(r).trim();if(!e)return null;const t=e.toLowerCase(),n=t.match(/(\d{1,2})(?::(\d{1,2}))?\s*(am|pm|a\.m\.|p\.m\.)?/);if(!n){if(/^\d{3,4}$/.test(t)){const o=t.padStart(4,"0"),A=parseInt(o.slice(0,2),10),l=parseInt(o.slice(2),10);if(!Number.isNaN(A)&&!Number.isNaN(l))return{hour:Math.min(Math.max(A,0),23),minute:Math.min(Math.max(l,0),59)}}return null}let i=parseInt(n[1],10),s=n[2]?parseInt(n[2],10):0;if(Number.isNaN(i)||Number.isNaN(s))return null;const a=n[3];if(a){const o=a.includes("p"),A=a.includes("a");o&&i<12&&(i+=12),A&&i===12&&(i=0)}return i=Math.min(Math.max(i,0),23),s=Math.min(Math.max(s,0),59),{hour:i,minute:s}}function $6(r,e){const t=ym(r);if(!t)return"";const n=Dv(e)||Fd;try{const i=new Date(`${t}T${n}:00`);if(!Number.isNaN(i.getTime()))return i.toISOString()}catch{}return r||""}function Yhe(r){if(!r)return Fd;for(const t of jhe){if(!Object.prototype.hasOwnProperty.call(r,t))continue;const n=Dv(r[t]);if(n)return n}const e=K6(r.date);if(e&&!Number.isNaN(e.getTime())){const t=e.getHours(),n=e.getMinutes();if(t||n)return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`}return Fd}function xw(r=""){var o,A,l,c;const e=parseFloat((o=document.getElementById(`${r}maxTaskScoreInput`))==null?void 0:o.value)||0,t=parseFloat((A=document.getElementById(`${r}maxTeamScoreInput`))==null?void 0:A.value)||0,n=parseFloat((l=document.getElementById(`${r}maxAdditionalScoreInput`))==null?void 0:l.value)||0,i=parseFloat((c=document.getElementById(`${r}maxMcqScoreInput`))==null?void 0:c.value)||0,s=e+t+n+i,a=document.getElementById(`${r}totalMaxScoreDisplay`);return a&&(a.textContent=ua.convertToBanglaNumber(s)),s}function j6(r,e=""){const t=document.getElementById(`${e}maxTaskScoreInput`),n=document.getElementById(`${e}maxTeamScoreInput`),i=document.getElementById(`${e}maxAdditionalScoreInput`),s=document.getElementById(`${e}maxMcqScoreInput`);t&&(t.value=(r==null?void 0:r.task)??Xu.task),n&&(n.value=(r==null?void 0:r.team)??Xu.team),i&&(i.value=(r==null?void 0:r.additional)??Xu.additional),s&&(s.value=(r==null?void 0:r.mcq)??Xu.mcq),xw(e)}function Xhe(r){if(!wt.tasksListContainer)return;if(Gt.clearContainer(wt.tasksListContainer),!r||r.length===0){Gt.displayEmptyMessage(wt.tasksListContainer,"???? ????? ??? ??? ?????");return}const t=[...r].sort((n,i)=>{const s=ym(n.date);return ym(i.date).localeCompare(s)}).map(n=>{const i=ua.formatTimestamp(n.date)||"????? ???",s=n.maxScoreBreakdown?(parseFloat(n.maxScoreBreakdown.task)||0)+(parseFloat(n.maxScoreBreakdown.team)||0)+(parseFloat(n.maxScoreBreakdown.additional)||0)+(parseFloat(n.maxScoreBreakdown.mcq)||0):parseFloat(n.maxScore)||Q6,a=ua.convertToBanglaNumber(s),o=n.description?`<p class="text-sm text-gray-600 dark:text-gray-400 mt-1">${ua.truncateText(n.description,100)}</p>`:"",A=n.maxScoreBreakdown||{},l=`?????????: ?????-${ua.convertToBanglaNumber(A.task??"N/A")}, ???-${ua.convertToBanglaNumber(A.team??"N/A")}, ????????-${ua.convertToBanglaNumber(A.additional??"N/A")}, MCQ-${ua.convertToBanglaNumber(A.mcq??"N/A")}`,c=G6(n),u=V4[c]||V4.upcoming,h=`<span class="inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-semibold ${u.badge}">
        <i class="fas fa-circle text-[6px]"></i>${u.label}
      </span>`;return`
        <div class="card p-4 space-y-4">
          <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4">
            <div class="flex-grow" title="${l}">
              <div class="flex items-center gap-2 flex-wrap">
                <h4 class="text-lg font-semibold text-gray-900 dark:text-white">${ua.ensureBengaliText(n.name)}</h4>
                ${h}
              </div>
              <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                ?????: ${i} | ??? ???????? ?????: ${a}
              </p>
              ${o}
            </div>
            <div class="flex flex-col sm:flex-row lg:flex-col items-stretch sm:items-end gap-2">
              <label class="text-xs font-semibold text-gray-500 dark:text-gray-400"> </label>
              <select
                class="task-status-select form-input text-sm font-medium"
                data-id="${n.id}"
                data-current-status="${c}"
                aria-label="  "
              >
                ${z6(c)}
              </select>
              <div class="flex space-x-2 justify-end">
                <button data-id="${n.id}" class="edit-task-btn btn btn-light btn-sm py-1 px-2" aria-label="????????">
                  <i class="fas fa-edit pointer-events-none"></i>
                </button>
                <button data-id="${n.id}" class="delete-task-btn btn btn-danger btn-sm py-1 px-2" aria-label="?????">
                  <i class="fas fa-trash pointer-events-none"></i>
                </button>
              </div>
            </div>
          </div>
        </div>`}).join("");wt.tasksListContainer.innerHTML=t}async function Jhe(){var c,u,h,d,p,f,y,b,B;if(!(vA!=null&&vA.canWrite())){Gt.showToast("      ","warning");return}(c=wt.taskTitleInput)==null||c.value.trim();const r=(u=wt.taskDescriptionInput)==null?void 0:u.value.trim(),e=(h=wt.taskDateInput)==null?void 0:h.value,t=(d=wt.taskTimeInput)==null?void 0:d.value,n=Dv(t)||Fd,i=$6(e,n),a=Bw((p=wt.taskStatusInput)==null?void 0:p.value)||EC(i),o={task:parseFloat((f=wt.maxTaskScoreInput)==null?void 0:f.value)||0,team:parseFloat((y=wt.maxTeamScoreInput)==null?void 0:y.value)||0,additional:parseFloat((b=wt.maxAdditionalScoreInput)==null?void 0:b.value)||0,mcq:parseFloat((B=wt.maxMcqScoreInput)==null?void 0:B.value)||0},A=o.task+o.team+o.additional+o.mcq;if(!name){Gt.showToast("  ","warning");return}if(A<=0||Object.values(o).some(S=>S<0)){Gt.showToast("                ","warning");return}if(!date){Gt.showToast("   ","warning");return}Gt.showLoading("   ...");try{if(await gA.checkTaskNameExists(name)){Gt.showToast("     ","warning"),Gt.hideLoading();return}}catch(S){Gt.showToast(`   : ${S.message}`,"error"),Gt.hideLoading();return}const l={name,description:r,date:i||e,scheduledTime:n,maxScore:A,maxScoreBreakdown:o,status:a,nameLower:name.toLowerCase()};Gt.showLoading("   ...");try{await gA.addTask(l),await n0.refreshAllData(),wt.taskNameInput&&(wt.taskNameInput.value=""),j6(Xu,""),wt.taskDescriptionInput&&(wt.taskDescriptionInput.value=""),wt.taskDateInput&&(wt.taskDateInput.value=""),wt.taskTimeInput&&(wt.taskTimeInput.value=Fd),wt.taskStatusInput&&(wt.taskStatusInput.value="upcoming"),Gt.showToast("    ","success")}catch(S){Gt.showToast(`   : ${S.message}`,"error")}finally{Gt.hideLoading()}}function G6(r){return Zhe(r==null?void 0:r.status,r==null?void 0:r.date)}function Zhe(r,e){return V6.includes(r)?r:EC(e)}function Bw(r){return V6.includes(r)?r:null}function EC(r){const e=K6(r);if(!e)return"upcoming";const t=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.getTime()===i.getTime()?"ongoing":n>i?"upcoming":"completed"}function K6(r){if(!r)return null;try{return typeof r.toDate=="function"?r.toDate():typeof r=="number"?new Date(r):new Date(r)}catch{return null}}function z6(r){return H6.map(e=>`<option value="${e.value}" ${e.value===r?"selected":""}>${e.label}</option>`).join("")}function efe(r){if(!(vA!=null&&vA.canEdit())){Gt.showToast("     ","warning");return}const e=Cf.get("tasks").find(l=>l.id===r);if(!e){Gt.showToast("  ","error");return}const t=e.maxScoreBreakdown||Xu,n=e.maxScoreBreakdown?(parseFloat(t.task)||0)+(parseFloat(t.team)||0)+(parseFloat(t.additional)||0)+(parseFloat(t.mcq)||0):e.maxScore||Q6,i=ym(e.date)||"",s=Yhe(e),a=G6(e),o=`
        <div class="space-y-4">
            <div><label for="editTaskName" class="label"> *</label><input id="editTaskName" type="text" value="${e.name||""}" class="form-input" maxlength="100"></div>
            <fieldset class="border p-3 rounded dark:border-gray-600">
                 <legend class="text-sm font-medium px-1">  *</legend>
                 <div class="grid grid-cols-2 gap-3 mt-2">
                    <div><label for="editmaxTaskScoreInput" class="label text-xs"></label><input id="editmaxTaskScoreInput" type="number" min="0" step="any" value="${t.task??0}" class="form-input breakdown-input"></div>
                    <div><label for="editmaxTeamScoreInput" class="label text-xs"></label><input id="editmaxTeamScoreInput" type="number" min="0" step="any" value="${t.team??0}" class="form-input breakdown-input"></div>
                    <div><label for="editmaxAdditionalScoreInput" class="label text-xs"></label><input id="editmaxAdditionalScoreInput" type="number" min="0" step="any" value="${t.additional??0}" class="form-input breakdown-input"></div>
                    <div><label for="editmaxMcqScoreInput" class="label text-xs">MCQ</label><input id="editmaxMcqScoreInput" type="number" min="0" step="any" value="${t.mcq??0}" class="form-input breakdown-input"></div>
                 </div>
                 <p class="text-sm mt-3 text-gray-600 dark:text-gray-400">  : <strong id="edittotalMaxScoreDisplay">${ua.convertToBanglaNumber(n)}</strong></p>
            </fieldset>
            <div><label for="editTaskDescription" class="label"></label><textarea id="editTaskDescription" class="form-input" rows="3">${e.description||""}</textarea></div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <div><label for="editTaskDate" class="label">?????*</label><input id="editTaskDate" type="date" value="${i}" class="form-input"></div>
              <div><label for="editTaskTime" class="label">???????? ()</label><input id="editTaskTime" type="time" value="${s}" class="form-input"></div>
            </div>
            <div><label for="editTaskStatus" class="label"></label><select id="editTaskStatus" class="form-input">
              ${z6(a)}
            </select></div>
        </div>`;Gt.showEditModal(" ",o,async()=>{var S,C,P,M,L,_,v,T,E;const l=(S=document.getElementById("editTaskName"))==null?void 0:S.value.trim(),c=(C=document.getElementById("editTaskDescription"))==null?void 0:C.value.trim(),u=(P=document.getElementById("editTaskDate"))==null?void 0:P.value,h=(M=document.getElementById("editTaskTime"))==null?void 0:M.value,d=Dv(h)||Fd,p=$6(u,d),f=Bw((L=document.getElementById("editTaskStatus"))==null?void 0:L.value)||EC(p),y={task:parseFloat((_=document.getElementById("editmaxTaskScoreInput"))==null?void 0:_.value)||0,team:parseFloat((v=document.getElementById("editmaxTeamScoreInput"))==null?void 0:v.value)||0,additional:parseFloat((T=document.getElementById("editmaxAdditionalScoreInput"))==null?void 0:T.value)||0,mcq:parseFloat((E=document.getElementById("editmaxMcqScoreInput"))==null?void 0:E.value)||0},b=y.task+y.team+y.additional+y.mcq;if(!l||b<=0||!u||Object.values(y).some(x=>x<0)){Gt.showToast(",    (>=0)      ","warning");return}Gt.showLoading("  ...");try{if(await gA.checkTaskNameExists(l,r)){Gt.showToast("    ","warning"),Gt.hideLoading();return}}catch(x){Gt.showToast(`   : ${x.message}`,"error"),Gt.hideLoading();return}const B={name:l,description:c,date:p||u,scheduledTime:d,maxScore:b,maxScoreBreakdown:y,status:f,nameLower:l.toLowerCase()};Gt.showLoading(" ...");try{await gA.updateTask(r,B),await n0.refreshAllData(),Gt.hideModal(Gt.elements.editModal),Gt.showToast("  ","success")}catch(x){Gt.showToast(` : ${x.message}`,"error")}finally{Gt.hideLoading()}});const A=Gt.elements.editModalContent;A&&(A.querySelectorAll(".breakdown-input").forEach(l=>{l.oninput=()=>xw("edit")}),xw("edit"))}async function tfe(r){if(!(vA!=null&&vA.canDelete())){Gt.showToast("     ","warning");return}const e=Cf.get("tasks").find(i=>i.id===r);if(!e){Gt.showToast("  ","error");return}const t=Cf.get("evaluations").filter(i=>i.taskId===r);let n=`"${e.name}"    ?`;t.length>0&&(n+=`

(  ${ua.convertToBanglaNumber(t.length)}    !)`),Gt.showDeleteModal(" ",n,async()=>{Gt.showLoading(" ...");try{if(t.length>0&&gA.batchDeleteEvaluations)await gA.batchDeleteEvaluations(t.map(i=>i.id));else if(t.length>0)for(const i of t)await gA.deleteEvaluation(i.id);await gA.deleteTask(r),await n0.refreshAllData(),Gt.showToast("  ","success")}catch(i){Gt.showToast(` : ${i.message}`,"error")}finally{Gt.hideLoading()}})}async function rfe(r){const e=r==null?void 0:r.dataset.id,t=Bw(r==null?void 0:r.value),n=(r==null?void 0:r.dataset.currentStatus)||Bw(r==null?void 0:r.value);if(!(!e||!t||t===n)){r.disabled=!0,Gt.showLoading("  ...");try{await gA.updateTask(e,{status:t}),r.dataset.currentStatus=t,await n0.refreshAllData(),Gt.showToast("  ","success")}catch(i){Gt.showToast(`  : ${i.message}`,"error"),n&&(r.value=n)}finally{r.disabled=!1,Gt.hideLoading()}}}function nfe(r,e="  "){const t=Cf.get("tasks");if(!t){console.warn("populateTaskSelects: Tasks not loaded yet.");return}const n=t.map(i=>({value:i.id,text:`${ua.ensureBengaliText(i.name)} (${ua.formatTimestamp(i.date)||"N/A"})`,date:ym(i.date)})).sort((i,s)=>s.date.localeCompare(i.date));r.forEach(i=>{const s=document.getElementById(i);s?(Gt.populateSelect(s,n,e),s.options[0]&&s.options[0].value===""&&(s.options[0].disabled=!0)):console.warn(`populateTaskSelects: Element #${i} not found.`)})}let $s,Ar,bm,Yr,wm,Xg,_A;const Yt={};let Nc=null,eu=null;const q6={task:20,team:15,additional:25,mcq:40},W6=100,ife={"team-leader":{label:" ",className:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-500/20 dark:text-amber-100 dark:border-amber-500/40"},"time-keeper":{label:" ",className:"bg-sky-100 text-sky-700 border-sky-200 dark:bg-sky-500/20 dark:text-sky-100 dark:border-sky-500/40"},reporter:{label:"",className:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-500/20 dark:text-purple-100 dark:border-purple-500/40"},"resource-manager":{label:" ",className:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-500/20 dark:text-emerald-100 dark:border-emerald-500/40"},"peace-maker":{label:" ",className:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-500/20 dark:text-rose-100 dark:border-rose-500/40"}},$4={topic:[{id:"topic_none",text:"   ",marks:-5},{id:"topic_understood",text:" ",marks:5},{id:"topic_learned_well",text:"  ",marks:10}],options:[{id:"homework_done",text:"    ",marks:5},{id:"attendance_regular",text:"  ",marks:10}]};function sfe(r){const e="inline-flex items-center px-2 py-0.5 text-xs font-semibold rounded-full border mt-1";if(!r)return`<span class="${e} bg-gray-100 text-gray-500 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700">  </span>`;const t=ife[r]||{label:Yr!=null&&Yr.ensureBengaliText?Yr.ensureBengaliText(r):r,className:"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"},n=t.label||(Yr!=null&&Yr.ensureBengaliText?Yr.ensureBengaliText(r):r),i=t.className||"";return`<span class="${e} ${i}">${n}</span>`}function afe(r){return $s=r.managers.stateManager,Ar=r.managers.uiManager,bm=r.services.dataService,_A=r.utils.permissionHelper,Yr=r.utils,wm=r.app,Xg=r.app.components.tasks,Afe(),lfe(),console.log(" Evaluation component initialized."),{render:ofe}}function ofe(){if(!Yt.page){console.error(" Evaluation render failed: Page element not found.");return}console.log("Rendering Evaluation page..."),cfe(),SC(),Nc||(Ar.clearContainer(Yt.evaluationFormContainer),eu=null)}function Afe(){Yt.page=document.getElementById("page-evaluation"),Yt.page?(Yt.evaluationTaskSelect=Yt.page.querySelector("#evaluationTaskSelect"),Yt.evaluationGroupSelect=Yt.page.querySelector("#evaluationGroupSelect"),Yt.startEvaluationBtn=Yt.page.querySelector("#startEvaluationBtn"),Yt.evaluationFormContainer=Yt.page.querySelector("#evaluationForm"),Yt.evaluationListTableBody=Yt.page.querySelector("#evaluationListTable")):console.error(" Evaluation init failed: #page-evaluation element not found!")}function lfe(){Yt.page&&(Ar.addListener(Yt.startEvaluationBtn,"click",ufe),Ar.addListener(Yt.evaluationFormContainer,"submit",r=>{r.target&&r.target.id==="dynamicEvaluationForm"&&(r.preventDefault(),hfe())}),Ar.addListener(Yt.evaluationFormContainer,"click",r=>{r.target&&r.target.id==="cancelEvaluationBtn"&&Rv()}),Ar.addListener(Yt.evaluationFormContainer,"input",r=>{r.target&&(r.target.classList.contains("score-input")||r.target.classList.contains("criteria-input")||r.target.classList.contains("comments-input"))&&dfe(r.target)}),Ar.addListener(Yt.evaluationListTableBody,"click",r=>{const e=r.target.closest(".edit-evaluation-btn"),t=r.target.closest(".delete-evaluation-btn");e?ffe(e.dataset.id):t&&gfe(t.dataset.id)}))}function cfe(){var r,e,t;Xg!=null&&Xg.populateTaskSelects&&Xg.populateTaskSelects(["evaluationTaskSelect"],"  "),(r=wm.components.groups)!=null&&r.populateGroupSelects&&wm.components.groups.populateGroupSelects(["evaluationGroupSelect"],"  "),(e=Yt.evaluationTaskSelect)!=null&&e.options[0]&&(Yt.evaluationTaskSelect.options[0].disabled=!0),(t=Yt.evaluationGroupSelect)!=null&&t.options[0]&&(Yt.evaluationGroupSelect.options[0].disabled=!0)}async function ufe(){var a,o;const r=(a=Yt.evaluationTaskSelect)==null?void 0:a.value,e=(o=Yt.evaluationGroupSelect)==null?void 0:o.value;if(!r||!e){Ar.showToast("      ","warning");return}const t=$s.get("tasks").find(A=>A.id===r),n=$s.get("groups").find(A=>A.id===e);if(!t||!n){Ar.showToast("      ","error");return}if(!t.maxScoreBreakdown||t.maxScoreBreakdown.mcq===void 0){Ar.showToast("    (task, team, additional, mcq)        ","error",5e3);return}eu=t.maxScoreBreakdown;const i=$s.get("students").filter(A=>A.groupId===e).sort((A,l)=>String(A.roll).localeCompare(String(l.roll),void 0,{numeric:!0}));if(i.length===0){Ar.showToast("    ","warning");return}const s=$s.get("evaluations").find(A=>A.taskId===r&&A.groupId===e);s?await X6(s.id,t,n,i):(Y6(t,n,i,null),Nc=null)}function Y6(r,e,t,n=null){if(!Yt.evaluationFormContainer)return;const i=r.maxScoreBreakdown||q6,s=parseFloat(i.task)||0,a=parseFloat(i.team)||0,o=parseFloat(i.additional)||0,A=parseFloat(i.mcq)||0,l=r.maxScore||s+a+o+A;eu=i;let c=`
    <form id="dynamicEvaluationForm" class="card card-body space-y-6">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center border-b pb-3 dark:border-gray-600">
             <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
                 ${n?"":" "}: ${Yr.ensureBengaliText(r.name)} - ${Yr.ensureBengaliText(e.name)}
             </h3>
             <p class="text-sm text-gray-600 dark:text-gray-400 mt-1 sm:mt-0" title="-${s}, -${a}, -${o}, MCQ-${A}">
                   : ${Yr.convertToBanglaNumber(l)}
             </p>
        </div>
        <div class="overflow-x-auto relative shadow-md sm:rounded-lg">
            <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300">
                    <tr>
                        <th scope="col" class="th w-1/12"></th>
                        <th scope="col" class="th w-2/12">  </th>
                        <th scope="col" class="th text-center w-1/12"> (${Yr.convertToBanglaNumber(s)})</th>
                        <th scope="col" class="th text-center w-1/12"> (${Yr.convertToBanglaNumber(a)})</th>
                        <th scope="col" class="th text-center w-1/12">MCQ (${Yr.convertToBanglaNumber(A)})</th>
                        <th scope="col" class="th text-center w-4/12">  ( ${Yr.convertToBanglaNumber(o)})</th>
                        <th scope="col" class="th text-center w-1/12"></th>
                        <th scope="col" class="th text-center w-1/12"> (${Yr.convertToBanglaNumber(l)})</th>
                    </tr>
                </thead>
                <tbody>
    `;t.forEach((u,h)=>{const d=n?n[u.id]:null,p=h%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700",f=(d==null?void 0:d.additionalCriteria)||{},y=f.topic||"",b=f.homework||!1,B=f.attendance||!1,S=(d==null?void 0:d.comments)||"";c+=`
            <tr class="${p} border-b dark:border-gray-600 student-row" data-student-id="${u.id}">
                <td class="td font-medium text-gray-900 dark:text-white">${Yr.convertToBanglaNumber(u.roll)}</td>
                <td class="td">
                    <div class="font-semibold text-gray-900 dark:text-white">${Yr.ensureBengaliText?Yr.ensureBengaliText(u.name||""):u.name||""}</div>
                    ${sfe(u.role)}
                </td>
                <td class="td"><input type="number" step="any" class="score-input task-score" min="0" max="${s}" data-max="${s}" value="${(d==null?void 0:d.taskScore)??""}" aria-label="${u.name} Task Score"></td>
                <td class="td"><input type="number" step="any" class="score-input team-score" min="0" max="${a}" data-max="${a}" value="${(d==null?void 0:d.teamScore)??""}" aria-label="${u.name} Team Score"></td>
                <td class="td"><input type="number" step="any" class="score-input mcq-score" min="0" max="${A}" data-max="${A}" value="${(d==null?void 0:d.mcqScore)??""}" aria-label="${u.name} MCQ Score"></td>
                <td class="td criteria-cell" data-max-additional="${o}">
                    <fieldset class="space-y-2">
                        <legend class="sr-only"> </legend>
                        ${$4.topic.map(C=>`
                            <label class="flex items-center text-xs space-x-2 cursor-pointer">
                                <input type="radio" name="topic-${u.id}" value="${C.id}" data-marks="${C.marks}" ${y===C.id?"checked":""} class="criteria-input">
                                <span>${C.text} (${C.marks>0?"+":""}${Yr.convertToBanglaNumber(C.marks)})</span>
                            </label>
                        `).join("")}
                        <hr class="dark:border-gray-600 my-1">
                        ${$4.options.map(C=>`
                            <label class="flex items-center text-xs space-x-2 cursor-pointer">
                                <input type="checkbox" name="${C.id}-${u.id}" value="${C.id}" data-marks="${C.marks}" ${b&&C.id==="homework_done"?"checked":""} ${B&&C.id==="attendance_regular"?"checked":""} class="criteria-input">
                                <span>${C.text} (+${Yr.convertToBanglaNumber(C.marks)})</span>
                            </label>
                        `).join("")}
                    </fieldset>
                </td>
                <td class="td"><textarea class="form-input text-xs p-1 comments-input" rows="3" placeholder="..." aria-label="${u.name} Comments">${S}</textarea></td>
                <td class="td text-center font-bold text-lg total-score-display dark:text-white" data-total-max="${l}">
                   ${(d==null?void 0:d.totalScore)!==void 0?Yr.convertToBanglaNumber(parseFloat(d.totalScore).toFixed(2)):"0"}
                </td>
            </tr>
        `}),c+=`
                </tbody>
            </table>
            <style>
                .td { padding: 8px 6px; border: 1px solid #e5e7eb; vertical-align: top; }
                .dark .td { border-color: #4b5563; }
                .th { padding: 10px 6px; border: 1px solid #e5e7eb; vertical-align: middle; }
                .dark .th { border-color: #4b5563; }
                .score-input, .comments-input { width: 100%; min-width: 50px; padding: 4px; border: 1px solid #d1d5db; border-radius: 4px; text-align: center; background-color: white; }
                .dark .score-input, .dark .comments-input { background-color: #374151; border-color: #4b5563; color: white; }
                .score-input:focus, .comments-input:focus { border-color: #3b82f6; box-shadow: 0 0 0 1px #3b82f6; outline: none; }
                .criteria-cell { background-color: #f9fafb; }
                .dark .criteria-cell { background-color: rgba(31, 41, 55, 0.5); }
                .criteria-input { width: 1rem; height: 1rem; cursor: pointer; border: 1px solid #d1d5db; background-color: transparent; accent-color: #2563eb; }
                .dark .criteria-input { border-color: #4b5563; background-color: #1f2937; accent-color: #60a5fa; }
            </style>
        </div>
        <div class="flex justify-end space-x-3 pt-4 border-t dark:border-gray-600">
             <button type="button" id="cancelEvaluationBtn" class="btn btn-light"></button>
             <button type="submit" class="btn btn-primary">${n?" ":" "}</button>
        </div>
    </form>
    `,Yt.evaluationFormContainer.innerHTML=c}function dfe(r){const e=r.closest(".student-row");if(!e)return;const t=e.querySelector(".total-score-display"),n=parseFloat((t==null?void 0:t.dataset.totalMax)||W6),i=eu||q6,s=parseFloat(i.task)||0,a=parseFloat(i.team)||0,o=parseFloat(i.additional)||0,A=parseFloat(i.mcq)||0,l=e.querySelector(".task-score"),c=e.querySelector(".team-score"),u=e.querySelector(".mcq-score"),h=(C,P)=>{if(!C)return 0;let M=C.value===""?null:parseFloat(C.value);return M!==null&&(isNaN(M)||M<0?(M=0,C.value=0):M>P&&(M=P,C.value=P,Ar.showToast(`  ${Yr.convertToBanglaNumber(P)}`,"warning",1500))),M||0},d=h(l,s),p=h(c,a),f=h(u,A);let y=0;const b=e.querySelector('input[type="radio"]:checked');b&&(y+=parseFloat(b.dataset.marks)||0),e.querySelectorAll('input[type="checkbox"]:checked').forEach(C=>{y+=parseFloat(C.dataset.marks)||0}),y=Math.min(Math.max(y,-5),o);const B=d+p+f+y,S=Math.min(Math.max(B,0),n);t&&(t.textContent=Yr.convertToBanglaNumber(S.toFixed(2)))}function Rv(){Ar.clearContainer(Yt.evaluationFormContainer),Nc=null,eu=null,Yt.evaluationTaskSelect&&(Yt.evaluationTaskSelect.selectedIndex=0),Yt.evaluationGroupSelect&&(Yt.evaluationGroupSelect.selectedIndex=0),Ar.showToast("   ","info")}async function hfe(){var y,b,B,S;if(!(_A!=null&&_A.canWrite())){Ar.showToast(" evaluation submit   ","warning");return}const r=(y=Yt.evaluationTaskSelect)==null?void 0:y.value,e=(b=Yt.evaluationGroupSelect)==null?void 0:b.value,t=$s.get("tasks").find(C=>C.id===r);if(!t||!e||!eu){Ar.showToast(" , ,      ","error");return}const{task:n,team:i,additional:s,mcq:a}=eu,o=t.maxScore||W6,A={};let l=!0,c=0,u=0;if((B=Yt.evaluationFormContainer)==null||B.querySelectorAll(".student-row").forEach(C=>{var X,Ae;const P=C.dataset.studentId;if(!P){l=!1;return}const M=C.querySelector(".task-score"),L=C.querySelector(".team-score"),_=C.querySelector(".mcq-score"),v=((X=C.querySelector(".comments-input"))==null?void 0:X.value.trim())||"",T=C.querySelector('input[type="radio"]:checked'),E=C.querySelector('input[type="checkbox"][value="homework_done"]'),x=C.querySelector('input[type="checkbox"][value="attendance_regular"]'),F=M==null?void 0:M.value,k=L==null?void 0:L.value,Z=_==null?void 0:_.value;if(F===""&&k===""&&Z===""&&!T&&!(E!=null&&E.checked)&&!(x!=null&&x.checked)){C.style.outline="";return}const ne=parseFloat(F),j=parseFloat(k),G=parseFloat(Z);let pe=0;const q={topic:(T==null?void 0:T.value)||null,homework:(E==null?void 0:E.checked)||!1,attendance:(x==null?void 0:x.checked)||!1};T&&(pe+=parseFloat(T.dataset.marks)||0),E!=null&&E.checked&&(pe+=parseFloat(E.dataset.marks)||0),x!=null&&x.checked&&(pe+=parseFloat(x.dataset.marks)||0),pe=Math.min(Math.max(pe,-5),s);let N=!0;if((isNaN(ne)||ne<0||ne>n)&&(N=!1),(isNaN(j)||j<0||j>i)&&(N=!1),(isNaN(G)||G<0||G>a)&&(N=!1),T||(N=!1),N)C.style.outline="";else{l=!1,C.style.outline="2px solid red",Ar.showToast(` ${((Ae=C.querySelector("td:nth-child(2)"))==null?void 0:Ae.textContent)||P}     /`,"warning",2500);return}const Q=parseFloat((ne+j+G+pe).toFixed(2)),V=Math.min(Math.max(Q,0),o);A[P]={taskScore:ne,teamScore:j,additionalScore:pe,mcqScore:G,totalScore:V,additionalCriteria:q,comments:v},u+=V,c++}),!l){Ar.showToast("        ","error");return}if(c===0){Ar.showToast("       ","warning");return}const h=u/c,d=o>0?h/o*100:0,p={taskId:r,groupId:e,taskName:t.name,groupName:((S=$s.get("groups").find(C=>C.id===e))==null?void 0:S.name)||"Unknown",scores:A,studentCount:c,groupTotalScore:u,groupAverageScore:d,maxPossibleScore:o,evaluationDate:Bf(),taskDate:t.date},f=Nc?"":"";Ar.showLoading(` ${f} ...`);try{Nc?(delete p.evaluationDate,await bm.updateEvaluation(Nc,p)):await bm.addEvaluation(p),await wm.refreshAllData(),Rv(),Ar.showToast(` ${f} `,"success"),SC()}catch(C){console.error(` Error ${f}ing evaluation:`,C),Ar.showToast(` ${f}  : ${C.message}`,"error")}finally{Ar.hideLoading()}}function SC(){if(!Yt.evaluationListTableBody)return;const r=$s.get("evaluations"),e=new Map($s.get("tasks").map(n=>[n.id,n])),t=new Map($s.get("groups").map(n=>[n.id,n.name]));if(r.sort((n,i)=>(i.taskDate||"").localeCompare(n.taskDate||"")),Ar.clearContainer(Yt.evaluationListTableBody),r.length===0){const n=Yt.evaluationListTableBody.insertRow();n.innerHTML='<td colspan="5" class="placeholder-content p-4">    </td>';return}r.forEach(n=>{const i=e.get(n.taskId),s=(i==null?void 0:i.name)||n.taskName||"",a=t.get(n.groupId)||n.groupName||"",o=n.taskDate?Yr.formatTimestamp(n.taskDate):"N/A",A=n.groupAverageScore!==void 0?n.groupAverageScore:null,l=A!==null&&!isNaN(A)?`${Yr.convertToBanglaNumber(A.toFixed(1))}%`:"N/A",c=A!==null&&!isNaN(A)?Yr.getPerformanceColorClass(A):"",u=Yt.evaluationListTableBody.insertRow();u.className="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50",u.innerHTML=`
            <td class="td p-3">${s}</td> <td class="td p-3">${a}</td> <td class="td p-3">${o}</td>
            <td class="td p-3 text-center font-semibold ${c}">${l}</td>
            <td class="td p-3 text-center whitespace-nowrap">
                <button data-id="${n.id}" class="edit-evaluation-btn btn btn-light btn-sm p-1 mx-1" aria-label=""><i class="fas fa-edit pointer-events-none"></i></button>
                <button data-id="${n.id}" class="delete-evaluation-btn btn btn-danger btn-sm p-1 mx-1" aria-label=""><i class="fas fa-trash pointer-events-none"></i></button>
            </td>`})}async function X6(r,e,t,n){var i;Ar.showLoading("   ...");try{const s=await bm.getEvaluationById(r);if(!s||!s.scores)throw new Error("    ");Y6(e,t,n,s.scores),Nc=r,(i=Yt.evaluationFormContainer)==null||i.scrollIntoView({behavior:"smooth",block:"start"})}catch(s){console.error(" Error loading evaluation for edit:",s),Ar.showToast(`   : ${s.message}`,"error"),Rv()}finally{Ar.hideLoading()}}async function ffe(r){if(!(_A!=null&&_A.canEdit())){Ar.showToast(" evaluation    ","warning");return}const e=$s.get("evaluations").find(s=>s.id===r);if(!e){Ar.showToast("   ","error");return}const t=$s.get("tasks").find(s=>s.id===e.taskId),n=$s.get("groups").find(s=>s.id===e.groupId);if(!t){Ar.showToast("     ","error");return}if(!n){Ar.showToast("     ","error");return}if(!t.maxScoreBreakdown||t.maxScoreBreakdown.mcq===void 0){Ar.showToast("          ","error",5e3);return}eu=t.maxScoreBreakdown;const i=$s.get("students").filter(s=>s.groupId===e.groupId).sort((s,a)=>String(s.roll).localeCompare(String(a.roll),void 0,{numeric:!0}));if(i.length===0){Ar.showToast("     ","warning");return}Yt.evaluationTaskSelect&&(Yt.evaluationTaskSelect.value=e.taskId),Yt.evaluationGroupSelect&&(Yt.evaluationGroupSelect.value=e.groupId),await X6(r,t,n,i)}function gfe(r){if(!(_A!=null&&_A.canDelete())){Ar.showToast(" evaluation    ","warning");return}const e=$s.get("evaluations").find(s=>s.id===r);if(!e){Ar.showToast("   ","error");return}const t=e.taskName||" ",n=e.groupName||" ",i=`   "${t}"   "${n}"     ?`;Ar.showDeleteModal(" ",i,async()=>{Ar.showLoading(" ...");try{await bm.deleteEvaluation(r),await wm.refreshAllData(),SC(),Nc===r&&Rv(),Ar.showToast("   ","success")}catch(s){Ar.showToast(` : ${s.message}`,"error")}finally{Ar.hideLoading()}})}let J6,ja,un,Z6;const Nn={},Bo={active:"students"},pl={name:"",roll:""},ga={rankedStudents:[],rankedGroups:[],groups:[],students:[]},eO=1;function pfe(){if(document.getElementById("ranking-soft3d-styles"))return;const r=document.createElement("style");r.id="ranking-soft3d-styles",r.textContent=`
  /* ---------- Global soft page vibe ---------- */
  .rk-soft-page{
    --rk-page-start:#f8fafc;
    --rk-page-mid:#eef2ff;
    --rk-page-end:#ffffff;
    background: radial-gradient(120% 140% at 10% -10%, var(--rk-page-start) 0%, var(--rk-page-mid) 42%, var(--rk-page-end) 100%);
    background-attachment: fixed;
  }
  .dark .rk-soft-page{
    --rk-page-start:#0b1220; --rk-page-mid:#0f172a; --rk-page-end:#111827;
    background: radial-gradient(120% 140% at 10% -10%, var(--rk-page-start) 0%, var(--rk-page-mid) 52%, var(--rk-page-end) 100%);
    background-attachment: fixed;
  }

  .rk-surface{
    --rk-bg:#fff;
    border-radius: 1rem;
    background-color: var(--rk-bg);
    box-shadow:
      8px 8px 20px rgba(0,0,0,.08),
      -6px -6px 16px rgba(255,255,255,.70),
      inset 0 1px 0 rgba(255,255,255,.45);
  }
  .dark .rk-surface{
    --rk-bg: rgba(17,24,39,.92);
    box-shadow:
      10px 10px 26px rgba(0,0,0,.45),
      -6px -6px 14px rgba(255,255,255,.06),
      inset 0 1px 0 rgba(255,255,255,.08);
  }

  .rk-chip{
    border-radius: .65rem;
    background: rgba(255,255,255,.85);
    border: 1px solid rgba(0,0,0,.06);
    box-shadow: 0 1px 0 rgba(255,255,255,.60) inset, 0 2px 6px rgba(0,0,0,.06);
    color: var(--rk-chip-fg, var(--rk-card-fg, #0f172a));
    white-space: nowrap;
  }
  .dark .rk-chip{
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(255,255,255,.08);
    --rk-chip-fg: #f8fafc;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 2px 6px rgba(0,0,0,.35);
  }

  .rk-card{
    --rk-card-bg: var(--rk-bg, #fff);
    position: relative;
    border-radius: .9rem;
    background: var(--rk-card-bg);
    color: var(--rk-card-fg, #0f172a);
    border: 1px solid rgba(0,0,0,.06);
    box-shadow:
      6px 6px 16px rgba(0,0,0,.08),
      -4px -4px 12px rgba(255,255,255,.70),
      inset 0 1px 0 rgba(255,255,255,.45);
    transition: transform .2s ease, box-shadow .2s ease, background .25s ease;
  }
  .rk-card:hover{ transform: translateY(-1px); }
  .dark .rk-card{
    --rk-card-bg: rgba(15,23,42,.92);
    --rk-card-fg: #e2e8f0;
    border-color: rgba(255,255,255,.08);
    box-shadow:
      10px 10px 24px rgba(0,0,0,.45),
      -6px -6px 14px rgba(255,255,255,.06),
      inset 0 1px 0 rgba(255,255,255,.08);
  }

  .ranking-card{
    background: var(--rk-card-bg, #fdfefe);
    color: var(--rk-card-fg, #0f172a);
  }
  .dark .ranking-card{
    --rk-card-bg: rgba(13,20,34,.92);
    --rk-card-fg: #e2e8f0;
    border-color: rgba(255,255,255,.08);
  }
  .ranking-card *{
    color: inherit;
  }

  /* Accent border + glow (driven by --rk-grad/--rk-accent/--rk-glow) */
  .rk-card[data-accent]{
    border: 1px solid transparent;
    background-image:
      linear-gradient(var(--rk-card-bg), var(--rk-card-bg)),
      var(--rk-grad, linear-gradient(90deg,#e5e7eb,#e5e7eb));
    background-origin: border-box;
    background-clip: padding-box, border-box;
  }
  .rk-card[data-accent]::after{
    content:""; position:absolute; inset:-6px; z-index:-1; border-radius:inherit;
    background: radial-gradient(60% 60% at 50% -10%, var(--rk-accent, #94a3b8) 0%, transparent 60%);
    filter: blur(16px); opacity:.18; pointer-events:none;
  }
  .dark .rk-card[data-accent]::after{ opacity:.28; }

  .rk-meter-outer{
    box-shadow: inset 0 1px 0 rgba(255,255,255,.6), 0 8px 18px var(--rk-glow, rgba(0,0,0,.10));
  }

  .rk-micro{ font-size: 11px; line-height: 1.1; }

  /* -------- Pretty, soft badges for Branch & Role -------- */
  .rk-badges{
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr)); /* mobile: 2 columns */
    gap: .35rem;
    margin-top: .45rem;

  }
  .rk-badge{
    display:inline-flex; align-items:center; justify-content:center; gap:.35rem;
    padding:.32rem .50rem; border-radius:.65rem;
    border:1px solid var(--rk-badge-border, rgba(0,0,0,.06));
    background: var(--rk-badge-bg, rgba(255,255,255,.85));
    color: var(--rk-badge-fg, #0f172a);
    font-weight:600; font-size:11px;
    box-shadow: 0 1px 0 rgba(255,255,255,.60) inset, 0 2px 6px var(--rk-badge-glow, rgba(0,0,0,.05));
    white-space: nowrap;
    min-width: 0;
    text-align: center;
  }
  .dark .rk-badge{
    border-color: var(--rk-badge-border-dark, rgba(255,255,255,.12));
    background: var(--rk-badge-bg-dark, rgba(255,255,255,.08));
    color: var(--rk-badge-fg-dark, #f8fafc);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.10), 0 2px 8px var(--rk-badge-glow-dark, rgba(0,0,0,.45));
  }
  .rk-badge i{ font-size: 11px; }
  .rk-badge--compact{ padding:.28rem .45rem; font-size:10px; }

  @media (min-width: 640px){
    .rk-badges{ display:flex; flex-wrap:wrap; gap:.4rem; }
    .rk-badge{ padding:.46rem .66rem; font-size:12px; }
    .rk-badge i{ font-size:12px; }
  }

  /* -------- Tabs -------- */
  .rk-tabbar{
    display:flex; flex-wrap:wrap; gap:.6rem; align-items:center; justify-content:space-between;
    padding:.6rem; border-radius:.9rem;
    background: color-mix(in srgb, var(--rk-bg) 88%, transparent);
    backdrop-filter: blur(6px);
  }
  .rk-tabs{
    display:flex; gap:.4rem; align-items:center;
    padding:.25rem; border-radius:999px;
    background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,0));
    border:1px solid rgba(0,0,0,.06);
    box-shadow: 0 1px 0 rgba(255,255,255,.5) inset;
  }
  .dark .rk-tabs{ border-color: rgba(255,255,255,.10); background: rgba(255,255,255,.04); }

  .rk-tab{
    position:relative; border:0; background:transparent; cursor:pointer;
    padding:.55rem .85rem; border-radius:999px; font-weight:600; font-size:14px;
    color: #0f172a;
  }
  .dark .rk-tab{ color:#e5e7eb; }

  .rk-tab[aria-selected="true"]{
    color:white;
    background: var(--rk-grad, linear-gradient(90deg,#0ea5e9,#7dd3fc));
    box-shadow: 0 6px 14px var(--rk-glow, rgba(14,165,233,.25));
  }

  .rk-tab-search{ display:flex; gap:.5rem; width:100%; max-width:560px; }
  .rk-input{
    flex:1 1 auto;
    padding:.55rem .75rem; border-radius:.7rem;
    border:1px solid rgba(0,0,0,.08);
    background: rgba(255,255,255,.85);
    color:#0f172a; font-size: 14px; outline: none;
  }
  .rk-input::placeholder{ color:#94a3b8; }
  .rk-input:focus{ border-color: rgba(14,165,233,.45); box-shadow: 0 0 0 3px rgba(14,165,233,.12); }
  .rk-input:disabled{ opacity:.55; cursor:not-allowed; }

  .dark .rk-input{ background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.10); color:#e5e7eb; }
  .dark .rk-input:focus{ border-color: rgba(14,165,233,.55); box-shadow: 0 0 0 3px rgba(14,165,233,.22); }
  `,document.head.appendChild(r)}function mfe(){const r=document.body||document.documentElement;r&&!r.classList.contains("rk-soft-page")&&r.classList.add("rk-soft-page")}function yfe(r){return J6=r.managers.stateManager,ja=r.managers.uiManager,r.services.dataService,un=r.utils,Z6=r.app,pfe(),mfe(),wfe(),vfe(),console.log(" Ranking component initialized."),{render:bfe}}function bfe(){if(!Nn.page){console.error(" Ranking render failed: Page element not found.");return}console.log("Rendering Student Ranking page..."),ja.showLoading("   ...");try{const{students:r,evaluations:e,tasks:t,groups:n}=J6.getState();if(!r||!e||!t){ja.displayEmptyMessage(Nn.studentRankingListContainer,"     ...");return}const i=_fe(r,e,t),s=xfe(r,e,n||[]);ga.rankedStudents=i,ga.rankedGroups=s,ga.groups=n||[],ga.students=r||[],pl.name="",pl.roll="",Bo.active="students",IC(i,s,n||[],r)}catch(r){console.error(" Error rendering student ranking:",r),ja.displayEmptyMessage(Nn.studentRankingListContainer,"     ")}finally{ja.hideLoading()}}function wfe(){Nn.page=document.getElementById("page-student-ranking"),Nn.page?(Nn.refreshRankingBtn=Nn.page.querySelector("#refreshRanking"),Nn.studentRankingListContainer=Nn.page.querySelector("#studentRankingList")):console.error(" Ranking init failed: #page-student-ranking element not found!")}function vfe(){Nn.page&&(ja.addListener(Nn.refreshRankingBtn,"click",async()=>{ja.showLoading("   ...");try{await Z6.refreshAllData()}catch(r){console.error(" Error refreshing ranking data:",r),ja.showToast("    ","error")}}),ja.addListener(Nn.studentRankingListContainer,"click",r=>{const e=r.target.closest("[data-student-id]");if(e&&typeof window<"u"&&typeof window.openStudentModalById=="function"){const n=e.getAttribute("data-student-id");if(n){r.preventDefault();try{window.openStudentModalById(n)}catch{}return}}const t=r.target.closest("[data-group-id]");if(t&&typeof window<"u"&&typeof window.openGroupModalById=="function"){const n=t.getAttribute("data-group-id");if(n){r.preventDefault();try{window.openGroupModalById(n)}catch{}}}}))}function _fe(r,e,t){if(!r||!e||!t)return[];const n={};e.forEach(s=>{const a=parseFloat(s.maxPossibleScore)||60,o=tO(s.taskDate||s.updatedAt||s.evaluationDate||s.createdAt),A=s.scores||{};Object.entries(A).forEach(([l,c])=>{n[l]||(n[l]={evalCount:0,totalScore:0,maxScoreSum:0,latestMs:null});const u=parseFloat(c.totalScore)||0,h=n[l];h.evalCount+=1,h.totalScore+=u,h.maxScoreSum+=a,o&&(h.latestMs=h.latestMs?Math.max(h.latestMs,o):o)})});const i=r.map(s=>{const a=n[s.id];if(!a||a.evalCount<eO)return null;const o=a.maxScoreSum>0?a.totalScore/a.maxScoreSum*100:0;return{student:s,evalCount:a.evalCount,totalScore:a.totalScore,maxScoreSum:a.maxScoreSum,efficiency:o,latestEvaluationMs:a.latestMs||null,rank:0}}).filter(Boolean).sort((s,a)=>a.efficiency!==s.efficiency?a.efficiency-s.efficiency:a.evalCount!==s.evalCount?a.evalCount-s.evalCount:a.totalScore!==s.totalScore?a.totalScore-s.totalScore:a.maxScoreSum!==s.maxScoreSum?a.maxScoreSum-s.maxScoreSum:(a.latestEvaluationMs||0)-(s.latestEvaluationMs||0));return i.forEach((s,a)=>s.rank=a+1),i}function xfe(r,e,t){if(!r||!e)return[];const n=new Map((t||[]).map(A=>[A.id,A.name||""])),i=new Map((r||[]).map(A=>[A.id,A.groupId||"__none"])),s={};(r||[]).forEach(A=>{const l=A.groupId||"__none";s[l]=(s[l]||0)+1});const a={};e.forEach(A=>{const l=parseFloat(A.maxPossibleScore)||60,c=tO(A.taskDate||A.updatedAt||A.evaluationDate||A.createdAt),u=A.scores||{},h=new Set;Object.entries(u).forEach(([d,p])=>{const f=i.get(d)||"__none";a[f]||(a[f]={evalCount:0,totalScore:0,maxScoreSum:0,latestMs:null,participants:new Set});const y=parseFloat(p.totalScore)||0,b=a[f];h.has(f)||(b.evalCount+=1,h.add(f)),b.totalScore+=y,b.maxScoreSum+=l,b.participants.add(d),c&&(b.latestMs=b.latestMs?Math.max(b.latestMs,c):c)})});const o=Object.entries(a).map(([A,l])=>{if(l.evalCount<eO)return null;const c=l.maxScoreSum>0?l.totalScore/l.maxScoreSum*100:0,u=s[A]||0,h=l.participants.size,d=Math.max(0,u-h);return{groupId:A,groupName:n.get(A)||" ",evalCount:l.evalCount,totalScore:l.totalScore,maxScoreSum:l.maxScoreSum,efficiency:c,latestEvaluationMs:l.latestMs||null,participantsCount:h,groupSize:u,remainingCount:d,rank:0}}).filter(Boolean).sort((A,l)=>l.efficiency!==A.efficiency?l.efficiency-A.efficiency:l.evalCount!==A.evalCount?l.evalCount-A.evalCount:l.totalScore!==A.totalScore?l.totalScore-A.totalScore:l.maxScoreSum!==A.maxScoreSum?l.maxScoreSum-A.maxScoreSum:(l.latestEvaluationMs||0)-(A.latestEvaluationMs||0));return o.forEach((A,l)=>A.rank=l+1),o}function IC(r,e,t,n,i={}){if(!Nn.studentRankingListContainer)return;const s=!!(i!=null&&i.onlyUpdateStudents);let a=null;if(s&&(a=Nn.studentRankingListContainer.querySelector("[data-student-cards]"),!a))return;const o=new Map((t||[]).map(P=>[P.id,P.name])),A=P=>{const M=(Number(P)||0).toFixed(2);return un!=null&&un.convertToBanglaNumber?un.convertToBanglaNumber(M):M},l=P=>{const M=`${Math.round(Number(P)||0)}`;return un!=null&&un.convertToBanglaNumber?un.convertToBanglaNumber(M):M},c=P=>{const M=(P??"").toString();return un!=null&&un.convertToBanglaNumber?un.convertToBanglaNumber(M):M},u=r&&r[0]||null,h=e&&e[0]||null,d=Bo.active==="students"?Dy(u?u.efficiency:70):Dy(h?h.efficiency:70),p=Bo.active!=="students",f=Vu(pl.name),y=Vu(pl.roll),b=`
    <div class="rk-tabbar rk-surface" style="--rk-accent:${d.solid}; --rk-grad:${d.grad}; --rk-glow:${d.shadow};">
      <div class="rk-tabs">
        <button class="rk-tab" data-tab="students" aria-selected="${Bo.active==="students"}"> </button>
        <button class="rk-tab" data-tab="groups" aria-selected="${Bo.active==="groups"}"> </button>
      </div>
      <div class="rk-tab-search">
        <input id="studentSearchName" type="text" class="rk-input" placeholder="  "
          value="${f}" ${p?"disabled":""} />
        <input id="studentSearchRoll" type="text" inputmode="numeric" autocomplete="off"
          class="rk-input" placeholder=" ()" value="${y}" ${p?"disabled":""} />
      </div>
    </div>
  `,B=r&&r.length?(Bo.active==="students"?Sfe(r):r).map(P=>{const M=P.student,L=W4(P.rank),_=A(P.efficiency),v=l(P.evalCount),T=Dy(P.efficiency),E=o.get(M.groupId)||" ",x=`: ${c(M.roll||"")}  : ${Vu(E)}`,F=Ffe(M.academicGroup),k=Tfe(M.role),Z=K4(F,M.academicGroup||" "),ue=K4(k,kfe(M.role));return`
        <article class="ranking-card rk-card p-4 flex items-center gap-3 justify-between"
          data-student-id="${M.id}" data-accent
          style="--rk-accent:${T.solid}; --rk-grad:${T.grad}; --rk-glow:${T.shadow};">
          
          <div class="flex items-start gap-3 min-w-0">
            <div class="rk-chip px-3 py-2 text-center shrink-0">
              <div class="text-sm font-bold">${L}</div>
              <div class="rk-micro text-gray-500 dark:text-gray-400"></div>
            </div>
            <div class="min-w-0">
              <div class="flex items-center gap-2 min-w-0">
                <h4 class="font-semibold truncate" title="${Ny(M.name)}">${Ny(M.name)}</h4>
              </div>

              <p class="rk-micro mt-1 text-gray-600 dark:text-gray-300 truncate" title="${Vu(x)}">${x}</p>

              <div class="rk-badges">
                ${Z}
                ${ue}
              </div>

              <div class="flex gap-4 sm:gap-8 mt-2 text-[10px] sm:text-sm font-semibold">
                <div class="hidden sm:flex">: ${_}%</div>
                <div class=""> : ${v} </div>
              </div>
             
            </div>
          </div>

          <div class="flex flex-col items-center gap-1 shrink-0">
            ${q4(P.efficiency,T,z4())}
            <span class="rk-micro text-gray-500 dark:text-gray-400">Avg%</span>
          </div>
        </article>`}).join(""):'<div class="rk-card p-4 text-center text-gray-600 dark:text-gray-300">   </div>',S=e&&e.length?e.map(P=>{const M=W4(P.rank),L=A(P.efficiency),_=l(P.evalCount),v=Dy(P.efficiency),T=` : ${l(P.groupSize)}    : ${l(P.participantsCount)}   : ${l(P.remainingCount)}`;return`
        <article class="rk-card p-4 flex items-center gap-3 justify-between"
          data-accent${P.groupId&&P.groupId!=="__none"?` data-group-id="${Vu(P.groupId)}"`:""} style="--rk-accent:${v.solid}; --rk-grad:${v.grad}; --rk-glow:${v.shadow};">
          
          <div class="flex items-start gap-3 min-w-0">
            <div class="rk-chip px-3 py-2 text-center shrink-0">
              <div class="text-sm font-bold">${M}</div>
              <div class="rk-micro text-gray-500 dark:text-gray-400"> </div>
            </div>
            <div class="min-w-0">
              <h4 class="font-semibold truncate" title="${Ny(P.groupName)}">${Ny(P.groupName)}</h4>
              <div class="mt-1 grid grid-cols-2 gap-2 text-[12px] font-semibold">
                <div class="rk-chip px-2 py-1">: ${L}%</div>
                <div class="rk-chip px-2 py-1"> : ${_} </div>
              </div>
              <p class="rk-micro mt-2 text-gray-600 dark:text-gray-300 truncate" title="${T}">${T}</p>
            </div>
          </div>

          <div class="flex flex-col items-center gap-1 shrink-0">
            ${q4(P.efficiency,v,z4())}
            <span class="rk-micro text-gray-500 dark:text-gray-400">Avg%</span>
          </div>
        </article>`}).join(""):'<div class="rk-card p-4 text-gray-700 dark:text-gray-300">      </div>',C=Bo.active==="students"?`<div class="grid gap-4 grid-cols-1" data-student-cards>${B}</div>`:`<div class="grid gap-4 grid-cols-1">${S}</div>`;if(s&&a){a.innerHTML=B;return}ja.clearContainer(Nn.studentRankingListContainer),Nn.studentRankingListContainer.innerHTML=`
    <div class="space-y-4" style="--rk-accent:${d.solid}; --rk-grad:${d.grad}; --rk-glow:${d.shadow};">
      ${b}
      ${C}
    </div>
  `,Bfe(),Cfe()}function Bfe(){if(!Nn.studentRankingListContainer)return;const r=Nn.studentRankingListContainer;Array.from(r.querySelectorAll(".rk-tab")).forEach(t=>{ja.addListener(t,"click",()=>{const n=t.getAttribute("data-tab");!n||n!=="students"&&n!=="groups"||Bo.active!==n&&(Bo.active=n,IC(ga.rankedStudents,ga.rankedGroups,ga.groups,ga.students,{onlyUpdateStudents:!1}))})})}function Cfe(){if(!Nn.studentRankingListContainer)return;const r=Nn.studentRankingListContainer.querySelector("#studentSearchName"),e=Nn.studentRankingListContainer.querySelector("#studentSearchRoll"),t=Bo.active==="students";r&&(Nn.studentSearchNameInput=r,r.disabled=!t,ja.addListener(r,"input",n=>{t&&j4("name",n.target.value||"")})),e&&(Nn.studentSearchRollInput=e,e.disabled=!t,ja.addListener(e,"input",n=>{t&&j4("roll",n.target.value||"")}))}function j4(r,e){if(!Object.prototype.hasOwnProperty.call(pl,r))return;const t=typeof e=="string"?e:(e==null?void 0:e.toString())||"";pl[r]!==t&&(pl[r]=t,Efe())}function Efe(){Bo.active==="students"&&(!ga.rankedStudents||ga.rankedStudents.length===0||IC(ga.rankedStudents,ga.rankedGroups,ga.groups,ga.students,{onlyUpdateStudents:!0}))}function Sfe(r=[]){const e=(pl.name||"").trim().toLowerCase(),t=G4(pl.roll);return!e&&!t?r:r.filter(n=>{if(!(n!=null&&n.student))return!1;const i=n.student;if(e&&!(i.name||"").toString().toLowerCase().includes(e))return!1;if(t){const s=G4(i.roll);if(!s||s!==t)return!1}return!0})}const Ife={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function G4(r){return r==null?"":r.toString().trim().replace(/\s+/g,"").replace(/[-]/g,e=>Ife[e]||e)}function Ny(r){if(r==null)return"";const e=un!=null&&un.ensureBengaliText&&typeof un.ensureBengaliText=="function"?un.ensureBengaliText(r):String(r);return Vu(e.trim())}function Vu(r){return String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Dy(r){const e=Number(r)||0;return e>=85?{name:"green",solid:"#16a34a",shadow:"rgba(22,163,74,.35)",grad:"linear-gradient(90deg,#16a34a 0%,#22c55e 40%,#86efac 100%)"}:e>=70?{name:"sky",solid:"#0284c7",shadow:"rgba(2,132,199,.30)",grad:"linear-gradient(90deg,#0284c7 0%,#0ea5e9 40%,#7dd3fc 100%)"}:e>=55?{name:"amber",solid:"#d97706",shadow:"rgba(217,119,6,.35)",grad:"linear-gradient(90deg,#d97706 0%,#f59e0b 40%,#facc15 100%)"}:{name:"rose",solid:"#e11d48",shadow:"rgba(225,29,72,.40)",grad:"linear-gradient(90deg,#e11d48 0%,#f43f5e 40%,#fb7185 100%)"}}function kfe(r){const e={"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "},t=(r||"").toString().trim();return e[t]||t||" "}function Tfe(r){const e=(r||"").toString().trim(),t={"team-leader":{icon:"fa-crown",bg:"rgba(251, 191, 36, .18)",fg:"#92400e",border:"rgba(245, 158, 11, .35)",glow:"rgba(251, 191, 36, .28)",darkBg:"rgba(245, 158, 11, .22)",darkFg:"#fde68a",darkBorder:"rgba(251, 191, 36, .45)",darkGlow:"rgba(251, 191, 36, .38)"},"time-keeper":{icon:"fa-stopwatch",bg:"rgba(56, 189, 248, .16)",fg:"#0c4a6e",border:"rgba(59, 130, 246, .35)",glow:"rgba(56, 189, 248, .26)",darkBg:"rgba(56, 189, 248, .22)",darkFg:"#e0f2fe",darkBorder:"rgba(56, 189, 248, .48)",darkGlow:"rgba(14, 165, 233, .35)"},reporter:{icon:"fa-pen-nib",bg:"rgba(196, 181, 253, .18)",fg:"#4c1d95",border:"rgba(167, 139, 250, .35)",glow:"rgba(196, 181, 253, .26)",darkBg:"rgba(167, 139, 250, .24)",darkFg:"#ede9fe",darkBorder:"rgba(196, 181, 253, .48)",darkGlow:"rgba(139, 92, 246, .35)"},"resource-manager":{icon:"fa-box-open",bg:"rgba(134, 239, 172, .18)",fg:"#065f46",border:"rgba(16, 185, 129, .35)",glow:"rgba(134, 239, 172, .26)",darkBg:"rgba(16, 185, 129, .22)",darkFg:"#d1fae5",darkBorder:"rgba(16, 185, 129, .45)",darkGlow:"rgba(5, 150, 105, .32)"},"peace-maker":{icon:"fa-dove",bg:"rgba(253, 164, 175, .18)",fg:"#7f1d1d",border:"rgba(244, 63, 94, .35)",glow:"rgba(253, 164, 175, .28)",darkBg:"rgba(244, 63, 94, .22)",darkFg:"#ffe4e6",darkBorder:"rgba(244, 63, 94, .45)",darkGlow:"rgba(244, 63, 94, .34)"}},n={icon:"fa-id-badge",bg:"rgba(226, 232, 240, .22)",fg:"#111827",border:"rgba(148,163,184,.35)",glow:"rgba(148,163,184,.20)",darkBg:"rgba(148,163,184,.20)",darkFg:"#e2e8f0",darkBorder:"rgba(148,163,184,.45)",darkGlow:"rgba(148,163,184,.30)"};return t[e]||n}function Ffe(r){const e=(r||"").toString().trim().toLowerCase(),t=/science|/.test(e),n=/arts|/.test(e),i=/commerce||/.test(e),s=/vocational|/.test(e);return t?{icon:"fa-atom",bg:"rgba(153, 246, 228, .18)",fg:"#115e59",border:"rgba(45, 212, 191, .35)",glow:"rgba(94, 234, 212, .26)",darkBg:"rgba(45, 212, 191, .22)",darkFg:"#ccfbf1",darkBorder:"rgba(94, 234, 212, .48)",darkGlow:"rgba(20, 184, 166, .32)"}:n?{icon:"fa-palette",bg:"rgba(254, 215, 170, .20)",fg:"#7c2d12",border:"rgba(251, 146, 60, .35)",glow:"rgba(254, 215, 170, .28)",darkBg:"rgba(251, 146, 60, .24)",darkFg:"#ffedd5",darkBorder:"rgba(251, 146, 60, .48)",darkGlow:"rgba(249, 115, 22, .32)"}:i?{icon:"fa-chart-line",bg:"rgba(191, 219, 254, .20)",fg:"#1e3a8a",border:"rgba(99, 102, 241, .35)",glow:"rgba(191, 219, 254, .28)",darkBg:"rgba(99, 102, 241, .24)",darkFg:"#e0e7ff",darkBorder:"rgba(99, 102, 241, .48)",darkGlow:"rgba(79, 70, 229, .32)"}:s?{icon:"fa-tools",bg:"rgba(165, 243, 252, .20)",fg:"#164e63",border:"rgba(34, 211, 238, .35)",glow:"rgba(165, 243, 252, .28)",darkBg:"rgba(34, 211, 238, .22)",darkFg:"#cffafe",darkBorder:"rgba(34, 211, 238, .48)",darkGlow:"rgba(14, 165, 233, .32)"}:{icon:"fa-layer-group",bg:"rgba(241, 245, 249, .22)",fg:"#0f172a",border:"rgba(148,163,184,.35)",glow:"rgba(148,163,184,.18)",darkBg:"rgba(148,163,184,.20)",darkFg:"#e2e8f0",darkBorder:"rgba(148,163,184,.45)",darkGlow:"rgba(148,163,184,.28)"}}function K4(r,e){const t=Vu(e||""),n=(r==null?void 0:r.bg)||"rgba(255,255,255,.85)",i=(r==null?void 0:r.fg)||"#0f172a",s=(r==null?void 0:r.border)||"rgba(0,0,0,.06)",a=(r==null?void 0:r.glow)||"rgba(0,0,0,.05)",o=(r==null?void 0:r.darkBg)||n,A=(r==null?void 0:r.darkFg)||i,l=(r==null?void 0:r.darkBorder)||s,c=(r==null?void 0:r.darkGlow)||a;return`<span class="rk-badge rk-badge--compact"
    style="--rk-badge-bg:${n};
           --rk-badge-fg:${i};
           --rk-badge-border:${s};
           --rk-badge-glow:${a};
           --rk-badge-bg-dark:${o};
           --rk-badge-fg-dark:${A};
           --rk-badge-border-dark:${l};
           --rk-badge-glow-dark:${c};">
           <i class="fas ${(r==null?void 0:r.icon)||"fa-circle"}"></i>${t}
  </span>`}function z4(){try{return typeof window<"u"&&window.matchMedia("(max-width: 480px)").matches?64:72}catch{return 72}}function q4(r,e,t=72){const n=Math.max(0,Math.min(100,Number(r)||0)),i=un!=null&&un.convertToBanglaNumber?un.convertToBanglaNumber(n.toFixed(2)):n.toFixed(2),s=typeof t=="number"?t:72;return`
    <div class="relative flex items-center justify-center" style="width:${s}px;height:${s}px;">
      <div class="absolute inset-0 rounded-full"
           style="background: conic-gradient(${e.solid} ${n}%,
                                             rgba(0,0,0,0.08) ${n}% 100%);
                  filter: drop-shadow(0 6px 16px ${e.shadow});">
      </div>
      <div class="rk-meter-outer absolute inset-[18%] rounded-full bg-white dark:bg-gray-900 flex items-center justify-center">
        <span class="text-sm font-semibold text-gray-800 dark:text-gray-100">${i}%</span>
      </div>
    </div>
  `}function W4(r){const e=Number(r)||0,t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:""};if(t[e])return`${t[e]} `;const n=`${e}`;return`${un!=null&&un.convertToBanglaNumber?un.convertToBanglaNumber(n):n} `}function tO(r){if(!r)return null;if(r instanceof Date)return r.getTime();if(typeof r=="number")return r;if(typeof r=="string"){const e=Date.parse(r);return Number.isNaN(e)?null:e}if(typeof r=="object"){if(typeof r.toDate=="function")try{return r.toDate().getTime()}catch{return null}if(typeof r.seconds=="number")return r.seconds*1e3}return null}let us,Kn,_n;const tu="analysis",Lfe=100,Zt={summaryPage:null,summaryContent:null,summaryFilterGroup:null,graphPage:null,graphFiltersContainer:null,graphDashboardContainer:null,graphDetailContainer:null,printableArea:null},cd={TABLE:"table",CHART:"chart"},Ju={TABLE:"table",CHART:"chart"},Pfe={"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "},ud={topic:{topic_learned_well:{id:"topic_learned_well",label:"  ",marks:10},topic_understood:{id:"topic_understood",label:" ",marks:5},topic_none:{id:"topic_none",label:"    ",marks:-5}},options:{attendance_regular:{id:"attendance_regular",label:"  ",marks:10},homework_done:{id:"homework_done",label:"   ",marks:5}}},Th={FULL_POSITIVE:{id:"full_positive",label:"  "},IMPROVEMENT_NEEDED:{id:"improvement_needed",label:" "}},kC=(()=>{const r=new Map;return Object.values(ud.topic).forEach(e=>{r.set(e.id,{...e,category:"topic",categoryLabel:" "})}),Object.values(ud.options).forEach(e=>{r.set(e.id,{...e,category:"options",categoryLabel:" "})}),r.set(Th.FULL_POSITIVE.id,{...Th.FULL_POSITIVE,category:"summary",categoryLabel:" "}),r.set(Th.IMPROVEMENT_NEEDED.id,{...Th.IMPROVEMENT_NEEDED,category:"summary",categoryLabel:" "}),r})();let zh=null,il=null,Zu=null,rO=null,Io=null;function Nfe(){try{return document.documentElement.classList.contains("dark")}catch{return!1}}function TC(){const r=Nfe();return{tick:r?"#e5e7eb":"#334155",grid:r?"rgba(148,163,184,0.25)":"rgba(148,163,184,0.2)",legend:r?"#f1f5f9":"#1f2937",tooltipTitle:r?"#e5e7eb":"#111827",tooltipBody:r?"#e5e7eb":"#111827",tooltipBg:r?"rgba(17,24,39,0.9)":"rgba(255,255,255,0.95)",border:r?"#334155":"#e5e7eb"}}function Dfe(r){return us=r.managers.stateManager,Kn=r.managers.uiManager,_n=r.utils,Rfe(),FC(),Ufe(),Dx(),window.smartEvaluator||(window.smartEvaluator={}),window.smartEvaluator.components=window.smartEvaluator.components||{},window.smartEvaluator.components.analysis={render:Dx,generateGroupAnalysisPDF:Ux,generateSelectedGroupPDF:Mx,generateGroupWiseFullDetailsPDF:X4,printGroupAnalysis:Ox},{renderSummary:nO,renderGraphs:iO,generateGroupAnalysisPDF:Ux,generateSelectedGroupPDF:Mx,generateGroupWiseFullDetailsPDF:X4,printGroupAnalysis:Ox}}function Rfe(){Zt.summaryPage=document.getElementById("page-group-analysis"),Zt.summaryContent=document.getElementById("groupAnalysisDetails"),Zt.summaryFilterGroup=document.getElementById("analysisGroupSelect"),Zt.printableArea=document.getElementById("printableAnalysisArea"),Zt.graphPage=document.getElementById("page-graph-analysis"),Zt.graphFiltersContainer=document.getElementById("graphAnalysisContent")}function Ufe(){Zt.summaryFilterGroup&&Kn.addListener(Zt.summaryFilterGroup,"change",r=>{ic({groupFilter:r.target.value})}),Zt.summaryContent&&Kn.addListener(Zt.summaryContent,"click",r=>{const e=r.target.closest("[data-summary-action]");if(e){switch(r.preventDefault(),e.dataset.summaryAction){case"print":Ox();break;case"pdf-all":Ux();break;case"pdf-group":e.disabled||Mx();break}return}const t=r.target.closest("[data-summary-eval-view]");if(t){r.preventDefault();const n=t.dataset.analysisValue;n&&ic({summaryEvaluationView:n})}}),Zt.graphFiltersContainer&&(Kn.addListener(Zt.graphFiltersContainer,"click",r=>{const e=r.target.closest("[data-analysis-evaluation]");if(e){const i=e.dataset.analysisValue;ic({evaluationType:i});return}const t=r.target.closest("[data-analysis-view]");if(t){const i=t.dataset.analysisValue;ic({viewMode:i});return}const n=r.target.closest("[data-analysis-criteria-view]");if(n){const i=n.dataset.analysisValue;ic({criteriaView:i})}}),Kn.addListener(Zt.graphFiltersContainer,"change",r=>{switch(r.target.id){case"analysisGraphGroupSelect":ic({groupFilter:r.target.value});break;case"analysisGraphTaskSelect":ic({taskFilter:r.target.value});break;case"analysisFullCriteriaToggle":ic({showFullOnly:r.target.checked});break}})),Zt.graphPage&&Kn.addListener(Zt.graphPage,"click",r=>{const e=r.target.closest("[data-criteria-id]");if(e&&Zt.graphDashboardContainer){const t=e.dataset.criteriaId;if(!t||t===Io)return;Io=t,AO(),lO()}})}function FC(){const r=LC(us.getFilterSection(tu));return us.updateFilters(tu,r),r}function LC(r){const e=r&&typeof r=="object"?r:{};return{groupFilter:e.groupFilter??"all",taskFilter:e.taskFilter??"all",evaluationType:e.evaluationType??"all",viewMode:e.viewMode??cd.TABLE,showFullOnly:!!e.showFullOnly,criteriaView:e.criteriaView??"topic",summaryEvaluationView:e.summaryEvaluationView??Ju.TABLE}}function Dx(){const r=us.getFilterSection(tu),e=i0(r);try{nO(r,e)}catch(t){console.error(" Failed to render summary section:",t),Zt.summaryContent&&(Zt.summaryContent.innerHTML='<div class="card card-body text-rose-600 dark:text-rose-300 p-4">,     </div>')}try{iO(r,e)}catch(t){console.error(" Failed to render graph section:",t),Zt.graphFiltersContainer&&(Zt.graphFiltersContainer.innerHTML+='<div class="card card-body text-rose-600 dark:text-rose-300 p-4 mt-4">,     </div>')}}function ic(r){const t={...{...us.getFilterSection(tu)||{}},...r};us.updateFilters(tu,t),Dx()}function nO(r,e){if(!Zt.summaryPage||!Zt.summaryContent)return;let t=r;!t||typeof t!="object"?t=FC():t=LC(t);let n=e;if(!n)try{n=i0(t)}catch{n=null}Mfe(t,n),Ofe(t,n)}function Mfe(r,e){if(!Zt.summaryFilterGroup)return;const t=e&&e.options&&Array.isArray(e.options.groups)?e.options.groups:[],n=r&&r.groupFilter?r.groupFilter:"all";Zt.summaryFilterGroup.innerHTML=['<option value="all"> </option>',...t.map(i=>`<option value="${i.id}" ${i.id===n?"selected":""}>${i.label}</option>`)].join(""),Zt.summaryFilterGroup.value=n}function Ofe(r,e){if(!Zt.summaryContent)return;const{groupMetrics:t,summary:n}=e,i=e.groupDetails||new Map,s=r.groupFilter,a=r.summaryEvaluationView||Ju.TABLE,o=s&&s!=="all",A=o?i.get(s):null;if(!o||!A){const p=Y4(!1),f=uO(n),y=dO(t,r);Zt.summaryContent.innerHTML=`
      <div class="space-y-6" id="printableAnalysisArea">
        ${p}
        ${f}
        ${y}
      </div>
    `,Rx();return}const l=Y4(!0),c=Qfe(A),u=Hfe(A.metric),h=Vfe(A.members),d=$fe(A.evaluations,a);Zt.summaryContent.innerHTML=`
    <div class="space-y-6" id="printableAnalysisArea">
      ${l}
      ${c}
      ${u}
      ${h}
      ${d}
    </div>
  `,a===Ju.CHART?Gfe(A.evaluations):Rx()}function Y4(r){const e="inline-flex items-center gap-2 rounded-lg bg-blue-600 text-white px-4 py-2 shadow transition hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",t="inline-flex items-center gap-2 rounded-lg border border-gray-200 dark:border-gray-700 px-4 py-2 text-gray-800 dark:text-gray-100 bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition focus:outline-none focus:ring-2 focus:ring-blue-500";return`
    <div class="flex flex-wrap items-center justify-end gap-2">
      <button type="button" class="${t}" data-summary-action="print">
        <i class="fas fa-print"></i>
        Print
      </button>
      <button type="button" class="${t}" data-summary-action="pdf-all">
        <i class="fas fa-file-pdf"></i>
        Export PDF
      </button>
      <button type="button" class="${e}${r?"":" opacity-60 cursor-not-allowed"}" data-summary-action="pdf-group" ${r?"":"disabled"}>
        <i class="fas fa-download"></i>
        Selected Group PDF
      </button>
    </div>
  `}function Qfe(r){var o,A,l;if(!r)return"";const e=r.metric||{},t=e.groupName||"Group",n=Sr(e.studentCount||0),i=Do(e.participationRate||0),s=((A=(o=r.evaluations)==null?void 0:o[0])==null?void 0:A.dateLabel)||"-",a=(l=r.group)!=null&&l.mentor?dn(r.group.mentor):"";return`
    <div class="card card-body flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div>
        <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-50">${t}</h2>
        <p class="text-sm text-gray-700 dark:text-gray-300">: ${n}  : ${i}</p>
        ${a?`<p class="text-sm text-gray-700 dark:text-gray-300">: ${a}</p>`:""}
      </div>
      <div class="text-sm text-gray-700 dark:text-gray-300"> : ${s}</div>
    </div>
  `}function Hfe(r){return r?`
    <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
      ${xc(" ",r.evaluationCount,"bg-blue-50 text-blue-800 dark:bg-blue-900/40 dark:text-blue-100","fa-clipboard-check")}
      ${xc("   (%)",Do(r.averageScore),"bg-emerald-50 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-100","fa-gauge")}
      ${xc(" ",Do(r.participationRate),"bg-indigo-50 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-100","fa-people-group")}
      ${xc(" ",Sr(r.pendingStudents),"bg-amber-50 text-amber-800 dark:bg-amber-900/40 dark:text-amber-100","fa-user-clock")}
    </div>
  `:""}function Vfe(r){return!Array.isArray(r)||!r.length?`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-user-group mr-2"></i>
                  
        </div>
      </div>
    `:`
    <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="card-header flex items-center justify-between">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
      </div>
      <div class="card-body overflow-x-auto">
        <table class="min-w-full text-sm divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
              <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
              <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
              <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
              <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
            ${r.map(t=>{const n=t.evaluationCount>0,i=n?pA(t.avgTaskScore):"-",s=n?pA(t.avgTeamScore):"-",a=n?pA(t.avgAdditionalScore):"-",o=n?pA(t.avgTotalScore):"-",A=t.latestComment?dn(t.latestComment):"-",l=Kfe(t.role),c=Sr(t.evaluationCount||0);return`
        <tr class="border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50/70 dark:hover:bg-gray-800/50 transition">
          <td class="px-4 py-3">
            <div class="font-semibold text-gray-900 dark:text-gray-100">${t.name}</div>
            <div class="mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-700 dark:text-gray-300">
              <span>: ${c}</span>
              ${l?`<span class="inline-flex items-center rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/40 dark:text-blue-100 px-2 py-0.5">${l}</span>`:""}
            </div>
          </td>
          <td class="px-4 py-3 text-gray-800 dark:text-gray-200">${t.roll?dn(t.roll):"-"}</td>
          <td class="px-4 py-3 text-gray-800 dark:text-gray-200">${t.academicGroup||"-"}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${s}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${i}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${a}</td>
          <td class="px-4 py-3 text-sm text-gray-800 dark:text-gray-200">${A}</td>
          <td class="px-4 py-3 text-center font-semibold text-indigo-700 dark:text-indigo-300">${o}</td>
        </tr>
      `}).join("")}
          </tbody>
        </table>
      </div>
    </div>
  `}function $fe(r,e){if(!(Array.isArray(r)&&r.length>0))return`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-chart-bar mr-2"></i>
                 
        </div>
      </div>
    `;const n=[Ju.TABLE,Ju.CHART].map(s=>xb(s,s===Ju.TABLE?" ":"  ",e===s,"data-summary-eval-view")).join(""),i=e===Ju.CHART?'<div class="h-80"><canvas id="summaryEvaluationChart"></canvas></div>':jfe(r);return`
    <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
        <div class="flex flex-wrap gap-2">${n}</div>
      </div>
      <div class="card-body space-y-4">
        ${i}
      </div>
    </div>
  `}function jfe(r){return`
    <div class="overflow-x-auto">
      <table class="min-w-full text-sm divide-y divide-gray-200 dark:divide-gray-700">
        <thead class="bg-gray-50 dark:bg-gray-800">
          <tr>
            <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
            <th class="px-4 py-3 text-left font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"></th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> </th>
            <th class="px-4 py-3 text-center font-semibold uppercase text-gray-700 dark:text-gray-300"> %</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
          ${r.map(t=>{const n=t.assessedCount+t.pendingCount;return`
        <tr class="border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50/70 dark:hover:bg-gray-800/50 transition">
          <td class="px-4 py-3 text-gray-900 dark:text-gray-100 font-semibold">${t.taskName}</td>
          <td class="px-4 py-3 text-gray-800 dark:text-gray-200">${t.dateLabel||"-"}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Sr(t.assessedCount)} / ${Sr(n)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${pA(t.avgTaskScore)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${pA(t.avgTeamScore)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${pA(t.avgAdditionalScore)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${pA(t.avgTotalScore)}</td>
          <td class="px-4 py-3 text-center font-semibold text-indigo-700 dark:text-indigo-300">${Do(t.averagePercentage)}</td>
        </tr>
      `}).join("")}
        </tbody>
      </table>
    </div>
  `}function Gfe(r){if(!Array.isArray(r)||!r.length){Rx();return}const e=document.getElementById("summaryEvaluationChart");if(!e)return;Zu&&(Zu.destroy(),Zu=null);const t=r.map(A=>A.taskName),n=r.map(A=>A.avgTaskScore||0),i=r.map(A=>A.avgTeamScore||0),s=r.map(A=>A.avgAdditionalScore||0),a=r.map(A=>A.avgTotalScore||0),o=TC();Zu=new Chart(e.getContext("2d"),{type:"bar",data:{labels:t,datasets:[{label:"",data:n,backgroundColor:"rgba(99, 102, 241, 0.85)"},{label:"",data:i,backgroundColor:"rgba(16, 185, 129, 0.85)"},{label:"",data:s,backgroundColor:"rgba(251, 191, 36, 0.9)"},{label:"",data:a,backgroundColor:"rgba(59, 130, 246, 0.9)"}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{stacked:!1,ticks:{color:o.tick},grid:{color:o.grid}},y:{beginAtZero:!0,ticks:{color:o.tick,callback:A=>pA(A)},grid:{color:o.grid}}},plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,color:o.legend}},tooltip:{backgroundColor:o.tooltipBg,titleColor:o.tooltipTitle,bodyColor:o.tooltipBody,callbacks:{label:A=>`${A.dataset.label}: ${pA(A.parsed.y)}`}}}}})}function Rx(){Zu&&(Zu.destroy(),Zu=null)}function Kfe(r){return r?Pfe[r]||dn(r):""}function iO(r,e){if(!Zt.graphPage||!Zt.graphFiltersContainer)return;let t=r;!t||typeof t!="object"?t=FC():t=LC(t);let n=e;if(!n)try{n=i0(t)}catch{n=null}n||(n={groupMetrics:[],summary:{},chartData:{bar:null,pie:null},criteriaContext:null,selectedGroupDetail:null,groupDetails:new Map,options:{groups:[],tasks:[]}}),zfe(t,n),qfe(t,n)}function zfe(r,e){const t=r||{},n=t.groupFilter||"all",i=t.taskFilter||"all",s=t.viewMode||cd.TABLE,a=t.evaluationType||"all",o=t.criteriaView||"topic",A=!!t.showFullOnly,l=(e==null?void 0:e.options)||{},c=Array.isArray(l.groups)?l.groups:[],u=Array.isArray(l.tasks)?l.tasks:[],h=(e==null?void 0:e.summary)||{},d=[`<option value="all"${n==="all"?" selected":""}> </option>`,...c.map(M=>`<option value="${M.id}"${M.id===n?" selected":""}>${M.label}</option>`)].join(""),p=[`<option value="all"${i==="all"?" selected":""}> </option>`,...u.map(M=>`<option value="${M.id}"${M.id===i?" selected":""}>${M.label}</option>`)].join(""),f=Object.values(cd).map(M=>xb(M,M===cd.TABLE?" ":" ",s===M,"data-analysis-view")).join(""),y=["all","mcq","regular"].map(M=>xb(M,M==="all"?" ":M==="mcq"?"MCQ ":" ",a===M,"data-analysis-evaluation")).join(""),b=["topic","options","summary"].map(M=>xb(M,M==="topic"?" ":M==="options"?" ":"",o===M,"data-analysis-criteria-view")).join(""),B=Sr(h.groupsInView??0),S=Sr(h.totalGroups??c.length),C=Do(h.participationRate??0),P=h.latestEvaluation||"-";Zt.graphFiltersContainer.innerHTML=`
    <div class="space-y-6">
      <div class="grid gap-4 lg:grid-cols-4">
        <div>
          <label class="label text-gray-900 dark:text-gray-100" for="analysisGraphGroupSelect"> </label>
          <select id="analysisGraphGroupSelect" class="form-select bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-200 dark:border-gray-700">
            ${d}
          </select>
        </div>
        <div>
          <label class="label text-gray-900 dark:text-gray-100" for="analysisGraphTaskSelect"> </label>
          <select id="analysisGraphTaskSelect" class="form-select bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 border border-gray-200 dark:border-gray-700">
            ${p}
          </select>
        </div>
        <div>
          <label class="label text-gray-900 dark:text-gray-100"> </label>
          <div class="flex flex-wrap gap-2" id="analysisGraphEvaluationButtons">
            ${y}
          </div>
        </div>
        <div>
          <label class="label text-gray-900 dark:text-gray-100"> </label>
          <div class="flex flex-wrap gap-2" id="analysisCriteriaViewButtons">
            ${b}
          </div>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
        <div class="flex flex-wrap gap-2" id="analysisGraphViewButtons">
          ${f}
        </div>
        <label class="inline-flex items-center gap-2 text-sm text-gray-800 dark:text-gray-200">
          <input type="checkbox" class="form-checkbox" id="analysisFullCriteriaToggle" ${A?"checked":""}>
              
        </label>
        <div class="text-sm text-gray-800 dark:text-gray-200">
           : ${B} / ${S}  : ${C}   : ${P}
        </div>
      </div>
    </div>
  `}function qfe(r,e){const{groupMetrics:t,chartData:n,selectedGroupDetail:i,summary:s,criteriaContext:a}=e,o=sO(a,r.criteriaView),A=uO(s),l=Zfe(a,r,o),c=r.viewMode===cd.TABLE?dO(t,r):ige(n),u=`
    <div class="graph-detail-container space-y-6">
      ${i?age(i):""}
      ${ege()}
    </div>
  `,h=`
    <div class="space-y-6">
      ${A}
      ${c}
      ${l}
      ${u}
    </div>
  `;Zt.graphPage&&(Zt.graphDashboardContainer||(Zt.graphDashboardContainer=document.createElement("div"),Zt.graphDashboardContainer.className="graph-dashboard-container space-y-6",Zt.graphPage.appendChild(Zt.graphDashboardContainer)),Zt.graphDashboardContainer.innerHTML=h,Zt.graphDetailContainer=Zt.graphDashboardContainer.querySelector(".graph-detail-container"),AO(),lO(),r.viewMode===cd.CHART?sge(n):hO())}function xb(r,e,t,n){return`<button type="button" class="px-4 py-2 rounded-full border text-sm transition-colors ${t?"bg-blue-600 text-white border-blue-600 shadow":"bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800"}" ${n?`${n}=""`:""} data-analysis-value="${r}">${e}</button>`}function i0(r){const e=us.get("groups")||[],t=us.get("students")||[],n=us.get("tasks")||[],i=us.get("evaluations")||[],s=new Map(n.map(C=>[C.id,C])),a=new Map(e.map(C=>[C.id,C])),o=new Map(t.map(C=>[C.id,C])),A=new Map;t.forEach(C=>{A.has(C.groupId)||A.set(C.groupId,[]),A.get(C.groupId).push(C)});const l=new Map;e.forEach(C=>{var M;const P=((M=A.get(C.id))==null?void 0:M.length)||0;l.set(C.id,{groupId:C.id,groupName:dn(C.name),studentCount:P,evaluationDetails:[]})});const c=new Map,u=new Map;i.forEach(C=>{var P;try{const M=l.get(C.groupId);if(!M)return;const L=s.get(C.taskId);L&&c.set(L.id,{id:L.id,label:dn(L.name)});const _=dge(L)?"mcq":"regular",v=C.scores||{},T=new Set,E=new Set,x=new Set,F={learnedWell:0,understood:0,notYet:0},k={attendance:0,homework:0},Z=(((P=M.evaluationDetails)==null?void 0:P.length)||0)+1,ue={evaluationId:C.id,taskId:C.taskId,taskName:Age(L,C,Z),type:_,dateMs:oge(C.taskDate||C.updatedAt||C.evaluationDate),dateLabel:"",assessedCount:0,pendingCount:0,averagePercentage:0,participationRate:0,topicCounts:F,optionCounts:k,fullPositiveCount:0,improvementCount:0,fullPositiveAll:!1,participantIds:[],fullPositiveStudentIds:[],improvementStudentIds:[],weightedScoreSum:0,weight:0,studentRecords:[]};Object.entries(v).forEach(([ne,j])=>{try{T.add(ne);const G=(j==null?void 0:j.additionalCriteria)||{},pe=G.topic||ud.topic.topic_none.id,q=pe===ud.topic.topic_learned_well.id?"learnedWell":pe===ud.topic.topic_understood.id?"understood":"notYet";F[q]=(F[q]||0)+1;const N=!!G.attendance,Q=!!G.homework;N&&(k.attendance+=1),Q&&(k.homework+=1),q==="learnedWell"&&N&&Q&&E.add(ne),(q==="notYet"||!N||!Q)&&x.add(ne);const Ae=parseFloat(C.maxPossibleScore)||uge(L)||Lfe,te=parseFloat(j.totalScore)||0,se=Ae>0?te/Ae*100:0,de=parseFloat(j==null?void 0:j.taskScore)||0,ve=parseFloat(j==null?void 0:j.teamScore)||0,xe=parseFloat(j==null?void 0:j.additionalScore)||0,Oe=parseFloat(j==null?void 0:j.mcqScore)||0,Ve=typeof(j==null?void 0:j.comments)=="string"?j.comments.trim():"";ue.weightedScoreSum+=se,ue.weight+=1,ue.studentRecords.push({studentId:ne,topicId:pe,topicKey:q,attendance:N,homework:Q,taskScore:de,teamScore:ve,additionalScore:xe,mcqScore:Oe,totalScore:te,maxScore:Ae,percentage:se,evaluationId:C.id,taskId:ue.taskId,taskName:ue.taskName,dateMs:ue.dateMs,dateLabel:ue.dateLabel,comments:dn(Ve)})}catch(G){console.warn(` Skipping score record for student ${ne} in evaluation ${C.id} due to error:`,G,j)}}),ue.assessedCount=T.size,ue.pendingCount=Math.max(M.studentCount-ue.assessedCount,0),ue.averagePercentage=ue.weight>0?ue.weightedScoreSum/ue.weight:0,ue.participationRate=M.studentCount>0?Math.min(100,ue.assessedCount/M.studentCount*100):0,ue.fullPositiveCount=E.size,ue.improvementCount=x.size,ue.fullPositiveAll=ue.assessedCount>0&&ue.fullPositiveCount===ue.assessedCount,ue.dateLabel=ue.dateMs?fO(ue.dateMs):"",ue.participantIds=Array.from(T),ue.fullPositiveStudentIds=Array.from(E),ue.improvementStudentIds=Array.from(x),M.evaluationDetails.push(ue)}catch(M){console.error(` Skipping evaluation ${C.id} due to processing error:`,M,C)}});const h=r.groupFilter,d=r.taskFilter,p=r.evaluationType,f=[];let y=null;l.forEach(C=>{if(h!=="all"&&C.groupId!==h)return;const P=C.evaluationDetails.filter(te=>{const se=d==="all"||te.taskId===d,de=p==="all"||te.type===p;return se&&de});if(!P.length){const te=(A.get(C.groupId)||[]).map(se=>({studentId:se.id,name:dn(se.name||se.id),roll:se.roll??"",role:se.role||"",academicGroup:dn(se.academicGroup||""),avgTaskScore:0,avgTeamScore:0,avgAdditionalScore:0,avgMcqScore:0,avgTotalScore:0,totalScore:0,evaluationCount:0,latestComment:""}));u.set(C.groupId,{metric:{groupId:C.groupId,groupName:C.groupName,studentCount:C.studentCount,evaluationCount:0,mcqEvaluationCount:0,assessedCount:0,assessmentEntries:0,pendingStudents:C.studentCount,averageScore:0,participationRate:0,scoreWeight:0,uniqueParticipantsCount:0,topicCounts:{learnedWell:0,understood:0,notYet:0},optionCounts:{attendance:0,homework:0},fullCriteriaStudents:0,improvementCount:0,fullCriteriaEvaluations:[],evaluationDetails:[],latestEvaluationMs:null},group:a.get(C.groupId)||null,members:te,evaluations:[]});return}const M=P.length,L=P.filter(te=>te.type==="mcq").length,_=P.reduce((te,se)=>te+se.assessedCount,0),v=P.reduce((te,se)=>te+se.weightedScoreSum,0),T=P.reduce((te,se)=>te+se.weight,0),E={learnedWell:0,understood:0,notYet:0},x={attendance:0,homework:0},F=new Set,k=new Set,Z=new Set,ue=[];P.forEach(te=>{E.learnedWell+=te.topicCounts.learnedWell,E.understood+=te.topicCounts.understood,E.notYet+=te.topicCounts.notYet,x.attendance+=te.optionCounts.attendance,x.homework+=te.optionCounts.homework,te.participantIds.forEach(se=>F.add(se)),te.fullPositiveStudentIds.forEach(se=>k.add(se)),te.improvementStudentIds.forEach(se=>Z.add(se)),te.fullPositiveAll&&ue.push(te.taskName)});const ne=T>0?v/T:0,j=F.size,G=Math.max(C.studentCount-j,0),pe=C.studentCount>0?Math.min(100,j/C.studentCount*100):0,q=P.reduce((te,se)=>se.dateMs&&se.dateMs>te?se.dateMs:te,-1/0),N={groupId:C.groupId,groupName:C.groupName,studentCount:C.studentCount,evaluationCount:M,mcqEvaluationCount:L,assessedCount:j,assessmentEntries:_,pendingStudents:G,averageScore:ne,participationRate:pe,scoreWeight:T,uniqueParticipantsCount:j,topicCounts:E,optionCounts:x,fullCriteriaStudents:k.size,improvementCount:Z.size,fullCriteriaEvaluations:ue,evaluationDetails:P.sort((te,se)=>(se.dateMs||0)-(te.dateMs||0)),latestEvaluationMs:q>0?q:null},Q=A.get(C.groupId)||[],V=new Map;Q.forEach(te=>{V.set(te.id,{studentId:te.id,name:dn(te.name||te.id),roll:te.roll??"",role:te.role||"",academicGroup:dn(te.academicGroup||""),totalTaskScore:0,totalTeamScore:0,totalAdditionalScore:0,totalMcqScore:0,totalScore:0,evaluationCount:0,latestComment:"",latestCommentDate:-1/0})}),P.forEach(te=>{te.studentRecords.forEach(se=>{const de=se.studentId;if(!de)return;if(!V.has(de)){const xe=o.get(de)||{};V.set(de,{studentId:de,name:dn(xe.name||de),roll:xe.roll??"",role:xe.role||"",academicGroup:dn(xe.academicGroup||""),totalTaskScore:0,totalTeamScore:0,totalAdditionalScore:0,totalMcqScore:0,totalScore:0,evaluationCount:0,latestComment:"",latestCommentDate:-1/0})}const ve=V.get(de);if(ve.totalTaskScore+=se.taskScore||0,ve.totalTeamScore+=se.teamScore||0,ve.totalAdditionalScore+=se.additionalScore||0,ve.totalMcqScore+=se.mcqScore||0,ve.totalScore+=se.totalScore||0,ve.evaluationCount+=1,se.comments){const xe=se.dateMs||0;xe>=ve.latestCommentDate&&(ve.latestComment=se.comments,ve.latestCommentDate=xe)}})});const X=Array.from(V.values()).map(te=>{const se=te.evaluationCount||0,de=se||1;return{studentId:te.studentId,name:te.name,roll:te.roll,role:te.role,academicGroup:te.academicGroup,avgTaskScore:se?te.totalTaskScore/de:0,avgTeamScore:se?te.totalTeamScore/de:0,avgAdditionalScore:se?te.totalAdditionalScore/de:0,avgMcqScore:se?te.totalMcqScore/de:0,avgTotalScore:se?te.totalScore/de:0,totalScore:te.totalScore,evaluationCount:se,latestComment:te.latestComment}}).sort((te,se)=>se.evaluationCount!==te.evaluationCount?se.evaluationCount-te.evaluationCount:te.name.localeCompare(se.name)),Ae=P.map(te=>{const se=te.studentRecords.length||0,de=te.studentRecords.reduce((xe,Oe)=>(xe.task+=Oe.taskScore||0,xe.team+=Oe.teamScore||0,xe.additional+=Oe.additionalScore||0,xe.mcq+=Oe.mcqScore||0,xe.total+=Oe.totalScore||0,xe),{task:0,team:0,additional:0,mcq:0,total:0}),ve=se||1;return{evaluationId:te.evaluationId,taskName:te.taskName,dateLabel:te.dateLabel,dateMs:te.dateMs||null,assessedCount:te.assessedCount,pendingCount:te.pendingCount,averagePercentage:te.averagePercentage,avgTaskScore:se?de.task/ve:0,avgTeamScore:se?de.team/ve:0,avgAdditionalScore:se?de.additional/ve:0,avgMcqScore:se?de.mcq/ve:0,avgTotalScore:se?de.total/ve:0}}).sort((te,se)=>(se.dateMs||0)-(te.dateMs||0));u.set(C.groupId,{metric:N,group:a.get(C.groupId)||null,members:X,evaluations:Ae}),!(r.showFullOnly&&N.fullCriteriaEvaluations.length===0)&&(f.push(N),r.groupFilter!=="all"&&C.groupId===r.groupFilter&&(y=N))});const b=Wfe(f,h,l.size),B=Yfe(f,r),S=Xfe(f,o,a);return rO=S,S&&Io&&!S.criteriaBuckets.has(Io)&&(Io=null),{groupMetrics:f,summary:b,chartData:B,criteriaContext:S,selectedGroupDetail:y,groupDetails:u,options:{groups:e.map(C=>({id:C.id,label:dn(C.name)})),tasks:Array.from(c.values())}}}function Wfe(r,e,t){if(!r.length)return{groupsInView:0,totalGroups:e==="all"?t:1,totalEvaluations:0,totalMcqEvaluations:0,averageScore:0,pendingStudents:0,improvementStudents:0,participationRate:0,latestEvaluation:null,fullCriteriaGroups:0};const n=r.reduce((f,y)=>f+(y.evaluationCount||0),0),i=r.reduce((f,y)=>f+(y.mcqEvaluationCount||0),0),s=r.reduce((f,y)=>f+(y.studentCount||0),0),a=r.reduce((f,y)=>f+(y.uniqueParticipantsCount||0),0),o=Math.max(s-a,0),A=r.reduce((f,y)=>f+(y.improvementCount||0),0),l=r.reduce((f,y)=>f+(y.scoreWeight||0),0),c=r.reduce((f,y)=>f+(y.averageScore||0)*(y.scoreWeight||0),0),u=l>0?c/l:0,h=s>0?Math.min(100,a/s*100):0,d=r.reduce((f,y)=>y.latestEvaluationMs&&y.latestEvaluationMs>f?y.latestEvaluationMs:f,-1/0),p=r.filter(f=>f.fullCriteriaEvaluations.length>0).length;return{groupsInView:r.length,totalGroups:e==="all"?t:1,totalEvaluations:n,totalMcqEvaluations:i,averageScore:u,pendingStudents:o,improvementStudents:A,participationRate:h,latestEvaluation:d>0?fO(d):null,fullCriteriaGroups:p}}function Yfe(r,e){if(!r.length)return{bar:null,pie:null};const t=TC(),n=r.map(c=>c.groupName),i=r.map(c=>c.topicCounts.learnedWell),s=r.map(c=>c.topicCounts.understood),a=r.map(c=>c.topicCounts.notYet),o=r.map(c=>c.pendingStudents),A={labels:n,datasets:[{label:"  ",data:i,backgroundColor:"rgba(16, 185, 129, 0.85)",borderRadius:6},{label:" ",data:s,backgroundColor:"rgba(99, 102, 241, 0.85)",borderRadius:6},{label:"    ",data:a,backgroundColor:"rgba(251, 191, 36, 0.9)",borderRadius:6},{label:" ",data:o,type:"line",borderColor:"rgba(239, 68, 68, 0.95)",backgroundColor:"rgba(239, 68, 68, 0.25)",tension:.35,borderWidth:2,fill:!0,yAxisID:"y1"}],options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{beginAtZero:!0,ticks:{precision:0,color:t.tick,callback:c=>Sr(c)},grid:{color:t.grid}},y1:{beginAtZero:!0,position:"right",grid:{drawOnChartArea:!1,color:t.grid},ticks:{precision:0,color:t.tick,callback:c=>Sr(c)}},x:{ticks:{color:t.tick},grid:{color:t.grid}}},plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,color:t.legend}},tooltip:{backgroundColor:t.tooltipBg,titleColor:t.tooltipTitle,bodyColor:t.tooltipBody}}}};let l=null;if(e.groupFilter!=="all"&&r.length===1){const c=r[0];c.topicCounts.learnedWell+c.topicCounts.understood+c.topicCounts.notYet>0&&(l={labels:["  "," ","    "],data:[c.topicCounts.learnedWell,c.topicCounts.understood,c.topicCounts.notYet],colors:["#10b981","#6366f1","#f59e0b"],title:`${c.groupName} -  `})}return{bar:A,pie:l}}function Xfe(r,e,t){if(!Array.isArray(r)||!r.length)return null;const n=new Map,i={topic:[],options:[],summary:[]},s=new Set,a=l=>{const c=kC.get(l);if(!c)return null;let u=n.get(l);return u||(u={id:l,label:dn(c.label),category:c.category,categoryLabel:c.categoryLabel,students:new Map,count:0,totalEntries:0},n.set(l,u),Array.isArray(i[c.category])&&i[c.category].push(u)),u},o=(l,c,u)=>{const h=a(l);if(!h)return;const d=h.students.get(c.studentId)||{studentId:c.studentId,name:c.name,groupId:c.groupId,groupName:c.groupName,records:[]};d.records.push(u),h.students.set(c.studentId,d)};r.forEach(l=>{const c=dn(l.groupName);(l.evaluationDetails||[]).forEach(u=>{Array.isArray(u.studentRecords)&&u.studentRecords.forEach(h=>{const d=h.studentId;if(!d)return;s.add(d);const p=e.get(d)||{},f=p.groupId||l.groupId,y=t.get(f),b={studentId:d,name:dn(p.name||h.displayName||d),groupId:f,groupName:dn((y==null?void 0:y.name)||c)},B={evaluationId:h.evaluationId,taskId:h.taskId,taskName:dn(h.taskName),dateMs:h.dateMs,dateLabel:h.dateLabel||"",topicId:h.topicId,topicKey:h.topicKey,attendance:!!h.attendance,homework:!!h.homework,percentage:h.percentage,totalScore:h.totalScore,maxScore:h.maxScore,groupId:l.groupId,groupName:c};h.topicId&&o(h.topicId,b,B),h.attendance&&o(ud.options.attendance_regular.id,b,B),h.homework&&o(ud.options.homework_done.id,b,B);const S=h.topicKey==="learnedWell"&&h.attendance&&h.homework,C=h.topicKey==="notYet"||!h.attendance||!h.homework;S&&o(Th.FULL_POSITIVE.id,b,B),C&&o(Th.IMPROVEMENT_NEEDED.id,b,B)})})}),n.forEach(l=>{l.count=l.students.size,l.totalEntries=Array.from(l.students.values()).reduce((c,u)=>c+u.records.length,0)});const A=l=>l.filter(c=>c.count>0).sort((c,u)=>u.count!==c.count?u.count-c.count:c.label.localeCompare(u.label));return i.topic=A(i.topic),i.options=A(i.options),i.summary=A(i.summary),!i.topic.length&&!i.options.length&&!i.summary.length?null:{criteriaBuckets:n,bucketsByCategory:i,totalUniqueStudents:s.size}}function sO(r,e){var n;if(!r)return[];const t=e==="topic"?"topic":e==="options"?"options":"summary";return Array.isArray((n=r.bucketsByCategory)==null?void 0:n[t])?r.bucketsByCategory[t]:[]}function aO(r){if(!r||!r.length)return Io=null,null;if(Io){const e=r.find(t=>t.id===Io);if(e)return e}return Io=r[0].id,r[0]}function Jfe(r){return r==="topic"?" ":r==="options"?" ":r==="summary"?"":""}function oO(r,e){const t=kC.get(r),n=t?t.label:e||"";return dn(n)}function Zfe(r,e,t){if(!r)return"";if(!t||!t.length)return Io=null,`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-user-check mr-2"></i>
                 
        </div>
      </div>
    `;const n=aO(t),i=r.totalUniqueStudents||0,s="criteria-card block w-full rounded-2xl border transition-colors p-4 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900",a="border-blue-600 bg-blue-600 text-white shadow-lg",o="border-gray-200 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 hover:border-blue-400 hover:bg-blue-50/60 dark:hover:bg-gray-800 dark:border-gray-700",A=t.map(c=>{const u=n&&c.id===n.id,h=i>0?c.count/i*100:0,d=u?"text-white/90":"text-gray-700 dark:text-gray-300";return`
        <button
          type="button"
          class="${s} ${u?a:o}"
          data-criteria-id="${c.id}"
          data-base-class="${s}"
          data-active-class="${a}"
          data-inactive-class="${o}"
        >
          <span class="text-xs font-semibold uppercase tracking-wide ${d}">${Jfe(c.category)}</span>
          <div class="mt-2 flex items-baseline justify-between gap-2">
            <span class="text-lg font-semibold">${oO(c.id,c.label)}</span>
            <span class="text-3xl font-bold">${Sr(c.count)}</span>
          </div>
          <div class="mt-1 flex items-center justify-between text-sm ${d}">
            <span>${Sr(c.totalEntries)} </span>
            <span>${Do(h||0)}</span>
          </div>
        </button>
      `}).join("");return`
    <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
        <span class="text-xs font-semibold uppercase tracking-wide text-blue-700 dark:text-blue-300">${e.criteriaView==="topic"?" ":e.criteriaView==="options"?" ":""}</span>
      </div>
      <div class="card-body">
        <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-${Math.min(t.length||1,4)}" data-criteria-grid>
          ${A}
        </div>
      </div>
    </div>
  `}function AO(){if(!Zt.graphDashboardContainer)return;Zt.graphDashboardContainer.querySelectorAll("[data-criteria-id]").forEach(e=>{const t=e.dataset.baseClass||"",n=e.dataset.activeClass||"",i=e.dataset.inactiveClass||"",s=e.dataset.criteriaId===Io;e.className=`${t} ${s?n:i}`.trim()})}function ege(r,e){return'<div class="space-y-4" data-criteria-detail></div>'}function lO(){if(!Zt.graphDetailContainer)return;const r=Zt.graphDetailContainer.querySelector("[data-criteria-detail]");if(!r)return;const e=us.getFilterSection(tu),t=sO(rO,e.criteriaView),n=aO(t);r.innerHTML=n?tge(n):cO()}function cO(){return`
    <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="placeholder-content text-gray-800 dark:text-gray-200">
        <i class="fas fa-users mr-2"></i>
                
      </div>
    </div>
  `}function tge(r){if(!r||!r.students.size)return cO();const e=Array.from(r.students.values()).sort((t,n)=>n.records.length!==t.records.length?n.records.length-t.records.length:t.name.localeCompare(n.name)).map(t=>{const n=[...t.records].sort((s,a)=>(a.dateMs||0)-(s.dateMs||0)),i=n.map(s=>rge(s)).join("");return`
        <div class="rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4 space-y-3">
          <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2">
            <div>
              <h5 class="text-lg font-semibold text-gray-900 dark:text-gray-50">${t.name}</h5>
              <p class="text-sm text-gray-700 dark:text-gray-300">${t.groupName||"  "}</p>
            </div>
            <div class="text-sm text-gray-700 dark:text-gray-300">
              <span class="inline-flex items-center gap-1 rounded-full bg-blue-100 dark:bg-blue-900/40 px-3 py-1 text-blue-800 dark:text-blue-100 font-medium">
                ${Sr(n.length)} 
              </span>
            </div>
          </div>
          <div class="space-y-2">
            ${i}
          </div>
        </div>
      `}).join("");return`
    <div class="space-y-4">
      <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
          <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-50">${oO(r.id,r.label)}</h4>
          <span class="text-sm text-gray-700 dark:text-gray-300"> : ${Sr(r.count)}</span>
        </div>
        <div class="card-body space-y-4">
          ${e}
        </div>
      </div>
    </div>
  `}function rge(r){const e=nge(r.topicId)||" ",t=r.attendance?"":"",n=r.attendance?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-100":"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-100",i=r.homework?" ":" ",s=r.homework?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-100":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-100";return`
    <div class="rounded-xl border border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 p-3 space-y-2">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <div>
          <p class="text-sm font-semibold text-gray-900 dark:text-gray-100">${r.taskName}</p>
          <p class="text-xs text-gray-700 dark:text-gray-300">${r.dateLabel||" "}  ${r.groupName}</p>
        </div>
        <div class="text-sm font-semibold text-indigo-700 dark:text-indigo-300">
          ${Do(r.percentage)}
        </div>
      </div>
      <div class="flex flex-wrap gap-2 text-xs">
        <span class="inline-flex items-center rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/30 dark:text-sky-100 px-3 py-1 font-medium">${e}</span>
        <span class="inline-flex items-center rounded-full px-3 py-1 font-medium ${n}">${t}</span>
        <span class="inline-flex items-center rounded-full px-3 py-1 font-medium ${s}">${i}</span>
      </div>
    </div>
  `}function nge(r){const e=kC.get(r);return e?dn(e.label):""}function uO(r){return`
    <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
      ${xc(" ",r.totalEvaluations,"bg-blue-50 text-blue-800 dark:bg-blue-900/40 dark:text-blue-100","fa-clipboard-list")}
      ${xc("MCQ ",r.totalMcqEvaluations,"bg-purple-50 text-purple-800 dark:bg-purple-900/40 dark:text-purple-100","fa-brain")}
      ${xc("  (%)",Do(r.averageScore),"bg-emerald-50 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-100","fa-gauge")}
      ${xc(" ",r.pendingStudents,"bg-rose-50 text-rose-800 dark:bg-rose-900/40 dark:text-rose-100","fa-user-clock")}
    </div>
  `}function xc(r,e,t,n){const i=typeof e=="string"?e:Sr(e);return`
    <div class="rounded-2xl border ${t.includes("dark:")?"border-transparent":"border-gray-100"} ${t} p-4 shadow-sm backdrop-blur">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm font-medium opacity-90">${r}</div>
          <div class="mt-2 text-2xl font-semibold">${i}</div>
        </div>
        <div class="text-3xl opacity-70"><i class="fas ${n}"></i></div>
      </div>
    </div>
  `}function dO(r,e){if(!r.length)return`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-info-circle mr-2"></i>
                
        </div>
      </div>
    `;const t=[""," "," (/MCQ)","","  (%)","  (%)"," "," "," ","  "],n=r.map(i=>`
        <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50/70 dark:hover:bg-gray-800/50 transition">
          <td class="px-4 py-3 font-semibold text-gray-900 dark:text-gray-100">${i.groupName}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Sr(i.studentCount)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Sr(i.evaluationCount)} / ${Sr(i.mcqEvaluationCount)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Sr(i.uniqueParticipantsCount)}</td>
          <td class="px-4 py-3 text-center ${cge(i.averageScore)} font-semibold">${Do(i.averageScore)}</td>
          <td class="px-4 py-3 text-center text-indigo-700 dark:text-indigo-300 font-semibold">${Do(i.participationRate)}</td>
          <td class="px-4 py-3 text-center text-gray-900 dark:text-gray-100">${Sr(i.pendingStudents)}</td>
          <td class="px-4 py-3 text-center text-emerald-700 dark:text-emerald-300 font-semibold">${Sr(i.fullCriteriaStudents)}</td>
          <td class="px-4 py-3 text-center ${i.improvementCount>0?"text-rose-600 dark:text-rose-300 font-semibold":"text-gray-800 dark:text-gray-200"}">${Sr(i.improvementCount)}</td>
          <td class="px-4 py-3 text-sm text-gray-800 dark:text-gray-200">${i.fullCriteriaEvaluations.map((s,a)=>{const o=typeof s=="string"&&s.trim().length?s.trim():typeof s=="number"?String(s):"",A=dn(o),l=A&&A.length?A:o,c=l&&l.length?l.length>32?`${l.slice(0,30)}`:l:` ${Sr(a+1)}`;return`<span class="inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-100 rounded-full mr-1 mb-1 whitespace-nowrap" title="${lge(l||c)}">${c}</span>`}).join("")||'<span class="text-gray-500 dark:text-gray-400"></span>'}</td>
        </tr>
      `).join("");return`
    <div class="card overflow-hidden bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
        <p class="text-sm text-gray-800 dark:text-gray-200">
           : ${e.viewMode===cd.TABLE?"":""}   : ${Sr(r.length)}
        </p>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm">
          <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
              ${t.map(i=>`<th scope="col" class="px-4 py-3 text-left font-semibold uppercase tracking-wide text-gray-700 dark:text-gray-300">${i}</th>`).join("")}
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-100 dark:divide-gray-800">
            ${n}
          </tbody>
        </table>
      </div>
    </div>
  `}function ige(r){if(!r.bar)return`
      <div class="card card-body bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="placeholder-content text-gray-800 dark:text-gray-200">
          <i class="fas fa-chart-column mr-2"></i>
               
        </div>
      </div>
    `;const e=r.pie?`
        <div class="card bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
          <div class="card-header flex items-center justify-between">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">${r.pie.title}</h3>
          </div>
          <div class="card-body">
            <div class="h-80">
              <canvas id="analysisPieChart"></canvas>
            </div>
          </div>
        </div>
      `:"";return`
    <div class="grid gap-6 ${r.pie?"lg:grid-cols-3":"lg:grid-cols-1"}">
      <div class="card lg:col-span-2 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
        <div class="card-header flex items-center justify-between">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50">  </h3>
        </div>
        <div class="card-body">
          <div class="h-[420px]">
            <canvas id="analysisBarChart"></canvas>
          </div>
        </div>
      </div>
      ${e}
    </div>
  `}function sge(r){var i,s,a,o,A,l,c,u,h,d,p,f,y,b,B,S,C,P,M,L,_,v,T,E,x,F,k,Z,ue,ne,j,G,pe;if(!r.bar){hO();return}const e=TC(),t=document.getElementById("analysisBarChart");t&&(zh&&zh.destroy(),zh=new Chart(t.getContext("2d"),{type:"bar",data:{labels:r.bar.labels,datasets:r.bar.datasets},options:{...r.bar.options,scales:{...((i=r.bar.options)==null?void 0:i.scales)||{},x:{...((a=(s=r.bar.options)==null?void 0:s.scales)==null?void 0:a.x)||{},ticks:{...((l=(A=(o=r.bar.options)==null?void 0:o.scales)==null?void 0:A.x)==null?void 0:l.ticks)||{},color:e.tick},grid:{...((h=(u=(c=r.bar.options)==null?void 0:c.scales)==null?void 0:u.x)==null?void 0:h.grid)||{},color:e.grid}},y:{...((p=(d=r.bar.options)==null?void 0:d.scales)==null?void 0:p.y)||{},ticks:{...((b=(y=(f=r.bar.options)==null?void 0:f.scales)==null?void 0:y.y)==null?void 0:b.ticks)||{},color:e.tick},grid:{...((C=(S=(B=r.bar.options)==null?void 0:B.scales)==null?void 0:S.y)==null?void 0:C.grid)||{},color:e.grid}},y1:{...((M=(P=r.bar.options)==null?void 0:P.scales)==null?void 0:M.y1)||{},ticks:{...((v=(_=(L=r.bar.options)==null?void 0:L.scales)==null?void 0:_.y1)==null?void 0:v.ticks)||{},color:e.tick},grid:{...((x=(E=(T=r.bar.options)==null?void 0:T.scales)==null?void 0:E.y1)==null?void 0:x.grid)||{},color:e.grid,drawOnChartArea:!1}}},plugins:{...((F=r.bar.options)==null?void 0:F.plugins)||{},legend:{...((Z=(k=r.bar.options)==null?void 0:k.plugins)==null?void 0:Z.legend)||{},labels:{...((j=(ne=(ue=r.bar.options)==null?void 0:ue.plugins)==null?void 0:ne.legend)==null?void 0:j.labels)||{},color:e.legend,usePointStyle:!0}},tooltip:{...((pe=(G=r.bar.options)==null?void 0:G.plugins)==null?void 0:pe.tooltip)||{},backgroundColor:e.tooltipBg,titleColor:e.tooltipTitle,bodyColor:e.tooltipBody}}}}));const n=document.getElementById("analysisPieChart");n&&r.pie?(il&&il.destroy(),il=new Chart(n.getContext("2d"),{type:"doughnut",data:{labels:r.pie.labels,datasets:[{data:r.pie.data,backgroundColor:r.pie.colors}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:e.legend}},tooltip:{backgroundColor:e.tooltipBg,titleColor:e.tooltipTitle,bodyColor:e.tooltipBody}}}})):il&&(il.destroy(),il=null)}function hO(){zh&&(zh.destroy(),zh=null),il&&(il.destroy(),il=null)}function age(r){const e=r.evaluationDetails.map(t=>{const n=t.topicCounts.learnedWell+t.topicCounts.understood+t.topicCounts.notYet,i=`
        <div class="flex flex-wrap gap-2 text-xs">
          <span class="px-3 py-1 rounded-full bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-100">
              : ${Sr(t.topicCounts.learnedWell)}
          </span>
          <span class="px-3 py-1 rounded-full bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-100">
             : ${Sr(t.topicCounts.understood)}
          </span>
          <span class="px-3 py-1 rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-100">
                : ${Sr(t.topicCounts.notYet)}
          </span>
        </div>
      `,s=`
        <div class="flex flex-wrap gap-2 text-xs mt-2">
          <span class="px-3 py-1 rounded-full bg-sky-100 text-sky-800 dark:bg-sky-900/30 dark:text-sky-100">
             : ${Sr(t.optionCounts.attendance)}
          </span>
          <span class="px-3 py-1 rounded-full bg-fuchsia-100 text-fuchsia-800 dark:bg-fuchsia-900/30 dark:text-fuchsia-100">
              : ${Sr(t.optionCounts.homework)}
          </span>
        </div>
      `;return`
        <div class="border border-gray-100 dark:border-gray-700 rounded-xl p-4 space-y-3 bg-white dark:bg-gray-900">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div>
              <div class="text-base font-semibold text-gray-900 dark:text-gray-50">${dn(t.taskName)}</div>
              <div class="text-xs text-gray-700 dark:text-gray-300 mt-1 flex flex-wrap gap-3">
                <span><i class="fas fa-calendar-day mr-1"></i>${t.dateLabel||""}</span>
                <span><i class="fas fa-list-check mr-1"></i>${t.type==="mcq"?"MCQ":"/"}</span>
              </div>
            </div>
            <div class="flex flex-wrap gap-4 text-sm text-gray-900 dark:text-gray-100">
              <span class="font-semibold text-indigo-700 dark:text-indigo-300"> : ${Do(t.averagePercentage)}</span>
              <span>: ${Sr(t.assessedCount)}</span>
              <span class="${t.pendingCount>0?"text-rose-700 dark:text-rose-300 font-semibold":""}">: ${Sr(t.pendingCount)}</span>
              <span class="text-emerald-700 dark:text-emerald-300 font-semibold">: ${Sr(t.fullPositiveCount)}</span>
            </div>
          </div>
          ${n>0?i:""}
          ${s}
        </div>
      `}).join("");return`
    <div class="card card-body space-y-4 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-50">${r.groupName} -  </h4>
        <span class="text-sm text-gray-800 dark:text-gray-200">
           ${Sr(r.evaluationCount)}  
        </span>
      </div>
      <div class="space-y-3">
        ${e}
      </div>
    </div>
  `}function Sr(r){const e=Number.isFinite(r)?r:0;return _n!=null&&_n.convertToBanglaNumber?_n.convertToBanglaNumber(Math.round(e)):Math.round(e).toString()}function Do(r){const t=(Number.isFinite(r)?r:0).toFixed(1);return _n!=null&&_n.convertToBanglaNumber?`${_n.convertToBanglaNumber(t)}%`:`${t}%`}function pA(r,e=2){const n=(Number.isFinite(r)?r:0).toFixed(e);return _n!=null&&_n.convertToBanglaNumber?_n.convertToBanglaNumber(n):n}function fO(r){if(!r)return"";if(_n!=null&&_n.formatTimestamp)return _n.formatTimestamp(r instanceof Date?r:new Date(r));const e=r instanceof Date?r:new Date(r);return Number.isNaN(e.getTime())?"":e.toLocaleDateString("bn-BD",{year:"numeric",month:"short",day:"numeric"})}function oge(r){if(!r)return null;if(r instanceof Date)return r.getTime();if(typeof r=="number")return r;if(typeof r=="string"){const e=Date.parse(r);return Number.isNaN(e)?null:e}if(typeof r=="object"){if(typeof r.toDate=="function")try{return r.toDate().getTime()}catch{return null}if(typeof r.seconds=="number")return r.seconds*1e3}return null}function dn(r){return r?_n!=null&&_n.ensureBengaliText&&typeof _n.ensureBengaliText=="function"?_n.ensureBengaliText(r):typeof r=="string"?r.trim():String(r):""}function Age(r,e,t=1){const n=dn((r==null?void 0:r.name)||(e==null?void 0:e.taskName)||"");if(n)return n;const i=dn((r==null?void 0:r.code)||(e==null?void 0:e.taskCode)||"");if(i)return i;const s=Number.isFinite(t)?Sr(t):"";return s?` ${s}`:""}function lge(r){const e=dn(r);return(typeof e=="string"?e.replace(/\r?\n/g," "):"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function cge(r){return r>=80?"text-emerald-700 dark:text-emerald-300":r>=60?"text-blue-700 dark:text-blue-300":r>=40?"text-amber-700 dark:text-amber-300":"text-rose-700 dark:text-rose-300"}function uge(r){if(!r)return null;if(typeof r.maxScore=="number")return r.maxScore;if(r.maxScoreBreakdown){const e=r.maxScoreBreakdown;return(parseFloat(e.task)||0)+(parseFloat(e.team)||0)+(parseFloat(e.additional)||0)+(parseFloat(e.mcq)||0)}return null}function dge(r){return!r||!r.maxScoreBreakdown?!1:parseFloat(r.maxScoreBreakdown.mcq)>0}async function Ux(){Kn.showLoading("PDF  ...");try{const r=us.getFilterSection(tu),e=i0(r);if(!e||!e.groupMetrics||e.groupMetrics.length===0){Kn.showToast("    ","warning");return}await _n.pdfGenerator.generateGroupAnalysisPDF(e.groupMetrics,Kn)}catch(r){console.error("Error generating group analysis PDF:",r),Kn.showToast("PDF    ","error")}finally{Kn.hideLoading()}}async function Mx(){const r=us.getFilterSection(tu);if(!r||r.groupFilter==="all"){Kn.showToast("      ","info");return}Kn.showLoading("PDF  ...");try{const n=(i0(r).groupDetails||new Map).get(r.groupFilter);if(!n){Kn.showToast("    ","warning");return}await _n.pdfGenerator.generateSingleGroupAnalysisPDF(n,Kn)}catch(e){console.error("Error generating selected group PDF:",e),Kn.showToast("PDF    ","error")}finally{Kn.hideLoading()}}function Ox(){window.print()}async function X4(r="all",e=null){Kn.showLoading("PDF  ...");try{const t=us.get("groups")||[],n=us.get("students")||[],i=us.get("tasks")||[],s=us.get("evaluations")||[];if(t.length===0){Kn.showToast("   ","warning");return}await _n.pdfGenerator.generateGroupWiseFullDetailsPDF(t,n,i,s,Kn,r,e)}catch(t){console.error("Error generating group wise full details PDF:",t),Kn.showToast("PDF    ","error")}finally{Kn.hideLoading()}}let xA,rr,qh,ed,PC,gO,dd;const vr={};let pO,$u=null;function hge(r){return xA=r.managers.stateManager,rr=r.managers.uiManager,qh=r.services.dataService,gO=r.services.auth.authServiceInstance,dd=r.utils.permissionHelper,ed=r.utils,PC=r.app,pO=ed.createDebouncer(300),gge(),pge(),console.log(" Admin component initialized."),{render:fge}}async function fge(){if(!vr.page){console.error(" Admin render failed: Page element #page-admin-management not found.");return}console.log("Rendering Admin Management page..."),rr.showLoading("   ...");try{const r=xA.get("currentUserData");if((r==null?void 0:r.type)!=="super-admin"){P_([]),rr.displayEmptyMessage(vr.adminManagementContent,"      "),console.warn("Admin Page: Non-super-admin tried to render.");return}const e=await qh.loadAdmins();xA.set("admins",e||[]),P_(e),mO()}catch(r){console.error(" Error rendering admin management page:",r),P_([]),rr.displayEmptyMessage(vr.adminManagementContent,`     : ${r.message}`)}finally{rr.hideLoading()}}function gge(){vr.page=document.getElementById("page-admin-management"),vr.page?(vr.totalUsers=vr.page.querySelector("#totalUsers"),vr.superAdminCount=vr.page.querySelector("#superAdminCount"),vr.adminCount=vr.page.querySelector("#adminCount"),vr.userCount=vr.page.querySelector("#userCount"),vr.adminSearchInput=vr.page.querySelector("#adminSearchInput"),vr.addAdminBtn=vr.page.querySelector("#addAdminBtn"),vr.adminManagementContent=vr.page.querySelector("#adminManagementContent")):console.error(" Admin init failed: #page-admin-management element not found!")}function pge(){vr.page&&(rr.addListener(vr.adminSearchInput,"input",r=>{const e=r.target.value.trim();pO(()=>{xA.updateFilters("adminManagement",{searchTerm:e.toLowerCase()}),mO()})}),rr.addListener(vr.addAdminBtn,"click",mge),rr.addListener(vr.adminManagementContent,"click",r=>{var i;const e=r.target.closest(".edit-admin-btn"),t=r.target.closest(".delete-admin-btn"),n=(i=xA.get("currentUser"))==null?void 0:i.uid;if(e)yge(e.dataset.id);else if(t){const s=t.dataset.id;if(s===n){rr.showToast("      ","warning");return}bge(s)}}))}function P_(r=[]){const e=r.length,t=r.filter(s=>s.type==="super-admin").length,n=r.filter(s=>s.type==="admin").length,i=r.filter(s=>s.type==="user").length;vr.totalUsers&&(vr.totalUsers.textContent=ed.convertToBanglaNumber(e)),vr.superAdminCount&&(vr.superAdminCount.textContent=ed.convertToBanglaNumber(t)),vr.adminCount&&(vr.adminCount.textContent=ed.convertToBanglaNumber(n)),vr.userCount&&(vr.userCount.textContent=ed.convertToBanglaNumber(i))}function mO(){var s,a;if(!vr.adminManagementContent)return;const r=xA.get("admins"),e=((s=xA.getFilterSection("adminManagement"))==null?void 0:s.searchTerm)||"",t=(a=xA.get("currentUser"))==null?void 0:a.uid,n=(r||[]).filter(o=>{if(!e)return!0;const A=(o.email||"").toLowerCase().includes(e),l=(o.type||"").toLowerCase().includes(e);return A||l});if(n.sort((o,A)=>(o.email||"").localeCompare(A.email||"")),rr.clearContainer(vr.adminManagementContent),n.length===0){rr.displayEmptyMessage(vr.adminManagementContent," /  ");return}let i=`
        <div class="overflow-x-auto">
            <table class="w-full min-w-[700px] border-collapse">
                <thead>
                    <tr class="bg-gray-100 dark:bg-gray-700">
                        <th class="th"></th>
                        <th class="th"></th>
                        <th class="th text-center"></th>
                        <th class="th text-center"></th>
                    </tr>
                </thead>
                <tbody>
    `;n.forEach(o=>{const l={"super-admin":" ",admin:"",user:""}[o.type]||o.type,c=o.permissions||{},u=o.id!==t;let h="";o.type==="super-admin"?h='<i class="fas fa-star text-yellow-500" title=" "></i>':o.type==="admin"?(h+=c.read?'<i class="fas fa-eye text-green-500 mx-1" title=""></i>':"",h+=c.write?'<i class="fas fa-plus text-blue-500 mx-1" title=""></i>':"",h+=c.edit?'<i class="fas fa-edit text-purple-500 mx-1" title=""></i>':"",h+=c.delete?'<i class="fas fa-trash text-red-500 mx-1" title=""></i>':""):h=c.read?'<i class="fas fa-eye text-green-500 mx-1" title=""></i>':'<i class="fas fa-eye-slash text-gray-400 mx-1" title=" "></i>',i+=`
            <tr class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50">
                <td class="td p-3">${o.email}</td>
                <td class="td p-3">${l}</td>
                <td class="td p-3 text-center">${h||"-"}</td>
                <td class="td p-3 text-center whitespace-nowrap">
                    <button data-id="${o.id}" class="edit-admin-btn btn btn-light btn-sm p-1 mx-1" aria-label="">
                        <i class="fas fa-edit pointer-events-none"></i>
                    </button>
                    ${u?`
                    <button data-id="${o.id}" class="delete-admin-btn btn btn-danger btn-sm p-1 mx-1" aria-label="">
                        <i class="fas fa-trash pointer-events-none"></i>
                    </button>
                    `:`
                    <span class="inline-block p-1 mx-1" title="    ">
                        <i class="fas fa-trash text-gray-400"></i>
                    </span>
                    `}
                </td>
            </tr>
        `}),i+="</tbody></table></div>",vr.adminManagementContent.innerHTML=i}function mge(){$u=null,rr.showAdminModal(" /  ",null,yO)}function yge(r){if(!(dd!=null&&dd.canEdit())){rr.showToast(" admin    ","warning");return}const e=xA.get("admins").find(t=>t.id===r);if(!e){rr.showToast("   ","error");return}$u=r,rr.showAdminModal("/ ",e,yO)}function bge(r){if(!(dd!=null&&dd.canDelete())){rr.showToast(" admin    ","warning");return}const e=xA.get("admins").find(n=>n.id===r);if(!e){rr.showToast("   ","error");return}if(e.type==="super-admin"){rr.showToast("      ","warning");return}const t=`     "${e.email}" (${e.type})    ?   Firestore    , Firebase Auth  `;rr.showDeleteModal("  ",t,async()=>{rr.showLoading("  ...");try{await qh.deleteAdmin(r),console.warn(`Firestore document for ${e.email} deleted. Corresponding Firebase Auth user MUST be deleted manually or via Cloud Function.`),rr.showToast("Firestore    Auth    ","warning",5e3),await PC.refreshAllData()}catch(n){console.error(" Error deleting admin:",n),rr.showToast(`   : ${n.message}`,"error")}finally{rr.hideLoading()}})}async function yO(){var a,o,A,l,c,u,h;const r=(a=rr.elements.adminEmail)==null?void 0:a.value.trim(),e=(o=rr.elements.adminPassword)==null?void 0:o.value,t=(A=rr.elements.adminTypeSelect)==null?void 0:A.value,n={read:((l=rr.elements.permissionRead)==null?void 0:l.checked)||!1,write:((c=rr.elements.permissionWrite)==null?void 0:c.checked)||!1,edit:((u=rr.elements.permissionEdit)==null?void 0:u.checked)||!1,delete:((h=rr.elements.permissionDelete)==null?void 0:h.checked)||!1};if(!ed.validateEmail(r)){rr.showToast("   ","warning");return}if(!$u&&(!e||e.length<6)){rr.showToast("       ","warning");return}if($u&&e&&e.length<6){rr.showToast("     ","warning");return}let i={email:r,type:t,permissions:t==="super-admin"?{read:!0,write:!0,edit:!0,delete:!0}:t==="admin"?{read:n.read,write:n.write,edit:!1,delete:!1}:{read:!0,write:!1,edit:!1,delete:!1}};const s=$u?"":"";rr.showLoading(` ${s}  ...`);try{if($u)await qh.updateAdmin($u,i),e?(console.warn(`Password change requested for ${r} but NOT PERFORMED. This requires Admin SDK or re-authentication.`),rr.showToast("      ","warning")):rr.showToast("   ","success");else{if(!confirm(`  :

 admin/user       
 Firebase   

    ?`)){rr.hideLoading();return}if(await gO.registerWithEmail(r,e,t),t==="super-admin"){const f=(await qh.loadAdmins()).find(y=>y.email===r);f&&await qh.updateAdmin(f.id,{permissions:i.permissions})}rr.showToast(` ${r}       `,"warning",5e3)}await PC.refreshAllData(),rr.hideModal(rr.elements.adminModal)}catch(d){console.error(` Error ${s}ing admin:`,d),rr.showToast(` ${s}  : ${d.message}`,"error")}finally{rr.hideLoading()}}let va,Ir,Fh,Qx;const Lt={},wge="",bO=" ",Or={TASK_NAME:" ",GROUP_NAME:" ",STUDENT_NAME:" ",ROLL:"",TASK_SCORE:" ",TEAM_SCORE:" ",MCQ_SCORE:"MCQ ",ADDITIONAL_SCORE:" ",TOTAL_SCORE:" ",MAX_SCORE:" ",COMMENTS:""};function vge(r){return va=r.managers.stateManager,Ir=r.managers.uiManager,r.services.dataService,Fh=r.utils,Qx=r.app,Bge(),Ege(),console.log(" Export component initialized."),{render:_ge}}function _ge(){if(!Lt.page){console.error(" Export render failed: Page element #page-export not found.");return}console.log("Rendering Export page..."),Sge(),xge()}function xge(){if(!Lt.exportAssignmentFilter)return;const r=va.get("tasks")||[],e=Lt.exportAssignmentFilter.value;for(;Lt.exportAssignmentFilter.options.length>1;)Lt.exportAssignmentFilter.remove(1);[...r].sort((n,i)=>{const s=new Date(n.date||0);return new Date(i.date||0)-s}).forEach(n=>{const i=document.createElement("option");i.value=n.id,i.textContent=n.name,Lt.exportAssignmentFilter.appendChild(i)}),e&&Array.from(Lt.exportAssignmentFilter.options).some(n=>n.value===e)&&(Lt.exportAssignmentFilter.value=e)}function Bge(){Lt.page=document.getElementById("page-export"),Lt.page?(Lt.exportStudentsCSVBtn=Lt.page.querySelector("#exportStudentsCSVBtn")||Lt.page.querySelector('button[onclick*="exportStudentsCSV"]'),Lt.exportGroupsCSVBtn=Lt.page.querySelector("#exportGroupsCSVBtn")||Lt.page.querySelector('button[onclick*="exportGroupsCSV"]'),Lt.exportEvaluationsCSVBtn=Lt.page.querySelector("#exportEvaluationsCSVBtn")||Lt.page.querySelector('button[onclick*="exportEvaluationsCSV"]'),Lt.exportAllDataJSONBtn=Lt.page.querySelector("#exportAllDataJSONBtn")||Lt.page.querySelector('button[onclick*="exportAllData"]'),Lt.exportAllDataZipBtn=Lt.page.querySelector("#exportAllDataZipBtn")||Lt.page.querySelector('button[onclick*="exportAllDataAsZip"]'),Lt.exportGroupFullDetailsPDFBtn=Lt.page.querySelector("#exportGroupFullDetailsPDFBtn"),Lt.exportAssignmentFilter=Lt.page.querySelector("#exportAssignmentFilter"),Lt.totalStudentsCount=Lt.page.querySelector("#totalStudentsCount"),Lt.totalGroupsCount=Lt.page.querySelector("#totalGroupsCount"),Lt.totalEvaluationsCount=Lt.page.querySelector("#totalEvaluationsCount"),Lt.lastExportTime=Lt.page.querySelector("#lastExportTime"),Cge()):console.error(" Export init failed: #page-export element not found!")}function Cge(){[Lt.exportStudentsCSVBtn,Lt.exportGroupsCSVBtn,Lt.exportEvaluationsCSVBtn,Lt.exportAllDataJSONBtn,Lt.exportAllDataZipBtn,Lt.exportAllDataZipBtn].forEach(e=>{e&&e.hasAttribute&&e.hasAttribute("onclick")&&e.removeAttribute("onclick")})}function Ege(){Lt.page&&(Ir.addListener(Lt.exportStudentsCSVBtn,"click",Ige),Ir.addListener(Lt.exportGroupsCSVBtn,"click",kge),Ir.addListener(Lt.exportEvaluationsCSVBtn,"click",Tge),Ir.addListener(Lt.exportAllDataJSONBtn,"click",Fge),Ir.addListener(Lt.exportAllDataZipBtn,"click",Lge),Ir.addListener(Lt.exportGroupFullDetailsPDFBtn,"click",()=>{var r;if((r=Qx.components.analysis)!=null&&r.generateGroupWiseFullDetailsPDF){Ir.showToast("    PDF  ...","info");const e=Lt.exportAssignmentFilter?Lt.exportAssignmentFilter.value:"all";Qx.components.analysis.generateGroupWiseFullDetailsPDF(e)}else Ir.showToast("      ","error")}))}function Sge(){const{students:r,groups:e,evaluations:t}=va.getState(),n=(s,a)=>{s&&(s.textContent=Fh.convertToBanglaNumber(a))};n(Lt.totalStudentsCount,(r==null?void 0:r.length)||0),n(Lt.totalGroupsCount,(e==null?void 0:e.length)||0),n(Lt.totalEvaluationsCount,(t==null?void 0:t.length)||0);const i=localStorage.getItem("lastExportTimestamp");Lt.lastExportTime&&(Lt.lastExportTime.textContent=i?new Date(i).toLocaleTimeString("bn-BD",{hour:"numeric",minute:"2-digit"}):"-")}async function Ige(){Ir.showLoading(" CSV  ...");try{const r=va.get("students")||[],e=va.get("groups")||[],t=new Map(e.map(s=>[s.id,s.name])),n=r.map(s=>({:s.name,:s.roll,:s.gender," ":s.academicGroup,:s.session,:s.contact||""," ":t.get(s.groupId)||""," ":s.role||""})).sort((s,a)=>(s.||"").localeCompare(a.||"","bn"));if(n.length===0){Ir.showToast("     ","info");return}const i=Papa.unparse(n,{header:!0});s0(i,"students_export.csv","text/csv;charset=utf-8;"),Ir.showToast(" CSV    ","success")}catch(r){console.error(" Error exporting students CSV:",r),Ir.showToast(`CSV   : ${r.message}`,"error")}finally{Ir.hideLoading(),a0()}}async function kge(){Ir.showLoading(" CSV  ...");try{const r=va.get("groups")||[],e=va.get("students")||[],t=r.map(i=>({" ":i.name," ":e.filter(s=>s.groupId===i.id).length})).sort((i,s)=>(i[" "]||"").localeCompare(s[" "]||"","bn"));if(t.length===0){Ir.showToast("     ","info");return}const n=Papa.unparse(t,{header:!0});s0(n,"groups_export.csv","text/csv;charset=utf-8;"),Ir.showToast(" CSV    ","success")}catch(r){console.error(" Error exporting groups CSV:",r),Ir.showToast(`CSV   : ${r.message}`,"error")}finally{Ir.hideLoading(),a0()}}async function Tge(){Ir.showLoading(" CSV  ...");try{const r=va.get("evaluations")||[],e=va.get("students")||[],t=va.get("tasks")||[],n=va.get("groups")||[],i=new Map(e.map(l=>[l.id,l])),s=new Map(t.map(l=>[l.id,l])),a=new Map(n.map(l=>[l.id,l.name])),o=[];if(r.forEach(l=>{const c=s.get(l.taskId),u=a.get(l.groupId)||l.groupName||"",h=(c==null?void 0:c.name)||l.taskName||"",d=(c==null?void 0:c.date)||l.taskDate||"",{display:p,sortValue:f}=Hx(d),y=Number.parseFloat(l.maxPossibleScore)||Number.parseFloat(c==null?void 0:c.maxScore)||(typeof TOTAL_MAX_SCORE<"u"?TOTAL_MAX_SCORE:"");l!=null&&l.scores&&typeof l.scores=="object"&&Object.entries(l.scores).forEach(([b,B={}])=>{const S=i.get(String(b));if(!S)return;const C={[Or.TASK_NAME]:h,[Or.GROUP_NAME]:u,[Or.STUDENT_NAME]:S.name??"",[Or.ROLL]:S.roll??"",[Or.TASK_SCORE]:B.taskScore??"",[Or.TEAM_SCORE]:B.teamScore??"",[Or.MCQ_SCORE]:B.mcqScore??"",[Or.ADDITIONAL_SCORE]:B.additionalScore??"",[Or.TOTAL_SCORE]:B.totalScore??"",[Or.MAX_SCORE]:y??"",[Or.COMMENTS]:B.comments??"",[bO]:p??"",__sortDate:f??Number.NEGATIVE_INFINITY};o.push(C)})}),o.length===0){Ir.showToast("     ","info");return}o.sort((l,c)=>{const u=(c.__sortDate??Number.NEGATIVE_INFINITY)-(l.__sortDate??Number.NEGATIVE_INFINITY);if(u!==0)return u;const h=String(l[Or.GROUP_NAME]||"").localeCompare(String(c[Or.GROUP_NAME]||""),"bn");return h!==0?h:String(l[Or.ROLL]||"").localeCompare(String(c[Or.ROLL]||""),void 0,{numeric:!0})}),o.forEach(l=>delete l.__sortDate);const A=Papa.unparse(o,{header:!0});s0(A,"evaluations_export.csv","text/csv;charset=utf-8;"),Ir.showToast(" CSV    ","success")}catch(r){console.error(" Error exporting evaluations CSV:",r),Ir.showToast(`CSV   : ${r.message}`,"error")}finally{Ir.hideLoading(),a0()}}function Fge(){var r;Ir.showLoading("JSON   ...");try{const{groups:e,students:t,tasks:n,evaluations:i,admins:s}=va.getState(),a={exportDate:new Date().toISOString(),groups:e,students:t,tasks:n,evaluations:i,admins:((r=va.get("currentUserData"))==null?void 0:r.type)==="super-admin"?s:void 0},o=JSON.stringify(a,null,2);s0(o,"smart_evaluator_backup.json","application/json;charset=utf-8;"),Ir.showToast("  JSON    ","success")}catch(e){console.error(" Error exporting all data JSON:",e),Ir.showToast(`JSON   : ${e.message}`,"error")}finally{Ir.hideLoading(),a0()}}async function Lge(){const r=window.JSZip;if(!r){Ir.showToast("ZIP  (JSZip)   ","error"),console.error("JSZip library not found. Please include it in index.html");return}Ir.showLoading("ZIP   ...");try{const e=new r,{groups:t=[],students:n=[],tasks:i=[],evaluations:s=[]}=va.getState(),a="\uFEFF",o=new Map(t.map(f=>[f.id,f.name])),A=n.map(f=>({:f.name,:f.roll,:f.gender," ":f.academicGroup,:f.session,:f.contact||""," ":o.get(f.groupId)||""," ":f.role||""})).sort((f,y)=>(f.||"").localeCompare(y.||"","bn"));A.length>0&&e.file("students.csv",a+Papa.unparse(A));const l=t.map(f=>({" ":f.name," ":n.filter(y=>y.groupId===f.id).length})).sort((f,y)=>(f[" "]||"").localeCompare(y[" "]||"","bn"));l.length>0&&e.file("groups.csv",a+Papa.unparse(l));const c=i.map(f=>{var S,C,P,M;const{display:y,sortValue:b}=Hx(f.date),B={" ":f.name,"  ":f.maxScore,_:(S=f.maxScoreBreakdown)==null?void 0:S.task,_:(C=f.maxScoreBreakdown)==null?void 0:C.team,_:(P=f.maxScoreBreakdown)==null?void 0:P.additional,_MCQ:(M=f.maxScoreBreakdown)==null?void 0:M.mcq,:f.description||""};return B[wge]=y,B.__sortDate=b,B}).sort((f,y)=>{const b=(y.__sortDate??Number.NEGATIVE_INFINITY)-(f.__sortDate??Number.NEGATIVE_INFINITY);return b!==0?b:String(f[" "]||"").localeCompare(String(y[" "]||""),"bn")});c.forEach(f=>delete f.__sortDate),c.length>0&&e.file("tasks.csv",a+Papa.unparse(c));const u=new Map(n.map(f=>[f.id,f])),h=new Map(i.map(f=>[f.id,f])),d=[];s.forEach(f=>{const y=h.get(f.taskId),b=o.get(f.groupId)||f.groupName||"",B=(y==null?void 0:y.name)||f.taskName||"",S=(y==null?void 0:y.date)||f.taskDate||"",{display:C,sortValue:P}=Hx(S),M=Number.parseFloat(f.maxPossibleScore)||Number.parseFloat(y==null?void 0:y.maxScore)||(typeof TOTAL_MAX_SCORE<"u"?TOTAL_MAX_SCORE:"");f!=null&&f.scores&&typeof f.scores=="object"&&Object.entries(f.scores).forEach(([L,_={}])=>{const v=u.get(L);if(!v)return;const T={[Or.TASK_NAME]:B,[Or.GROUP_NAME]:b,[Or.STUDENT_NAME]:v.name??"",[Or.ROLL]:v.roll??"",[Or.TASK_SCORE]:_.taskScore??"",[Or.TEAM_SCORE]:_.teamScore??"",[Or.MCQ_SCORE]:_.mcqScore??"",[Or.ADDITIONAL_SCORE]:_.additionalScore??"",[Or.TOTAL_SCORE]:_.totalScore??"",[Or.MAX_SCORE]:M??"",[Or.COMMENTS]:_.comments??""};T[bO]=C??"",T.__sortDate=P??Number.NEGATIVE_INFINITY,d.push(T)})}),d.length>0&&(d.sort((f,y)=>{const b=(y.__sortDate??Number.NEGATIVE_INFINITY)-(f.__sortDate??Number.NEGATIVE_INFINITY);if(b!==0)return b;const B=String(f[Or.GROUP_NAME]||"").localeCompare(String(y[Or.GROUP_NAME]||""),"bn");return B!==0?B:String(f[Or.ROLL]||"").localeCompare(String(y[Or.ROLL]||""),void 0,{numeric:!0})}),d.forEach(f=>delete f.__sortDate),e.file("evaluations_detailed.csv",a+Papa.unparse(d)));const p=await e.generateAsync({type:"blob"});s0(p,`smart_evaluator_backup_${new Date().toISOString().split("T")[0]}.zip`),Ir.showToast("  ZIP    ","success")}catch(e){console.error(" Error exporting all data ZIP:",e),Ir.showToast(`ZIP   : ${e.message}`,"error")}finally{Ir.hideLoading(),a0()}}function Hx(r){if(r==null||r==="")return{display:"",sortValue:Number.NEGATIVE_INFINITY};let e=null;if(r instanceof Date)e=r;else if(typeof r=="number")e=new Date(r);else if(typeof r=="string"){const i=Date.parse(r);Number.isNaN(i)||(e=new Date(i))}else if(typeof r=="object")if(typeof r.toDate=="function")try{e=r.toDate()}catch{e=null}else typeof r.seconds=="number"&&(e=new Date(r.seconds*1e3));const t=Fh!=null&&Fh.formatTimestamp?Fh.formatTimestamp(e||r):e?e.toISOString().split("T")[0]:String(r??"");let n=Number.NEGATIVE_INFINITY;if(e instanceof Date&&!Number.isNaN(e.getTime()))n=e.getTime();else if(typeof r=="number"&&Number.isFinite(r))n=r;else if(typeof r=="string"){const i=Date.parse(r);Number.isNaN(i)||(n=i)}return{display:t||"",sortValue:n}}function s0(r,e,t=""){const n=t.startsWith("text/csv")&&typeof r=="string"?`\uFEFF${r}`:r,i=n instanceof Blob?n:new Blob([n],{type:t}),s=document.createElement("a"),a=URL.createObjectURL(i);s.href=a,s.download=e,document.body.appendChild(s),s.click(),setTimeout(()=>{document.body.removeChild(s),window.URL.revokeObjectURL(a)},100)}function a0(){const r=new Date,e=r.toLocaleTimeString("bn-BD",{hour:"numeric",minute:"2-digit"});Lt.lastExportTime&&(Lt.lastExportTime.textContent=e),localStorage.setItem("lastExportTimestamp",r.toISOString())}let ma;const Pp={},NC=[{title:" ",icon:"fas fa-users",tone:"indigo",rules:["  -    (  )","         ","      ","          "]},{title:" ",icon:"fas fa-sitemap",tone:"emerald",rules:["   :  ,  ,  , ,   ","          (  )"," ,         "]},{title:" ",icon:"fas fa-clipboard-check",tone:"amber",rules:["     , MCQ = 40 , = 100 ","   : / ( ),  ( ),   ( )","      ",":    (+),   (+)"]},{title:"  ",icon:"fas fa-trophy",tone:"purple",rules:["   (  )     ","           ","         ","      "]}],J4={indigo:{icon:"bg-indigo-100 text-indigo-700",dot:"bg-indigo-500",border:"border-indigo-100"},emerald:{icon:"bg-emerald-100 text-emerald-700",dot:"bg-emerald-500",border:"border-emerald-100"},amber:{icon:"bg-amber-100 text-amber-700",dot:"bg-amber-500",border:"border-amber-100"},purple:{icon:"bg-purple-100 text-purple-700",dot:"bg-purple-500",border:"border-purple-100"}};let Np=[...NC];function Pge(r){return r.managers.uiManager,ma=r.utils,Uge(),vm(),console.log(" Policy component initialized."),{render:vm,setPolicyData:Nge,expandAll:Dge,collapseAll:Rge}}function vm(){if(!Pp.page||!Pp.policySectionsContainer)return;const r=Array.isArray(Np)&&Np.length?Np:NC,e=r.map(Oge).join("");Pp.policySectionsContainer.innerHTML=`
    <div class="space-y-8">
      ${Mge(r)}
      <div class="grid gap-6 lg:grid-cols-2" aria-live="polite">
        ${e}
      </div>
    </div>
  `}function Nge(r=[]){Array.isArray(r)&&r.length?Np=r.map(Qge):Np=[...NC],vm()}function Dge(){vm()}function Rge(){vm()}function Uge(){Pp.page=document.getElementById("page-group-policy"),Pp.policySectionsContainer=document.getElementById("policySections")}function Mge(r){var s;const e=r.length,t=r.reduce((a,o)=>a+o.rules.length,0),n=((s=r.find(a=>/|/i.test(a.title)))==null?void 0:s.rules.length)||0,i=a=>ma!=null&&ma.convertToBanglaNumber?ma.convertToBanglaNumber(String(a)):String(a);return`
    <section class="rounded-3xl bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-800 p-6 text-white shadow-2xl">
      <div class="space-y-3">
        <p class="text-xs uppercase tracking-[0.4em] text-white/70">Policy Update</p>
        <h2 class="text-3xl font-semibold">   </h2>
        <p class="text-sm text-white/80 max-w-2xl">
            ,              
        </p>
      </div>
      <div class="mt-6 grid gap-4 sm:grid-cols-3">
        ${N_(" ",i(e))}
        ${N_(" ",i(t))}
        ${N_(" ",i(n))}
      </div>
    </section>
  `}function N_(r,e){return`
    <div class="rounded-2xl border border-white/20 bg-white/10 backdrop-blur p-4">
      <p class="text-xs uppercase tracking-wide text-white/70">${r}</p>
      <p class="mt-2 text-2xl font-semibold">${e}</p>
    </div>
  `}function Oge(r,e){const{title:t,icon:n,rules:i,tone:s}=r,a=J4[s]||J4.indigo,o=i.map(l=>`
        <li class="flex gap-3">
          <span class="mt-2 h-2 w-2 rounded-full ${a.dot}"></span>
          <span class="text-sm text-gray-600 dark:text-gray-300">${e3(l)}</span>
        </li>`).join(""),A=ma!=null&&ma.convertToBanglaNumber?ma.convertToBanglaNumber(String(e+1)):e+1;return`
    <article class="rounded-2xl border ${a.border} bg-white dark:bg-gray-900/80 p-6 shadow-sm hover:shadow-xl transition-shadow duration-300">
      <div class="flex items-center gap-4">
        <span class="flex h-12 w-12 items-center justify-center rounded-2xl ${a.icon}">
          <i class="${n} text-lg"></i>
        </span>
        <div>
          <p class="text-xs font-semibold text-gray-400"> ${A}</p>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white">${e3(t)}</h3>
        </div>
      </div>
      <ul class="mt-4 space-y-2">${o}</ul>
    </article>
  `}function Qge(r={}){const e=Array.isArray(r.rules)?r.rules.map(t=>Z4(t)).filter(Boolean):[];return{title:Z4(r.title)||" ",icon:r.icon||"fas fa-book-open",tone:r.tone||"indigo",rules:e.length?e:["    "]}}function Z4(r){return r?ma!=null&&ma.ensureBengaliText&&typeof ma.ensureBengaliText=="function"?ma.ensureBengaliText(r):typeof r=="string"?r.trim():String(r).trim():""}function e3(r){return String(r||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}let Vx,Uv,dl;const da={};let Ry=null;const wO=["upcoming","ongoing","completed"],Co={upcoming:{label:" ",chip:"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-200",card:"border-sky-100 dark:border-sky-800/60",icon:"fas fa-calendar-plus text-sky-500"},ongoing:{label:" ",chip:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-200",card:"border-amber-100 dark:border-amber-800/60",icon:"fas fa-spinner text-amber-500"},completed:{label:" ",chip:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200",card:"border-emerald-100 dark:border-emerald-800/60",icon:"fas fa-check-circle text-emerald-500"}},Bb={active:"all"},Hge=["all","upcoming","ongoing","completed"],Vge={all:{label:" ",description:" ",icon:"fas fa-layer-group",theme:"slate"},upcoming:{label:Co.upcoming.label,description:" ",icon:Co.upcoming.icon,theme:"sky"},ongoing:{label:Co.ongoing.label,description:" ",icon:Co.ongoing.icon,theme:"amber"},completed:{label:Co.completed.label,description:" ",icon:Co.completed.icon,theme:"emerald"}},$ge=11,jge=55,Gge=0,Kge=["","","","","","","","","","","",""],zge=["","","","","","",""];function qge(r){return Vx=r.managers.stateManager,Uv=r.managers.uiManager,dl=r.utils,Xge(),Jge(),Wge(),Yge(),console.log(" UpcomingAssignments (focus-first + 10:20 rule + soft 3D + rose chef) initialized."),{render:CO}}function Wge(){da.page=document.getElementById("page-upcoming-assignments"),da.summary=document.getElementById("upcomingAssignmentSummary"),da.list=document.getElementById("upcomingAssignmentsList"),da.filter=document.getElementById("assignmentStatusFilter"),da.filter&&(da.filter.classList.add("hidden"),da.filter.setAttribute("aria-hidden","true"),da.filter.style.display="none")}function Yge(){Uv.addListener(document,"keydown",r=>{r.key==="Escape"&&(document.querySelectorAll('[data-acc-panel][data-open="true"]').forEach(e=>EO(e,!1)),document.querySelectorAll('[data-acc-btn][aria-expanded="true"]').forEach(e=>e.setAttribute("aria-expanded","false")))})}function Xge(){if(document.getElementById("ua-tabs-styles"))return;const r=document.createElement("style");r.id="ua-tabs-styles",r.textContent=`
  .ua-tabbar{
    display:flex;
    flex-wrap:wrap;
    gap:.65rem;
    justify-content:center;
    padding:.5rem;
    border-radius:1rem;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(15,23,42,.85);
    box-shadow:inset 0 0 0 1px rgba(15,23,42,.4), 0 20px 40px rgba(2,6,23,.45);
  }
  .ua-tab{
    --ua-tab-bg:rgba(255,255,255,.85);
    --ua-tab-border:rgba(148,163,184,.35);
    --ua-tab-color:#0f172a;
    --ua-tab-active:#2563eb;
    --ua-tab-active-bg:linear-gradient(120deg,#4c6ef5,#2563eb);
    --ua-tab-active-shadow:rgba(37,99,235,.35);
    --ua-tab-desc:rgba(71,85,105,.8);
    flex:1 1 calc(50% - .65rem);
    min-width:140px;
    max-width:100%;
    min-height:52px;
    justify-content:space-between;
    display:flex;
    align-items:center;
    gap:.65rem;
    padding:.45rem 1.05rem;
    border-radius:999px;
    border:1px solid var(--ua-tab-border);
    background:var(--ua-tab-bg);
    color:var(--ua-tab-color);
    text-align:left;
    font-weight:600;
    transition:transform .2s ease, box-shadow .2s ease, background .2s ease;
    box-shadow:0 4px 10px rgba(15,23,42,.08);
  }
  .ua-tab:focus{ outline:none; box-shadow:0 0 0 3px rgba(248,113,113,.45); }
  .ua-tab:hover{ transform:translateY(-1px); }
  .ua-tab[aria-selected="true"]{
    color:#fff;
    background:var(--ua-tab-active-bg);
    border-color:transparent;
    box-shadow:0 16px 28px var(--ua-tab-active-shadow);
  }
  .ua-tab[aria-selected="true"] .ua-tab-count{
    background:rgba(255,255,255,.25);
  }
  .ua-tab-label{
    display:flex;
    align-items:center;
    gap:.35rem;
    font-size:.95rem;
    letter-spacing:.02em;
    font-weight:700;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .ua-tab-count{
    font-size:1rem;
    font-weight:700;
    padding:.22rem .65rem;
    border-radius:999px;
    background:rgba(15,23,42,.12);
  }
  .ua-tab-desc{ display:none; }
  @media (max-width:640px){
    .ua-tab{
      flex:1 1 calc(50% - .65rem);
      min-width:0;
      padding:.55rem .85rem;
      gap:.55rem;
      justify-content:center;
    }
    .ua-tab-label{
      font-size:.9rem;
      white-space:normal;
      line-height:1.25;
      text-align:center;
    }
    .ua-tab-count{
      font-size:.8rem;
    }
  }
  @media (min-width:768px){
    .ua-tab{
      flex:1 1 0;
      min-width: 220px;
    }
  }
  @media (min-width:1024px){
    .ua-tabbar{ justify-content:space-between; }
    .ua-tab{ min-width:0; }
  }
  .dark .ua-tab{
    --ua-tab-bg:rgba(15,23,42,.9);
    --ua-tab-border:rgba(148,163,184,.25);
    --ua-tab-color:#e2e8f0;
    --ua-tab-desc:rgba(148,163,184,.8);
    box-shadow:0 10px 24px rgba(0,0,0,.55);
  }
  .ua-tab[data-theme="slate"]{
    --ua-tab-active-bg:linear-gradient(120deg,#6366f1,#4338ca);
    --ua-tab-active-shadow:rgba(99,102,241,.45);
  }
  .ua-tab[data-theme="sky"]{
    --ua-tab-active-bg:linear-gradient(120deg,#0ea5e9,#2563eb);
    --ua-tab-active-shadow:rgba(14,165,233,.4);
  }
  .ua-tab[data-theme="amber"]{
    --ua-tab-active-bg:linear-gradient(120deg,#f59e0b,#eab308);
    --ua-tab-active-shadow:rgba(245,158,11,.4);
  }
  .ua-tab[data-theme="emerald"]{
    --ua-tab-active-bg:linear-gradient(120deg,#0d9488,#10b981);
    --ua-tab-active-shadow:rgba(16,185,129,.4);
  }
  `,document.head.appendChild(r)}function Jge(){if(document.getElementById("ua-pill-styles"))return;const r=document.createElement("style");r.id="ua-pill-styles",r.textContent=`
  /* Countdown pill (with conditional colors) */
  .cd-pill{
    display:inline-flex; align-items:center; gap:.45rem;
    border-radius:.7rem; padding:.28rem .65rem;
    font-weight:700; font-size:.875rem; line-height:1.1;
    border:1px solid var(--border);
    background: var(--surface-2);
    box-shadow: var(--inner-highlight);
    white-space:nowrap;
  }
  .cd-green{ color:#166534; background:rgba(187,247,208,.65); border-color:rgba(22,101,52,.25); }
  .dark .cd-green{ color:#A7F3D0; background:rgba(6,95,70,.35); border-color:rgba(167,243,208,.2); }
  .cd-amber{ color:#92400e; background:rgba(254,243,199,.65); border-color:rgba(146,64,14,.25); }
  .dark .cd-amber{ color:#FDE68A; background:rgba(120,53,15,.35); border-color:rgba(253,230,138,.2); }
  .cd-red{ color:#7f1d1d; background:rgba(254,226,226,.85); border-color:rgba(127,29,29,.22); }
  .dark .cd-red{ color:#fecaca; background:rgba(127,29,29,.28); border-color:rgba(254,202,202,.18); }
  @keyframes uablink { 0%, 60%, 100% { opacity:1 } 30% { opacity:.35 } }
  .cd-blink { animation: uablink 1.2s linear infinite; }

  /* Flat schedule pill aligned with countdown colors */
  .sched-pill{
    display:inline-flex; flex-wrap:wrap; align-items:center; gap:.45rem;
    border-radius:.75rem; padding:.35rem .8rem;
    font-size:.88rem; line-height:1.15;
    font-weight:600;
    border:1px solid rgba(148,163,184,.35);
    background: rgba(248,250,252,.85);
    color:#0f172a;
    white-space:normal;
    box-shadow: var(--inner-highlight);
  }
  .dark .sched-pill{
    background: rgba(30,41,59,.45);
    border-color: rgba(148,163,184,.35);
    color:#e2e8f0;
  }
  .sched-pill__label{
    font-weight:700;
    letter-spacing:.01em;
  }
  .sched-pill__value{
    font-weight:600;
  }
  .sched-pill[data-status="upcoming"]{
    background: rgba(16,185,129,.15);
    border-color: rgba(16,185,129,.35);
    color:#065f46;
  }
  .dark .sched-pill[data-status="upcoming"]{
    background: rgba(5,150,105,.35);
    border-color: rgba(16,185,129,.45);
    color:#a7f3d0;
  }
  .sched-pill[data-status="ongoing"]{
    background: rgba(251,191,36,.2);
    border-color: rgba(245,158,11,.35);
    color:#7c2d12;
  }
  .dark .sched-pill[data-status="ongoing"]{
    background: rgba(120,53,15,.35);
    border-color: rgba(251,191,36,.45);
    color:#fde68a;
  }
  .sched-pill[data-status="completed"]{
    background: rgba(148,163,184,.25);
    border-color: rgba(71,85,105,.35);
    color:#1f2937;
  }
  .dark .sched-pill[data-status="completed"]{
    background: rgba(30,41,59,.55);
    border-color: rgba(148,163,184,.45);
    color:#cbd5f5;
  }
  `,document.head.appendChild(r)}function $x(r){if(!r)return null;try{if(typeof r.toDate=="function")return r.toDate();const e=new Date(r);return Number.isNaN(e.getTime())?null:e}catch{return null}}function Zge(r=[]){const e=(r==null?void 0:r.map((n,i)=>{const s=$x(n==null?void 0:n.createdAt),a=$x(n==null?void 0:n.date),o=s==null?void 0:s.getTime(),A=a==null?void 0:a.getTime(),l=Number.isFinite(o)?o:Number.isFinite(A)?A:i;return{id:n==null?void 0:n.id,timestamp:l,fallbackIndex:i}}).filter(n=>n.id))||[];e.sort((n,i)=>n.timestamp!==i.timestamp?n.timestamp-i.timestamp:n.fallbackIndex-i.fallbackIndex);const t=new Map;return e.forEach((n,i)=>t.set(n.id,i+1)),t}function vO(r){if(!r)return null;const e=new Date(r);return e.setHours($ge,jge,Gge,0),e}function Ao(r){const e=String(r);return dl!=null&&dl.convertToBanglaNumber?dl.convertToBanglaNumber(e):e}function epe(r){if(!(r instanceof Date)||Number.isNaN(r.getTime()))return"  ";const e=Ao(String(r.getDate()).padStart(2,"0")),t=Kge[r.getMonth()]||"",n=Ao(r.getFullYear()),i=zge[r.getDay()]||"",s=_O(r);return`${e} ${t} ${n} - ${i}, ${s}`}function _O(r){const e=r.getHours(),t=r.getMinutes(),n=tpe(e),i=e>=12?"pm":"am",s=e%12||12,a=String(t).padStart(2,"0"),o=`${Ao(s)}:${Ao(a)}`;return`${n} ${o} ${i}`}function tpe(r){return r<4?"":r<12?"":r<16?"":r<19?"":""}function xO(r){var d;const e=Date.now(),t=((d=r==null?void 0:r.getTime)==null?void 0:d.call(r))??NaN;if(Number.isNaN(t))return{valid:!1};let n=0;try{const p=new Date;p.setHours(0,0,0,0);const f=new Date(r);f.setHours(0,0,0,0),n=Math.round((f.getTime()-p.getTime())/864e5)}catch{n=0}let i=t-e;const s=i<=0;s&&(i=Math.abs(i));const a=Math.floor(i/1e3),o=Math.floor(a/86400),A=Math.floor(a%86400/3600),l=Math.floor(a%3600/60),c=a%60,u=s?0:Math.ceil((t-e)/864e5),h=s?Number.POSITIVE_INFINITY:t-e;return{valid:!0,past:s,days:o,hours:A,minutes:l,seconds:c,remainingDays:u,remainingMs:h,dayDiff:n}}function BO(r,e=!0){if(!r.valid)return" ";const t=Ao(r.days),n=Ao(r.hours),i=Ao(r.minutes),s=Ao(r.seconds);let a="  ";r.past?a=r.dayDiff===-1?"  ":" ":r.dayDiff===0?a=" ":r.dayDiff===1?a=" ":r.dayDiff===2&&(a=" ");const o=r.past?"":"",A=[];return r.days>0&&A.push(`${t} `),A.push(`${n} `,`${i} `,`${s} `),`${a}: ${A.join(" ")} ${o}`}function rpe(r){if(!r.valid)return"cd-pill";if(r.past)return"cd-pill cd-red";const e=r.remainingDays;return e>10?"cd-pill cd-green":e>=6?"cd-pill cd-amber":e>3?"cd-pill cd-red":"cd-pill cd-red cd-blink"}function CO(){if(!da.page)return;const r=Vx.get("tasks")||[],e=Vx.get("evaluations")||[],t=Zge(r),n=r.map(l=>Ape(l,e,t)),i=Date.now(),s=l=>l.status==="upcoming"?0:l.status==="ongoing"?1:2,a=l=>{const c=l._dateObj;if(!c)return Number.POSITIVE_INFINITY;const u=c.getTime()-i;return u>0?u:Number.POSITIVE_INFINITY},o=l=>l._dateObj?l._dateObj.getTime():-1/0;n.sort((l,c)=>{const u=s(l),h=s(c);if(u!==h)return u-h;if(u===0){const d=a(l),p=a(c);return d!==p?d-p:o(l)-o(c)}return o(c)-o(l)}),t&&t.size>0?n.forEach((l,c)=>{l.assignmentNumber||(l.assignmentNumber=c+1)}):n.forEach((l,c)=>l.assignmentNumber=c+1),npe(n),ipe(n),dpe()}function npe(r){if(!da.summary)return;const e={all:r.length,upcoming:r.filter(i=>i.status==="upcoming").length,ongoing:r.filter(i=>i.status==="ongoing").length,completed:r.filter(i=>i.status==="completed").length},t=`
    <div class="ua-tabbar" role="tablist" aria-label="Assignment filter tabs">
      ${Hge.map(i=>{const s=Vge[i];if(!s)return"";const a=Bb.active===i,o=Ao(e[i]??0);return`
          <button type="button" role="tab"
            class="ua-tab"
            data-tab="${i}"
            data-theme="${s.theme}"
            aria-selected="${a}">
            <span class="ua-tab-label"><i class="${s.icon}"></i>${s.label}</span>
            <span class="ua-tab-count">${o}</span>
            <span class="ua-tab-desc">${s.description}</span>
          </button>
        `}).join("")}
    </div>
  `;da.summary.innerHTML=t,da.summary.querySelectorAll("[data-tab]").forEach(i=>{Uv.addListener(i,"click",()=>{const s=i.getAttribute("data-tab");!s||s===Bb.active||(Bb.active=s,CO())})})}function ipe(r){if(!da.list)return;const e=Bb.active||"all",t=e==="all"?wO:[e];let n="";t.forEach(i=>{const s=r.filter(o=>o.status===i);if(!s.length)return;const a=s.map(spe).join("");n+=`
      <section class="space-y-4">
        <div class="flex items-center gap-2">
          <span class="chip-3d inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm font-semibold ${Co[i].chip}">
            <i class="${Co[i].icon}"></i>${Co[i].label}
          </span>
          <span class="text-xs text-gray-500 dark:text-gray-400">${Ao(s.length)}  </span>
        </div>
        <div class="space-y-3">${a}</div>
      </section>
    `}),da.list.innerHTML=n||`
    <div class="placeholder-content">
      <i class="fas fa-inbox mr-2"></i>
           
    </div>
  `,ope()}function spe(r){const e=Co[r.status]||Co.upcoming,t=Ao(r.participants),n=r.assignmentNumber||0,i=Ao(n),s=r.dateLabel||"  ",a=`acc_${r.id||Math.random().toString(36).slice(2)}`,o=`panel_${r.id||Math.random().toString(36).slice(2)}`,A=`
    <span class="cd-pill" data-cd data-iso="${r.dateISO||""}" data-mode="start">
      <i class="fas fa-hourglass-half"></i>
      <span class="cd-text text-[11px] sm:text-sm">${BO(xO(r._dateObj))}</span>
    </span>
   
  `,l=`${r.scheduleText||" "} :`,c=`
    <span class="sched-pill" data-status="${r.status}">
      <span class="sched-pill__label text-sm sm:text-base">${l}</span>
      <span class="sched-pill__value text-xs sm:text-sm">${s}</span>
    </span>
  `;return`
    <article class="relative card-3d card-3d--bevel focusable flex flex-col sm:flex-row overflow-visible sm:overflow-hidden" tabindex="0" role="group" aria-label="${dl.ensureBengaliText(r.name)}">
      <!-- Left Rail:   (original design) -->
      <div class="flex-shrink-0 w-full sm:w-24 flex flex-row sm:flex-col items-center justify-center gap-2 bg-gray-50 dark:bg-gray-800/60 p-4 border-b sm:border-b-0 sm:border-r border-gray-100 dark:border-gray-700/50">
        <span class="text-xs font-semibold text-gray-500 dark:text-gray-400"></span>
        <span class="text-3xl font-extrabold text-blue-600 dark:text-blue-400">${i}</span>
      </div>

      <!-- Content -->
      <div class="flex-1 p-4 min-w-0">
        <div class="flex flex-col gap-3 md:flex-row md:items-start md:justify-between">
          <div class="min-w-0">
            <!-- Top row: chip + countdown + rose pill -->
            <div class="flex items-center flex-wrap gap-2">
              <span class="chip-3d inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-semibold ${e.chip}">
                <i class="${e.icon}"></i>${e.label}
              </span>
              ${A}
              ${c}
            </div>

            <h4 class="text-xs sm:text-base font-semibold text-gray-900 dark:text-white mt-2">${r.name}</h4>
          </div>

          <div class="flex sm:flex-col  gap-2 text-[10px] sm:text-base text-gray-600 dark:text-gray-300">
            <span class="inline-flex items-center gap-2 rounded-lg bg-gray-100 dark:bg-gray-800/70 px-3 py-1 border border-gray-200/80 dark:border-white/10 shadow-[var(--inner-highlight)]">
              <i class="fas fa-user-check text-blue-500"></i> : ${t}
            </span>
            <span class="inline-flex items-center gap-2 rounded-lg bg-gray-100 dark:bg-gray-800/70 px-3 py-1 border border-gray-200/80 dark:border-white/10 shadow-[var(--inner-highlight)]">
              <i class="fas fa-clock text-purple-500"></i> : ${r.startTimeLabel||" : am"}
            </span>
          </div>
        </div>

        <!-- Accordion -->
        ${ape(r,a,o)}
      </div>
    </article>
  `}function ape(r,e,t){const n=(r.description||"").trim();if(!n)return"";const i=n.split(/[\n,]+/).map(a=>a.trim()).filter(Boolean),s=i.length<=1?`<p class="leading-relaxed">${dl.ensureBengaliText(n)}</p>`:`<ul class="list-disc list-inside space-y-1.5">${i.map(a=>`<li>${dl.ensureBengaliText(a)}</li>`).join("")}</ul>`;return`
    <div class="mt-4">
      <button
        id="${e}"
        data-acc-btn
        class="w-full flex items-center justify-between gap-3 rounded-xl border border-gray-300/80 dark:border-white/10 bg-gray-50 dark:bg-gray-800/60 px-4 py-2.5 text-left focusable"
        aria-expanded="false"
        aria-controls="${t}"
      >
        <span class="inline-flex items-center gap-2 text-sm font-semibold">
          <i class="fas fa-list-check"></i>
          -
        </span>
        <i class="fas fa-chevron-down transition-transform duration-200 ease-out" data-acc-chevron></i>
      </button>

      <div
        id="${t}"
        data-acc-panel
        data-open="false"
        class="overflow-hidden rounded-xl border border-gray-200/80 dark:border-white/10 bg-white/70 dark:bg-gray-900/60 mt-2"
        style="max-height:0; transition:max-height .28s ease;"
      >
        <div class="p-4 text-sm text-gray-700 dark:text-gray-300">${s}</div>
      </div>
    </div>
  `}function ope(){document.querySelectorAll("[data-acc-btn]").forEach(e=>{if(e.__wired)return;e.__wired=!0;const t=e.getAttribute("aria-controls"),n=document.getElementById(t),i=e.querySelector("[data-acc-chevron]");Uv.addListener(e,"click",()=>{const s=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",String(!s)),EO(n,!s),i&&(i.style.transform=s?"rotate(0deg)":"rotate(180deg)")})})}function EO(r,e){if(!r)return;const t=r.getAttribute("data-open")==="true";if(e===t)return;const n=r.getBoundingClientRect().height;r.style.maxHeight=n+"px",r.style.overflow="hidden",r.setAttribute("data-open",String(e));const i=e?r.scrollHeight:0;requestAnimationFrame(()=>{r.style.maxHeight=i+"px"});const s=()=>{r.style.maxHeight=e?"none":"0",r.style.overflow=e?"visible":"hidden",r.removeEventListener("transitionend",s)};r.addEventListener("transitionend",s,{once:!0})}function Ape(r,e,t){const n=$x(r.date),i=vO(n)||n,s=lpe({...r,date:i}),a=SO(i),o=upe(r.id,e),A=t instanceof Map?t.get(r.id):void 0,l=typeof A=="number"&&Number.isFinite(A)?A:typeof r.assignmentNumber=="number"&&r.assignmentNumber>0?r.assignmentNumber:0;return{id:r.id,name:dl.ensureBengaliText(r.name||" "),status:s,dateLabel:a.label,timelineLabel:a.timelineLabel,scheduleText:a.scheduleText,startTimeLabel:a.startTimeLabel,description:r.description||"",participants:o,assignmentNumber:l,dateISO:i?i.toISOString():"",_dateObj:i}}function lpe(r){const e=typeof r.status=="string"?r.status.toLowerCase():"";return wO.includes(e)?e:cpe(r.date)}function cpe(r){const{isFuture:e,isToday:t}=SO(r);return e?"upcoming":t?"ongoing":"completed"}function SO(r){if(!r)return{label:"  ",scheduleText:"  ",timelineLabel:" ",startTimeLabel:" : am",isFuture:!1,isToday:!1};const e=vO(r)||r,t=new Date,n=e.getTime()>t.getTime(),s=e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getTime()>=t.getTime(),a=epe(e),o=_O(e);let A=" ",l=" ";return n?(A=" ",l=" "):s&&(A=" ",l=" "),{label:a,scheduleText:A,timelineLabel:l,startTimeLabel:o,isFuture:n,isToday:s}}function upe(r,e){if(!r||!(e!=null&&e.length))return 0;const t=new Set;return e.forEach(n=>{if(n.taskId!==r)return;const i=n.scores||{};Object.keys(i).forEach(s=>t.add(s))}),t.size}function dpe(){Ry&&(clearInterval(Ry),Ry=null),t3(),Ry=setInterval(t3,1e3)}function t3(){document.querySelectorAll("[data-cd][data-iso]").forEach(e=>{const t=e.getAttribute("data-iso")||"",n=e.getAttribute("data-mode")||"start",i=e.querySelector(".cd-text");if(!t||!i){i&&(i.textContent=" ");return}const s=new Date(t),a=xO(s);i.textContent=BO(a,n==="start");const o=rpe(a);e.className=o})}const hl={TABLE:"table",CHART:"chart"},hpe={taskFilter:"all",groupFilter:"all",evaluationType:"all",viewMode:hl.TABLE,showPendingOnly:!1},IO=100;let Bc,Lh,qi;const Gn={};let Dc=null,ph=null,r3=null,Uy=null;function fpe(r){var e;Bc=r.managers.stateManager,Lh=r.managers.uiManager,qi=r.utils,gpe();try{window.matchMedia&&(Uy=window.matchMedia("(prefers-color-scheme: dark)"),(e=Uy.addEventListener)==null||e.call(Uy,"change",()=>Ph())),Gn.statsContentContainer&&"ResizeObserver"in window&&(r3=new ResizeObserver(()=>{Dc&&Dc.resize()}),r3.observe(Gn.statsContentContainer))}catch{}return console.log(" Statistics component initialized."),{render:Ph}}function Ph(){if(!Gn.page){console.error(" Statistics render failed: Page element #page-statistics not found.");return}const r=ppe();Rpe(Gn.page,()=>{try{const e=xpe(r);mpe(r,e),bpe(e,r)}catch(e){console.error(" Error rendering statistics page:",e),Gn.statsContentContainer&&Lh.displayEmptyMessage(Gn.statsContentContainer,`    : ${e.message}`)}})}function gpe(){if(Gn.page=document.getElementById("page-statistics"),!Gn.page){console.error(" Statistics init failed: #page-statistics element not found!");return}Gn.filterContainer=Gn.page.querySelector("#statsFilterContainer"),Gn.statsContentContainer=Gn.page.querySelector("#statsContentContainer"),Gn.filterContainer||console.warn("Statistics: #statsFilterContainer not found."),Gn.statsContentContainer||console.warn("Statistics: #statsContentContainer not found.")}function ppe(){const r={...hpe,...Bc.getFilterSection("statistics")||{}};return Bc.updateFilters("statistics",r),r}function mpe(r,e){if(!Gn.filterContainer)return;const{summary:t,groupOptions:n}=e,i=`
    <div class="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
      ${My(" ",t.totalEvaluations,"bg-blue-50 text-blue-700 dark:bg-blue-900/40 dark:text-blue-200","fa-clipboard-list")}
      ${My("MCQ ",t.totalMcqEvaluations,"bg-purple-50 text-purple-700 dark:bg-purple-900/40 dark:text-purple-200","fa-brain")}
      ${My("  (%)",Ef(t.averageScore),"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200","fa-gauge")}
      ${My(" ",t.pendingStudents,"bg-rose-50 text-rose-700 dark:bg-rose-900/40 dark:text-rose-200","fa-user-clock")}
    </div>
  `,s=`
    <div class="card card-body space-y-4">
      <div class="grid gap-4 lg:grid-cols-3">
        <div>
          <label for="statsGroupFilter" class="label"> </label>
          <select id="statsGroupFilter" class="form-select stats-filter">
            <option value="all"> </option>
            ${n.map(a=>`<option value="${a.id}" ${a.id===r.groupFilter?"selected":""}>${a.label}</option>`).join("")}
          </select>
        </div>
        <div>
          <label class="label"> </label>
          <div class="flex flex-wrap gap-2" id="statsEvaluationTypeButtons">
            ${Tg("all"," ",r.evaluationType==="all")}
            ${Tg("mcq"," MCQ",r.evaluationType==="mcq")}
            ${Tg("regular","/",r.evaluationType==="regular")}
          </div>
        </div>
        <div>
          <label class="label"> </label>
          <div class="flex flex-wrap gap-2" id="statsViewModeButtons">
            ${Tg(hl.TABLE," ",r.viewMode===hl.TABLE)}
            ${Tg(hl.CHART," ",r.viewMode===hl.CHART)}
          </div>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
        <label class="inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300">
          <input type="checkbox" id="statsPendingToggle" class="form-checkbox stats-filter" ${r.showPendingOnly?"checked":""}/>
              
        </label>
        <div class="text-sm text-gray-500 dark:text-gray-400">
           : ${lo(t.groupsInView)} / ${lo(t.totalGroups)}
            : ${Ef(t.participationRate)}
            : ${t.latestEvaluation||""}
        </div>
      </div>
    </div>
  `;Gn.filterContainer.innerHTML=`
    <div class="space-y-6">
      ${i}
      ${s}
    </div>
  `,ype(r)}function My(r,e,t,n){const i=typeof e=="string"?e:lo(e);return`
    <div class="rounded-2xl border ${t} border-gray-200/60 dark:border-white/10 p-4 shadow-sm backdrop-blur">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm font-medium opacity-80">${r}</div>
          <div class="mt-2 text-2xl font-semibold">${i}</div>
        </div>
        <div class="text-3xl opacity-70"><i class="fas ${n}"></i></div>
      </div>
    </div>
  `}function Tg(r,e,t){return`<button type="button" class="px-4 py-2 rounded-full border border-gray-200 dark:border-gray-700 text-sm transition-colors ${t?"bg-blue-600 text-white border-blue-600 shadow":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}" data-stat-value="${r}">${e}</button>`}function ype(r){const e=Gn.filterContainer.querySelector("#statsGroupFilter"),t=Gn.filterContainer.querySelectorAll("#statsEvaluationTypeButtons button"),n=Gn.filterContainer.querySelectorAll("#statsViewModeButtons button"),i=Gn.filterContainer.querySelector("#statsPendingToggle");e&&Lh.addListener(e,"change",s=>{Bc.updateFilters("statistics",{...r,groupFilter:s.target.value}),Ph()}),t.forEach(s=>{Lh.addListener(s,"click",()=>{const a=s.getAttribute("data-stat-value");a&&a!==r.evaluationType&&(Bc.updateFilters("statistics",{...r,evaluationType:a}),Ph())})}),n.forEach(s=>{Lh.addListener(s,"click",()=>{const a=s.getAttribute("data-stat-value");a&&a!==r.viewMode&&(Bc.updateFilters("statistics",{...r,viewMode:a}),Ph())})}),i&&Lh.addListener(i,"change",s=>{Bc.updateFilters("statistics",{...r,showPendingOnly:s.target.checked}),Ph()})}function bpe(r,e){if(!Gn.statsContentContainer)return;const{groupMetrics:t,chartData:n}=r;let i='<div class="space-y-6">';e.viewMode===hl.TABLE?i+=wpe(t,e):e.viewMode===hl.CHART&&(i+=vpe(t)),e.groupFilter!=="all"&&t.length===1&&(i+=_pe(t[0])),i+="</div>",Gn.statsContentContainer.innerHTML=i,e.viewMode===hl.CHART&&n?(Spe(n),setTimeout(()=>{Dc&&Dc.resize()},0)):jx()}function wpe(r,e){if(!r.length)return`
      <div class="card card-body">
        <div class="placeholder-content">
          <i class="fas fa-info-circle mr-2"></i>
                
        </div>
      </div>
    `;const t=[""," "," ","MCQ ","  (%)","  (%)"," "," "],n=r.map(i=>`
        <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50/60 dark:hover:bg-gray-800/60 transition">
          <td class="px-4 py-3 font-medium text-gray-800 dark:text-gray-100">${Ew(i.groupName)}</td>
          <td class="px-4 py-3 text-gray-700 dark:text-gray-300 text-center">${lo(i.studentCount)}</td>
          <td class="px-4 py-3 text-gray-700 dark:text-gray-300 text-center">${lo(i.evaluationCount)}</td>
          <td class="px-4 py-3 text-gray-700 dark:text-gray-300 text-center">${lo(i.mcqEvaluationCount)}</td>
          <td class="px-4 py-3 text-center">
            <span class="font-semibold ${Lpe(i.averageScore)}">${Ef(i.averageScore)}</span>
          </td>
          <td class="px-4 py-3 text-center">
            <span class="font-semibold text-indigo-600 dark:text-indigo-300">${Ef(i.participationRate)}</span>
          </td>
          <td class="px-4 py-3 text-center">
            <span class="font-semibold ${i.pendingStudents>0?"text-rose-500":"text-emerald-500"}">
              ${lo(i.pendingStudents)}
            </span>
          </td>
          <td class="px-4 py-3 text-gray-600 dark:text-gray-300 text-sm text-center">${i.latestEvaluationLabel||""}</td>
        </tr>
      `).join("");return`
    <div class="card overflow-hidden">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">  </h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">
           : ${e.viewMode===hl.TABLE?"":""}   : ${Fpe(e.evaluationType)}
        </p>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-800/60">
            <tr>
              ${t.map(i=>`<th scope="col" class="px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-gray-600 dark:text-gray-300">${i}</th>`).join("")}
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-900/60 divide-y divide-gray-100 dark:divide-gray-800">
            ${n}
          </tbody>
        </table>
      </div>
    </div>
  `}function vpe(r){return r.length?`
    <div class="card">
      <div class="card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">   </h3>
        <p class="text-sm text-gray-500 dark:text-gray-400">   ,     </p>
      </div>
      <div class="card-body">
        <div class="h-96">
          <canvas id="groupStatisticsChart"></canvas>
        </div>
      </div>
    </div>
  `:`
      <div class="card card-body">
        <div class="placeholder-content">
          <i class="fas fa-chart-column mr-2"></i>
               
        </div>
      </div>
    `}function _pe(r){if(!r||!r.evaluationDetails.length)return"";const e=r.evaluationDetails.map(t=>`
        <div class="border border-gray-100 dark:border-gray-700 rounded-xl p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <div>
            <div class="text-base font-semibold text-gray-800 dark:text-white">${Ew(t.taskName)}</div>
            <div class="text-xs text-gray-500 dark:text-gray-400 mt-1 flex flex-wrap gap-3">
              <span><i class="fas fa-calendar-day mr-1"></i>${t.dateLabel||""}</span>
              <span><i class="fas fa-list-check mr-1"></i>${t.type==="mcq"?"MCQ":"/"}</span>
            </div>
          </div>
          <div class="flex flex-wrap gap-4 text-sm text-gray-700 dark:text-gray-200">
            <span class="font-semibold text-indigo-600 dark:text-indigo-300"> : ${Ef(t.averagePercentage)}</span>
            <span>: ${lo(t.assessedCount)}</span>
            <span class="${t.pendingCount>0?"text-rose-500 font-medium":""}">: ${lo(t.pendingCount)}</span>
          </div>
        </div>
      `).join("");return`
    <div class="card card-body space-y-4">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <h4 class="text-lg font-semibold text-gray-800 dark:text-white">
          ${Ew(r.groupName)} -  
        </h4>
        <span class="text-sm text-gray-500 dark:text-gray-400">
           ${lo(r.evaluationCount)}  
        </span>
      </div>
      <div class="space-y-3">
        ${e}
      </div>
    </div>
  `}function xpe(r){const{groups:e,students:t,tasks:n,evaluations:i}=Bc.getState(),s=new Map,a=new Map(n.map(u=>[u.id,u]));e.forEach(u=>{const h=t.filter(d=>d.groupId===u.id).length;s.set(u.id,{groupId:u.id,groupName:Ew(u.name),studentCount:h,evaluationDetails:[],evaluationCounts:{all:0,mcq:0,regular:0},participants:{all:new Set,mcq:new Set,regular:new Set},latestEvaluationMs:null})}),i.forEach(u=>{const h=s.get(u.groupId);if(!h)return;const d=a.get(u.taskId),p=parseFloat(u.maxPossibleScore)||kpe(d)||IO,y=Tpe(d)?"mcq":"regular",b=u.scores||{},B=Object.keys(b),S=B.length,C=Math.max(h.studentCount-S,0);let P=0;B.forEach(v=>{var x;const T=parseFloat((x=b[v])==null?void 0:x.totalScore)||0,E=p>0?T/p*100:0;P+=E,h.participants.all.add(v),h.participants[y].add(v)});const M=S>0?P/S:0,L=h.studentCount>0?Math.min(100,S/h.studentCount*100):0,_=Ppe(u.taskDate||u.completedAt||u.updatedAt||u.createdAt||(d==null?void 0:d.date));_&&(!h.latestEvaluationMs||_>h.latestEvaluationMs)&&(h.latestEvaluationMs=_),h.evaluationCounts.all+=1,h.evaluationCounts[y]+=1,h.evaluationDetails.push({type:y,assessedCount:S,pendingCount:C,averagePercentage:M,weightedScoreSum:P,weight:S,participationRate:L,dateMs:_,dateLabel:Cw(_||(d==null?void 0:d.date)),taskName:(d==null?void 0:d.name)||u.taskName||" "})});const o=[];s.forEach(u=>{o.push(Bpe(u,r))});const A=o.filter(u=>r.groupFilter==="all"?!0:u.groupId===r.groupFilter).filter(u=>r.showPendingOnly?u.pendingStudents>0:!0).sort((u,h)=>h.evaluationCount-u.evaluationCount||h.averageScore-u.averageScore),l=Cpe(o,A,r),c=Epe(A);return{filtersUsed:r,groupMetrics:A,summary:l,chartData:c,groupOptions:o.map(u=>({id:u.groupId,label:u.groupName}))}}function Bpe(r,e){const t=e.evaluationType==="all"?r.evaluationDetails:r.evaluationDetails.filter(u=>u.type===e.evaluationType),n=t.length,i=t.reduce((u,h)=>u+h.assessedCount,0),s=t.reduce((u,h)=>u+h.pendingCount,0),a=t.reduce((u,h)=>u+h.weightedScoreSum,0),o=t.reduce((u,h)=>u+h.weight,0),A=o>0?a/o:0,l=n>0&&r.studentCount>0?Math.min(100,i/(r.studentCount*n)*100):0,c=t.reduce((u,h)=>h.dateMs&&h.dateMs>u.maxDate?{maxDate:h.dateMs,label:h.dateLabel}:u,{maxDate:-1/0,label:null});return{groupId:r.groupId,groupName:r.groupName,studentCount:r.studentCount,evaluationCount:n,mcqEvaluationCount:r.evaluationCounts.mcq,pendingStudents:s,averageScore:A,participationRate:l,assessedCount:i,weightedScoreSum:a,weight:o,latestEvaluationLabel:c.label||(r.latestEvaluationMs?Cw(r.latestEvaluationMs):null),uniqueParticipants:Ipe(r.participants,e.evaluationType),potentialParticipants:r.studentCount*Math.max(n,1),evaluationDetails:t.sort((u,h)=>(h.dateMs||0)-(u.dateMs||0))}}function Cpe(r,e,t){const n=e.reduce((u,h)=>u+h.evaluationCount,0),i=t.evaluationType==="mcq"?n:e.reduce((u,h)=>u+h.mcqEvaluationCount,0),s=e.reduce((u,h)=>u+h.pendingStudents,0),a=e.reduce((u,h)=>u+h.weightedScoreSum,0),o=e.reduce((u,h)=>u+h.weight,0),A=e.reduce((u,h)=>u+h.assessedCount,0),l=e.reduce((u,h)=>u+h.potentialParticipants,0),c=e.reduce((u,h)=>{const d=h.evaluationDetails[0];return d!=null&&d.dateMs&&d.dateMs>u?d.dateMs:u},-1/0);return{totalGroups:r.length,groupsInView:e.length,totalEvaluations:n,totalMcqEvaluations:i,averageScore:o>0?a/o:0,pendingStudents:s,participationRate:l>0?Math.min(100,A/l*100):0,latestEvaluation:c>0?Cw(c):null}}function Epe(r){if(!r.length)return null;const e=Dpe(),t=r.map(o=>o.groupName),n=r.map(o=>Number(o.averageScore.toFixed(2))),i=r.map(o=>Number(o.participationRate.toFixed(2))),s=r.map(o=>o.pendingStudents),a=s.length?Math.max(...s):0;return{labels:t,datasets:[{type:"bar",label:"  (%)",data:n,backgroundColor:e.scoreBar,borderRadius:8,yAxisID:"y"},{type:"bar",label:"  (%)",data:i,backgroundColor:e.partBar,borderRadius:8,yAxisID:"y"},{type:"line",label:"  ()",data:s,backgroundColor:e.pendLine,borderColor:e.pendLineBorder,pointBackgroundColor:e.pendLineBorder,pointBorderColor:e.pendLineBorder,pointRadius:3,borderWidth:2,tension:.35,fill:!1,yAxisID:"y1"}],options:{maintainAspectRatio:!1,responsive:!0,interaction:{mode:"index",intersect:!1},scales:{y:{beginAtZero:!0,max:IO,ticks:{color:e.ticks,callback:o=>`${o}%`},grid:{color:e.grid}},y1:{beginAtZero:!0,position:"right",suggestedMax:a*1.2||10,ticks:{color:e.ticks,callback:o=>lo(o)},grid:{drawOnChartArea:!1}},x:{ticks:{color:e.ticks},grid:{color:e.grid}}},plugins:{tooltip:{backgroundColor:e.tooltipBg,titleColor:e.tooltipFg,bodyColor:e.tooltipFg,callbacks:{label:o=>o.dataset.yAxisID==="y1"?`${o.dataset.label}: ${lo(o.parsed.y)} `:`${o.dataset.label}: ${Ef(o.parsed.y)}`}},legend:{labels:{usePointStyle:!0,color:e.legend}}},animation:!1}}}function Spe(r){const e=document.getElementById("groupStatisticsChart");e&&(jx(),Dc=new Chart(e.getContext("2d"),{type:"bar",data:{labels:r.labels,datasets:r.datasets},options:r.options}))}function jx(){Dc&&(Dc.destroy(),Dc=null)}function Ipe(r,e){return e==="mcq"?r.mcq.size:e==="regular"?r.regular.size:r.all.size}function kpe(r){if(!r)return null;if(typeof r.maxScore=="number")return r.maxScore;if(r.maxScoreBreakdown){const e=r.maxScoreBreakdown;return(parseFloat(e.task)||0)+(parseFloat(e.team)||0)+(parseFloat(e.additional)||0)+(parseFloat(e.mcq)||0)}return null}function Tpe(r){return!r||!r.maxScoreBreakdown?!1:parseFloat(r.maxScoreBreakdown.mcq)>0}function Fpe(r){switch(r){case"mcq":return"MCQ";case"regular":return"/";default:return" "}}function Lpe(r){return r>=80?"text-emerald-500":r>=60?"text-blue-500":r>=40?"text-amber-500":"text-rose-500"}function lo(r){return qi!=null&&qi.convertToBanglaNumber?qi.convertToBanglaNumber(Math.round(r??0)):Math.round(r??0).toString()}function Ef(r){const t=(Number.isFinite(r)?r:0).toFixed(1);return qi!=null&&qi.convertToBanglaNumber?`${qi.convertToBanglaNumber(t)}%`:`${t}%`}function Cw(r){if(!r)return"";if(qi!=null&&qi.formatTimestamp)return qi.formatTimestamp(r instanceof Date?r:new Date(r));const e=r instanceof Date?r:new Date(r);return Number.isNaN(e.getTime())?"":e.toLocaleDateString("bn-BD",{year:"numeric",month:"short",day:"numeric"})}function Ppe(r){if(!r)return null;if(r instanceof Date)return r.getTime();if(typeof r=="number")return r;if(typeof r=="string"){const e=Date.parse(r);return Number.isNaN(e)?null:e}if(typeof r=="object"){if(typeof r.toDate=="function")try{return r.toDate().getTime()}catch{return null}if(typeof r.seconds=="number")return r.seconds*1e3}return null}function Ew(r){return r?qi!=null&&qi.ensureBengaliText&&typeof qi.ensureBengaliText=="function"?qi.ensureBengaliText(r):typeof r=="string"?r.trim():String(r):""}function Npe(){const r=document.documentElement;return r.classList.contains("dark")?!0:r.classList.contains("light")?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function Dpe(){const r=Npe();return{dark:r,scoreBar:r?"rgba(96, 165, 250, 0.9)":"rgba(37, 99, 235, 0.9)",partBar:r?"rgba(52, 211, 153, 0.9)":"rgba(16, 185, 129, 0.9)",pendLine:r?"rgba(248, 113, 113, 1.0)":"rgba(220, 38, 38, 1.0)",pendLineBorder:r?"rgba(252, 165, 165, 1.0)":"rgba(239, 68, 68, 1.0)",grid:r?"rgba(148,163,184,0.25)":"rgba(100,116,139,0.2)",ticks:r?"#E5E7EB":"#334155",legend:r?"#F1F5F9":"#0F172A",tooltipBg:r?"rgba(2,6,23,0.9)":"rgba(255,255,255,0.95)",tooltipFg:r?"#F8FAFC":"#0F172A"}}function Rpe(r,e){if(!r)return;if(!!(r.offsetParent||r.getClientRects().length)){e();return}ph==null||ph.disconnect(),ph=new MutationObserver(()=>{!!(r.offsetParent||r.getClientRects().length)&&(ph.disconnect(),e())});let n=r;for(;n&&n!==document;)ph.observe(n,{attributes:!0,attributeFilter:["class","style"],subtree:!1}),n=n.parentElement}Sf.register(...rL);Sf.register(fB);let BA,kO,Jg,cc,Gx=[];const ks={page:null,container:null};let Cr={group:"all",academicGroup:"all",session:"all",gender:"all",role:"all",assignment:"all",extra:[]};const TO=[{id:"topic_none",text:"    (-)",type:"topic"},{id:"topic_understood",text:"  (+)",type:"topic"},{id:"topic_learned_well",text:"   (+)",type:"topic"},{id:"homework_done",text:"     (+)",type:"option"},{id:"attendance_regular",text:"   (+)",type:"option"}];function Upe(r){return BA=r.managers.stateManager,kO=r.managers.uiManager,Jg=r.services.dataService,cc=r.utils,Mpe(),FO(),console.log(" Student Filter component initialized."),{render:Ope}}async function FO(){try{await Promise.all([Jg.loadStudents(),Jg.loadGroups(),Jg.loadEvaluations(),Jg.loadTasks()]),console.log(" Student Filter data loaded."),ks.container&&ju()}catch(r){console.error("Failed to load data for Student Filter:",r)}}function Mpe(){ks.page=document.getElementById("page-student-filter"),ks.page&&(ks.container=ks.page.querySelector("#studentFilterContainer"))}function Ope(){!ks.page||!ks.container||(console.log("Rendering Student Filter page..."),ks.container.innerHTML=`
    <div class="space-y-6">
      <!-- Top Filter Panel -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-5 transition-all duration-300 hover:shadow-md">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 border-b border-gray-100 dark:border-gray-700 pb-2">
          <h3 class="font-bold text-lg text-gray-800 dark:text-white flex items-center gap-2">
             
          </h3>
          <div class="flex items-center gap-2 mt-2 md:mt-0">
             <button id="sfRefreshBtn" class="text-xs font-medium text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors flex items-center gap-1">
              <i class="fas fa-sync-alt"></i> 
            </button>
            <button id="sfResetBtn" class="text-xs font-medium text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors flex items-center gap-1">
              
            </button>
          </div>
        </div>
        
        <!-- Primary Filters Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-4">
          <!-- Group -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
            <div class="relative">
               <select id="sfGroup" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all">
                <option value="all"> </option>
              </select>
            </div>
          </div>

          <!-- Academic Group -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"> </label>
            <div class="relative">
               <select id="sfAcademic" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all">
                <option value="all"></option>
              </select>
            </div>

          </div>

           <!-- Session -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
            <div class="relative">
               <select id="sfSession" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all">
                <option value="all"></option>
              </select>
            </div>
          </div>

          <!-- Gender -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
            <div class="relative">
               <select id="sfGender" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 transition-all">
                <option value="all"></option>
                <option value=""></option>
                <option value=""></option>
              </select>
            </div>
          </div>

          <!-- Role -->
           <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
            <div class="relative">
               <select id="sfRole" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all">
                <option value="all"></option>
                <option value="team-leader"> </option>
                <option value="time-keeper"> </option>
                <option value="reporter"></option>
                <option value="resource-manager"> </option>
                <option value="peace-maker"> </option>
              </select>
            </div>
          </div>

           <!-- Assignment (Target Assignment) -->
          <div class="relative">
            <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1.5"></label>
             <div class="relative">
               <select id="sfAssignment" class="w-full form-select rounded-lg border-gray-200 dark:bg-gray-700/50 dark:border-gray-600 dark:text-gray-100 text-sm focus:ring-2 focus:ring-cyan-500/20 focus:border-cyan-500 transition-all">
                <option value="all">  ()</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Extra Filters (Chips Layout) -->
        <div class="pt-4 border-t border-gray-100 dark:border-gray-700">
          <label class="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3">  </label>
          <div class="flex flex-wrap gap-2">
            ${TO.map(r=>`
              <label class="group relative cursor-pointer select-none">
                <input type="checkbox" value="${r.id}" class="peer sr-only sf-extra-check">
                <div class="px-3 py-1.5 rounded-full border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-300 text-xs font-medium transition-all peer-checked:bg-blue-50 peer-checked:text-blue-600 peer-checked:border-blue-200 dark:peer-checked:bg-blue-900/30 dark:peer-checked:text-blue-300 dark:peer-checked:border-blue-700/50 hover:bg-gray-100 dark:hover:bg-gray-700">
                  ${r.text}
                </div>
              </label>
            `).join("")}
             <label class="group relative cursor-pointer select-none">
                <input type="checkbox" value="unevaluated" class="peer sr-only sf-extra-check">
                <div class="px-3 py-1.5 rounded-full border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-300 text-xs font-medium transition-all peer-checked:bg-amber-50 peer-checked:text-amber-600 peer-checked:border-amber-200 dark:peer-checked:bg-amber-900/30 dark:peer-checked:text-amber-300 dark:peer-checked:border-amber-700/50 hover:bg-gray-100 dark:hover:bg-gray-700">
                   
                </div>
              </label>
             
              <label class="group relative cursor-pointer select-none">
                <input type="checkbox" value="absent_mcq" class="peer sr-only sf-extra-check">
                <div class="px-3 py-1.5 rounded-full border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-600 dark:text-gray-300 text-xs font-medium transition-all peer-checked:bg-rose-50 peer-checked:text-rose-600 peer-checked:border-rose-200 dark:peer-checked:bg-rose-900/30 dark:peer-checked:text-rose-300 dark:peer-checked:border-rose-700/50 hover:bg-gray-100 dark:hover:bg-gray-700">
                  MCQ  
                </div>
              </label>
          </div>
        </div>
      </div>

      <!-- Main Content (Table & Chart) -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row justify-between items-center gap-4 bg-gray-50/50 dark:bg-gray-900/50 backdrop-blur-sm">
          <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 w-full sm:w-auto">
            <div class="flex items-center gap-2">
              <span class="flex h-8 w-8 items-center justify-center rounded-lg bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400">
                <i class="fas fa-list-ul"></i>
              </span>
              <h3 class="font-bold text-gray-800 dark:text-gray-200" id="sfResultCount">: ...</h3>
            </div>
            
             <!-- Color Legend (Header) -->
            <div id="sfChartLegend" class="hidden flex-wrap gap-2 sm:ml-2">
              <span class="inline-flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 px-2 py-0.5 rounded-full border border-gray-100 dark:border-gray-600 shadow-sm">
                <span class="w-2 h-2 rounded-full bg-purple-400"></span> 
              </span>
              <span class="inline-flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 px-2 py-0.5 rounded-full border border-gray-100 dark:border-gray-600 shadow-sm">
                <span class="w-2 h-2 rounded-full bg-orange-400"></span> 
              </span>
              <span class="inline-flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 px-2 py-0.5 rounded-full border border-gray-100 dark:border-gray-600 shadow-sm">
                <span class="w-2 h-2 rounded-full bg-blue-400"></span> 
              </span>
            </div>
          </div>
          
          <div class="flex items-center gap-3 w-full sm:w-auto justify-between sm:justify-end">
             <!-- View Toggle -->
            <div class="flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
              <button id="sfViewTable" class="px-3 py-1.5 rounded-md text-xs font-bold bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white transition-all flex items-center gap-1.5">
                <i class="fas fa-table"></i> 
              </button>
              <button id="sfViewChart" class="px-3 py-1.5 rounded-md text-xs font-bold text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-all flex items-center gap-1.5">
                <i class="fas fa-chart-bar"></i> 
              </button>
            </div>

            <button id="sfPrintBtn" class="btn btn-sm btn-primary shadow-sm flex items-center gap-2">
              <i class="fas fa-print"></i>  
            </button>
          </div>
        </div>

        <!-- Table View -->
        <div id="sfTableContainer" class="overflow-x-auto transition-all duration-300">
          <table class="w-full text-sm text-left">
            <thead class="text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-900/30 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700">
              <tr>
                <th class="px-6 py-3 font-semibold tracking-wider">#</th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"> </th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 font-semibold tracking-wider"></th>
                <th class="px-6 py-3 text-center font-semibold tracking-wider" id="sfScoreHeader"> </th>
              </tr>
            </thead>
            <tbody id="sfTableBody" class="divide-y divide-gray-100 dark:divide-gray-700/50">
              <!-- Rows will be injected here -->
            </tbody>
          </table>
        </div>

        <!-- Chart View -->
        <div id="sfChartContainer" class="hidden p-4 sm:p-6 w-full h-[500px] sm:h-[600px] bg-white dark:bg-gray-800 transition-all duration-300">
             <canvas id="sfChartCanvas"></canvas>
        </div>

        <div id="sfEmptyState" class="hidden py-12 flex flex-col items-center justify-center text-gray-400 dark:text-gray-500">
          <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-full mb-3">
             <i class="fas fa-search text-3xl opacity-50"></i>
          </div>
          <p class="text-lg font-medium">   </p>
          <p class="text-sm opacity-75">     </p>
        </div>
      </div>
    </div>
  `,Qpe(),Hpe(),ju())}function Qpe(){const r=BA.get("groups")||[],e=BA.get("students")||[],t=BA.get("tasks")||[],n=document.getElementById("sfGroup");n&&r.forEach(o=>{const A=document.createElement("option");A.value=o.id,A.textContent=o.name,n.appendChild(A)});const i=document.getElementById("sfAcademic");i&&[...new Set(e.map(A=>A.academicGroup).filter(Boolean))].sort().forEach(A=>{const l=document.createElement("option");l.value=A,l.textContent=A,i.appendChild(l)});const s=document.getElementById("sfSession");s&&[...new Set(e.map(A=>A.session).filter(Boolean))].sort().forEach(A=>{const l=document.createElement("option");l.value=A,l.textContent=A,s.appendChild(l)});const a=document.getElementById("sfAssignment");a&&(t.sort((o,A)=>(A.date||"").localeCompare(o.date||"")),t.forEach(o=>{const A=document.createElement("option");A.value=o.id,A.textContent=o.name,a.appendChild(A)}))}function Hpe(){const r=ks.container,e=r.querySelector("#sfViewTable"),t=r.querySelector("#sfViewChart");e&&t&&(e.addEventListener("click",()=>{Cr.viewMode="table",n3(),ju()}),t.addEventListener("click",()=>{Cr.viewMode="chart",n3(),ju()})),["sfGroup","sfAcademic","sfSession","sfGender","sfRole","sfAssignment"].forEach(o=>{const A=r.querySelector(`#${o}`);A&&A.addEventListener("change",l=>{const c=o.replace("sf","");let u=c.charAt(0).toLowerCase()+c.slice(1);u==="academic"&&(u="academicGroup"),Cr[u]=l.target.value,ju()})}),r.querySelectorAll(".sf-extra-check").forEach(o=>{o.addEventListener("change",A=>{A.target.checked?Cr.extra.push(A.target.value):Cr.extra=Cr.extra.filter(l=>l!==A.target.value),ju()})});const i=r.querySelector("#sfResetBtn");i&&i.addEventListener("click",()=>{Cr={group:"all",academicGroup:"all",session:"all",gender:"all",role:"all",assignment:"all",extra:[],viewMode:Cr.viewMode||"table"},["sfGroup","sfAcademic","sfSession","sfGender","sfRole","sfAssignment"].forEach(o=>{const A=r.querySelector(`#${o}`);A&&(A.value="all")}),r.querySelectorAll(".sf-extra-check").forEach(o=>o.checked=!1),ju()});const s=r.querySelector("#sfRefreshBtn");s&&s.addEventListener("click",()=>{FO()});const a=r.querySelector("#sfPrintBtn");a&&a.addEventListener("click",()=>{if(Gx.length===0){kO.showToast("     ","warning");return}const o=BA.get("evaluations")||[],A=BA.get("groups")||[],l=BA.get("tasks")||[],c=new Map(A.map(d=>[d.id,d])),u=new Map(l.map(d=>[d.id,d])),h=new Map(TO.map(d=>[d.id,d.text]));h.set("unevaluated"," "),h.set("absent_mcq","MCQ  "),I6(Gx,Cr,o,c,h,u)})}function n3(){const r=ks.container,e=r.querySelector("#sfViewTable"),t=r.querySelector("#sfViewChart"),n=r.querySelector("#sfTableContainer"),i=r.querySelector("#sfChartContainer"),s=r.querySelector("#sfChartLegend");Cr.viewMode==="chart"?(e.className="px-3 py-1.5 rounded-md text-xs font-bold text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-all flex items-center gap-1.5",t.className="px-3 py-1.5 rounded-md text-xs font-bold bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white transition-all flex items-center gap-1.5",n.classList.add("hidden"),i.classList.remove("hidden"),s&&s.classList.remove("hidden"),s&&s.classList.add("flex")):(e.className="px-3 py-1.5 rounded-md text-xs font-bold bg-white dark:bg-gray-600 shadow-sm text-gray-800 dark:text-white transition-all flex items-center gap-1.5",t.className="px-3 py-1.5 rounded-md text-xs font-bold text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-all flex items-center gap-1.5",n.classList.remove("hidden"),i.classList.add("hidden"),s&&s.classList.add("hidden"),s&&s.classList.remove("flex"))}function ju(){const r=BA.get("students")||[],e=BA.get("groups")||[],t=BA.get("evaluations")||[],n=new Map(e.map(h=>[h.id,h])),i=r.filter(h=>{if(Cr.group!=="all"&&h.groupId!==Cr.group||Cr.academicGroup!=="all"&&(h.academicGroup||"").trim()!==Cr.academicGroup||Cr.session!=="all"&&h.session!==Cr.session)return!1;if(Cr.gender!=="all"){const p=(h.gender||"").trim().normalize("NFC"),f=Cr.gender.trim().normalize("NFC");if(p!==f)return!1}if(Cr.role!=="all"&&h.role!==Cr.role)return!1;const d=[];if(t.forEach(p=>{p.scores&&p.scores[h.id]&&d.push({taskId:p.taskId,taskDate:p.taskDate,...p.scores[h.id]})}),Cr.extra.length>0){for(const p of Cr.extra)if(p==="unevaluated"){if(d.length>0)return!1}else if(p==="absent_task")if(Cr.assignment!=="all"){const f=d.find(y=>y.taskId===Cr.assignment);return!f||!f.taskScore}else return!!(d.length===0||d.some(y=>!y.taskScore));else if(p==="absent_mcq")if(Cr.assignment!=="all"){const f=d.find(y=>y.taskId===Cr.assignment);return!f||!f.mcqScore}else return!!(d.length===0||d.some(y=>!y.mcqScore));else if(!d.some(y=>{const b=y.additionalCriteria||{};return p.startsWith("topic_")?b.topic===p:p==="homework_done"?b.homework===!0:p==="attendance_regular"?b.attendance===!0:!1}))return!1}return!0});Gx=i;const s=ks.container.querySelector("#sfTableBody"),a=ks.container.querySelector("#sfResultCount"),o=ks.container.querySelector("#sfEmptyState"),A=ks.container.querySelector("#sfTableContainer"),l=ks.container.querySelector("#sfChartContainer");if(a&&(a.textContent=`: ${cc.convertToBanglaNumber(i.length)} `),i.length===0){A&&A.classList.add("hidden"),l&&l.classList.add("hidden"),o&&o.classList.remove("hidden");return}if(o&&o.classList.add("hidden"),Cr.viewMode==="chart"){A&&A.classList.add("hidden"),l&&l.classList.remove("hidden"),Vpe(i,t);return}else A&&A.classList.remove("hidden"),l&&l.classList.add("hidden");s&&(s.innerHTML="");const c=ks.container.querySelector("thead tr");let u=c.querySelector("#sfSpecificScoreHeader");Cr.assignment!=="all"?u||(u=document.createElement("th"),u.id="sfSpecificScoreHeader",u.className="px-6 py-3 text-center font-semibold tracking-wider text-blue-600 dark:text-blue-400 whitespace-nowrap",u.textContent=" ",c.appendChild(u)):u&&u.remove(),i.forEach((h,d)=>{var _;const p=document.createElement("tr");p.className="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer";const f=((_=n.get(h.groupId))==null?void 0:_.name)||"-",y=[];t.forEach(v=>{v.scores&&v.scores[h.id]&&y.push({taskId:v.taskId,...v.scores[h.id]})});const b=y.reduce((v,T)=>v+(T.totalScore||0),0),B=y.length?(b/y.length).toFixed(1):0,S=y.length?cc.convertToBanglaNumber(B):"-";let C="-",P="text-gray-500";if(Cr.assignment!=="all"){const v=y.find(T=>T.taskId===Cr.assignment);v&&(C=cc.convertToBanglaNumber(v.totalScore),P="font-bold text-blue-600 dark:text-blue-400")}let M="-";const L=(h.gender||"").trim();L===""||L.toLowerCase()==="male"?M='<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"></span>':L===""||L.toLowerCase()==="female"?M='<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-300"></span>':L&&(M=`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300">${L}</span>`),p.innerHTML=`
        <td class="px-6 py-3 font-medium text-gray-500 dark:text-gray-400">${cc.convertToBanglaNumber(d+1)}</td>
        <td class="px-6 py-3 font-medium text-gray-900 dark:text-white whitespace-nowrap">${h.name}</td>
        <td class="px-6 py-3">${cc.convertToBanglaNumber(h.roll)}</td>
        <td class="px-6 py-3">${M}</td>
        <td class="px-6 py-3 whitespace-nowrap">${f}</td>
        <td class="px-6 py-3 whitespace-nowrap">${jpe(h.academicGroup)}</td>
        <td class="px-6 py-3">${h.session||"-"}</td>
        <td class="px-6 py-3 whitespace-nowrap">${Gpe(h.role)}</td>
        <td class="px-6 py-3 text-xs text-gray-500">${h.contact||"-"}</td>
        <td class="px-6 py-3 text-center font-medium">${S}</td>
        ${Cr.assignment!=="all"?`<td class="px-6 py-3 text-center ${P}">${C}</td>`:""}
      `,p.addEventListener("click",()=>{typeof window<"u"&&typeof window.openStudentModalById=="function"?window.openStudentModalById(h.id):console.warn("Student modal function not available")}),s.appendChild(p)})}let D_=null;function Vpe(r,e){const t=document.getElementById("sfChartCanvas");if(!t)return;const n=r.map(o=>{const A=[];e.forEach(c=>{c.scores&&c.scores[o.id]&&A.push({taskId:c.taskId,...c.scores[o.id]})});let l=0;if(Cr.assignment!=="all"){const c=A.find(u=>u.taskId===Cr.assignment);l=c&&Number(c.totalScore)||0}else{const c=A.reduce((u,h)=>u+(Number(h.totalScore)||0),0);l=A.length?c/A.length:0}return{name:o.name,roll:o.roll,academicGroup:o.academicGroup,score:Number(l.toFixed(1))}});n.sort((o,A)=>A.score-o.score);const i=n.map(o=>o.name),s=n.map(o=>o.score),a=n.map(o=>$pe(o.academicGroup));D_&&D_.destroy(),D_=new Sf(t,{type:"bar",data:{labels:i,datasets:[{label:Cr.assignment!=="all"?" ":" ",data:s,backgroundColor:a,borderRadius:6,borderSkipped:!1,barPercentage:.7,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"x",plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(o){const A=n[o.dataIndex];return`${A.name} (${A.roll}) - ${cc.convertToBanglaNumber(A.score)}`}}},datalabels:{anchor:"end",align:"top",formatter:o=>cc.convertToBanglaNumber(o),font:{weight:"bold",size:11},color:"#6b7280"}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)",borderDash:[5,5]},ticks:{font:{family:"'Noto Sans Bengali', sans-serif"}}},x:{grid:{display:!1},ticks:{autoSkip:!1,maxRotation:90,minRotation:45,font:{size:10,family:"'Noto Sans Bengali', sans-serif"}}}},onClick:(o,A)=>{if(A.length>0){const l=A[0].index,c=r.find(u=>u.name===n[l].name&&u.roll===n[l].roll);c&&typeof window<"u"&&typeof window.openStudentModalById=="function"&&window.openStudentModalById(c.id)}}}})}function $pe(r){const e=(r||"").toString().trim().toLowerCase();return/science|/.test(e)?"rgba(168, 85, 247, 0.7)":/arts|/.test(e)?"rgba(249, 115, 22, 0.7)":/commerce||/.test(e)?"rgba(59, 130, 246, 0.7)":/vocational|/.test(e)?"rgba(6, 182, 212, 0.7)":"rgba(107, 114, 128, 0.7)"}function jpe(r){if(!r)return"-";const e={Science:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300","Business Studies":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",Humanities:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300"};let t="bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";return r.includes("Science")||r.includes("")?t=e.Science:r.includes("Business")||r.includes("")?t=e["Business Studies"]:(r.includes("Humanities")||r.includes(""))&&(t=e.Humanities),`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t}">${r}</span>`}function Gpe(r){if(!r)return"-";const t={"team-leader":{label:" ",cls:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},"time-keeper":{label:" ",cls:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"},reporter:{label:"",cls:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},"resource-manager":{label:" ",cls:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300"},"peace-maker":{label:" ",cls:"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-300"}}[r]||{label:r,cls:"bg-gray-100 text-gray-800"};return`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.cls}">${t.label}</span>`}const _o={dashboardSections:{hero:!0,stats:!0,eliteGroups:!0,topGroups:!0,academicStats:!0,ranking:!0},sidebar:{dashboard:{visible:!0,type:"public",label:"",icon:"fa-tachometer-alt",locked:!0},"upcoming-assignments":{visible:!0,type:"public",label:" ",icon:"fa-calendar-week"},"student-ranking":{visible:!0,type:"public",label:" ",icon:"fa-trophy"},"all-students":{visible:!0,type:"public",label:" ",icon:"fa-user-graduate"},"student-filter":{visible:!0,type:"public",label:" ",icon:"fa-filter"},"group-analysis":{visible:!0,type:"public",label:" ",icon:"fa-chart-bar"},"graph-analysis":{visible:!0,type:"public",label:" ",icon:"fa-chart-line"},statistics:{visible:!0,type:"public",label:" ",icon:"fa-calculator"},"group-policy":{visible:!0,type:"public",label:" ",icon:"fa-book"},export:{visible:!0,type:"public",label:"",icon:"fa-file-export"},groups:{visible:!0,type:"private",label:" ",icon:"fa-layer-group"},members:{visible:!0,type:"private",label:" ",icon:"fa-users"},tasks:{visible:!0,type:"private",label:" ",icon:"fa-tasks"},evaluation:{visible:!0,type:"private",label:"",icon:"fa-clipboard-check"},settings:{visible:!0,type:"private",label:"",icon:"fa-cog",locked:!0}}};let Dr=JSON.parse(JSON.stringify(_o));const LO="app_settings_v2";function Kpe(r){return Zpe(),zpe(),_m(),console.log(" Settings component initialized"),{render:PO,applySettings:_m,isPagePublic:Jpe,toggleSidebarType:Ype,toggleDashboardSection:Xpe,toggleSidebarVisibility:Wpe}}function zpe(){Object.keys(Dr.sidebar).forEach(r=>{_o.sidebar.hasOwnProperty(r)||delete Dr.sidebar[r]}),Object.keys(_o.sidebar).forEach(r=>{Dr.sidebar[r]?(_o.sidebar[r].locked&&(Dr.sidebar[r].locked=!0,Dr.sidebar[r].visible=!0,Dr.sidebar[r].type=_o.sidebar[r].type),Dr.sidebar[r].label=_o.sidebar[r].label,Dr.sidebar[r].icon=_o.sidebar[r].icon):Dr.sidebar[r]=_o.sidebar[r]}),Object.keys(_o.dashboardSections).forEach(r=>{Dr.dashboardSections[r]===void 0&&(Dr.dashboardSections[r]=_o.dashboardSections[r])})}function PO(){const r=document.getElementById("settingsContent");r&&(r.innerHTML=`
    <div class="space-y-8">
      <!-- Header Section -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700">
        <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2"> </h3>
        <p class="text-gray-500 dark:text-gray-400 text-sm">      </p>
      </div>

      <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
        <!-- Sidebar Management (Left - Wider) -->
        <div class="xl:col-span-2 space-y-6">
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden">
            <div class="p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400">
                  <i class="fas fa-bars"></i>
                </div>
                <div>
                  <h4 class="font-bold text-gray-800 dark:text-white"> </h4>
                  <p class="text-xs text-gray-500 dark:text-gray-400">    </p>
                </div>
              </div>
            </div>
            
            <div class="overflow-x-auto">
              <table class="w-full text-sm text-left">
                <thead class="text-xs text-gray-500 uppercase bg-gray-50/80 dark:bg-gray-700/50 dark:text-gray-400">
                  <tr>
                    <th scope="col" class="px-6 py-4 font-semibold"> </th>
                    <th scope="col" class="px-6 py-4 text-center font-semibold"></th>
                    <th scope="col" class="px-6 py-4 text-center font-semibold"> </th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-100 dark:divide-gray-700/50">
                  ${qpe()}
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Dashboard & Other Settings (Right) -->
        <div class="space-y-6">
          <!-- Dashboard Sections -->
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden">
            <div class="p-6 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                  <i class="fas fa-tachometer-alt"></i>
                </div>
                <div>
                  <h4 class="font-bold text-gray-800 dark:text-white"> </h4>
                  <p class="text-xs text-gray-500 dark:text-gray-400">   </p>
                </div>
              </div>
            </div>
            <div class="p-6 space-y-4">
              ${Fg("hero"," ","    ","fa-star","indigo")}
              ${Fg("stats"," "," ,    ","fa-chart-pie","blue")}
              ${Fg("topGroups","  ( )","    ","fa-crown","yellow")}
              ${Fg("academicStats"," "," ","fa-university","sky")}
              ${Fg("ranking"," ","   ","fa-list-ol","emerald")}
            </div>
          </div>
          
          <!-- Info Card -->
          <div class="bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-6 border border-blue-100 dark:border-blue-800/30">
            <div class="flex gap-3">
              <i class="fas fa-info-circle text-blue-600 dark:text-blue-400 mt-1"></i>
              <div>
                <h5 class="font-semibold text-blue-800 dark:text-blue-300 text-sm"> </h5>
                <p class="text-xs text-blue-700/80 dark:text-blue-300/70 mt-1 leading-relaxed">
                  ''         ''          
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  `)}function Fg(r,e,t,n,i){const s=Dr.dashboardSections[r];return`
    <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/30 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-purple-200 dark:hover:border-purple-500/30 transition-colors">
      <div class="flex items-center gap-4">
        <div class="w-10 h-10 rounded-lg bg-${i}-100 dark:bg-${i}-900/30 flex items-center justify-center text-${i}-600 dark:text-${i}-400 shadow-sm">
          <i class="fas ${n}"></i>
        </div>
        <div>
          <p class="font-semibold text-gray-900 dark:text-white">${e}</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">${t}</p>
        </div>
      </div>
      <label class="relative inline-flex items-center cursor-pointer">
        <input type="checkbox" class="sr-only peer" 
          ${s?"checked":""}
          onchange="window.smartEvaluator.components.settings.toggleDashboardSection('${r}', this.checked)">
        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300/50 dark:peer-focus:ring-purple-800/50 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"></div>
      </label>
    </div>
  `}function qpe(){return Object.keys(_o.sidebar).map(r=>{const e=Dr.sidebar[r];if(!e)return"";const t=e.locked;return`
    <tr class="group hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors border-b border-gray-50 dark:border-gray-800 last:border-0">
      <td class="px-6 py-4">
        <div class="flex items-center gap-4">
          <div class="w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400 group-hover:bg-white group-hover:shadow-sm dark:group-hover:bg-gray-600 transition-all">
            <i class="fas ${e.icon}"></i>
          </div>
          <span class="font-medium text-gray-700 dark:text-gray-200">${e.label}</span>
        </div>
      </td>
      <td class="px-6 py-4 text-center">
        <label class="relative inline-flex items-center ${t?"cursor-not-allowed opacity-60":"cursor-pointer"}">
          <input type="checkbox" class="sr-only peer" 
            ${e.visible?"checked":""} 
            ${t?"disabled":""}
            onchange="window.smartEvaluator.components.settings.toggleSidebarVisibility('${r}', this.checked)">
          <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
        </label>
      </td>
      <td class="px-6 py-4 text-center">
        <button 
          class="relative inline-flex items-center justify-center px-4 py-1.5 overflow-hidden text-xs font-medium transition-all duration-300 ease-out rounded-full group-btn ${t?"cursor-not-allowed opacity-60":"hover:shadow-md cursor-pointer"} ${e.type==="private"?"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800":"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-800"}"
          ${t?"disabled":""}
          onclick="window.smartEvaluator.components.settings.toggleSidebarType('${r}')">
          <span class="mr-1.5">
            <i class="fas ${e.type==="private"?"fa-lock":"fa-globe"}"></i>
          </span>
          ${e.type==="private"?"":""}
        </button>
      </td>
    </tr>
  `}).join("")}function Wpe(r,e){Dr.sidebar[r]&&!Dr.sidebar[r].locked&&(Dr.sidebar[r].visible=e,DC(),_m())}function Ype(r){Dr.sidebar[r]&&!Dr.sidebar[r].locked&&(Dr.sidebar[r].type=Dr.sidebar[r].type==="public"?"private":"public",DC(),_m(),PO())}function Xpe(r,e){Dr.dashboardSections.hasOwnProperty(r)&&(Dr.dashboardSections[r]=e,DC(),_m())}function Jpe(r){return Dr.sidebar[r]?Dr.sidebar[r].type==="public":!1}function Zpe(){const r=localStorage.getItem(LO);if(r)try{const e=JSON.parse(r);Dr.dashboardSections={...Dr.dashboardSections,...e.dashboardSections},Dr.sidebar={...Dr.sidebar,...e.sidebar}}catch(e){console.error("Failed to parse settings",e)}}function DC(){localStorage.setItem(LO,JSON.stringify(Dr)),sn.showToast("   ","success")}function _m(){Object.entries(Dr.sidebar).forEach(([e,t])=>{const n=document.querySelector(`button[data-page="${e}"]`);n&&(t.visible?n.removeAttribute("data-settings-hidden"):(n.classList.add("hidden"),n.setAttribute("data-settings-hidden","true")),t.type==="private"?n.classList.add("private-tab"):n.classList.remove("private-tab"))});const r={hero:"dashboard-hero",stats:"dashboard-stats",topGroups:"dashboard-top-groups",academicStats:"dashboard-academic-stats",ranking:"dashboard-ranking",eliteGroups:"elite-groups"};Object.entries(Dr.dashboardSections).forEach(([e,t])=>{const n=r[e];if(n){const i=document.getElementById(n);i&&(t?i.classList.remove("hidden"):i.classList.add("hidden"))}}),eme()}function eme(){const r=ji.get("currentUserData"),e=r&&(r.type==="admin"||r.type==="super-admin");console.log(" _refreshSidebarAuth called"),console.log(" Current User Data:",r),console.log(" Is Admin:",e),document.querySelectorAll(".nav-btn").forEach(n=>{if(n.hasAttribute("data-settings-hidden")){n.classList.add("hidden");return}n.classList.contains("private-tab")?e?n.classList.remove("hidden"):n.classList.add("hidden"):n.classList.remove("hidden")});const t=document.querySelector(".private-tab-divider");t&&(Array.from(document.querySelectorAll(".private-tab")).some(i=>!i.classList.contains("hidden"))?t.classList.remove("hidden"):t.classList.add("hidden"))}class tme{constructor(){this.services={dataService:Cde,auth:{loginWithEmail:Sde,registerWithEmail:Ide,signInWithGoogle:kde,logout:Tde,authServiceInstance:f6}},this.managers={stateManager:ji,uiManager:sn,cacheManager:Ks},this.utils={...Rte,permissionHelper:Lde,pdfGenerator:Vde},this.components={},this.publicPages=["dashboard","upcoming-assignments","all-students","group-policy","export","student-ranking","group-analysis","graph-analysis","graph-analysis","statistics","student-filter"],console.log("SmartGroupEvaluator app instantiated.")}async init(){console.log(" Initializing application..."),sn.showLoading("  ...");try{this._initComponents(),this._setupGlobalEventListeners(),await this._loadInitialData(),this._populateInitialFilters(),this.showPage("dashboard"),console.log(" Application initialized successfully.")}catch(e){console.error(" Initialization failed:",e),sn.showToast(`    : ${e.message}`,"error",1e4),sn.elements.appContainer&&(sn.elements.appContainer.innerHTML='<div class="p-6 text-center text-red-600 dark:text-red-400">      </div>')}finally{ji.get("authLoading")||sn.hideLoading()}}_initComponents(){console.log(" Initializing components...");const e={managers:this.managers,services:this.services,utils:this.utils,app:this};try{this.components.groups=yhe(e),this.components.tasks=Ghe(e),this.components.dashboard=Gde(e),this.components.members=Phe(e),this.components.evaluation=afe(e),this.components.ranking=yfe(e),this.components.analysis=Dfe(e),this.components.admin=hge(e),this.components.exportModule=vge(e),this.components.policy=Pge(e),this.components.upcomingAssignments=qge(e),this.components.statistics=fpe(e),this.components.studentFilter=Upe(e),this.components.settings=Kpe(e),console.log(" All components initialized.")}catch(t){throw console.error(" Error initializing components:",t),new Error(`Component initialization failed: ${t.message}`)}}_setupGlobalEventListeners(){console.log(" Setting up global event listeners...");const e=this.managers.uiManager;e.elements.sidebar?e.addListener(e.elements.sidebar,"click",t=>{const n=t.target.closest(".nav-btn");if(n&&!n.disabled){const i=n.dataset.page;i&&(t.preventDefault(),this.showPage(i))}}):console.warn("Sidebar element not found for setting up navigation."),e.addListener(e.elements.loginBtn,"click",()=>this._handleLogin()),e.addListener(e.elements.registerBtn,"click",()=>this._handleRegister()),e.addListener(e.elements.googleSignInBtn,"click",()=>this._handleGoogleSignIn()),e.addListener(e.elements.confirmLogout,"click",()=>this._handleLogout()),console.log(" Global event listeners attached.")}async _loadInitialData(){console.log(" Loading initial data...");try{const[e,t,n,i]=await Promise.all([this.services.dataService.loadGroups(),this.services.dataService.loadStudents(),this.services.dataService.loadTasks(),this.services.dataService.loadEvaluations()]);this.managers.stateManager.update({groups:e||[],students:t||[],tasks:n||[],evaluations:i||[]}),console.log(" Initial data loaded and state updated.")}catch(e){console.error(" Error loading initial data:",e),this.managers.uiManager.showToast(`      : ${e.message}`,"error")}}_populateInitialFilters(){var e,t,n,i;console.log(" Populating initial filters...");try{(e=this.components.members)==null||e.populateFilters(),(t=this.components.evaluation)==null||t.render(),(n=this.components.analysis)==null||n.renderSummary(),(i=this.components.statistics)==null||i.render()}catch(s){console.error(" Error populating initial filters:",s),this.managers.uiManager.showToast("     ","warning")}}showPage(e){var t,n;if((!e||typeof e!="string")&&(console.warn(`showPage: Invalid pageId "${e}". Defaulting to dashboard.`),e="dashboard"),console.log(`Navigating to page: ${e}`),!this._checkAuthAndPermissions(e)){this.managers.uiManager.showToast("      ","warning"),this.managers.stateManager.get("activePage")!=="dashboard"&&(console.log("Redirecting to dashboard due to permissions."),this.showPage("dashboard"));return}this.managers.uiManager.showPage(e);try{const i=this._getComponentKeyForPage(e),s=i?this.components[i]:null;if(s){let a=s.render;e==="all-students"&&s.renderStudentCards?a=s.renderStudentCards:e==="group-analysis"&&s.renderSummary?a=s.renderSummary:e==="graph-analysis"&&s.renderGraphs&&(a=s.renderGraphs),typeof a=="function"?(console.log(`Rendering component "${i}" for page: ${e}`),a(),(n=(t=window.smartEvaluator)==null?void 0:t.components.settings)==null||n.applySettings()):console.warn(`No suitable render function found on component "${i}" for page: ${e}`)}else console.warn(`No component instance found for page key "${i}" (derived from page ID "${e}")`)}catch(i){console.error(` Error rendering page ${e}:`,i),this.managers.uiManager.showToast(`'${e}'     `,"error");const s=document.getElementById(`page-${e}`);s&&this.managers.uiManager.displayEmptyMessage(s,"       ")}}_getComponentKeyForPage(e){switch(e){case"export":return"exportModule";case"all-students":return"members";case"group-analysis":return"analysis";case"graph-analysis":return"analysis";case"student-ranking":return"ranking";case"admin-management":return"admin";case"group-policy":return"policy";case"upcoming-assignments":return"upcomingAssignments";case"student-filter":return"studentFilter";default:return e}}_checkAuthAndPermissions(e){if(this.publicPages.includes(e))return!0;if(!this.managers.stateManager.get("currentUser"))return!1;const n=this.managers.stateManager.get("currentUserData"),i=(n==null?void 0:n.type)||"user";return e==="admin-management"?i==="super-admin":i==="admin"||i==="super-admin"}async _handleLogin(){var n,i;const e=(n=this.managers.uiManager.elements.loginEmail)==null?void 0:n.value,t=(i=this.managers.uiManager.elements.loginPassword)==null?void 0:i.value;if(!e||!t){this.managers.uiManager.showToast("   ","warning");return}this.managers.uiManager.showLoading("  ...");try{await this.services.auth.loginWithEmail(e,t)}catch(s){console.error("Login failed (handled by authService):",s.message)}finally{this.managers.uiManager.hideLoading()}}async _handleRegister(){var i,s,a;const e=(i=this.managers.uiManager.elements.registerEmail)==null?void 0:i.value,t=(s=this.managers.uiManager.elements.registerPassword)==null?void 0:s.value,n=(a=this.managers.uiManager.elements.adminType)==null?void 0:a.value;if(!e||!t||t.length<6){this.managers.uiManager.showToast("       ","warning");return}this.managers.uiManager.showLoading(" ...");try{await this.services.auth.registerWithEmail(e,t,n),this.managers.uiManager._toggleAuthForm(!1)}catch(o){console.error("Registration failed (handled by authService):",o.message)}finally{this.managers.uiManager.hideLoading()}}async _handleGoogleSignIn(){this.managers.uiManager.showLoading("Google    ...");try{await this.services.auth.signInWithGoogle()}catch(e){console.error("Google Sign-In failed (handled by authService):",e.message)}finally{this.managers.uiManager.hideLoading()}}async _handleLogout(){this.managers.uiManager.showLoading("  ...");try{await this.services.auth.logout(),this.managers.uiManager.hideModal(this.managers.uiManager.elements.logoutModal)}catch(e){console.error("Logout failed (handled by authService):",e.message)}finally{this.managers.uiManager.hideLoading()}}async refreshAllData(){console.log(" Forcing data refresh..."),this.managers.cacheManager.setForceRefresh(),this.managers.uiManager.showLoading("   ...");try{await this._loadInitialData(),this._populateInitialFilters();const e=this.managers.stateManager.get("activePage");e&&this.showPage(e),this.managers.uiManager.showToast("    !","success")}catch(e){console.error(" Data refresh failed:",e),this.managers.uiManager.showToast("   ","error")}finally{this.managers.uiManager.hideLoading()}}}document.addEventListener("DOMContentLoaded",()=>{try{const r=new tme;window.smartEvaluator=r,r.init(),console.log(" Application instance created and init sequence started.")}catch(r){console.error(" Failed to instantiate/initialize SmartGroupEvaluator:",r);const e=document.getElementById("appContainer")||document.body;e.innerHTML=`<div class="p-6 text-center text-red-600 dark:text-red-400">   : ${r.message}</div>`}});(()=>{if(window.__SDM_MODAL_INIT__)return;window.__SDM_MODAL_INIT__=!0;const r={els:{},chart:null,bound:!1},e=(()=>{try{return new Intl.DateTimeFormat("bn-BD",{year:"numeric",month:"short",day:"numeric"})}catch{return null}})(),t=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}),n=document.createElement("canvas"),i=n.getContext("2d"),s=j=>document.getElementById(j),a=j=>Array.from(document.querySelectorAll(j)),o=(j,G="")=>j==null?G:String(j),A=j=>String(j).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),l=j=>{var G,pe;try{return((pe=(G=window.smartEvaluator)==null?void 0:G.utils)==null?void 0:pe.convertToBanglaNumber(String(j)))??String(j)}catch{return String(j)}},c=(j,G=2)=>{const pe=typeof j=="number"?j:parseFloat(j||0);return l((Number.isFinite(pe)?pe:0).toFixed(G))},u=j=>j instanceof Date&&!Number.isNaN(j.getTime())?e?e.format(j):t.format(j):"-",h=j=>({"team-leader":"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/20 dark:text-amber-200 dark:border-amber-700/40","time-keeper":"bg-sky-50 text-sky-700 border-sky-200 dark:bg-sky-900/20 dark:text-sky-200 dark:border-sky-700/40",reporter:"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-200 dark:border-purple-700/40","resource-manager":"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-200 dark:border-emerald-700/40","peace-maker":"bg-rose-50 text-rose-700 border-rose-200 dark:bg-rose-900/20 dark:text-rose-200 dark:border-rose-700/40"})[j]||"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800/40 dark:text-gray-200 dark:border-gray-700/40",d=j=>({"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "})[j]||(j?String(j):""),p=j=>{const G=Number(j)||0;return G>=85?{badge:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/25 dark:text-emerald-300",chip:"text-emerald-600"}:G>=70?{badge:"bg-sky-50 text-sky-700 dark:bg-sky-900/25 dark:text-sky-300",chip:"text-sky-600"}:G>=55?{badge:"bg-amber-50 text-amber-700 dark:bg-amber-900/25 dark:text-amber-300",chip:"text-amber-600"}:{badge:"bg-rose-50 text-rose-700 dark:bg-rose-900/25 dark:text-rose-300",chip:"text-rose-600"}},f=j=>j==null?"":String(j).trim();function y(){var pe,q,N;const j=window.smartEvaluator;if(!j)return{students:[],evaluations:[],tasks:[],groups:[]};const G=((N=(q=(pe=j.managers)==null?void 0:pe.stateManager)==null?void 0:q.getState)==null?void 0:N.call(q))||{};return{students:Array.isArray(G.students)?G.students:[],evaluations:Array.isArray(G.evaluations)?G.evaluations:[],tasks:Array.isArray(G.tasks)?G.tasks:[],groups:Array.isArray(G.groups)?G.groups:[]}}async function b(j){var Q,V;const G=window.smartEvaluator,pe=(Q=G==null?void 0:G.services)==null?void 0:Q.dataService;if(!pe)return j;const q=(V=G.managers)==null?void 0:V.stateManager,N=[["students","loadStudents"],["groups","loadGroups"],["tasks","loadTasks"],["evaluations","loadEvaluations"]].map(async([X,Ae])=>{if(Array.isArray(j[X])&&j[X].length)return;const te=pe[Ae];if(typeof te=="function")try{j[X]=await te()||[],q!=null&&q.set&&q.set(X,j[X])}catch(se){console.warn(`[SDM] Failed to load ${X}:`,se)}});return await Promise.all(N),j}function B(j,G){const pe=f(j),q=new Map(G.tasks.map(N=>[N==null?void 0:N.id,N]));return G.evaluations.map(N=>{var R,$,ye;const Q=(R=N==null?void 0:N.scores)==null?void 0:R[pe];if(!Q)return null;const V=q.get(N==null?void 0:N.taskId)||null,X=parseFloat(N==null?void 0:N.maxPossibleScore)||parseFloat(V==null?void 0:V.maxScore)||100,Ae=parseFloat(Q==null?void 0:Q.totalScore)||0,te=X>0?Ae/X*100:0;let se=null;($=N==null?void 0:N.taskDate)!=null&&$.seconds?se=N.taskDate.seconds*1e3:(ye=N==null?void 0:N.evaluationDate)!=null&&ye.seconds?se=N.evaluationDate.seconds*1e3:se=Date.parse(N==null?void 0:N.taskDate)||0||Date.parse(N==null?void 0:N.updatedAt)||0||Date.parse(V==null?void 0:V.date)||0||null;const de=(V==null?void 0:V.maxScoreBreakdown)||(N==null?void 0:N.maxScoreBreakdown)||{},ve=parseFloat(de.task)||0,xe=parseFloat(de.team)||0,Oe=parseFloat(de.additional)||0,Ve=parseFloat(de.mcq)||0;return{taskName:(V==null?void 0:V.name)||(N==null?void 0:N.taskName)||"",date:se?new Date(se):null,taskScore:parseFloat(Q==null?void 0:Q.taskScore)||0,teamScore:parseFloat(Q==null?void 0:Q.teamScore)||0,additional:parseFloat(Q==null?void 0:Q.additionalScore)||0,mcq:parseFloat(Q==null?void 0:Q.mcqScore)||0,maxTask:ve,maxTeam:xe,maxAdditional:Oe,maxMcq:Ve,total:Ae,max:X,pct:te,comments:typeof(Q==null?void 0:Q.comments)=="string"?Q.comments.trim():""}}).filter(Boolean).sort((N,Q)=>{var V,X;return(((V=N.date)==null?void 0:V.getTime())??0)-(((X=Q.date)==null?void 0:X.getTime())??0)})}function S(j,G){try{const pe=f(j),q=new Map(G.tasks.map(V=>[V==null?void 0:V.id,V])),Q=G.students.map(V=>{const X=f(V==null?void 0:V.id),Ae=G.evaluations.map(te=>{var Oe;const se=(Oe=te==null?void 0:te.scores)==null?void 0:Oe[X],de=q.get(te==null?void 0:te.taskId);if(!se||!de)return null;const ve=parseFloat(te==null?void 0:te.maxPossibleScore)||parseFloat(de==null?void 0:de.maxScore)||100,xe=parseFloat(se==null?void 0:se.totalScore)||0;return ve>0?xe/ve*100:0}).filter(te=>typeof te=="number");return{id:X,avg:Ae.length?Ae.reduce((te,se)=>te+se,0)/Ae.length:-1}}).filter(V=>((V==null?void 0:V.avg)??-1)>=0).sort((V,X)=>X.avg-V.avg).findIndex(V=>(V==null?void 0:V.id)===pe);return Q>=0?l(Q+1):"-"}catch{return"-"}}async function C(j){try{const G=Ka||window.firebase||window.Firebase||null;if(!(G!=null&&G.firestore))return null;const pe=G.firestore(),q=await pe.collection("students").doc(String(j)).get();if(q!=null&&q.exists){const Q=q.data()||{};return Q.role||Q.duty||null}const N=await pe.collection("students").where("id","==",String(j)).limit(1).get();if(!N.empty){const Q=N.docs[0].data()||{};return Q.role||Q.duty||null}}catch{}return null}function P(j,G){const pe=s(j);pe&&(pe.textContent=G||"")}function M(j,G){const pe=s(j);pe&&(pe.innerHTML=G)}function L(j,G,pe,q,N,Q){const V=s("sdmAvatar");V&&(V.src=j.photoURL||j.avatar||"images/smart.png",V.onerror=()=>{V.onerror=null,V.src="images/smart.png"},V.alt=`${j.name||j.id||"Student"} avatar`),P("sdmTitle"," "),P("sdmRoll",j.roll?`: ${l(j.roll)}`:"");const X=A(j.name||j.id||""),Ae=o(j.role).trim(),te=d(Ae),se=h(Ae),de=te?`<span class="inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold ${se}">
           <i class="fas fa-id-badge"></i>${A(te)}
         </span>`:"";M("sdmName",`<span class="mr-2 align-middle">${X}</span>${de}`),P("sdmTitle","  "),P("sdmRoll",j.roll?`: ${l(j.roll)}`:""),P("sdmGroup",G?`: ${G}`:""),P("sdmAcademic",j.academicGroup?` : ${j.academicGroup}`:""),P("sdmSession",j.session?`: ${j.session}`:"");const ve=!!j.email||!!j.contact;P("sdmContact",ve?`: ${j.email||""} ${j.contact||""}`:""),P("sdmGroup",G?`: ${G}`:""),P("sdmAcademic",j.academicGroup?` : ${j.academicGroup}`:""),P("sdmSession",j.session?`: ${j.session}`:""),P("sdmContact",j.email||j.contact?`: ${j.email||""} ${j.contact||""}`:""),P("sdmAvgTotal",c(N)),P("sdmAvgPct",`${c(q,1)}%`),P("sdmRank",Q);const xe=s("sdmParamList");if(xe){const Ve=document.createDocumentFragment();xe.innerHTML="";const R=Math.max(1,pe.length),$=pe.reduce((re,W)=>({task:re.task+(W.taskScore||0),team:re.team+(W.teamScore||0),additional:re.additional+(W.additional||0),mcq:re.mcq+(W.mcq||0),total:re.total+(W.total||0)}),{task:0,team:0,additional:0,mcq:0,total:0}),ye=$.total/R||0;[["",$.task/R],["",$.team/R],["",$.additional/R],["MCQ",$.mcq/R]].forEach(([re,W])=>{const ae=document.createElement("li"),Ce=p(ye>0?W/ye*100:0);ae.className=`rounded border border-gray-200 dark:border-gray-700 px-3 py-2 bg-white dark:bg-gray-800 ${Ce.chip}`,ae.textContent=`${re}: ${c(W)}`,Ve.appendChild(ae)}),xe.appendChild(Ve);try{const re=Math.max(1,pe.length),W=pe.reduce((be,Ie)=>({task:be.task+(Ie.taskScore||0),team:be.team+(Ie.teamScore||0),additional:be.additional+(Ie.additional||0),mcq:be.mcq+(Ie.mcq||0),total:be.total+(Ie.total||0)}),{task:0,team:0,additional:0,mcq:0,total:0}),ae=W.total/re||0,_e=[{key:"task",label:"",color:"indigo",value:W.task/re},{key:"team",label:"",color:"emerald",value:W.team/re},{key:"additional",label:"",color:"amber",value:W.additional/re},{key:"mcq",label:"MCQ",color:"sky",value:W.mcq/re}].map(({label:be,color:Ie,value:Qe})=>{const Pe=ae>0?Math.max(0,Math.min(1,Qe/ae)):0,He=Math.round(Pe*100);return`
            <li class="rounded-lg border border-gray-200 dark:border-gray-700 p-3 bg-white dark:bg-gray-800">
              <div class="flex items-center justify-between mb-2">
                <span class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold bg-${Ie}-50 text-${Ie}-700 dark:bg-${Ie}-900/20 dark:text-${Ie}-200">${A(be)}</span>
                <span class="text-sm font-semibold text-${Ie}-600 dark:text-${Ie}-300">${c(Qe)}</span>
              </div>
              <div class="h-2 w-full rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden">
                <div class="h-2 rounded-full bg-${Ie}-500" style="width:${He}%"></div>
              </div>
              <div class="mt-1 text-[11px] text-gray-500 dark:text-gray-400"> : ${l(He)}%</div>
            </li>`}).join("");xe.innerHTML=_e}catch{}try{const re=Math.max(1,pe.length),W=pe.reduce((be,Ie)=>({task:be.task+(Ie.taskScore||0),team:be.team+(Ie.teamScore||0),additional:be.additional+(Ie.additional||0),mcq:be.mcq+(Ie.mcq||0)}),{task:0,team:0,additional:0,mcq:0}),ae=pe.reduce((be,Ie)=>({task:be.task+(Ie.maxTask||0),team:be.team+(Ie.maxTeam||0),additional:be.additional+(Ie.maxAdditional||0),mcq:be.mcq+(Ie.maxMcq||0)}),{task:0,team:0,additional:0,mcq:0}),_e=[{key:"task",label:"",color:"indigo"},{key:"team",label:"",color:"emerald"},{key:"additional",label:"",color:"amber"},{key:"mcq",label:"MCQ",color:"sky"}].map(({key:be,label:Ie,color:Qe})=>{const Pe=W[be]/re||0,He=ae[be]||0,At=He>0?Math.round(Math.max(0,Math.min(1,W[be]/He))*100):0;return`
            <li class="rounded-lg border border-gray-200 dark:border-gray-700 p-3 bg-white dark:bg-gray-800">
              <div class="flex items-center justify-between mb-2">
                <span class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-semibold bg-${Qe}-50 text-${Qe}-700 dark:bg-${Qe}-900/20 dark:text-${Qe}-200">${A(Ie)}</span>
                <span class="text-sm font-semibold text-${Qe}-600 dark:text-${Qe}-300">${c(Pe)}</span>
              </div>
              <div class="h-2 w-full rounded-full bg-slate-100 dark:bg-slate-700 overflow-hidden">
                <div class="h-2 rounded-full bg-${Qe}-500" style="width:${At}%"></div>
              </div>
              <div class="mt-1 text-[11px] text-gray-500 dark:text-gray-400">  : ${l(At)}%</div>
            </li>`}).join("");xe.innerHTML=_e}catch{}}const Oe=s("sdmFootnote");Oe&&(Oe.textContent=`${l(pe.length)}     `)}function _(j){const G=s("sdmTableBody");if(!G)return;if(!Array.isArray(j)||j.length===0){G.innerHTML='<tr><td colspan="9" class="px-3 py-4 text-center text-sm text-gray-500 dark:text-gray-400">     </td></tr>';return}const pe=document.createDocumentFragment();for(const q of j){const N=document.createElement("tr"),Q=p(q.pct),V=q.date?u(q.date):"-";N.innerHTML=`
        <td class="px-3 py-2">${A(q.taskName||"-")}</td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-medium bg-sky-50 text-sky-700 dark:bg-sky-900/20 dark:text-sky-300">${c(q.taskScore)}</span></td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-medium bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300">${c(q.teamScore)}</span></td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-medium bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300">${c(q.additional)}</span></td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-medium bg-indigo-50 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-300">${c(q.mcq)}</span></td>
        <td class="px-3 py-2">${c(q.total)}</td>
        <td class="px-3 py-2"><span class="inline-block rounded px-2 py-0.5 text-xs font-semibold ${Q.badge}">${c(q.pct,1)}%</span></td>
        <td class="px-3 py-2">${A(q.comments||"")}</td>
        <td class="px-3 py-2">${A(V)}</td>`,pe.appendChild(N)}G.innerHTML="",G.appendChild(pe)}function v(j){var Q;const G=s("sdmChart");if(!G||!window.Chart)return;const pe=j.map(V=>V.taskName||(V.date?u(V.date):"N/A")),q=j.map(V=>Number((V.pct||0).toFixed(1))),N=q.map((V,X,Ae)=>X===Ae.length-1?"#22c55e":"#94a3b8");if(r.chart&&Array.isArray((Q=r.chart.data)==null?void 0:Q.labels)&&r.chart.data.labels.length===pe.length){r.chart.data.labels=pe,r.chart.data.datasets[0].data=q,r.chart.data.datasets[0].backgroundColor=N,r.chart.update("none");return}if(r.chart){try{r.chart.destroy()}catch{}r.chart=null}r.chart=new window.Chart(G,{type:"bar",data:{labels:pe,datasets:[{data:q,backgroundColor:N,borderRadius:6,maxBarThickness:32,categoryPercentage:.6,barPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:150},plugins:{legend:{display:!1},tooltip:{displayColors:!1}},scales:{x:{grid:{display:!1},ticks:{maxRotation:0,autoSkip:!0,autoSkipPadding:8}},y:{beginAtZero:!0,max:100,grace:"5%",grid:{color:"rgba(148,163,184,0.25)"},ticks:{stepSize:20,callback:V=>l(V)}}}}})}function T(j,G){const pe=URL.createObjectURL(j);try{const q=document.createElement("a");q.href=pe,q.download=G,document.body.appendChild(q),q.click(),q.remove()}finally{setTimeout(()=>URL.revokeObjectURL(pe),1200)}}function E(){const j=r.els.modal;if(!j)return;const G=j.__evals||[],pe=j.__student||{};if(!G.length)return;const q=["Title","Task","Team","Additional","MCQ","Total","Percent","Comments","Date"],N=de=>{var ve;try{return((ve=de?new Date(de):null)==null?void 0:ve.toISOString().slice(0,10))||""}catch{return""}},Q=G.map(de=>[de.taskName||"",Number(de.taskScore||0).toFixed(2),Number(de.teamScore||0).toFixed(2),Number(de.additional||0).toFixed(2),Number(de.mcq||0).toFixed(2),Number(de.total||0).toFixed(2),Number(de.pct||0).toFixed(1),(de.comments||"").replace(/\r?\n/g," "),N(de.date)]),V=de=>{const ve=String(de??"");return/[",\n]/.test(ve)?`"${ve.replace(/"/g,'""')}"`:ve},X="\uFEFF",Ae=[q.map(V).join(","),...Q.map(de=>de.map(V).join(","))].join(`\r
`),te=new Blob([X+Ae],{type:"text/csv;charset=utf-8;"}),se=`${(pe.name||pe.id||"student").replace(/[\\/:*?"<>|]+/g,"_").trim()||"student"}_report.csv`;T(te,se)}function x(){var at;const j=r.els.modal;if(!j)return;const G=j.__evals||[],pe=j.__student||{};if(!G.length)return;const q=window.jspdf&&window.jspdf.jsPDF||null;if(!q){console.error("jsPDF not loaded");return}if(!!!((at=window.jspdf)!=null&&at.autoTable||q!=null&&q.autoTable||q!=null&&q.API&&q.API.autoTable)){console.error("autoTable plugin missing");return}const Q=new q("p","pt","a4"),V=36,X=[79,70,229],Ae=Q.internal.pageSize.getWidth(),te=Q.internal.pageSize.getHeight(),se=(ut,rt,it,pt={})=>Q.text(ut,rt,it,pt),de=(ut,rt,it,pt,Rt=[226,232,240])=>{Q.setDrawColor(...Rt),Q.line(ut,rt,it,pt)},ve=(ut,rt)=>Q.splitTextToSize(ut,rt),xe=(ut,rt,it,pt=200,Rt=10,Bt="#0f172a")=>{try{const Qt=String(ut??"");if(!Qt)return;const Ut=2,lr=6*Ut;i.font=`${Rt*Ut}px 'Noto Sans Bengali','Hind Siliguri','SolaimanLipi','Segoe UI',sans-serif`;const kr=i.measureText(Qt);n.width=Math.ceil(kr.width)+lr,n.height=Math.ceil(Rt*1.6*Ut)+lr;const Tt=n.getContext("2d");Tt.font=i.font,Tt.fillStyle=Bt,Tt.textBaseline="top",Tt.fillText(Qt,lr/2,lr/2);const Ft=n.toDataURL("image/png"),sr=.75;let pi=n.width*sr,Pn=n.height*sr;if(pi>pt){const gs=pt/pi;pi=pt,Pn*=gs}Q.addImage(Ft,"PNG",rt,it-Rt*.8,pi,Pn)}catch{}},Oe=78,Ve=28,R=()=>{const ut=V+12,rt=new Date,it=rt.getFullYear(),pt=String(rt.getMonth()+1).padStart(2,"0"),Rt=String(rt.getDate()).padStart(2,"0"),Bt=rt.getHours(),Qt=String(rt.getMinutes()).padStart(2,"0"),Ut=Bt>=12?"pm":"am",lr=Bt%12||12,kr=String(lr).padStart(2,"0"),Tt=`Generated: ${it}-${pt}-${Rt} ${kr}:${Qt} ${Ut}`;Q.setFont("helvetica","normal"),Q.setFontSize(9),Q.setTextColor(71,85,105),se(Tt,Ae-V-8,V+14,{align:"right"}),Q.setTextColor(17,24,39),Q.setFont("helvetica","bold"),Q.setFontSize(12),se("SMART EVALUATE Automated SYSTEM",Ae/2,ut+6,{align:"center"}),Q.setFontSize(14),se("Student Result Report",Ae/2,ut+22,{align:"center"}),Q.setDrawColor(226,232,240),Q.setTextColor(17,24,39),de(V,V+Oe-8,Ae-V,V+Oe-8)},$=()=>{const ut=te-Ve;de(V,ut,Ae-V,ut),Q.setFont("helvetica","normal"),Q.setFontSize(9),Q.setTextColor(107,114,128),se(`Page ${Q.internal.getCurrentPageInfo().pageNumber}`,Ae-V-40,te-10)},ye=()=>{const ut=Q.internal.getNumberOfPages();for(let rt=1;rt<=ut;rt++)Q.setPage(rt),R(),$()};let re=V+Oe+2;const W="Institution: Muktijoddha Major Mostofa College, Rajapur, Mirsharai, Chattogram",ae="Developed by: Mustafa Rahman Sir, Senior Software Engineer",Ce="Query for Contact: 01840-643946";Q.setTextColor(17,24,39),Q.setFont("helvetica","normal"),Q.setFontSize(11),Q.text(ve(W,Ae-V*2),V,re),re+=22;const _e=40;Q.setDrawColor(99,102,241),Q.setFillColor(238,242,255),Q.rect(V,re,Ae-V*2,_e,"FD"),Q.setTextColor(55,48,163),Q.setFont("helvetica","bold"),Q.setFontSize(10),Q.text(ae,V+10,re+16),Q.setFont("helvetica","normal"),Q.text(Ce,V+10,re+30),re+=_e+10;const be=96,Ie=(Ae-V*2)/2,Qe=V+Ie+12,Pe=re+20;Q.setDrawColor(226,232,240),Q.setFillColor(248,250,252),Q.rect(V,re,Ae-V*2,be,"FD"),Q.setTextColor(15,23,42);const He=(ut,rt,it)=>{Q.setFont("helvetica","bold"),Q.setFontSize(10),se(ut,V+12,it),Q.setFont("helvetica","normal");const pt=V+12+120,Rt=(Ae-V*2)/2-(pt-(V+12))-12;/[^\x00-\x7F]/.test(String(rt||""))?xe(rt,pt,it,Rt,10):se(String(rt??""),pt,it)};He("Student:",pe.name||pe.id||"",Pe),He("Roll:",pe.roll||"-",Pe+16),He("Group:",r.els.modal.__groupName||"-",Pe+32),He("Academic Group:",pe.academicGroup||"-",Pe+48);const At=d(pe.role)||"-";Q.setFont("helvetica","bold"),Q.setFontSize(10),se("Duty:",V+12,Pe+64),xe(String(At),V+12+120,Pe+64,(Ae-V*2)/2-132,10),Q.setFont("helvetica","bold"),Q.setFontSize(10),se("Average Total:",Qe,Pe),Q.setFont("helvetica","normal"),se(String((r.els.modal.__avgTotal||0).toFixed(2)),Qe+90,Pe),Q.setFont("helvetica","bold"),se("Average %:",Qe,Pe+16),Q.setFont("helvetica","normal"),se(`${(r.els.modal.__avgPct||0).toFixed(1)}%`,Qe+90,Pe+16),Q.setFont("helvetica","bold"),se("Rank:",Qe,Pe+32),Q.setFont("helvetica","normal"),xe(String(r.els.modal.__rank??"-"),Qe+90,Pe+32,40,10),re+=be+14;const tt=[["Assignment","Task","Team","Additional","MCQ","Total","%","Comments","Date"]],lt=G.map((ut,rt)=>{const it=(ut.comments||"").replace(/\r?\n/g," ").trim(),pt=it.length>240?"Comment too long. See in app.":it;return[`Assignment-${rt+1}`,Number(ut.taskScore||0).toFixed(2),Number(ut.teamScore||0).toFixed(2),Number(ut.additional||0).toFixed(2),Number(ut.mcq||0).toFixed(2),Number(ut.total||0).toFixed(2),Number(ut.pct||0).toFixed(1),pt,ut.date?new Date(ut.date).toISOString().slice(0,10):""]});(Q.autoTable||q.API.autoTable).call(Q,{startY:re,head:tt,body:lt,styles:{font:"helvetica",fontSize:9,cellPadding:4,lineWidth:.25,lineColor:[226,232,240]},headStyles:{fillColor:X,textColor:255,halign:"left"},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:64},1:{cellWidth:44,halign:"right"},2:{cellWidth:44,halign:"right"},3:{cellWidth:50,halign:"right"},4:{cellWidth:40,halign:"right"},5:{cellWidth:48,halign:"right"},6:{cellWidth:30,halign:"right"},7:{cellWidth:120},8:{cellWidth:90,halign:"center"}},margin:{left:V,right:V,top:V+Oe,bottom:Ve+6},tableWidth:Ae-V*2,pageBreak:"auto"}),ye();const xt=`${(pe.name||pe.id||"student").replace(/[\\/:*?"<>|]+/g,"_").trim()||"student"}_report.pdf`;Q.save(xt)}async function F(j,G){if(!j||j.dataset.busy==="1")return;j.dataset.busy="1";const pe=j.disabled;j.disabled=!0,j.classList.add("opacity-60","pointer-events-none");try{await Promise.resolve(G())}finally{setTimeout(()=>{j.dataset.busy="0",j.disabled=pe,j.classList.remove("opacity-60","pointer-events-none")},500)}}async function k(j,G={}){var R;const pe=r.els.modal;if(!pe)return;const q=f(j);if(!q){console.warn("[SDM] openStudentModalById called without a valid studentId.");return}const N=y(),Q=(G==null?void 0:G.state)||{},V={students:Array.isArray(Q.students)&&Q.students.length?Q.students:N.students,evaluations:Array.isArray(Q.evaluations)&&Q.evaluations.length?Q.evaluations:N.evaluations,tasks:Array.isArray(Q.tasks)&&Q.tasks.length?Q.tasks:N.tasks,groups:Array.isArray(Q.groups)&&Q.groups.length?Q.groups:N.groups};await b(V);let X=null;if(G.student&&f(G.student.id)===q)X={...G.student};else{const $=V.students.findIndex(ye=>f(ye==null?void 0:ye.id)===q);$>=0&&(X={...V.students[$]})}if(!X){console.warn("[SDM] Student not found for modal:",j);return}const Ae=await C(q);Ae&&(X.role=Ae);const te=G.groupName||((R=V.groups.find($=>f($==null?void 0:$.id)===f(X.groupId)))==null?void 0:R.name)||"",se=B(q,V),de=Math.max(1,se.length),ve=se.reduce(($,ye)=>({total:$.total+(ye.total||0),pct:$.pct+(ye.pct||0)}),{total:0,pct:0}),xe=ve.pct/de,Oe=ve.total/de,Ve=S(j,V);L(X,te,se,xe,Oe,Ve),_(se),v(se),pe.__evals=se,pe.__student=X,pe.__groupName=te,pe.__avgPct=xe,pe.__avgTotal=Oe,pe.__rank=Ve!=="-"?Ve:null,Z("table"),pe.classList.remove("hidden")}function Z(j){var pe,q,N,Q,V,X;const G=j==="chart";(pe=r.els.wrapChart)==null||pe.classList.toggle("hidden",!G),(q=r.els.wrapTable)==null||q.classList.toggle("hidden",G),(N=r.els.btnTable)==null||N.classList.toggle("bg-gray-100",!G),(Q=r.els.btnTable)==null||Q.classList.toggle("dark:bg-gray-800",!G),(V=r.els.btnChart)==null||V.classList.toggle("bg-gray-100",G),(X=r.els.btnChart)==null||X.classList.toggle("dark:bg-gray-800",G)}function ue(){var j,G,pe,q;r.bound||(r.bound=!0,document.addEventListener("click",N=>{var Q;if(N.target.closest("[data-modal-close]")&&((Q=r.els.modal)==null||Q.classList.add("hidden"),r.chart)){try{r.chart.destroy()}catch{}r.chart=null}}),document.addEventListener("keydown",N=>{if(N.key==="Escape"&&r.els.modal&&!r.els.modal.classList.contains("hidden")&&(r.els.modal.classList.add("hidden"),r.chart)){try{r.chart.destroy()}catch{}r.chart=null}}),document.addEventListener("click",N=>{const Q=N.target.closest(".ranking-card, .view-rank-details-btn");if(!Q)return;const V=Q.getAttribute("data-student-id");V&&(N.preventDefault(),window.openStudentModalById(V))}),(j=r.els.btnCsv)==null||j.addEventListener("click",N=>{N.stopPropagation(),F(r.els.btnCsv,E)}),(G=r.els.btnPdf)==null||G.addEventListener("click",N=>{N.stopPropagation(),F(r.els.btnPdf,x)}),(pe=r.els.btnTable)==null||pe.addEventListener("click",()=>Z("table")),(q=r.els.btnChart)==null||q.addEventListener("click",()=>Z("chart")),a('img[src="avatar.png"]').forEach(N=>{N.src="images/smart.png",N.onerror=()=>{N.onerror=null,N.src="images/smart.png"}}))}function ne(){if(r.els.modal=s("studentDetailModal"),r.els.btnCsv=s("sdmDownloadCsv"),r.els.btnPdf=s("sdmDownloadPdf"),r.els.btnTable=s("sdmBtnTable"),r.els.btnChart=s("sdmBtnChart"),r.els.wrapTable=s("sdmTableWrap"),r.els.wrapChart=s("sdmChartWrap"),!r.els.modal){console.warn("[SDM] modal node missing; script loaded but no #studentDetailModal.");return}ue(),window.openStudentModalById||(window.openStudentModalById=k)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ne,{once:!0}):ne()})();(()=>{if(window.__GDM_MODAL_INIT__)return;window.__GDM_MODAL_INIT__=!0;const r={els:{},bound:!1,state:{currentGroupId:null}},e=y=>document.getElementById(y),t=y=>{var b,B;try{return((B=(b=window.smartEvaluator)==null?void 0:b.utils)==null?void 0:B.convertToBanglaNumber(String(y)))??String(y)}catch{return String(y)}},n=y=>String(y??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),i=y=>({"team-leader":" ","time-keeper":" ",reporter:"","resource-manager":" ","peace-maker":" "})[String(y||"").trim()]||(y?String(y):""),s=y=>({"team-leader":"bg-amber-50 text-amber-700 border-amber-200","time-keeper":"bg-sky-50 text-sky-700 border-sky-200",reporter:"bg-purple-50 text-purple-700 border-purple-200","resource-manager":"bg-emerald-50 text-emerald-700 border-emerald-200","peace-maker":"bg-rose-50 text-rose-700 border-rose-200"})[String(y||"").trim()]||"bg-gray-50 text-gray-700 border-gray-200",a=["bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-300 dark:border-emerald-700/40","bg-indigo-50 text-indigo-700 border-indigo-200 dark:bg-indigo-500/10 dark:text-indigo-300 dark:border-indigo-700/40","bg-rose-50 text-rose-700 border-rose-200 dark:bg-rose-500/10 dark:text-rose-300 dark:border-rose-700/40","bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-500/10 dark:text-amber-300 dark:border-amber-700/40","bg-sky-50 text-sky-700 border-sky-200 dark:bg-sky-500/10 dark:text-sky-300 dark:border-sky-700/40","bg-fuchsia-50 text-fuchsia-700 border-fuchsia-200 dark:bg-fuchsia-500/10 dark:text-fuchsia-300 dark:border-fuchsia-700/40","bg-lime-50 text-lime-700 border-lime-200 dark:bg-lime-500/10 dark:text-lime-300 dark:border-lime-700/40","bg-teal-50 text-teal-700 border-teal-200 dark:bg-teal-500/10 dark:text-teal-300 dark:border-teal-700/40","bg-orange-50 text-orange-700 border-orange-200 dark:bg-orange-500/10 dark:text-orange-300 dark:border-orange-700/40","bg-cyan-50 text-cyan-700 border-cyan-200 dark:bg-cyan-500/10 dark:text-cyan-300 dark:border-cyan-700/40"],o=y=>{const b=String(y||"").trim();if(!b)return"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-800/40 dark:text-gray-300 dark:border-gray-700/60";let B=0;for(let S=0;S<b.length;S++)B=B*31+b.charCodeAt(S)>>>0;return a[B%a.length]},A=y=>{const b=Number(y)||0;return b>=85?"bg-emerald-50 text-emerald-700":b>=70?"bg-sky-50 text-sky-700":b>=55?"bg-amber-50 text-amber-700":"bg-rose-50 text-rose-700"};function l(){var B,S,C;const y=window.smartEvaluator;if(!y)return{groups:[],students:[],tasks:[],evaluations:[]};const b=((C=(S=(B=y.managers)==null?void 0:B.stateManager)==null?void 0:S.getState)==null?void 0:C.call(S))||{};return{groups:Array.isArray(b.groups)?b.groups:[],students:Array.isArray(b.students)?b.students:[],tasks:Array.isArray(b.tasks)?b.tasks:[],evaluations:Array.isArray(b.evaluations)?b.evaluations:[]}}function c(y){if(!y)return 0;if(typeof y=="object"&&y.seconds)return y.seconds*1e3;const b=Date.parse(y);return Number.isFinite(b)?b:0}function u(y,b){const B=new Map(b.tasks.map(T=>[T==null?void 0:T.id,T])),S=b.students.filter(T=>String(T==null?void 0:T.groupId)===String(y)),C=new Set(S.map(T=>String(T==null?void 0:T.id))),M=b.evaluations.filter(T=>String(T==null?void 0:T.groupId)===String(y)).map(T=>{const E=B.get(T==null?void 0:T.taskId),x=parseFloat(T==null?void 0:T.maxPossibleScore)||parseFloat(E==null?void 0:E.maxScore)||100;let F=0,k=0,Z=null,ue=-1;if(x>0&&(T!=null&&T.scores))for(const[j,G]of Object.entries(T.scores)){if(!C.has(String(j)))continue;const q=(parseFloat(G==null?void 0:G.totalScore)||0)/x*100;F++,k+=q,q>ue&&(ue=q,Z=j)}const ne=c((T==null?void 0:T.taskDate)||(T==null?void 0:T.updatedAt)||(T==null?void 0:T.evaluationDate)||(T==null?void 0:T.createdAt)||(E==null?void 0:E.date));return{ev:T,task:E,ts:ne,avgPct:F?k/F:0,count:F,topStudentId:Z,topPct:ue}}),L=M.length?M.reduce((T,E)=>T+E.avgPct,0)/M.length:0,v=b.groups.map(T=>{const E=String(T==null?void 0:T.id),F=b.evaluations.filter(k=>String(k==null?void 0:k.groupId)===E).map(k=>{const Z=B.get(k==null?void 0:k.taskId),ue=parseFloat(k==null?void 0:k.maxPossibleScore)||parseFloat(Z==null?void 0:Z.maxScore)||100;if(ue<=0||!(k!=null&&k.scores))return 0;let ne=0,j=0;for(const G of Object.values(k.scores)){const pe=parseFloat(G==null?void 0:G.totalScore)||0;ne++,j+=pe/ue*100}return ne?j/ne:0});return{id:E,avg:F.length?F.reduce((k,Z)=>k+Z,0)/F.length:-1}}).filter(T=>T.avg>=0).sort((T,E)=>E.avg-T.avg).findIndex(T=>T.id===String(y));return{members:S,perEval:M,groupAvg:L,rank:v>=0?v+1:null}}function h(y){var b;try{r.state.currentGroupId=y;const B=l(),S=B.groups.find(F=>String(F==null?void 0:F.id)===String(y));if(!S)return;const{perEval:C,groupAvg:P,rank:M}=u(y,B),L=(S==null?void 0:S.name)||(S==null?void 0:S.label)||y,_=e("gdmTitle");_&&(_.textContent="  ");const v=e("gdmGroupName");v&&(v.textContent=L);const T=e("gdmGroupAvg");T&&(T.textContent=`${(P||0).toFixed(1)}%`);const E=e("gdmGroupRank");E&&(E.textContent=M?t(M):"-");try{const F=e("gdmAssignSelect"),k=e("gdmAssignBody"),Z=e("gdmAssignMeta");if(F&&k){const ue=C.slice().sort((j,G)=>(G.ts||0)-(j.ts||0));F.innerHTML=ue.map((j,G)=>{var N;const pe=j.ts?new Date(j.ts).toISOString().slice(0,10):"-",q=((N=j.task)==null?void 0:N.name)||`Assignment-${G+1}`;return`<option value="${G}">${n(q)} (${pe})</option>`}).join("");const ne=j=>{var V,X;const G=ue[j|0];if(!G){k.innerHTML="";const Ae=e("gdmAssignAvg");Ae&&(Ae.textContent="-"),Z&&(Z.textContent="Task: - | Date: -");const te=e("gdmAssignName");te&&(te.textContent="");const se=e("gdmAssignTitle");se&&(se.textContent="Assignment-wise Details");return}try{const Ae=G.ts?new Date(G.ts).toISOString().slice(0,10):"-",te=((V=G.task)==null?void 0:V.name)||`Assignment-${j+1}`;Z&&(Z.textContent="Task: "+te+" | Date: "+Ae);const se=e("gdmAssignName");se&&(se.textContent=te);const de=e("gdmAssignTitle");de&&(de.textContent="Assignment-wise Details")}catch{}const pe=e("gdmAssignAvg");pe&&(pe.textContent=(G.avgPct||0).toFixed(1)+"%");const q=((X=G.ev)==null?void 0:X.scores)||{},N=B.students.filter(Ae=>String(Ae.groupId)===String(y)).map(Ae=>{var _e,be;const te=q[Ae.id],se=parseFloat(te==null?void 0:te.taskScore)||0,de=parseFloat(te==null?void 0:te.teamScore)||0,ve=parseFloat(te==null?void 0:te.additionalScore)||0,xe=parseFloat(te==null?void 0:te.mcqScore)||0,Oe=parseFloat(te==null?void 0:te.totalScore)||se+de+ve+xe,Ve=parseFloat((_e=G.ev)==null?void 0:_e.maxPossibleScore)||parseFloat((be=G.task)==null?void 0:be.maxScore)||100,R=Ve>0?Oe/Ve*100:0,$=Ae.role||Ae.duty||"",ye=i($),re=ye?`<span class="inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold ${s($)}"><i class="fas fa-id-badge"></i>${n(ye)}</span>`:"-",W=typeof(te==null?void 0:te.comments)=="string"?te.comments.trim():"",ae=Ae.academicGroup||Ae.academic_group||Ae.academic||"",Ce=o(ae);return{roll:Ae.roll||Ae.studentRoll||Ae.classRoll||Ae.rollNumber||null,badge:re,name:Ae.name||Ae.id,agName:ae,agClass:Ce,taskScore:se,teamScore:de,additional:ve,mcq:xe,total:Oe,pct:R,comment:W}}).filter(Ae=>Number.isFinite(Ae.total)).sort((Ae,te)=>te.pct-Ae.pct),Q=document.createDocumentFragment();N.forEach(Ae=>{const te=document.createElement("tr"),se=A(Ae.pct),de=Ae.comment.length>120?Ae.comment.slice(0,117)+".":Ae.comment;te.innerHTML=`
                <td class="px-3 py-2 whitespace-nowrap">${t(Ae.roll??"-")}</td>
                <td class="px-3 py-2 whitespace-nowrap">${Ae.badge}</td>
                <td class="px-3 py-2 whitespace-nowrap">
                  <span class="font-medium">${n(Ae.name)}</span>
                  ${Ae.agName?`<span class="ml-2 inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-semibold ${Ae.agClass}"><i class="fas fa-graduation-cap"></i>${n(Ae.agName)}</span>`:""}
                </td>
                <td class="px-3 py-2 text-right">${Ae.taskScore.toFixed(2)}</td>
                <td class="px-3 py-2 text-right">${Ae.teamScore.toFixed(2)}</td>
                <td class="px-3 py-2 text-right">${Ae.additional.toFixed(2)}</td>
                <td class="px-3 py-2 text-right">${Ae.mcq.toFixed(2)}</td>
                <td class="px-3 py-2 text-right font-semibold">${Ae.total.toFixed(2)}</td>
                <td class="px-3 py-2 text-right"><span class="inline-block rounded px-2 py-0.5 text-xs font-semibold ${se}">${Ae.pct.toFixed(1)}%</span></td>
                <td class="px-3 py-2 comments-cell">${n(de)}</td>`,Q.appendChild(te)}),k.innerHTML="",k.appendChild(Q)};ne(0),F.onchange=j=>{const G=parseInt(j.target.value,10)||0;ne(G)}}}catch{}const x=e("gdmEvalsBody");if(x){x.innerHTML="";const F=C.slice().sort((ue,ne)=>(ne.ts||0)-(ue.ts||0)),k=document.createDocumentFragment(),Z=new Map(B.students.map(ue=>[String(ue==null?void 0:ue.id),(ue==null?void 0:ue.name)||(ue==null?void 0:ue.id)]));F.forEach((ue,ne)=>{var q;const j=document.createElement("tr"),G=ue.ts?new Date(ue.ts).toISOString().slice(0,10):"-",pe=ue.topStudentId?Z.get(String(ue.topStudentId))||ue.topStudentId:"-";j.innerHTML=`
            <td class="px-3 py-2 whitespace-nowrap">${n(((q=ue.task)==null?void 0:q.name)||`Assignment-${ne+1}`)}</td>
            <td class="px-3 py-2 whitespace-nowrap">${G}</td>
            <td class="px-3 py-2">${ue.count}</td>
            <td class="px-3 py-2">${ue.avgPct.toFixed(1)}%</td>
            <td class="px-3 py-2 whitespace-nowrap">${n(pe)}</td>`,k.appendChild(j)}),x.appendChild(k)}(b=r.els.modal)==null||b.classList.remove("hidden"),d("members")}catch(B){console.error("[GDM] renderGroupModal failed:",B)}}function d(y){var B,S,C,P;const b=y==="members";(B=r.els.members)==null||B.classList.toggle("hidden",!b),(S=r.els.evals)==null||S.classList.toggle("hidden",b),(C=r.els.btnMembers)==null||C.classList.toggle("bg-gray-100",b),(P=r.els.btnEvals)==null||P.classList.toggle("bg-gray-100",!b)}function p(){var y,b,B;r.bound||(r.bound=!0,document.addEventListener("click",S=>{var C;S.target.closest("[data-group-modal-close]")&&((C=r.els.modal)==null||C.classList.add("hidden"))}),(y=r.els.btnMembers)==null||y.addEventListener("click",()=>d("members")),(b=r.els.btnEvals)==null||b.addEventListener("click",()=>d("evals")),(B=r.els.btnPrint)==null||B.addEventListener("click",()=>{var E,x;const S=window.smartEvaluator;if(!((x=(E=S==null?void 0:S.components)==null?void 0:E.analysis)!=null&&x.generateGroupWiseFullDetailsPDF)){console.warn("PDF generator not found");return}const C=r.state.currentGroupId;if(!C)return;let P="all";const M=r.els.assignSelect;if(M&&M.value){const F=l(),{perEval:k}=u(C,F),Z=k.slice().sort((j,G)=>(G.ts||0)-(j.ts||0)),ue=parseInt(M.value,10)||0,ne=Z[ue];ne&&ne.task&&(P=ne.task.id)}S.managers.uiManager.showToast("PDF  ...","info");const{groups:L,students:_,tasks:v,evaluations:T}=l();S.components.analysis.generateGroupWiseFullDetailsPDF(P,C)}))}function f(){if(r.els.modal=e("groupDetailModal"),r.els.btnMembers=e("gdmBtnMembers"),r.els.btnEvals=e("gdmBtnEvals"),r.els.btnPrint=e("gdmBtnPrint"),r.els.members=e("gdmMembersWrap"),r.els.evals=e("gdmEvalsWrap"),r.els.assignSelect=e("gdmAssignSelect"),!r.els.modal){console.warn("[GDM] modal node missing; script loaded but no #groupDetailModal.");return}p(),window.openGroupModalById||(window.openGroupModalById=h)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f,{once:!0}):f()})();document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("img:not([loading])").forEach(t=>{t.dataset.priority||(t.loading="lazy",t.decoding=t.decoding||"async")});const e=()=>{document.documentElement.classList.add("perf-hydrated")};"requestIdleCallback"in window?requestIdleCallback(e,{timeout:2e3}):setTimeout(e,1500)});Ct.prototype.autoTable=function(...r){return TB(this,...r)};Ct.API=Ct.API||{};Ct.API.autoTable=function(...r){return TB(this,...r)};Sf.register(...rL,fB,jL);typeof window<"u"&&(window.Chart=Sf,window.ChartDataLabels=fB,window.ChartZoom=jL,window.html2canvas=qP,window.jsPDF=Ct,window.jspdf=window.jspdf||{},window.jspdf.jsPDF=Ct,window.jspdf.autoTable=TB,window.JSZip=wte,window.Papa=Bte);export{Kr as _,j0 as c,gB as g};
